function __extends(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i}var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},eui;!function(e){var t;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.targetLevel=Number.POSITIVE_INFINITY,t.invalidatePropertiesFlag=!1,t.invalidateClientPropertiesFlag=!1,t.invalidatePropertiesQueue=new i,t.invalidateSizeFlag=!1,t.invalidateClientSizeFlag=!1,t.invalidateSizeQueue=new i,t.invalidateDisplayListFlag=!1,t.invalidateDisplayListQueue=new i,t.eventDisplay=new egret.Bitmap,t.listenersAttached=!1,t}return __extends(t,e),t.prototype.invalidateProperties=function(e){this.invalidatePropertiesFlag||(this.invalidatePropertiesFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=e.$nestLevel&&(this.invalidateClientPropertiesFlag=!0),this.invalidatePropertiesQueue.insert(e)},t.prototype.validateProperties=function(){for(var e=this.invalidatePropertiesQueue,t=e.shift();t;)t.$stage&&t.validateProperties(),t=e.shift();e.isEmpty()&&(this.invalidatePropertiesFlag=!1)},t.prototype.invalidateSize=function(e){this.invalidateSizeFlag||(this.invalidateSizeFlag=!0,this.listenersAttached||this.attachListeners()),this.targetLevel<=e.$nestLevel&&(this.invalidateClientSizeFlag=!0),this.invalidateSizeQueue.insert(e)},t.prototype.validateSize=function(){for(var e=this.invalidateSizeQueue,t=e.pop();t;)t.$stage&&t.validateSize(),t=e.pop();e.isEmpty()&&(this.invalidateSizeFlag=!1)},t.prototype.invalidateDisplayList=function(e){this.invalidateDisplayListFlag||(this.invalidateDisplayListFlag=!0,this.listenersAttached||this.attachListeners()),this.invalidateDisplayListQueue.insert(e)},t.prototype.validateDisplayList=function(){for(var e=this.invalidateDisplayListQueue,t=e.shift();t;)t.$stage&&t.validateDisplayList(),t=e.shift();e.isEmpty()&&(this.invalidateDisplayListFlag=!1)},t.prototype.attachListeners=function(){this.eventDisplay.addEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.addEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),egret.sys.$invalidateRenderFlag=!0,this.listenersAttached=!0},t.prototype.doPhasedInstantiationCallBack=function(e){this.eventDisplay.removeEventListener(egret.Event.ENTER_FRAME,this.doPhasedInstantiationCallBack,this),this.eventDisplay.removeEventListener(egret.Event.RENDER,this.doPhasedInstantiationCallBack,this),this.doPhasedInstantiation()},t.prototype.doPhasedInstantiation=function(){this.invalidatePropertiesFlag&&this.validateProperties(),this.invalidateSizeFlag&&this.validateSize(),this.invalidateDisplayListFlag&&this.validateDisplayList(),this.invalidatePropertiesFlag||this.invalidateSizeFlag||this.invalidateDisplayListFlag?this.attachListeners():this.listenersAttached=!1},t.prototype.validateClient=function(e){var t,i=!1,n=this.targetLevel;this.targetLevel===Number.POSITIVE_INFINITY&&(this.targetLevel=e.$nestLevel);for(var r=this.invalidatePropertiesQueue,o=this.invalidateSizeQueue,a=this.invalidateDisplayListQueue;!i;){for(i=!0,t=r.removeSmallestChild(e);t;)t.$stage&&t.validateProperties(),t=r.removeSmallestChild(e);for(r.isEmpty()&&(this.invalidatePropertiesFlag=!1),this.invalidateClientPropertiesFlag=!1,t=o.removeLargestChild(e);t;){if(t.$stage&&t.validateSize(),this.invalidateClientPropertiesFlag&&(t=r.removeSmallestChild(e))){r.insert(t),i=!1;break}t=o.removeLargestChild(e)}for(o.isEmpty()&&(this.invalidateSizeFlag=!1),this.invalidateClientPropertiesFlag=!1,this.invalidateClientSizeFlag=!1,t=a.removeSmallestChild(e);t;){if(t.$stage&&t.validateDisplayList(),this.invalidateClientPropertiesFlag&&(t=r.removeSmallestChild(e))){r.insert(t),i=!1;break}if(this.invalidateClientSizeFlag&&(t=o.removeLargestChild(e))){o.insert(t),i=!1;break}t=a.removeSmallestChild(e)}a.isEmpty()&&(this.invalidateDisplayListFlag=!1)}n===Number.POSITIVE_INFINITY&&(this.targetLevel=Number.POSITIVE_INFINITY)},t}(egret.EventDispatcher);e.Validator=t,__reflect(t.prototype,"eui.sys.Validator");var i=function(){function e(){this.depthBins={},this.minDepth=0,this.maxDepth=-1}return e.prototype.insert=function(e){var t=e.$nestLevel;this.maxDepth<this.minDepth?this.minDepth=this.maxDepth=t:(t<this.minDepth&&(this.minDepth=t),t>this.maxDepth&&(this.maxDepth=t));var i=this.depthBins[t];i||(i=this.depthBins[t]=new n),i.insert(e)},e.prototype.pop=function(){var e,t=this.minDepth;if(t<=this.maxDepth){for(var i=this.depthBins[this.maxDepth];!i||0===i.length;){if(this.maxDepth--,this.maxDepth<t)return null;i=this.depthBins[this.maxDepth]}for(e=i.pop();!(i&&0!=i.length||(this.maxDepth--,this.maxDepth<t));)i=this.depthBins[this.maxDepth]}return e},e.prototype.shift=function(){var e,t=this.maxDepth;if(this.minDepth<=t){for(var i=this.depthBins[this.minDepth];!i||0===i.length;){if(this.minDepth++,this.minDepth>t)return null;i=this.depthBins[this.minDepth]}for(e=i.pop();!(i&&0!=i.length||(this.minDepth++,this.minDepth>t));)i=this.depthBins[this.minDepth]}return e},e.prototype.removeLargestChild=function(e){for(var t=e.$hashCode,i=e.$nestLevel,n=this.maxDepth,r=i;n>=r;){var o=this.depthBins[n];if(o&&o.length>0){if(n===i){if(o.map[t])return o.remove(e),e}else{if(!egret.is(e,"egret.DisplayObjectContainer"))break;for(var a=o.items,s=o.length,l=0;s>l;l++){var u=a[l];if(e.contains(u))return o.remove(u),u}}n--}else if(n==this.maxDepth&&this.maxDepth--,n--,r>n)break}return null},e.prototype.removeSmallestChild=function(e){for(var t=e.$nestLevel,i=t,n=this.maxDepth,r=e.$hashCode;n>=i;){var o=this.depthBins[i];if(o&&o.length>0){if(i===t){if(o.map[r])return o.remove(e),e}else{if(!egret.is(e,"egret.DisplayObjectContainer"))break;for(var a=o.items,s=o.length,l=0;s>l;l++){var u=a[l];if(e.contains(u))return o.remove(u),u}}i++}else if(i==this.minDepth&&this.minDepth++,i++,i>n)break}return null},e.prototype.isEmpty=function(){return this.minDepth>this.maxDepth},e}();__reflect(i.prototype,"DepthQueue");var n=function(){function e(){this.map={},this.items=[],this.length=0}return e.prototype.insert=function(e){var t=e.$hashCode;this.map[t]||(this.map[t]=!0,this.length++,this.items.push(e))},e.prototype.pop=function(){var e=this.items.pop();return e&&(this.length--,0===this.length?this.map={}:this.map[e.$hashCode]=!1),e},e.prototype.remove=function(e){var t=this.items.indexOf(e);t>=0&&(this.items.splice(t,1),this.length--,0===this.length?this.map={}:this.map[e.$hashCode]=!1)},e}();__reflect(n.prototype,"DepthBin")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){function t(e,t,i,n){var r=e.prototype;r.__meta__=r.__meta__||{},r.__meta__[t]=i,n&&(r.__defaultProperty__=t)}e.registerProperty=t}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(e,i){void 0===i&&(i=[]);var n=t.call(this)||this;return n.name=e,n.overrides=i,n}return __extends(i,t),i.prototype.initialize=function(t,i){for(var n=this.overrides,r=n.length,o=0;r>o;o++){var a=n[o];if(a instanceof e.AddItems){var s=t[a.target];s&&s instanceof e.Image&&!s.$parent&&(i.addChild(s),i.removeChild(s))}}},i}(egret.HashObject);e.State=t,__reflect(t.prototype,"eui.State")}(eui||(eui={})),function(e){var t;!function(e){var t=function(){function e(){}return Object.defineProperty(e.prototype,"states",{get:function(){return this.$stateValues.states},set:function(e){e||(e=[]);var t=this.$stateValues;t.states=e;for(var i={},n=e.length,r=0;n>r;r++){var o=e[r];i[o.name]=o}t.statesMap=i,t.parent&&this.commitCurrentState()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentState",{get:function(){return this.$stateValues.currentState},set:function(e){var t=this.$stateValues;t.explicitState=e,t.currentState=e,this.commitCurrentState()},enumerable:!0,configurable:!0}),e.prototype.commitCurrentState=function(){var e=this.$stateValues;if(e.parent){var t=e.statesMap[e.currentState];if(!t){if(!(e.states.length>0))return;e.currentState=e.states[0].name}if(e.oldState!=e.currentState){var i=e.parent,n=e.statesMap[e.oldState];if(n)for(var r=n.overrides,o=r.length,a=0;o>a;a++)r[a].remove(this,i);if(e.oldState=e.currentState,n=e.statesMap[e.currentState])for(var r=n.overrides,s=r.length,a=0;s>a;a++)r[a].apply(this,i)}}},e.prototype.hasState=function(e){return!!this.$stateValues.statesMap[e]},e.prototype.initializeStates=function(e){this.$stateValues.intialized=!0;for(var t=this.states,i=t.length,n=0;i>n;n++)t[n].initialize(this,e)},e}();e.StateClient=t,__reflect(t.prototype,"eui.sys.StateClient");var i=function(){function e(){this.intialized=!1,this.statesMap={},this.states=[],this.oldState=null,this.explicitState=null,this.currentState=null,this.parent=null,this.stateIsDirty=!1}return e}();e.StateValues=i,__reflect(i.prototype,"eui.sys.StateValues")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){function t(t,i,n){var r=egret.getImplementation("eui.IAssetAdapter");r||(r=new e.DefaultAssetAdapter),r.getAsset(t,function(e){i.call(n,e)},this)}function i(t,i){var n=egret.getImplementation("eui.IThemeAdapter");n||(n=new e.DefaultThemeAdapter),n.getTheme(t,function(e){i(e)},function(e){console.log(e)},this)}e.getAssets=t,e.getTheme=i}(eui||(eui={})),function(e){var t;!function(t){function i(e){return 1===e.a&&0===e.b&&0===e.c&&1===e.d}function n(e,t){if("function"!=typeof e[t])return!1;var i=e[t].toString(),n=i.indexOf("{"),r=i.lastIndexOf("}");return i=i.substring(n+1,r),""==i.trim()}function r(e,t){for(var i in t)"prototype"!=i&&t.hasOwnProperty(i)&&(e[i]=t[i]);for(var r=e.prototype,o=t.prototype,a=Object.keys(o),s=a.length,l=0;s>l;l++){var u=a[l];if("__meta__"!=u&&(!r.hasOwnProperty(u)||n(r,u))){var c=Object.getOwnPropertyDescriptor(o,u);Object.defineProperty(r,u,c)}}}function o(t,i,n){r(t,l);var o=t.prototype;o.$super=i.prototype,e.registerProperty(t,"left","Percentage"),e.registerProperty(t,"right","Percentage"),e.registerProperty(t,"top","Percentage"),e.registerProperty(t,"bottom","Percentage"),e.registerProperty(t,"horizontalCenter","Percentage"),e.registerProperty(t,"verticalCenter","Percentage"),n&&(o.$childAdded=function(e,t){this.invalidateSize(),this.invalidateDisplayList()},o.$childRemoved=function(e,t){this.invalidateSize(),this.invalidateDisplayList()})}var a="eui.UIComponent",s=new t.Validator,l=function(n){function r(){var e=n.call(this)||this;return e.initializeUIValues(),e}return __extends(r,n),r.prototype.initializeUIValues=function(){this.$UIComponent={0:0/0,1:0/0,2:0/0,3:0/0,4:0/0,5:0/0,6:0/0,7:0/0,8:0/0,9:0/0,10:0,11:0,12:0,13:1e5,14:0,15:1e5,16:0,17:0,18:0/0,19:0/0,20:0,21:0,22:0,23:0,24:!0,25:!0,26:!0,27:!1,28:!1,29:!1},this.$includeInLayout=!0,this.$touchEnabled=!0},r.prototype.createChildren=function(){},r.prototype.childrenCreated=function(){},r.prototype.commitProperties=function(){var t=this.$UIComponent;(t[22]!=t[10]||t[23]!=t[11])&&(this.dispatchEventWith(egret.Event.RESIZE),t[22]=t[10],t[23]=t[11]),(t[20]!=this.$getX()||t[21]!=this.$getY())&&(e.UIEvent.dispatchUIEvent(this,e.UIEvent.MOVE),t[20]=this.$getX(),t[21]=this.$getY())},r.prototype.measure=function(){},r.prototype.updateDisplayList=function(e,t){},Object.defineProperty(r.prototype,"includeInLayout",{get:function(){return this.$includeInLayout},set:function(e){e=!!e,this.$includeInLayout!==e&&(this.$includeInLayout=!0,this.invalidateParentLayout(),this.$includeInLayout=e)},enumerable:!0,configurable:!0}),r.prototype.$onAddToStage=function(t,i){this.$super.$onAddToStage.call(this,t,i),this.checkInvalidateFlag();var n=this.$UIComponent;n[29]||(n[29]=!0,this.createChildren(),this.childrenCreated(),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CREATION_COMPLETE))},r.prototype.checkInvalidateFlag=function(e){var t=this.$UIComponent;t[24]&&s.invalidateProperties(this),t[25]&&s.invalidateSize(this),t[26]&&s.invalidateDisplayList(this)},Object.defineProperty(r.prototype,"left",{get:function(){return this.$UIComponent[0]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[0]!==e&&(t[0]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"right",{get:function(){return this.$UIComponent[1]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[1]!==e&&(t[1]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"top",{get:function(){return this.$UIComponent[2]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[2]!==e&&(t[2]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"bottom",{get:function(){return this.$UIComponent[3]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[3]!=e&&(t[3]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"horizontalCenter",{get:function(){return this.$UIComponent[4]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[4]!==e&&(t[4]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"verticalCenter",{get:function(){return this.$UIComponent[5]},set:function(e){e=e&&"number"!=typeof e?e.toString().trim():+e;var t=this.$UIComponent;t[5]!==e&&(t[5]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentWidth",{get:function(){return this.$UIComponent[6]},set:function(e){e=+e;var t=this.$UIComponent;t[6]!==e&&(t[6]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"percentHeight",{get:function(){return this.$UIComponent[7]},set:function(e){e=+e;var t=this.$UIComponent;t[7]!==e&&(t[7]=e,this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitWidth",{get:function(){return this.$UIComponent[8]},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"explicitHeight",{get:function(){return this.$UIComponent[9]},enumerable:!0,configurable:!0}),r.prototype.$getWidth=function(){return this.validateSizeNow(),this.$UIComponent[10]},r.prototype.$setWidth=function(e){e=+e;var t=this.$UIComponent;return 0>e||t[10]===e&&t[8]===e?!1:(t[8]=e,isNaN(e)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},r.prototype.validateSizeNow=function(){this.validateSize(!0),this.updateFinalSize()},r.prototype.$getHeight=function(){return this.validateSizeNow(),this.$UIComponent[11]},r.prototype.$setHeight=function(e){e=+e;var t=this.$UIComponent;return 0>e||t[11]===e&&t[9]===e?!1:(t[9]=e,isNaN(e)&&this.invalidateSize(),this.invalidateProperties(),this.invalidateDisplayList(),this.invalidateParentLayout(),!0)},Object.defineProperty(r.prototype,"minWidth",{get:function(){return this.$UIComponent[12]},set:function(e){e=+e||0;var t=this.$UIComponent;0>e||t[12]===e||(t[12]=e,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxWidth",{get:function(){return this.$UIComponent[13]},set:function(e){e=+e||0;var t=this.$UIComponent;0>e||t[13]===e||(t[13]=e,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"minHeight",{get:function(){return this.$UIComponent[14]},set:function(e){e=+e||0;var t=this.$UIComponent;0>e||t[14]===e||(t[14]=e,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"maxHeight",{get:function(){return this.$UIComponent[15]},set:function(e){e=+e||0;var t=this.$UIComponent;0>e||t[15]===e||(t[15]=e,this.invalidateSize(),this.invalidateParentLayout())},enumerable:!0,configurable:!0}),r.prototype.setMeasuredSize=function(e,t){var i=this.$UIComponent;i[16]=Math.ceil(+e||0),i[17]=Math.ceil(+t||0)},r.prototype.setActualSize=function(e,t){var i=!1,n=this.$UIComponent;n[10]!==e&&(n[10]=e,i=!0),n[11]!==t&&(n[11]=t,i=!0),i&&(this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.RESIZE))},r.prototype.$updateUseTransform=function(){this.$super.$updateUseTransform.call(this),this.invalidateParentLayout()},r.prototype.$setMatrix=function(e,t){return void 0===t&&(t=!0),this.$super.$setMatrix.call(this,e,t),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetX=function(e){return this.$super.$setAnchorOffsetX.call(this,e),this.invalidateParentLayout(),!0},r.prototype.$setAnchorOffsetY=function(e){return this.$super.$setAnchorOffsetY.call(this,e),this.invalidateParentLayout(),!0},r.prototype.$setX=function(e){var t=this.$super.$setX.call(this,e);return t&&(this.invalidateParentLayout(),this.invalidateProperties()),t},r.prototype.$setY=function(e){var t=this.$super.$setY.call(this,e);return t&&(this.invalidateParentLayout(),this.invalidateProperties()),t},r.prototype.invalidateProperties=function(){var e=this.$UIComponent;e[24]||(e[24]=!0,this.$stage&&s.invalidateProperties(this))},r.prototype.validateProperties=function(){var e=this.$UIComponent;e[24]&&(this.commitProperties(),e[24]=!1)},r.prototype.invalidateSize=function(){var e=this.$UIComponent;e[25]||(e[25]=!0,this.$stage&&s.invalidateSize(this))},r.prototype.validateSize=function(e){if(e){var t=this.$children;if(t)for(var i=t.length,n=0;i>n;n++){var r=t[n];egret.is(r,a)&&r.validateSize(!0)}}var o=this.$UIComponent;if(o[25]){var s=this.measureSizes();s&&(this.invalidateDisplayList(),this.invalidateParentLayout()),o[25]=!1}},r.prototype.measureSizes=function(){var e=!1,t=this.$UIComponent;if(!t[25])return e;(isNaN(t[8])||isNaN(t[9]))&&(this.measure(),t[16]<t[12]&&(t[16]=t[12]),t[16]>t[13]&&(t[16]=t[13]),t[17]<t[14]&&(t[17]=t[14]),t[17]>t[15]&&(t[17]=t[15]));var i=this.getPreferredUWidth(),n=this.getPreferredUHeight();return(i!==t[18]||n!==t[19])&&(t[18]=i,t[19]=n,e=!0),e},r.prototype.invalidateDisplayList=function(){var e=this.$UIComponent;e[26]||(e[26]=!0,this.$stage&&s.invalidateDisplayList(this))},r.prototype.validateDisplayList=function(){var e=this.$UIComponent;e[26]&&(this.updateFinalSize(),this.updateDisplayList(e[10],e[11]),e[26]=!1)},r.prototype.updateFinalSize=function(){var e=0,t=0,i=this.$UIComponent;e=i[27]?i[10]:isNaN(i[8])?i[16]:i[8],t=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.setActualSize(e,t)},r.prototype.validateNow=function(){this.$stage&&s.validateClient(this)},r.prototype.invalidateParentLayout=function(){var e=this.$parent;e&&this.$includeInLayout&&egret.is(e,a)&&(e.invalidateSize(),e.invalidateDisplayList())},r.prototype.setLayoutBoundsSize=function(e,n){if(n=+n,e=+e,!(0>n||0>e)){var r,o,a=this.$UIComponent,s=a[13],l=a[15],u=Math.min(a[12],s),c=Math.min(a[14],l);isNaN(e)?(a[27]=!1,r=this.getPreferredUWidth()):(a[27]=!0,r=Math.max(u,Math.min(s,e))),isNaN(n)?(a[28]=!1,o=this.getPreferredUHeight()):(a[28]=!0,o=Math.max(c,Math.min(l,n)));var h=this.getAnchorMatrix();if(i(h))return void this.setActualSize(r,o);var p=t.MatrixUtil.fitBounds(e,n,h,a[8],a[9],this.getPreferredUWidth(),this.getPreferredUHeight(),u,c,s,l);p||(p=egret.Point.create(u,c)),this.setActualSize(p.x,p.y),egret.Point.release(p)}},r.prototype.setLayoutBoundsPosition=function(t,n){var r=this.$getMatrix();if(!i(r)||0!=this.anchorOffsetX||0!=this.anchorOffsetY){var o=egret.$TempRectangle;this.getLayoutBounds(o),t+=this.$getX()-o.x,n+=this.$getY()-o.y}var a=this.$super.$setX.call(this,t);(this.$super.$setY.call(this,n)||a)&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.MOVE)},r.prototype.getLayoutBounds=function(e){var t,i=this.$UIComponent;t=i[27]?i[10]:isNaN(i[8])?i[16]:i[8];var n;n=i[28]?i[11]:isNaN(i[9])?i[17]:i[9],this.applyMatrix(e,t,n)},r.prototype.getPreferredUWidth=function(){var e=this.$UIComponent;return isNaN(e[8])?e[16]:e[8]},r.prototype.getPreferredUHeight=function(){var e=this.$UIComponent;return isNaN(e[9])?e[17]:e[9]},r.prototype.getPreferredBounds=function(e){var t=this.getPreferredUWidth(),i=this.getPreferredUHeight();this.applyMatrix(e,t,i)},r.prototype.applyMatrix=function(e,t,n){e.setTo(0,0,t,n);var r=this.getAnchorMatrix();i(r)?(e.x+=r.tx,e.y+=r.ty):r.$transformBounds(e)},r.prototype.getAnchorMatrix=function(){var e=this.$getMatrix(),t=this.anchorOffsetX,i=this.anchorOffsetY;if(0!=t||0!=i){var n=egret.$TempMatrix;return e.$preMultiplyInto(n.setTo(1,0,0,1,-t,-i),n),n}return e},r}(egret.DisplayObject);t.UIComponentImpl=l,__reflect(l.prototype,"eui.sys.UIComponentImpl",["eui.UIComponent","egret.DisplayObject"]),t.mixin=r,t.implementUIComponent=o}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.$layout=null,i.$stateValues=new e.sys.StateValues,i.initializeUIValues(),i.$Group={0:0,1:0,2:0,3:0,4:!1,5:!1},i.$stateValues.parent=i,i}return __extends(i,t),Object.defineProperty(i.prototype,"elementsContent",{set:function(e){if(e)for(var t=e.length,i=0;t>i;i++)this.addChild(e[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},set:function(e){this.$setLayout(e)},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(e){return this.$layout==e?!1:(this.$layout&&(this.$layout.target=null),this.$layout=e,e&&(e.target=this),this.invalidateSize(),this.invalidateDisplayList(),!0)},Object.defineProperty(i.prototype,"contentWidth",{get:function(){return this.$Group[0]},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"contentHeight",{get:function(){return this.$Group[1]},enumerable:!0,configurable:!0}),i.prototype.setContentSize=function(t,i){t=Math.ceil(+t||0),i=Math.ceil(+i||0);var n=this.$Group,r=n[0]!==t,o=n[1]!==i;(r||o)&&(n[0]=t,n[1]=i,r&&e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"contentWidth"),o&&e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"contentHeight"))},Object.defineProperty(i.prototype,"scrollEnabled",{get:function(){return this.$Group[4]},set:function(e){e=!!e;var t=this.$Group;e!==t[4]&&(t[4]=e,this.updateScrollRect())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollH",{get:function(){return this.$Group[2]},set:function(t){t=+t||0;var i=this.$Group;t!==i[2]&&(i[2]=t,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"scrollH"))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollV",{get:function(){return this.$Group[3]},set:function(t){t=+t||0;var i=this.$Group;t!=i[3]&&(i[3]=t,this.updateScrollRect()&&this.$layout&&this.$layout.scrollPositionChanged(),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"scrollV"))},enumerable:!0,configurable:!0}),i.prototype.updateScrollRect=function(){var e=this.$Group,t=e[4];if(t){var i=this.$UIComponent;this.scrollRect=egret.$TempRectangle.setTo(e[2],e[3],i[10],i[11])}else this.$scrollRect&&(this.scrollRect=null);return t},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getElementAt=function(e){return this.$children[e]},i.prototype.getVirtualElementAt=function(e){return this.getElementAt(e)},i.prototype.setVirtualElementIndicesInView=function(e,t){},Object.defineProperty(i.prototype,"touchThrough",{get:function(){return this.$Group[5]},set:function(e){this.$Group[5]=!!e},enumerable:!0,configurable:!0}),i.prototype.$hitTest=function(e,i){var n=t.prototype.$hitTest.call(this,e,i);if(n||this.$Group[5])return n;if(!this.$visible||!this.touchEnabled||0===this.scaleX||0===this.scaleY||0===this.width||0===this.height)return null;var r=this.globalToLocal(e,i,egret.$TempPoint),o=this.$UIComponent,a=egret.$TempRectangle.setTo(0,0,o[10],o[11]),s=this.$scrollRect;return s&&(a.x=s.x,a.y=s.y),a.contains(r.x,r.y)?this:null},i.prototype.invalidateState=function(){var e=this.$stateValues;e.stateIsDirty||(e.stateIsDirty=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){this.$layout||this.$setLayout(new e.BasicLayout),this.initializeStates(this.$stage)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){e.sys.UIComponentImpl.prototype.commitProperties.call(this);var t=this.$stateValues;t.stateIsDirty&&(t.stateIsDirty=!1,t.explicitState||(t.currentState=this.getCurrentState(),this.commitCurrentState()))},i.prototype.measure=function(){return this.$layout?void this.$layout.measure():void this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(e,t){this.$layout&&this.$layout.updateDisplayList(e,t),this.updateScrollRect()},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(e,t){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(e){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(e,t){},i.prototype.setLayoutBoundsPosition=function(e,t){},i.prototype.getLayoutBounds=function(e){},i.prototype.getPreferredBounds=function(e){},i}(egret.DisplayObjectContainer);e.Group=t,__reflect(t.prototype,"eui.Group",["eui.IViewport","eui.UIComponent","egret.DisplayObject"]),e.sys.implementUIComponent(t,egret.DisplayObjectContainer,!0),e.sys.mixin(t,e.sys.StateClient),e.registerProperty(t,"elementsContent","Array",!0),e.registerProperty(t,"states","State[]")}(eui||(eui={}));var eui;!function(e){function t(e,t){if(e.hasOwnProperty(i))e[i].push(t);else{var n=[t];e[i]&&(n=e[i].concat(n)),e[i]=n}}var i="__bindables__";e.registerBindable=t}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.initializeUIValues(),e.$Component={0:null,1:null,2:"",3:!0,4:!1,5:!1,6:!0,7:!0,8:null},e.$touchEnabled=!0,e}return __extends(i,t),Object.defineProperty(i.prototype,"hostComponentKey",{get:function(){return this.$Component[0]},set:function(e){this.$Component[0]=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"skinName",{get:function(){return this.$Component[1]},set:function(e){var t=this.$Component;if(t[5]=!0,t[1]!=e){if(e)t[1]=e;else{var i=egret.getImplementation("eui.Theme");if(i){var n=i.getSkinName(this);n&&(t[1]=n)}}this.$parseSkinName()}},enumerable:!0,configurable:!0}),i.prototype.$parseSkinName=function(){var e,t=this.skinName;if(t)if(t.prototype)e=new t;else if("string"==typeof t){var i=void 0,n=t.trim();if("<"==n.charAt(0))i=EXML.parse(n);else if(i=egret.getDefinitionByName(t),!i&&-1!=n.toLowerCase().indexOf(".exml"))return void EXML.load(t,this.onExmlLoaded,this,!0);i&&(e=new i)}else e=t;this.setSkin(e)},i.prototype.onExmlLoaded=function(e,t){if(this.skinName==t){var i=new e;this.setSkin(i)}},Object.defineProperty(i.prototype,"skin",{get:function(){return this.$Component[8]},enumerable:!0,configurable:!0}),i.prototype.setSkin=function(t){!t||t instanceof e.Skin||(t=null);var i=this.$Component,n=i[8];if(n){for(var r=n.skinParts,o=r.length,a=0;o>a;a++){var s=r[a];this[s]&&this.setSkinPart(s,null)}var l=n.$elementsContent;if(l){o=l.length;for(var a=0;o>a;a++){var u=l[a];u.$parent==this&&this.removeChild(u)}}n.hostComponent=null}if(i[8]=t,t){for(var r=t.skinParts,c=r.length,a=0;c>a;a++){var s=r[a],h=t[s];h&&this.setSkinPart(s,h)}var l=t.$elementsContent;if(l)for(var a=l.length-1;a>=0;a--)this.addChildAt(l[a],0);t.hostComponent=this}this.invalidateSize(),this.invalidateDisplayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.setSkinPart=function(e,t){var i=this[e];i&&this.partRemoved(e,i),this[e]=t,t&&this.partAdded(e,t)},i.prototype.partAdded=function(e,t){},i.prototype.partRemoved=function(e,t){},i.prototype.$setTouchChildren=function(e){e=!!e;var i=this.$Component;return i[6]=e,i[3]?(i[6]=e,t.prototype.$setTouchChildren.call(this,e)):!0},i.prototype.$setTouchEnabled=function(e){e=!!e;var i=this.$Component;i[7]=e,i[3]&&t.prototype.$setTouchEnabled.call(this,e)},Object.defineProperty(i.prototype,"enabled",{get:function(){return this.$Component[3]},set:function(e){e=!!e,this.$setEnabled(e)},enumerable:!0,configurable:!0}),i.prototype.$setEnabled=function(e){var t=this.$Component;return e===t[3]?!1:(t[3]=e,e?(this.$touchEnabled=t[7],this.$touchChildren=t[6]):(this.$touchEnabled=!1,this.$touchChildren=!1),this.invalidateState(),!0)},Object.defineProperty(i.prototype,"currentState",{get:function(){var e=this.$Component;return e[2]?e[2]:this.getCurrentState()},set:function(e){var t=this.$Component;e!=t[2]&&(t[2]=e,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.invalidateState=function(){var e=this.$Component;e[4]||(e[4]=!0,this.invalidateProperties())},i.prototype.getCurrentState=function(){return""},i.prototype.createChildren=function(){var e=this.$Component;if(!e[1]){var t=egret.getImplementation("eui.Theme");if(t){var i=t.getSkinName(this);i&&(e[1]=i,this.$parseSkinName())}}},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){e.sys.UIComponentImpl.prototype.commitProperties.call(this);var t=this.$Component;t[4]&&(t[4]=!1,t[8]&&(t[8].currentState=this.currentState))},i.prototype.measure=function(){e.sys.measure(this);var t=this.$Component[8];if(t){var i=this.$UIComponent;isNaN(t.width)?(i[16]<t.minWidth&&(i[16]=t.minWidth),i[16]>t.maxWidth&&(i[16]=t.maxWidth)):i[16]=t.width,isNaN(t.height)?(i[17]<t.minHeight&&(i[17]=t.minHeight),i[17]>t.maxHeight&&(i[17]=t.maxHeight)):i[17]=t.height}},i.prototype.updateDisplayList=function(t,i){e.sys.updateDisplayList(this,t,i)},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(e,t){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(e){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(e,t){},i.prototype.setLayoutBoundsPosition=function(e,t){},i.prototype.getLayoutBounds=function(e){},i.prototype.getPreferredBounds=function(e){},i}(egret.DisplayObjectContainer);e.Component=t,__reflect(t.prototype,"eui.Component",["eui.UIComponent","egret.DisplayObject"]),e.registerProperty(t,"skinName","Class"),e.sys.implementUIComponent(t,egret.DisplayObjectContainer,!0)}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.$dataProviderChanged=!1,e.$dataProvider=null,e.$indexToRenderer=[],e.$DataGroup={0:!0,1:!1,2:{},3:{},4:!1,5:!1,6:null,7:null,8:!1,9:null,10:!1,11:!1,12:null,13:null,14:!1},e}return __extends(i,t),Object.defineProperty(i.prototype,"useVirtualLayout",{get:function(){return this.$layout?this.$layout.$useVirtualLayout:this.$DataGroup[0]},set:function(e){e=!!e;var t=this.$DataGroup;e!==t[0]&&(t[0]=e,this.$layout&&(this.$layout.useVirtualLayout=e))},enumerable:!0,configurable:!0}),i.prototype.$setLayout=function(e){if(e==this.$layout)return!1;this.$layout&&(this.$layout.setTypicalSize(0,0),this.$layout.removeEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)),this.$layout&&e&&this.$layout.$useVirtualLayout!=e.$useVirtualLayout&&this.onUseVirtualLayoutChanged();var i=t.prototype.$setLayout.call(this,e);if(e){var n=this.$DataGroup[9];n&&e.setTypicalSize(n.width,n.height),e.useVirtualLayout=this.$DataGroup[0],e.addEventListener("useVirtualLayoutChanged",this.onUseVirtualLayoutChanged,this)}return i},i.prototype.onUseVirtualLayoutChanged=function(e){var t=this.$DataGroup;t[1]=!0,t[10]=!0,this.removeDataProviderListener(),this.invalidateProperties()},i.prototype.setVirtualElementIndicesInView=function(e,t){if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=0;r>o;o++){var a=+n[o];
(e>a||a>t)&&this.freeRendererByIndex(a)}},i.prototype.getElementAt=function(e){return this.$indexToRenderer[e]},i.prototype.getVirtualElementAt=function(e){if(e=0|+e,0>e||e>=this.$dataProvider.length)return null;var t=this.$indexToRenderer[e];if(!t){var i=this.$dataProvider.getItemAt(e);t=this.createVirtualRenderer(i),this.$indexToRenderer[e]=t,this.updateRenderer(t,e,i);var n=this.$DataGroup;n[4]&&(t.validateNow(),n[4]=!1,this.rendererAdded(t,e,i))}return t},i.prototype.freeRendererByIndex=function(e){var t=this.$indexToRenderer[e];t&&(delete this.$indexToRenderer[e],this.doFreeRenderer(t))},i.prototype.doFreeRenderer=function(e){var t=this.$DataGroup,i=t[2][e.$hashCode],n=i.$hashCode;t[3][n]||(t[3][n]=[]),t[3][n].push(e),e.visible=!1},i.prototype.invalidateSize=function(){this.$DataGroup[4]||t.prototype.invalidateSize.call(this)},i.prototype.createVirtualRenderer=function(e){var t,i=this.itemToRendererClass(e),n=i.$hashCode,r=this.$DataGroup,o=r[3];return o[n]&&o[n].length>0?(t=o[n].pop(),t.visible=!0,this.invalidateDisplayList(),t):(r[4]=!0,this.createOneRenderer(i))},i.prototype.createOneRenderer=function(e){var t=new e,i=this.$DataGroup;return i[2][t.$hashCode]=e,egret.is(t,"eui.IItemRenderer")?(i[13]&&this.setItemRenderSkinName(t,i[13]),this.addChild(t),t):null},i.prototype.setItemRenderSkinName=function(t,i){if(t&&t instanceof e.Component){var n=t;n.$Component[5]||(n.skinName=i,n.$Component[5]=!1)}},Object.defineProperty(i.prototype,"dataProvider",{get:function(){return this.$dataProvider},set:function(e){this.$setDataProvider(e)},enumerable:!0,configurable:!0}),i.prototype.$setDataProvider=function(e){return this.$dataProvider==e||e&&!e.getItemAt?!1:(this.removeDataProviderListener(),this.$dataProvider=e,this.$dataProviderChanged=!0,this.$DataGroup[10]=!0,this.invalidateProperties(),this.invalidateSize(),this.invalidateDisplayList(),!0)},i.prototype.removeDataProviderListener=function(){this.$dataProvider&&this.$dataProvider.removeEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this)},i.prototype.onCollectionChange=function(t){switch(t.kind){case e.CollectionEventKind.ADD:this.itemAddedHandler(t.items,t.location);break;case e.CollectionEventKind.REMOVE:this.itemRemovedHandler(t.items,t.location);break;case e.CollectionEventKind.UPDATE:case e.CollectionEventKind.REPLACE:this.itemUpdatedHandler(t.items[0],t.location);break;case e.CollectionEventKind.RESET:case e.CollectionEventKind.REFRESH:if(this.$layout&&this.$layout.$useVirtualLayout)for(var i=this.$indexToRenderer,n=Object.keys(i),r=n.length,o=r-1;o>=0;o--){var a=+n[o];this.freeRendererByIndex(a)}this.$dataProviderChanged=!0,this.invalidateProperties()}this.invalidateSize(),this.invalidateDisplayList()},i.prototype.itemAddedHandler=function(e,t){for(var i=e.length,n=0;i>n;n++)this.itemAdded(e[n],t+n);this.resetRenderersIndices()},i.prototype.itemRemovedHandler=function(e,t){for(var i=e.length,n=i-1;n>=0;n--)this.itemRemoved(e[n],t+n);this.resetRenderersIndices()},i.prototype.itemAdded=function(e,t){if(this.$layout&&this.$layout.elementAdded(t),this.$layout&&this.$layout.$useVirtualLayout)return void this.$indexToRenderer.splice(t,0,null);var i=this.createVirtualRenderer(e);if(this.$indexToRenderer.splice(t,0,i),i){this.updateRenderer(i,t,e);var n=this.$DataGroup;n[4]&&(n[4]=!1,this.rendererAdded(i,t,e))}},i.prototype.itemRemoved=function(e,t){this.$layout&&this.$layout.elementRemoved(t);var i=this.$indexToRenderer[t];this.$indexToRenderer.length>t&&this.$indexToRenderer.splice(t,1),i&&(this.$layout&&this.$layout.$useVirtualLayout?this.doFreeRenderer(i):(this.rendererRemoved(i,t,e),this.removeChild(i)))},i.prototype.resetRenderersIndices=function(){var e=this.$indexToRenderer;if(0!=e.length)if(this.$layout&&this.$layout.$useVirtualLayout)for(var t=Object.keys(e),i=t.length,n=0;i>n;n++){var r=+t[n];this.resetRendererItemIndex(r)}else for(var o=e.length,r=0;o>r;r++)this.resetRendererItemIndex(r)},i.prototype.itemUpdatedHandler=function(e,t){if(!this.$DataGroup[11]){var i=this.$indexToRenderer[t];i&&this.updateRenderer(i,t,e)}},i.prototype.resetRendererItemIndex=function(e){var t=this.$indexToRenderer[e];t&&(t.itemIndex=e)},Object.defineProperty(i.prototype,"itemRenderer",{get:function(){return this.$DataGroup[6]},set:function(e){var t=this.$DataGroup;t[6]!=e&&(t[6]=e,t[5]=!0,t[8]=!0,t[10]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererSkinName",{get:function(){return this.$DataGroup[13]},set:function(e){var t=this.$DataGroup;t[13]!=e&&(t[13]=e,this.$UIComponent[29]&&(t[14]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"itemRendererFunction",{get:function(){return this.$DataGroup[7]},set:function(e){var t=this.$DataGroup;t[7]!=e&&(t[7]=e,t[5]=!0,t[8]=!0,this.removeDataProviderListener(),this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.itemToRendererClass=function(t){var i,n=this.$DataGroup;return n[7]&&(i=n[7](t)),i||(i=n[6]),i||(i=e.ItemRenderer),i.$hashCode||(i.$hashCode=egret.$hashCount++),i},i.prototype.createChildren=function(){if(!this.$layout){var i=new e.VerticalLayout;i.gap=0,i.horizontalAlign=e.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}t.prototype.createChildren.call(this)},i.prototype.commitProperties=function(){var i=this.$DataGroup;if((i[5]||this.$dataProviderChanged||i[1])&&(this.removeAllRenderers(),this.$layout&&this.$layout.clearVirtualLayoutCache(),this.setTypicalLayoutRect(null),i[1]=!1,i[5]=!1,this.$dataProvider&&this.$dataProvider.addEventListener(e.CollectionEvent.COLLECTION_CHANGE,this.onCollectionChange,this),this.$layout&&this.$layout.$useVirtualLayout?(this.invalidateSize(),this.invalidateDisplayList()):this.createRenderers(),this.$dataProviderChanged&&(this.$dataProviderChanged=!1,this.scrollV=this.scrollH=0)),t.prototype.commitProperties.call(this),i[8]&&(i[8]=!1,this.$dataProvider&&this.$dataProvider.length>0&&(i[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())),i[14]){i[14]=!1;for(var n=i[13],r=this.$indexToRenderer,o=Object.keys(r),a=o.length,s=0;a>s;s++){var l=o[s];this.setItemRenderSkinName(r[l],n)}var u=i[3];o=Object.keys(u),a=o.length;for(var s=0;a>s;s++)for(var c=o[s],h=u[c],p=h.length,d=0;p>d;d++)this.setItemRenderSkinName(h[d],n)}},i.prototype.measure=function(){this.$layout&&this.$layout.$useVirtualLayout&&this.ensureTypicalLayoutElement(),t.prototype.measure.call(this)},i.prototype.updateDisplayList=function(e,i){var n=this.$layout&&this.$layout.$useVirtualLayout;n&&this.ensureTypicalLayoutElement(),t.prototype.updateDisplayList.call(this,e,i);var r=this.$DataGroup;if(n){var o=r[9];if(o){var a=this.$indexToRenderer[0];if(a){var s=egret.$TempRectangle;a.getPreferredBounds(s),(s.width!=o.width||s.height!=o.height)&&(r[9]=null)}}}},i.prototype.ensureTypicalLayoutElement=function(){this.$DataGroup[9]||this.$dataProvider&&this.$dataProvider.length>0&&(this.$DataGroup[12]=this.$dataProvider.getItemAt(0),this.measureRendererSize())},i.prototype.measureRendererSize=function(){var e=this.$DataGroup;if(void 0==e[12])return void this.setTypicalLayoutRect(null);var t=this.createVirtualRenderer(e[12]);if(!t)return void this.setTypicalLayoutRect(null);this.updateRenderer(t,0,e[12]),t.validateNow();var i=egret.$TempRectangle;t.getPreferredBounds(i);var n=new egret.Rectangle(0,0,i.width,i.height);this.$layout&&this.$layout.$useVirtualLayout?(e[4]&&this.rendererAdded(t,0,e[12]),this.doFreeRenderer(t)):this.removeChild(t),this.setTypicalLayoutRect(n),e[4]=!1},i.prototype.setTypicalLayoutRect=function(e){this.$DataGroup[9]=e,this.$layout&&(e?this.$layout.setTypicalSize(e.width,e.height):this.$layout.setTypicalSize(0,0))},i.prototype.removeAllRenderers=function(){for(var e=this.$indexToRenderer,t=Object.keys(e),i=t.length,n=0;i>n;n++){var r=t[n],o=e[r];o&&(this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o))}this.$indexToRenderer=[];var a=this.$DataGroup;if(a[10]){for(var s=a[3],l=Object.keys(s),u=l.length,n=0;u>n;n++)for(var c=l[n],h=s[c],p=h.length,d=0;p>d;d++){var o=h[d];this.rendererRemoved(o,o.itemIndex,o.data),this.removeChild(o)}a[3]={},a[2]={},a[10]=!1}},i.prototype.createRenderers=function(){if(this.$dataProvider)for(var e=0,t=this.$dataProvider.length,i=0;t>i;i++){var n=this.$dataProvider.getItemAt(i),r=this.itemToRendererClass(n),o=this.createOneRenderer(r);o&&(this.$indexToRenderer[e]=o,this.updateRenderer(o,e,n),this.rendererAdded(o,e,n),e++)}},i.prototype.updateRenderer=function(e,t,i){var n=this.$DataGroup;return n[11]=!0,e.itemIndex=t,e.parent==this&&this.setChildIndex(e,t),e.data=i,n[11]=!1,e},Object.defineProperty(i.prototype,"numElements",{get:function(){return this.$dataProvider?this.$dataProvider.length:0},enumerable:!0,configurable:!0}),i.prototype.rendererAdded=function(e,t,i){},i.prototype.rendererRemoved=function(e,t,i){},i}(e.Group);e.DataGroup=t,__reflect(t.prototype,"eui.DataGroup"),e.registerProperty(t,"itemRenderer","Class"),e.registerProperty(t,"itemRendererSkinName","Class"),e.registerProperty(t,"dataProvider","eui.ICollection",!0)}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.labelDisplay=null,t._label="",t.iconDisplay=null,t._icon=null,t.touchCaptured=!1,t.touchChildren=!1,t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,t.onTouchBegin,t),t}return __extends(t,e),Object.defineProperty(t.prototype,"label",{get:function(){return this._label},set:function(e){this._label=e,this.labelDisplay&&(this.labelDisplay.text=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"icon",{get:function(){return this._icon},set:function(e){this._icon=e,this.iconDisplay&&(this.iconDisplay.source=e)},enumerable:!0,configurable:!0}),t.prototype.onTouchCancle=function(e){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},t.prototype.onTouchBegin=function(e){this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),e.updateAfterEvent()},t.prototype.onStageTouchEnd=function(e){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.contains(e.target)&&this.buttonReleased(),this.touchCaptured=!1,this.invalidateState()},t.prototype.getCurrentState=function(){return this.enabled?this.touchCaptured?"down":"up":"disabled"},t.prototype.partAdded=function(e,t){t===this.labelDisplay?this.labelDisplay.text=this._label:t==this.iconDisplay&&(this.iconDisplay.source=this._icon)},t.prototype.buttonReleased=function(){},t}(e.Component);e.Button=t,__reflect(t.prototype,"eui.Button")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.$Range={0:100,1:!1,2:0,3:!1,4:0,5:0,6:!1,7:1,8:!1,9:!1},e}return __extends(i,t),Object.defineProperty(i.prototype,"maximum",{get:function(){return this.$Range[0]},set:function(e){e=+e||0;var t=this.$Range;e!==t[0]&&(t[0]=e,t[1]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"minimum",{get:function(){return this.$Range[2]},set:function(e){e=+e||0;var t=this.$Range;e!==t[2]&&(t[2]=e,t[3]=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"value",{get:function(){var e=this.$Range;return e[6]?e[5]:e[4]},set:function(e){e=+e||0,this.$setValue(e)},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(e){if(e===this.value)return!1;var t=this.$Range;return t[5]=e,t[6]=!0,this.invalidateProperties(),!0},Object.defineProperty(i.prototype,"snapInterval",{get:function(){return this.$Range[7]},set:function(e){var t=this.$Range;t[9]=!0,e=+e||0,e!==t[7]&&(isNaN(e)?(t[7]=1,t[9]=!1):t[7]=e,t[8]=!0,this.invalidateProperties())},enumerable:!0,configurable:!0}),i.prototype.commitProperties=function(){t.prototype.commitProperties.call(this);var e=this.$Range;if(e[2]>e[0]&&(e[1]?e[0]=e[2]:e[2]=e[0]),e[6]||e[1]||e[3]||e[8]){var i=e[6]?e[5]:e[4];e[6]=!1,e[1]=!1,e[3]=!1,e[8]=!1,this.setValue(this.nearestValidValue(i,e[7]))}},i.prototype.nearestValidSize=function(e){var t=this.snapInterval;if(0==t)return e;var i=Math.round(e/t)*t;return Math.abs(i)<t?t:i},i.prototype.nearestValidValue=function(e,t){var i=this.$Range;if(0==t)return Math.max(i[2],Math.min(i[0],e));var n=i[0]-i[2],r=1;if(e-=i[2],t!=Math.round(t)){var o=(1+t).toString().split(".");r=Math.pow(10,o[1].length),n*=r,e=Math.round(e*r),t=Math.round(t*r)}var a=Math.max(0,Math.floor(e/t)*t),s=Math.min(n,Math.floor((e+t)/t)*t),l=e-a>=(s-a)/2?s:a;return l/r+i[2]},i.prototype.setValue=function(t){var i=this.$Range;i[4]!==t&&(i[0]>i[2]?i[4]=Math.min(i[0],Math.max(i[2],t)):i[4]=t,i[6]=!1,this.invalidateDisplayList(),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"value"))},i.prototype.updateDisplayList=function(e,i){t.prototype.updateDisplayList.call(this,e,i),this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){},i}(e.Component);e.Range=t,__reflect(t.prototype,"eui.Range"),e.registerBindable(t.prototype,"value")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.$target=null,t.$useVirtualLayout=!1,t.$typicalWidth=71,t.$typicalHeight=22,t}return __extends(t,e),Object.defineProperty(t.prototype,"target",{get:function(){return this.$target},set:function(e){this.$target!==e&&(this.$target=e,this.clearVirtualLayoutCache())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(e){e=!!e,this.$useVirtualLayout!=e&&(this.$useVirtualLayout=e,this.dispatchEventWith("useVirtualLayoutChanged"),this.$useVirtualLayout&&!e&&this.clearVirtualLayoutCache(),this.target&&this.target.invalidateDisplayList())},enumerable:!0,configurable:!0}),t.prototype.setTypicalSize=function(e,t){e=+e||71,t=+t||22,(e!==this.$typicalWidth||t!==this.$typicalHeight)&&(this.$typicalWidth=e,this.$typicalHeight=t,this.$target&&this.$target.invalidateSize())},t.prototype.scrollPositionChanged=function(){},t.prototype.clearVirtualLayoutCache=function(){},t.prototype.elementAdded=function(e){},t.prototype.elementRemoved=function(e){},t.prototype.getElementIndicesInView=function(){return null},t.prototype.measure=function(){},t.prototype.updateDisplayList=function(e,t){},t}(egret.EventDispatcher);e.LayoutBase=t,__reflect(t.prototype,"eui.LayoutBase")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.$ListBase={0:!1,1:!1,2:-2,3:-1,4:!1,5:void 0,6:!1,7:null,8:!1},e}return __extends(i,t),Object.defineProperty(i.prototype,"requireSelection",{get:function(){return this.$ListBase[0]},set:function(e){e=!!e;var t=this.$ListBase;e!==t[0]&&(t[0]=e,e&&(t[1]=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.$getSelectedIndex()},set:function(e){e=0|+e,this.setSelectedIndex(e,!1)},enumerable:!0,configurable:!0}),i.prototype.$getSelectedIndex=function(){var e=this.$ListBase;return e[2]!=i.NO_PROPOSED_SELECTION?e[2]:e[3]},i.prototype.setSelectedIndex=function(e,t){if(e!=this.selectedIndex){var i=this.$ListBase;t&&(i[4]=i[4]||t),i[2]=e,this.invalidateProperties()}},Object.defineProperty(i.prototype,"selectedItem",{get:function(){var e=this.$ListBase;if(void 0!==e[5])return e[5];var t=this.$getSelectedIndex();return t!=i.NO_SELECTION&&null!=this.$dataProvider&&this.$dataProvider.length>t?this.$dataProvider.getItemAt(t):void 0},set:function(e){this.setSelectedItem(e,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedItem=function(e,t){if(void 0===t&&(t=!1),this.selectedItem!==e){var i=this.$ListBase;t&&(i[4]=i[4]||t),i[5]=e,this.invalidateProperties()}},i.prototype.commitProperties=function(){var n=this.$dataProviderChanged;t.prototype.commitProperties.call(this);var r=this.$ListBase,o=this.$getSelectedIndex(),a=this.$dataProvider;n&&(o>=0&&a&&o<a.length?this.itemSelected(o,!0):this.requireSelection?r[2]=0:this.setSelectedIndex(-1,!1)),r[1]&&(r[1]=!1,r[0]&&o==i.NO_SELECTION&&a&&a.length>0&&(r[2]=0)),void 0!==r[5]&&(a?r[2]=a.getItemIndex(r[5]):r[2]=i.NO_SELECTION,r[5]=void 0);var s=!1;r[2]!=i.NO_PROPOSED_SELECTION&&(s=this.commitSelection()),r[6]&&(r[6]=!1,s||e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.updateRenderer=function(e,i,n){return this.itemSelected(i,this.$isItemIndexSelected(i)),t.prototype.updateRenderer.call(this,e,i,n)},i.prototype.itemSelected=function(e,t){var i=this.$indexToRenderer[e];i&&(i.selected=t)},i.prototype.$isItemIndexSelected=function(e){return e==this.selectedIndex},i.prototype.commitSelection=function(t){void 0===t&&(t=!0);var n=this.$dataProvider,r=this.$ListBase,o=n?n.length-1:-1,a=r[3],s=r[2];if(s<i.NO_SELECTION&&(s=i.NO_SELECTION),s>o&&(s=o),r[0]&&s==i.NO_SELECTION&&n&&n.length>0)return r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1;if(r[4]){var l=this.dispatchEventWith(egret.Event.CHANGING,!1,!0,!0);if(!l)return this.itemSelected(r[2],!1),r[2]=i.NO_PROPOSED_SELECTION,r[4]=!1,!1}return r[3]=s,r[2]=i.NO_PROPOSED_SELECTION,a!=i.NO_SELECTION&&this.itemSelected(a,!1),r[3]!=i.NO_SELECTION&&this.itemSelected(r[3],!0),t&&(r[4]&&(this.dispatchEventWith(egret.Event.CHANGE),r[4]=!1),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),!0},i.prototype.adjustSelection=function(e,t){void 0===t&&(t=!1);var n=this.$ListBase;n[2]!=i.NO_PROPOSED_SELECTION?n[2]=e:n[3]=e,n[6]=!0,this.invalidateProperties()},i.prototype.itemAdded=function(e,n){t.prototype.itemAdded.call(this,e,n);var r=this.$getSelectedIndex();r==i.NO_SELECTION?this.$ListBase[0]&&this.adjustSelection(n,!0):r>=n&&this.adjustSelection(r+1,!0)},i.prototype.itemRemoved=function(e,n){if(t.prototype.itemRemoved.call(this,e,n),this.selectedIndex!=i.NO_SELECTION){var r=this.$getSelectedIndex();n==r?this.requireSelection&&this.$dataProvider&&this.$dataProvider.length>0?0==n?(this.$ListBase[2]=0,this.invalidateProperties()):this.setSelectedIndex(0,!1):this.adjustSelection(-1,!1):r>n&&this.adjustSelection(r-1,!1)}},i.prototype.onCollectionChange=function(n){t.prototype.onCollectionChange.call(this,n),n.kind==e.CollectionEventKind.RESET?0==this.$dataProvider.length&&this.setSelectedIndex(i.NO_SELECTION,!1):n.kind==e.CollectionEventKind.REFRESH&&this.dataProviderRefreshed()},i.prototype.dataProviderRefreshed=function(){this.setSelectedIndex(i.NO_SELECTION,!1)},i.prototype.rendererAdded=function(e,t,i){e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.rendererRemoved=function(e,t,i){e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onRendererTouchBegin,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onRendererTouchEnd,this),e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onRendererTouchCancle,this)},i.prototype.onRendererTouchBegin=function(e){if(this.$stage){var t=this.$ListBase;e.$isDefaultPrevented||(t[8]=!1,t[7]=e.$currentTarget,this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this))}},i.prototype.onRendererTouchCancle=function(e){var t=this.$ListBase;t[7]=null,t[8]=!0,this.$stage&&this.$stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this)},i.prototype.onRendererTouchEnd=function(t){var i=this.$ListBase,n=t.$currentTarget,r=i[7];n==r&&(i[8]||(this.setSelectedIndex(n.itemIndex,!0),e.ItemTapEvent.dispatchItemTapEvent(this,e.ItemTapEvent.ITEM_TAP,n)),i[8]=!1)},i.prototype.stage_touchEndHandler=function(e){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_END,this.stage_touchEndHandler,this),this.$ListBase[7]=null},i.NO_SELECTION=-1,i.NO_PROPOSED_SELECTION=-2,i}(e.DataGroup);e.ListBase=t,__reflect(t.prototype,"eui.ListBase"),e.registerBindable(t.prototype,"selectedIndex"),e.registerBindable(t.prototype,"selectedItem")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.thumb=null,e.$viewport=null,e.autoVisibility=!0,e}return __extends(i,t),Object.defineProperty(i.prototype,"viewport",{get:function(){return this.$viewport},set:function(t){if(t!=this.$viewport){var i=this.$viewport;i&&(i.removeEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),i.removeEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.$viewport=t,t&&(t.addEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.onPropertyChanged,this),t.addEventListener(egret.Event.RESIZE,this.onViewportResize,this)),this.invalidateDisplayList()}},enumerable:!0,configurable:!0}),i.prototype.onViewportResize=function(e){this.invalidateDisplayList()},i.prototype.onPropertyChanged=function(e){},i}(e.Component);e.ScrollBarBase=t,__reflect(t.prototype,"eui.ScrollBarBase")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.trackHighlight=null,e.thumb=null,e.track=null,e.$SliderBase={0:0,1:0,2:0,3:0,4:null,5:null,6:300,7:0,8:0,9:!0},e.maximum=10,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),e}return __extends(i,t),Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this.$SliderBase[6]},set:function(e){this.$SliderBase[6]=+e||0},enumerable:!0,configurable:!0}),i.prototype.pointToValue=function(e,t){return this.minimum},Object.defineProperty(i.prototype,"liveDragging",{get:function(){return this.$SliderBase[9]},set:function(e){this.$SliderBase[9]=!!e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pendingValue",{get:function(){return this.$SliderBase[7]},set:function(e){e=+e||0;var t=this.$SliderBase;e!==t[7]&&(t[7]=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.setValue=function(e){this.$SliderBase[7]=e,t.prototype.setValue.call(this,e)},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),i==this.thumb?(this.thumb.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track?(this.track.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.addEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i===this.trackHighlight&&(this.trackHighlight.touchEnabled=!1,egret.is(this.trackHighlight,"egret.DisplayObjectContainer")&&(this.trackHighlight.touchChildren=!1))},i.prototype.partRemoved=function(e,i){t.prototype.partRemoved.call(this,e,i),i==this.thumb?(this.thumb.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onThumbTouchBegin,this),this.thumb.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this)):i==this.track&&(this.track.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTrackTouchBegin,this),this.track.removeEventListener(egret.Event.RESIZE,this.onTrackOrThumbResize,this))},i.prototype.onTrackOrThumbResize=function(e){this.updateSkinDisplayList()},i.prototype.onThumbTouchBegin=function(t){var i=this.$SliderBase;i[5]&&i[5].isPlaying&&this.stopAnimation();var n=this.$stage;n.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),n.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this);var r=this.thumb.globalToLocal(t.stageX,t.stageY,egret.$TempPoint);i[0]=r.x,i[1]=r.y,e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_START)},i.prototype.onStageTouchMove=function(e){var t=this.$SliderBase;t[2]=e.$stageX,t[3]=e.$stageY;var i=this.track;if(i){var n=i.globalToLocal(t[2],t[3],egret.$TempPoint),r=this.pointToValue(n.x-t[0],n.y-t[1]);r=this.nearestValidValue(r,this.snapInterval),this.updateWhenTouchMove(r),e.updateAfterEvent()}},i.prototype.updateWhenTouchMove=function(e){e!=this.$SliderBase[7]&&(this.liveDragging?(this.setValue(e),this.dispatchEventWith(egret.Event.CHANGE)):this.pendingValue=e)},i.prototype.onStageTouchEnd=function(t){var i=t.$currentTarget;i.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onStageTouchMove,this),i.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END);var n=this.$SliderBase;this.liveDragging||this.value==n[7]||(this.setValue(n[7]),this.dispatchEventWith(egret.Event.CHANGE))},i.prototype.onTouchBegin=function(e){this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),this.$SliderBase[4]=e.$target},i.prototype.stageTouchEndHandler=function(e){var t=e.$target,i=this.$SliderBase;e.$currentTarget.removeEventListener(egret.TouchEvent.TOUCH_END,this.stageTouchEndHandler,this),i[4]!=t&&this.contains(t)&&egret.TouchEvent.dispatchTouchEvent(this,egret.TouchEvent.TOUCH_TAP,!0,!0,e.$stageX,e.$stageY,e.touchPointID),i[4]=null},i.prototype.$animationUpdateHandler=function(e){this.pendingValue=e.currentValue},i.prototype.animationEndHandler=function(t){this.setValue(this.$SliderBase[8]),this.dispatchEventWith(egret.Event.CHANGE),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},i.prototype.stopAnimation=function(){this.$SliderBase[5].stop(),this.setValue(this.nearestValidValue(this.pendingValue,this.snapInterval)),this.dispatchEventWith(egret.Event.CHANGE),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},i.prototype.onTrackTouchBegin=function(t){var i=this.thumb?this.thumb.width:0,n=this.thumb?this.thumb.height:0,r=t.$stageX-i/2,o=t.$stageY-n/2,a=this.track.globalToLocal(r,o,egret.$TempPoint),s=this.$Range,l=this.pointToValue(a.x,a.y);l=this.nearestValidValue(l,s[7]);var u=this.$SliderBase;if(l!=u[7])if(0!=u[6]){u[5]||(u[5]=new e.sys.Animation(this.$animationUpdateHandler,this),u[5].endFunction=this.animationEndHandler);var c=u[5];c.isPlaying&&this.stopAnimation(),u[8]=l,c.duration=u[6]*(Math.abs(u[7]-u[8])/(s[0]-s[2])),c.from=u[7],c.to=u[8],e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_START),c.play()}else this.setValue(l),this.dispatchEventWith(egret.Event.CHANGE)},i}(e.Range);e.SliderBase=t,__reflect(t.prototype,"eui.SliderBase")}(eui||(eui={}));var eui;!function(e){var t;!function(e){function t(e){if(!e)return"";for(var t="  at <"+e.name,i=e.attributes,n=Object.keys(i),r=n.length,o=0;r>o;o++){var a=n[o],s=i[a];("id"!=a||"__"!=s.substring(0,2))&&(t+=" "+a+'="'+s+'"')}return t+=0==e.children.length?"/>":">"}function i(e){var i=t(e.parent),n=t(e).substring(5);return i+"\n      	"+n}var n=[],r=1,o="hostComponent",a="eui.Skin",s="Declarations",l="egret.Rectangle",u="Class",c="Array",h="Percentage",p="State[]",d="skinName",f=[c,"boolean","string","number"],m=["id","locked","includeIn","excludeFrom"],g=[["<","&lt;"],[">","&gt;"],["&","&amp;"],['"',"&quot;"],["'","&apos;"]],v=["null","NaN","undefined","true","false"],y=function(){function t(){this.delayAssignmentDic={}}return t.prototype.$parseCode=function(e,t){var i=t?t:"$exmlClass"+r++,n=eval,o=n(e),a=!0;if(a&&o){egret.registerClass(o,i);for(var s=i.split("."),l=s.length,u=__global,c=0;l-1>c;c++){var h=s[c];u=u[h]||(u[h]={})}u[s[l-1]]||(u[s[l-1]]=o)}return o},t.prototype.parse=function(e){var t=null;t=egret.XML.parse(e);var i=!1,n="";t.attributes["class"]?(n=t.attributes["class"],delete t.attributes["class"],i=!!n):n="$exmlClass"+r++;var o=this.parseClass(t,n),a=o.toCode(),s=null,l=eval;if(s=l(a),i&&s){egret.registerClass(s,n);for(var u=n.split("."),c=u.length,h=__global,p=0;c-1>p;p++){var d=u[p];h=h[d]||(h[d]={})}h[u[c-1]]||(h[u[c-1]]=s)}return s},t.prototype.parseClass=function(t,i){e.exmlConfig||(e.exmlConfig=new e.EXMLConfig),this.currentXML=t,this.currentClassName=i,this.delayAssignmentDic={},this.idDic={},this.stateCode=[],this.stateNames=[],this.skinParts=[],this.bindings=[],this.declarations=null,this.currentClass=new e.EXClass,this.stateIds=[];var n=i.lastIndexOf(".");-1!=n?this.currentClass.className=i.substring(n+1):this.currentClass.className=i,this.startCompile();var r=this.currentClass;return this.currentClass=null,r},t.prototype.startCompile=function(){var t=this.getClassNameOfNode(this.currentXML);this.isSkinClass=t==a,this.currentClass.superClass=t,this.getStateNames();var i=this.currentXML.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1===o.nodeType&&o.namespace==e.NS_W&&o.localName==s){this.declarations=o;break}}this.currentXML.namespace&&(this.addIds(this.currentXML.children),this.createConstructFunc())},t.prototype.addIds=function(t){if(t)for(var i=t.length,n=0;i>n;n++){var r=t[n];if(1==r.nodeType&&r.namespace&&!this.isInnerClass(r)&&(this.addIds(r.children),r.namespace!=e.NS_W&&r.localName))if(this.isProperty(r)){var o=r.localName,a=o.indexOf("."),s=r.children;if(-1==a||!s||0==s.length)continue;var l=s[0];this.stateIds.push(l.attributes.id)}else if(1===r.nodeType){var u=r.attributes.id;if(u){var c=new RegExp("^[a-zA-Z_$]{1}[a-z0-9A-Z_$]*");null==u.match(c)&&egret.$warn(2022,u),null!=u.match(new RegExp(/ /g))&&egret.$warn(2022,u),-1==this.skinParts.indexOf(u)&&this.skinParts.push(u),this.createVarForNode(r),this.isStateNode(r)&&this.stateIds.push(u)}else this.createIdForNode(r),this.isStateNode(r)&&this.stateIds.push(r.attributes.id)}}},t.prototype.isInnerClass=function(t){if(t.hasOwnProperty("isInnerClass"))return t.isInnerClass;var i="Skin"==t.localName&&t.namespace==e.NS_S;if(!i)if(this.isProperty(t))i=!1;else{var n=void 0,r=t.parent;if(this.isProperty(r)){n=r.localName;var o=n.indexOf(".");-1!=o&&(n.substring(o+1),n=n.substring(0,o)),r=r.parent}else n=e.exmlConfig.getDefaultPropById(r.localName,r.namespace);var a=e.exmlConfig.getClassNameById(r.localName,r.namespace);i=e.exmlConfig.getPropertyType(n,a)==u}return t.isInnerClass=i,i},t.prototype.containsState=function(e){var t=e.attributes;if(t.includeIn||t.excludeFrom)return!0;for(var i=Object.keys(t),n=i.length,r=0;n>r;r++){var o=i[r];if(-1!=o.indexOf("."))return!0}return!1},t.prototype.createIdForNode=function(e){var t=this.getNodeId(e);this.idDic[t]?this.idDic[t]++:this.idDic[t]=1,t+=this.idDic[t],e.attributes.id=t},t.prototype.getNodeId=function(e){return e.attributes.id?e.attributes.id:"_"+e.localName},t.prototype.createVarForNode=function(t){var i=this.getClassNameOfNode(t);""!=i&&(this.currentClass.getVariableByName(t.attributes.id)||this.currentClass.addVariable(new e.EXVariable(t.attributes.id)))},t.prototype.createFuncForNode=function(t){var i=t.localName,n=this.isBasicTypeData(i);if(n)return this.createBasicTypeForNode(t);var r=this.getClassNameOfNode(t),o=new e.EXFunction,a="_i",s=t.attributes.id;o.name=s+a,this.currentClass.addFunction(o);var l=new e.EXCodeBlock;o.codeBlock=l;var u="t";"Object"==i?l.addVar(u,"{}"):l.addVar(u,"new "+r+"()");var c=!!this.currentClass.getVariableByName(s);c&&l.addAssignment("this."+s,u),this.addAttributesToCodeBlock(l,u,t),this.initlizeChildNode(t,l,u);var h=this.delayAssignmentDic[s];if(h)for(var p=h.length,d=0;p>d;d++){var f=h[d];l.concat(f)}return l.addReturn(u),"this."+o.name+"()"},t.prototype.isBasicTypeData=function(e){return-1!=f.indexOf(e)},t.prototype.createBasicTypeForNode=function(e){var t=e.localName,i="",n=this.currentClass.getVariableByName(e.attributes.id),r=e.children,o="";if(r&&r.length>0){var a=r[0];3==a.nodeType&&(o=a.text.trim())}switch(t){case c:var s=[];if(r)for(var l=r.length,u=0;l>u;u++){var h=r[u];1==h.nodeType&&s.push(this.createFuncForNode(h))}i="["+s.join(",")+"]";break;case"boolean":i="false"!=o&&o?"true":"false";break;case"number":i=o,-1!=i.indexOf("%")&&(i=i.substring(0,i.length-1));
break;case"string":i=this.formatString(o)}return n&&(n.defaultValue=i),i},t.prototype.addAttributesToCodeBlock=function(t,i,n){var r,o,a=n.attributes,s=Object.keys(a);s.sort();for(var l=s.length,u=0;l>u;u++)if(r=s[u],this.isNormalKey(r)&&(o=a[r],r=this.formatKey(r,o),o=this.formatValue(r,o,n))){if(this.currentClass.getVariableByName(o)){var c="this.",h=a.id,p=c+h+" = t;";this.currentClass.getVariableByName(h)||this.createVarForNode(n),t.containsCodeLine(p)||t.addCodeLineAt(p,1);var d=new e.EXCodeBlock;"this"==i?d.addAssignment(i,c+o,r):(d.startIf(c+h),d.addAssignment(c+h,c+o,r),d.endBlock()),this.delayAssignmentDic[o]||(this.delayAssignmentDic[o]=[]),this.delayAssignmentDic[o].push(d),o=c+o}t.addAssignment(i,o,r)}},t.prototype.initlizeChildNode=function(t,n,r){var o=t.children;if(o&&0!=o.length){for(var a,s=e.exmlConfig.getClassNameById(t.localName,t.namespace),l=[],u=o.length,c=[],h=0;u>h;h++){var p=o[h];if(1==p.nodeType&&p.namespace!=e.NS_W)if(this.isInnerClass(p)){if("Skin"==p.localName){var f=this.parseInnerClass(p),m=e.exmlConfig.getPropertyType(d,s);m?n.addAssignment(r,f,d):egret.$error(2005,this.currentClassName,d,i(p))}}else{var g=p.localName;if(this.isProperty(p)){if(!this.isNormalKey(g))continue;var m=e.exmlConfig.getPropertyType(p.localName,s);if(!m)continue;if(!p.children||0==p.children.length)continue;this.addChildrenToProp(p.children,m,g,n,r,a,c,t)}else l.push(p)}}if(0!=l.length){var v=e.exmlConfig.getDefaultPropById(t.localName,t.namespace),y=e.exmlConfig.getPropertyType(v,s);v&&y&&this.addChildrenToProp(l,y,v,n,r,a,c,t)}}},t.prototype.parseInnerClass=function(e){var i=n.pop();i||(i=new t);var o=this.currentClass.className+"$"+e.localName+r++,a=i.parseClass(e,o);return this.currentClass.addInnerClass(a),n.push(i),o},t.prototype.addChildrenToProp=function(e,t,i,n,r,o,a,s){var l="",h=e.length;if(h>1){if(t!=c)return;for(var p=[],d=0;h>d;d++){var f=e[d];1==f.nodeType&&(l=this.createFuncForNode(f),this.getClassNameOfNode(f),this.isStateNode(f)||p.push(l))}l="["+p.join(",")+"]"}else{var m=e[0];if(t==c)if(m.localName==c){var p=[];if(m.children)for(var g=m.children.length,v=0;g>v;v++){var f=m.children[v];1==f.nodeType&&(l=this.createFuncForNode(f),this.getClassNameOfNode(f),this.isStateNode(f)||p.push(l))}l="["+p.join(",")+"]"}else l=this.createFuncForNode(m),this.getClassNameOfNode(m),l=this.isStateNode(m)?"[]":"["+l+"]";else if(1==m.nodeType)if(t==u){if(h>1)return;l=this.parseInnerClass(e[0])}else this.getClassNameOfNode(m),l=this.createFuncForNode(m);else l=this.formatValue(i,m.text,s)}""!=l&&(-1==l.indexOf("()")&&(i=this.formatKey(i,l)),-1==a.indexOf(i)&&a.push(i),n.addAssignment(r,l,i))},t.prototype.isProperty=function(t){if(t.hasOwnProperty("isProperty"))return t.isProperty;var i,n=t.localName;if(n&&1===t.nodeType&&t.parent&&!this.isBasicTypeData(n)){var r=t.parent,o=n.indexOf(".");-1!=o&&(n=n.substr(0,o));var a=e.exmlConfig.getClassNameById(r.localName,r.namespace);i=!!e.exmlConfig.getPropertyType(n,a)}else i=!1;return t.isProperty=i,i},t.prototype.isNormalKey=function(e){return e&&-1==e.indexOf(".")&&-1==e.indexOf(":")&&-1==m.indexOf(e)?!0:!1},t.prototype.formatKey=function(e,t){return-1!=t.indexOf("%")&&("height"==e?e="percentHeight":"width"==e&&(e="percentWidth")),e},t.prototype.formatValue=function(t,i,n){i||(i="");var r=i;i=i.trim();var o=this.getClassNameOfNode(n),a=e.exmlConfig.getPropertyType(t,o),s=this.formatBinding(t,i,n);if(s){this.checkIdForState(n);var c="this";n!==this.currentXML&&(c+="."+n.attributes.id),this.bindings.push(new e.EXBinding(c,t,s.templates,s.chainIndex)),i=""}else if(a==l)i="new "+l+"("+i+")";else if(a==h)-1!=i.indexOf("%")&&(i=this.formatString(i));else switch(a){case u:t==d&&(i=this.formatString(r));break;case"number":0==i.indexOf("#")?i="0x"+i.substring(1):-1!=i.indexOf("%")&&(i=parseFloat(i.substr(0,i.length-1)).toString());break;case"boolean":i="false"!=i&&i?"true":"false";break;case"string":case"any":i=this.formatString(r)}return i},t.prototype.formatString=function(e){return e=this.unescapeHTMLEntity(e),e=e.split("\n").join("\\n"),e=e.split("\r").join("\\n"),e=e.split('"').join('\\"'),e='"'+e+'"'},t.prototype.formatBinding=function(e,t,i){if(!t)return null;if(t=t.trim(),"{"!=t.charAt(0)||"}"!=t.charAt(t.length-1))return null;t=t.substring(1,t.length-1).trim();for(var n=-1==t.indexOf("+")?[t]:this.parseTemplates(t),r=[],a=n.length,s=0;a>s;s++){var l=n[s].trim();if(l){var u=l.charAt(0);if(!("'"==u||'"'==u||u>="0"&&"9">=u||"-"==u||-1==l.indexOf(".")&&-1!=v.indexOf(l))){0==l.indexOf("this.")&&(l=l.substring(5));var c=l.split(".")[0];c!=o&&-1==this.skinParts.indexOf(c)&&(l=o+"."+l),n[s]='"'+l+'"',r.push(s)}}else n.splice(s,1),s--,a--}return{templates:n,chainIndex:r}},t.prototype.parseTemplates=function(e){if(-1==e.indexOf("'"))return e.split("+");var t=!1,i="";for(e=e.split("\\'").join("0");e.length>0;){var n=e.indexOf("'");if(-1==n){i+=e;break}i+=e.substring(0,n+1),e=e.substring(n+1),n=e.indexOf("'"),-1==n&&(n=e.length-1,t=!0);var r=e.substring(0,n+1);i+=r.split("+").join("1"),e=e.substring(n+1)}e=i.split("0").join("\\'"),t&&(e+="'");for(var o=e.split("+"),a=o.length,s=0;a>s;s++)o[s]=o[s].split("1").join("+");return o},t.prototype.unescapeHTMLEntity=function(e){if(!e)return"";for(var t=g.length,i=0;t>i;i++){var n=g[i],r=n[0],o=n[1];e=e.split(o).join(r)}return e},t.prototype.createConstructFunc=function(){var t=new e.EXCodeBlock;t.addEmptyLine();var i="this";if(this.addAttributesToCodeBlock(t,i,this.currentXML),this.declarations){var n=this.declarations.children;if(n&&n.length>0)for(var r=n.length,o=0;r>o;o++){var a=n[o];if(1==a.nodeType){var s=this.createFuncForNode(a);s&&t.addCodeLine(s+";")}}}this.initlizeChildNode(this.currentXML,t,i);var l,u,c=this.stateIds;if(c.length>0){u=c.length;for(var o=0;u>o;o++)l=c[o],t.addCodeLine("this."+l+"_i();");t.addEmptyLine()}var h=this.skinParts,p="[]";if(u=h.length,u>0){for(var o=0;u>o;o++)h[o]='"'+h[o]+'"';p="["+h.join(",")+"]"}var d=new e.EXFunction;d.name="skinParts",d.isGet=!0;var f=new e.EXCodeBlock;f.addReturn(p),d.codeBlock=f,this.currentClass.addFunction(d),this.currentXML.attributes.id="",this.createStates(this.currentXML);for(var m,g=this.currentXML,v=(this.getClassNameOfNode(g),g.attributes),y=Object.keys(v),_=y.length,b=0;_>b;b++){var w=y[b],x=v[w],E=w.indexOf(".");if(-1!=E){var S=w.substring(0,E);S=this.formatKey(S,x);var T=this.formatValue(S,x,g);if(!T)continue;var C=w.substr(E+1);m=this.getStateByName(C,g);var M=m.length;if(M>0)for(var o=0;M>o;o++){var P=m[o];P.addOverride(new e.EXSetProperty("",S,T))}}}var I=this.stateCode;if(u=I.length,u>0){var L="	";t.addCodeLine("this.states = [");for(var R=!0,o=0;u>o;o++){var P=I[o];R?R=!1:t.addCodeLine(L+",");for(var A=P.toCode().split("\n"),O=0;O<A.length;){var k=A[O];k&&t.addCodeLine(L+k),O++}}t.addCodeLine("];")}var D=this.bindings;if(u=D.length,u>0){t.addEmptyLine();for(var o=0;u>o;o++){var N=D[o];t.addCodeLine(N.toCode())}}this.currentClass.constructCode=t},t.prototype.isStateNode=function(e){var t=e.attributes;return t.hasOwnProperty("includeIn")||t.hasOwnProperty("excludeFrom")},t.prototype.getStateNames=function(){var t=this.currentXML,i=e.exmlConfig.getClassNameById(t.localName,t.namespace),n=e.exmlConfig.getPropertyType("states",i);if(n==p){var r=t.attributes.states;r&&delete t.attributes.states;var o,a,s=this.stateNames,l=t.children;if(l)for(var u=l.length,c=0;u>c;c++)if(a=l[c],1==a.nodeType&&"states"==a.localName){a.namespace=e.NS_W,o=a.children;break}if(o||r)if(r)for(var h=r.split(","),d=h.length,c=0;d>c;c++){var f=h[c].trim();f&&(-1==s.indexOf(f)&&s.push(f),this.stateCode.push(new e.EXState(f)))}else for(var m=o.length,c=0;m>c;c++){var g=o[c];if(1==g.nodeType){var v=[],y=g.attributes;if(y.stateGroups)for(var _=y.stateGroups.split(","),b=_.length,w=0;b>w;w++){var x=_[w].trim();x&&(-1==s.indexOf(x)&&s.push(x),v.push(x))}var f=y.name;-1==s.indexOf(f)&&s.push(f),this.stateCode.push(new e.EXState(f,v))}}}},t.prototype.createStates=function(t){var i=t.children;if(i)for(var n=i.length,r=0;n>r;r++){var o=i[r];if(1==o.nodeType&&!this.isInnerClass(o)&&(this.createStates(o),o.namespace!=e.NS_W&&o.localName))if(this.isProperty(o)){var a=o.localName,s=a.indexOf("."),l=o.children;if(-1==s||!l||0==l.length)continue;var u=a.substring(s+1);a=a.substring(0,s);var h=this.getClassNameOfNode(t),p=(e.exmlConfig.getPropertyType(a,h),l[0]),d=void 0;1==p.nodeType?(this.createFuncForNode(p),this.checkIdForState(p),d="this."+p.attributes.id):d=this.formatValue(a,p.text,t);var f=this.getStateByName(u,o),m=f.length;if(m>0)for(var g=0;m>g;g++){var v=f[g];v.addOverride(new e.EXSetProperty(t.attributes.id,a,d))}}else if(this.containsState(o)){var y=o.attributes,_=y.id;this.getClassNameOfNode(o),this.checkIdForState(o);var u=void 0,f=void 0,v=void 0;if(this.isStateNode(o)){var b="",w=o.parent;w.localName==c&&(w=w.parent),w&&w.parent&&this.isProperty(w)&&(w=w.parent),w&&w!=this.currentXML&&(b=w.attributes.id,this.checkIdForState(w));var x=this.findNearNodeId(o),E=[];if(y.includeIn)E=y.includeIn.split(",");else{for(var S=y.excludeFrom.split(","),T=S.length,g=0;T>g;g++){var C=S[g];this.getStateByName(C,o)}T=this.stateCode.length;for(var g=0;T>g;g++)v=this.stateCode[g],-1==S.indexOf(v.name)&&E.push(v.name)}for(var M=E.length,P=0;M>P;P++)if(u=E[P],f=this.getStateByName(u,o),f.length>0)for(var m=f.length,g=0;m>g;g++)v=f[g],v.addOverride(new e.EXAddItems(_,b,x.position,x.relativeTo))}for(var I=Object.keys(y),L=I.length,R=0;L>R;R++){var A=I[R],d=y[A],s=A.indexOf(".");if(-1!=s){var O=A.substring(0,s);O=this.formatKey(O,d);var k=this.formatBinding(O,d,o);if(!k&&(d=this.formatValue(O,d,o),!d))continue;u=A.substr(s+1),f=this.getStateByName(u,o);var m=f.length;if(m>0)for(var g=0;m>g;g++)v=f[g],k?v.addOverride(new e.EXSetStateProperty(_,O,k.templates,k.chainIndex)):v.addOverride(new e.EXSetProperty(_,O,d))}}}}},t.prototype.checkIdForState=function(e){if(e&&!this.currentClass.getVariableByName(e.attributes.id)){this.createVarForNode(e);var t=e.attributes.id,i=t+"_i",n=this.currentClass.getFuncByName(i);if(n){var r="this."+t+" = t;",o=n.codeBlock;o&&(o.containsCodeLine(r)||o.addCodeLineAt(r,1))}}},t.prototype.getStateByName=function(e,t){for(var i=[],n=this.stateCode,r=n.length,o=0;r>o;o++){var a=n[o];if(a.name==e)-1==i.indexOf(a)&&i.push(a);else if(a.stateGroups.length>0){for(var s=!1,l=a.stateGroups.length,u=0;l>u;u++){var c=a.stateGroups[u];if(c==e){s=!0;break}}s&&-1==i.indexOf(a)&&i.push(a)}}return i},t.prototype.findNearNodeId=function(e){for(var t,i,n,r=e.parent,o="",a=-1,s=!1,l=r.children,u=l.length,c=0;u>c;c++){var h=l[c];this.isProperty(h)||(h==e?(s=!0,a=c):!s||n||this.isStateNode(h)||(n=h),s||this.isStateNode(h)||(i=h))}return 0==a?(t=0,{position:t,relativeTo:o}):a==u-1?(t=1,{position:t,relativeTo:o}):n&&(t=2,o=n.attributes.id)?(this.checkIdForState(n),{position:t,relativeTo:o}):{position:1,relativeTo:o}},t.prototype.getClassNameOfNode=function(t){var i=e.exmlConfig.getClassNameById(t.localName,t.namespace);return i},t}();e.EXMLParser=y,__reflect(y.prototype,"eui.sys.EXMLParser")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.$selected=!1,e.$autoSelected=!0,e}return __extends(i,t),Object.defineProperty(i.prototype,"selected",{get:function(){return this.$selected},set:function(e){this.$setSelected(e)},enumerable:!0,configurable:!0}),i.prototype.$setSelected=function(t){return t=!!t,t===this.$selected?!1:(this.$selected=t,this.invalidateState(),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selected"),!0)},i.prototype.getCurrentState=function(){var e=t.prototype.getCurrentState.call(this);if(this.$selected){var i=e+"AndSelected",n=this.skin;return n&&n.hasState(i)?i:"disabled"==e?"disabled":"down"}return e},i.prototype.buttonReleased=function(){this.$autoSelected&&(this.selected=!this.$selected,this.dispatchEventWith(egret.Event.CHANGE))},i}(e.Button);e.ToggleButton=t,__reflect(t.prototype,"eui.ToggleButton"),e.registerBindable(t.prototype,"selected")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.$horizontalAlign="left",t.$verticalAlign="top",t.$gap=6,t.$paddingLeft=0,t.$paddingRight=0,t.$paddingTop=0,t.$paddingBottom=0,t.elementSizeTable=[],t.startIndex=-1,t.endIndex=-1,t.indexInViewCalculated=!1,t.maxElementSize=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"horizontalAlign",{get:function(){return this.$horizontalAlign},set:function(e){this.$horizontalAlign!=e&&(this.$horizontalAlign=e,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"verticalAlign",{get:function(){return this.$verticalAlign},set:function(e){this.$verticalAlign!=e&&(this.$verticalAlign=e,this.$target&&this.$target.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"gap",{get:function(){return this.$gap},set:function(e){e=+e||0,this.$gap!==e&&(this.$gap=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingLeft",{get:function(){return this.$paddingLeft},set:function(e){e=+e||0,this.$paddingLeft!==e&&(this.$paddingLeft=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingRight",{get:function(){return this.$paddingRight},set:function(e){e=+e||0,this.$paddingRight!==e&&(this.$paddingRight=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingTop",{get:function(){return this.$paddingTop},set:function(e){e=+e||0,this.$paddingTop!==e&&(this.$paddingTop=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"paddingBottom",{get:function(){return this.$paddingBottom},set:function(e){e=+e||0,this.$paddingBottom!==e&&(this.$paddingBottom=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),t.prototype.invalidateTargetLayout=function(){var e=this.$target;e&&(e.invalidateSize(),e.invalidateDisplayList())},t.prototype.measure=function(){this.$target&&(this.$useVirtualLayout?this.measureVirtual():this.measureReal())},t.prototype.measureReal=function(){},t.prototype.measureVirtual=function(){},t.prototype.updateDisplayList=function(e,t){var i=this.$target;return i?0==i.numElements?void i.setContentSize(Math.ceil(this.$paddingLeft+this.$paddingRight),Math.ceil(this.$paddingTop+this.$paddingBottom)):void(this.$useVirtualLayout?this.updateDisplayListVirtual(e,t):this.updateDisplayListReal(e,t)):void 0},t.prototype.getStartPosition=function(e){return 0},t.prototype.getElementSize=function(e){return 0},t.prototype.getElementTotalSize=function(){return 0},t.prototype.elementRemoved=function(t){this.$useVirtualLayout&&(e.prototype.elementRemoved.call(this,t),this.elementSizeTable.splice(t,1))},t.prototype.clearVirtualLayoutCache=function(){this.$useVirtualLayout&&(this.elementSizeTable=[],this.maxElementSize=0)},t.prototype.findIndexAt=function(e,t,i){var n=.5*(t+i)|0,r=this.getStartPosition(n),o=this.getElementSize(n);return e>=r&&e<r+o+this.$gap?n:t==i?-1:r>e?this.findIndexAt(e,t,Math.max(t,n-1)):this.findIndexAt(e,Math.min(n+1,i),i)},t.prototype.scrollPositionChanged=function(){if(e.prototype.scrollPositionChanged.call(this),this.$useVirtualLayout){var t=this.getIndexInView();t&&(this.indexInViewCalculated=!0,this.target.invalidateDisplayList())}},t.prototype.getIndexInView=function(){return!1},t.prototype.updateDisplayListVirtual=function(e,t){},t.prototype.updateDisplayListReal=function(e,t){},t.prototype.flexChildrenProportionally=function(e,t,i,n){var r,o=n.length;do{r=!0;var a=t-e*i/100;a>0?t-=a:a=0;for(var s=t/i,l=0;o>l;l++){var u=n[l],c=u.percent*s;if(c<u.min){var h=u.min;u.size=h,n[l]=n[--o],n[o]=u,i-=u.percent,a>=h?a-=h:(t-=h-a,a=0),r=!1;break}if(c>u.max){var p=u.max;u.size=p,n[l]=n[--o],n[o]=u,i-=u.percent,a>=p?a-=p:(t-=p-a,a=0),r=!1;break}u.size=c}}while(!r)},t}(e.LayoutBase);e.LinearLayoutBase=t,__reflect(t.prototype,"eui.LinearLayoutBase")}(eui||(eui={})),function(e){var t;!function(e){var t=function(){function e(){this.layoutElement=null,this.size=0,this.percent=0/0,this.min=0/0,this.max=0/0}return e}();e.ChildInfo=t,__reflect(t.prototype,"eui.sys.ChildInfo")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.pointToValue=function(e,t){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?e/r*n:0)},t.prototype.getThumbRange=function(){var e=egret.$TempRectangle;this.track.getLayoutBounds(e);var t=e.width;return this.thumb.getLayoutBounds(e),t-e.width},t.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var e=this.$Range,t=this.getThumbRange(),i=e[0]-e[2],n=i>0?(this.pendingValue-e[2])/i*t:0,r=this.track.localToGlobal(n,0,egret.$TempPoint),o=r.x,a=r.y,s=this.thumb.$parent.globalToLocal(o,a,egret.$TempPoint).x,l=egret.$TempRectangle;if(this.thumb.getLayoutBounds(l),this.thumb.setLayoutBoundsPosition(Math.round(s),l.y),this.trackHighlight&&this.trackHighlight.$parent){var u=this.trackHighlight.$parent.globalToLocal(o,a,egret.$TempPoint).x-n;this.trackHighlight.x=Math.round(u),this.trackHighlight.width=Math.round(n)}}},t}(e.SliderBase);e.HSlider=t,__reflect(t.prototype,"eui.HSlider")}(eui||(eui={}));var eui;!function(e){var t=[],i={},n={},r=function(){function e(){}return e.prototype.getAsset=function(e,r,o){var a=i[e];if(a)return void a.push([r,o]);var s=t.pop();s||(s=new egret.ImageLoader),i[e]=[[r,o]],n[s.$hashCode]=e,s.addEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),s.addEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this),s.load(e)},e.prototype.onLoadFinish=function(e){var r=e.currentTarget;r.removeEventListener(egret.Event.COMPLETE,this.onLoadFinish,this),r.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.onLoadFinish,this);var o;e.$type==egret.Event.COMPLETE&&(o=new egret.Texture,o._setBitmapData(r.data),r.data=null),t.push(r);var a=n[r.$hashCode];delete n[r.$hashCode];var s=i[a];delete i[a];for(var l=s.length,u=0;l>u;u++){var c=s[u];c[0].call(c[1],o,a)}},e}();e.DefaultAssetAdapter=r,__reflect(r.prototype,"eui.DefaultAssetAdapter",["eui.IAssetAdapter"])}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(e){var i=t.call(this)||this;return i.sourceChanged=!1,i._source=null,i.initializeUIValues(),e&&(i.source=e),i}return __extends(i,t),Object.defineProperty(i.prototype,"scale9Grid",{get:function(){return this.$scale9Grid},set:function(e){this.$setScale9Grid(e),this.invalidateDisplayList()},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"fillMode",{get:function(){return this.$fillMode},set:function(e){e!=this.$fillMode&&(this.$fillMode=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setFillMode=function(e){var i=t.prototype.$setFillMode.call(this,e);return this.invalidateDisplayList(),i},Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(e){e!=this._source&&(this._source=e,this.$stage?this.parseSource():(this.sourceChanged=!0,this.invalidateProperties()))},enumerable:!0,configurable:!0}),i.prototype.$setTexture=function(e){if(e==this.$texture)return!1;var i=t.prototype.$setTexture.call(this,e);return this.sourceChanged=!1,this.invalidateSize(),this.invalidateDisplayList(),i},i.prototype.parseSource=function(){this.sourceChanged=!1;var t=this._source;t&&"string"==typeof t?e.getAssets(this._source,function(e){t===this._source&&egret.is(e,"egret.Texture")&&(this.$setTexture(e),e&&this.dispatchEventWith(egret.Event.COMPLETE))},this):this.$setTexture(t)},i.prototype.$measureContentBounds=function(e){var t=this.$texture;if(t){var i=this.$UIComponent,n=i[10],r=i[11];if(isNaN(n)||isNaN(r))return void e.setEmpty();"clip"==this.$fillMode&&(n>t.$getTextureWidth()&&(n=t.$getTextureWidth()),r>t.$getTextureHeight()&&(r=t.$getTextureHeight())),e.setTo(0,0,n,r)}else e.setEmpty()},i.prototype.createChildren=function(){this.sourceChanged&&this.parseSource()},i.prototype.setActualSize=function(i,n){e.sys.UIComponentImpl.prototype.setActualSize.call(this,i,n),t.prototype.$setWidth.call(this,i),t.prototype.$setHeight.call(this,n)},i.prototype.childrenCreated=function(){},i.prototype.commitProperties=function(){e.sys.UIComponentImpl.prototype.commitProperties.call(this),this.sourceChanged&&this.parseSource()},i.prototype.measure=function(){var e=this.$texture;e?this.setMeasuredSize(e.$getTextureWidth(),e.$getTextureHeight()):this.setMeasuredSize(0,0)},i.prototype.updateDisplayList=function(e,t){this.$renderDirty=!0},i.prototype.invalidateParentLayout=function(){},i.prototype.setMeasuredSize=function(e,t){},i.prototype.invalidateProperties=function(){},i.prototype.validateProperties=function(){},i.prototype.invalidateSize=function(){},i.prototype.validateSize=function(e){},i.prototype.invalidateDisplayList=function(){},i.prototype.validateDisplayList=function(){},i.prototype.validateNow=function(){},i.prototype.setLayoutBoundsSize=function(e,t){},i.prototype.setLayoutBoundsPosition=function(e,t){},i.prototype.getLayoutBounds=function(e){},i.prototype.getPreferredBounds=function(e){},i}(egret.Bitmap);e.Image=t,__reflect(t.prototype,"eui.Image",["eui.UIComponent","egret.DisplayObject"]),e.sys.implementUIComponent(t,egret.Bitmap),e.registerProperty(t,"scale9Grid","egret.Rectangle")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._data=null,e._selected=!1,e.itemIndex=-1,e.touchCaptured=!1,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onTouchBegin,e),e}return __extends(i,t),Object.defineProperty(i.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged()},enumerable:!0,configurable:!0}),i.prototype.dataChanged=function(){},Object.defineProperty(i.prototype,"selected",{get:function(){return this._selected},set:function(e){this._selected!=e&&(this._selected=e,this.invalidateState())},enumerable:!0,configurable:!0}),i.prototype.onTouchCancle=function(e){this.touchCaptured=!1;var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.invalidateState()},i.prototype.onTouchBegin=function(e){this.$stage&&(this.$stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!0,this.invalidateState(),e.updateAfterEvent())},i.prototype.onStageTouchEnd=function(e){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancle,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onStageTouchEnd,this),this.touchCaptured=!1,this.invalidateState()},i.prototype.getCurrentState=function(){var e="up";if(this.enabled||(e="disabled"),this.touchCaptured&&(e="down"),this._selected){var t=e+"AndSelected",i=this.skin;return i&&i.hasState(t)?t:"disabled"==e?"disabled":"down"}return e},i}(e.Component);e.ItemRenderer=t,__reflect(t.prototype,"eui.ItemRenderer",["eui.IItemRenderer"]),e.registerBindable(t.prototype,"data")}(eui||(eui={}));var eui;!function(e){var t=e.sys.UIComponentImpl,i=function(i){function n(e){var t=i.call(this)||this;return t.$styleSetMap={fontFamily:!0,size:!0,bold:!0,italic:!0,textAlign:!0,verticalAlign:!0,lineSpacing:!0,textColor:!0,wordWrap:!0,displayAsPassword:!0,strokeColor:!0,stroke:!0,maxChars:!0,multiline:!0,border:!0,borderColor:!0,background:!0,backgroundColor:!0},t.$revertStyle={},t.$style=null,t.$changeFromStyle=!1,t._widthConstraint=0/0,t.initializeUIValues(),t.text=e,t}return __extends(n,i),Object.defineProperty(n.prototype,"style",{get:function(){return this.$style},set:function(e){this.$setStyle(e)},enumerable:!0,configurable:!0}),n.prototype.$setStyle=function(e){if(this.$style!=e){this.$style=e;var t=egret.getImplementation("eui.Theme");if(t){this.$changeFromStyle=!0;for(var i in this.$revertStyle)this[i]=this.$revertStyle[i];if(this.$revertStyle={},null==e)return void(this.$changeFromStyle=!1);for(var n=e.split(","),r=0;r<n.length;r++){var o=t.$getStyleConfig(n[r]);if(o)for(var i in o)if(this.$styleSetMap[i]){var a=this[i];this[i]=o[i],this.$revertStyle[i]=a}}this.$changeFromStyle=!1}}},n.prototype.$setFontFamily=function(e){return this.$changeFromStyle||(delete this.$revertStyle.fontFanily,this.$styleSetMap.fontFanily=!1),i.prototype.$setFontFamily.call(this,e)},n.prototype.$setSize=function(e){return this.$changeFromStyle||(delete this.$revertStyle.size,this.$styleSetMap.size=!1),i.prototype.$setSize.call(this,e)},n.prototype.$setBold=function(e){return this.$changeFromStyle||(delete this.$revertStyle.bold,this.$styleSetMap.bold=!1),i.prototype.$setBold.call(this,e)},n.prototype.$setItalic=function(e){return this.$changeFromStyle||(delete this.$revertStyle.italic,this.$styleSetMap.italic=!1),i.prototype.$setItalic.call(this,e)},n.prototype.$setTextAlign=function(e){return this.$changeFromStyle||(delete this.$revertStyle.textAlign,this.$styleSetMap.textAlign=!1),i.prototype.$setTextAlign.call(this,e)},n.prototype.$setVerticalAlign=function(e){return this.$changeFromStyle||(delete this.$revertStyle.verticalAlign,this.$styleSetMap.verticalAlign=!1),i.prototype.$setVerticalAlign.call(this,e)},n.prototype.$setLineSpacing=function(e){return this.$changeFromStyle||(delete this.$revertStyle.lineSpacing,this.$styleSetMap.lineSpacing=!1),i.prototype.$setLineSpacing.call(this,e)},n.prototype.$setTextColor=function(e){return this.$changeFromStyle||(delete this.$revertStyle.textColor,this.$styleSetMap.textColor=!1),i.prototype.$setTextColor.call(this,e)},n.prototype.$setWordWrap=function(e){this.$changeFromStyle||(delete this.$revertStyle.wordWrap,this.$styleSetMap.wordWrap=!1),i.prototype.$setWordWrap.call(this,e)},n.prototype.$setDisplayAsPassword=function(e){return this.$changeFromStyle||(delete this.$revertStyle.displayAsPassword,this.$styleSetMap.displayAsPassword=!1),i.prototype.$setDisplayAsPassword.call(this,e)},n.prototype.$setStrokeColor=function(e){return this.$changeFromStyle||(delete this.$revertStyle.strokeColor,this.$styleSetMap.strokeColor=!1),i.prototype.$setStrokeColor.call(this,e)},n.prototype.$setStroke=function(e){return this.$changeFromStyle||(delete this.$revertStyle.stroke,this.$styleSetMap.stroke=!1),i.prototype.$setStroke.call(this,e)},n.prototype.$setMaxChars=function(e){return this.$changeFromStyle||(delete this.$revertStyle.maxChars,this.$styleSetMap.maxChars=!1),i.prototype.$setMaxChars.call(this,e)},n.prototype.$setMultiline=function(e){return this.$changeFromStyle||(delete this.$revertStyle.multiline,this.$styleSetMap.multiline=!1),i.prototype.$setMultiline.call(this,e)},n.prototype.$setBorder=function(e){this.$changeFromStyle||(delete this.$revertStyle.border,this.$styleSetMap.border=!1),i.prototype.$setBorder.call(this,e)},n.prototype.$setBorderColor=function(e){this.$changeFromStyle||(delete this.$revertStyle.borderColor,this.$styleSetMap.borderColor=!1),i.prototype.$setBorderColor.call(this,e)},n.prototype.$setBackground=function(e){this.$changeFromStyle||(delete this.$revertStyle.background,this.$styleSetMap.background=!1),i.prototype.$setBackground.call(this,e)},n.prototype.$setBackgroundColor=function(e){this.$changeFromStyle||(delete this.$revertStyle.backgroundColor,this.$styleSetMap.backgroundColor=!1),i.prototype.$setBackgroundColor.call(this,e)},n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(e){var n=i.prototype.$setWidth.call(this,e),r=t.prototype.$setWidth.call(this,e);return n&&r},n.prototype.$setHeight=function(e){var n=i.prototype.$setHeight.call(this,e),r=t.prototype.$setHeight.call(this,e);return n&&r},n.prototype.$setText=function(t){var n=i.prototype.$setText.call(this,t);return e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.createChildren=function(){},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var e=this.$UIComponent,t=this.$TextField,n=t[3],r=0/0;isNaN(this._widthConstraint)?isNaN(e[8])?1e5!=e[13]&&(r=e[13]):r=e[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(e,t){i.prototype.$setWidth.call(this,e),i.prototype.$setHeight.call(this,t)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(e,t){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(e){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(e,i){if(t.prototype.setLayoutBoundsSize.call(this,e,i),isNaN(e)||e===this._widthConstraint||0==e)return void(this._widthConstraint=e);this._widthConstraint=e;var n=this.$UIComponent;isNaN(n[9])&&e!=n[16]&&this.invalidateSize()},n.prototype.setLayoutBoundsPosition=function(e,t){},n.prototype.getLayoutBounds=function(e){},n.prototype.getPreferredBounds=function(e){},n}(egret.TextField);e.Label=i,__reflect(i.prototype,"eui.Label",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),e.sys.implementUIComponent(i,egret.TextField),e.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=null!==t&&t.apply(this,arguments)||this;return e.allowMultipleSelection=!1,e._selectedIndices=[],e.isValidIndex=function(t,i,n){return e.$dataProvider&&t>=0&&t<e.$dataProvider.length&&t%1==0},e}return __extends(i,t),Object.defineProperty(i.prototype,"selectedIndices",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices:this._selectedIndices},set:function(e){this.setSelectedIndices(e,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this._proposedSelectedIndices?this._proposedSelectedIndices.length>0?this._proposedSelectedIndices[0]:-1:this.$getSelectedIndex()},set:function(e){this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedItems",{get:function(){var e=[],t=this.selectedIndices;if(t)for(var i=t.length,n=0;i>n;n++)e[n]=this.$dataProvider.getItemAt(t[n]);return e},set:function(e){var t=[];if(e)for(var i=e.length,n=0;i>n;n++){var r=this.$dataProvider.getItemIndex(e[n]);if(-1!=r&&t.splice(0,0,r),-1==r){t=[];break}}this.setSelectedIndices(t,!1)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndices=function(e,t){var i=this.$ListBase;t&&(i[4]=i[4]||t),e?this._proposedSelectedIndices=e:this._proposedSelectedIndices=[],this.invalidateProperties()},i.prototype.commitProperties=function(){t.prototype.commitProperties.call(this),this._proposedSelectedIndices&&this.commitSelection()},i.prototype.commitSelection=function(i){void 0===i&&(i=!0);var n=this.$ListBase,r=n[3];if(this._proposedSelectedIndices){if(this._proposedSelectedIndices=this._proposedSelectedIndices.filter(this.isValidIndex),!this.allowMultipleSelection&&this._proposedSelectedIndices.length>0){var o=[];o.push(this._proposedSelectedIndices[0]),this._proposedSelectedIndices=o}this._proposedSelectedIndices.length>0?n[2]=this._proposedSelectedIndices[0]:n[2]=-1}var a=t.prototype.commitSelection.call(this,!1);if(!a)return this._proposedSelectedIndices=null,!1;var s=this.$getSelectedIndex();return s>e.ListBase.NO_SELECTION&&(this._proposedSelectedIndices?-1==this._proposedSelectedIndices.indexOf(s)&&this._proposedSelectedIndices.push(s):this._proposedSelectedIndices=[s]),this._proposedSelectedIndices&&(-1!=this._proposedSelectedIndices.indexOf(r)&&this.itemSelected(r,!0),this.commitMultipleSelection()),i&&a&&(n[4]&&(this.dispatchEventWith(egret.Event.CHANGE),n[4]=!1),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedItem")),a
},i.prototype.commitMultipleSelection=function(){var e,t,i=[],n=[],r=this._selectedIndices,o=this._proposedSelectedIndices;if(r.length>0&&o.length>0){for(t=o.length,e=0;t>e;e++)-1==r.indexOf(o[e])&&n.push(o[e]);for(t=r.length,e=0;t>e;e++)-1==o.indexOf(r[e])&&i.push(r[e])}else r.length>0?i=r:o.length>0&&(n=o);if(this._selectedIndices=o,i.length>0)for(t=i.length,e=0;t>e;e++)this.itemSelected(i[e],!1);if(n.length>0)for(t=n.length,e=0;t>e;e++)this.itemSelected(n[e],!0);this._proposedSelectedIndices=null},i.prototype.$isItemIndexSelected=function(e){return this.allowMultipleSelection?-1!=this._selectedIndices.indexOf(e):t.prototype.$isItemIndexSelected.call(this,e)},i.prototype.dataProviderRefreshed=function(){this.allowMultipleSelection||t.prototype.dataProviderRefreshed.call(this)},i.prototype.calculateSelectedIndices=function(e){var t=[],i=this._selectedIndices,n=i.length;if(n>0){if(1==n&&i[0]==e)return this.$ListBase[0]?(t.splice(0,0,i[0]),t):t;for(var r=!1,o=0;n>o;o++)i[o]==e?r=!0:i[o]!=e&&t.splice(0,0,i[o]);return r||t.splice(0,0,e),t}return t.splice(0,0,e),t},i.prototype.onRendererTouchEnd=function(i){if(this.allowMultipleSelection){var n=i.currentTarget,r=this.$ListBase[7];if(n!=r)return;this.setSelectedIndices(this.calculateSelectedIndices(n.itemIndex),!0),e.ItemTapEvent.dispatchItemTapEvent(this,e.ItemTapEvent.ITEM_TAP,n)}else t.prototype.onRendererTouchEnd.call(this,i)},i}(e.ListBase);e.List=t,__reflect(t.prototype,"eui.List")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.closeButton=null,e.moveArea=null,e.titleDisplay=null,e._title="",e.offsetPointX=0,e.offsetPointY=0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,e.onWindowTouchBegin,e,!1,100),e}return __extends(i,t),i.prototype.onWindowTouchBegin=function(e){this.$parent.addChild(this)},Object.defineProperty(i.prototype,"elementsContent",{set:function(e){if(e)for(var t=e.length,i=0;t>i;i++)this.addChild(e[i])},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"title",{get:function(){return this._title},set:function(e){this._title=e,this.titleDisplay&&(this.titleDisplay.text=this.title)},enumerable:!0,configurable:!0}),i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),i==this.titleDisplay?this.titleDisplay.text=this._title:i==this.moveArea?this.moveArea.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.partRemoved=function(e,i){t.prototype.partRemoved.call(this,e,i),i==this.moveArea?this.moveArea.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBegin,this):i==this.closeButton&&this.closeButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onCloseButtonClick,this)},i.prototype.onCloseButtonClick=function(t){e.UIEvent.dispatchUIEvent(this,e.UIEvent.CLOSING,!0,!0)&&this.close()},i.prototype.close=function(){this.$parent&&this.$parent.removeChild(this)},i.prototype.onTouchBegin=function(e){this.$includeInLayout=!1,this.offsetPointX=this.x-e.$stageX,this.offsetPointY=this.y-e.$stageY,this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.$stage.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i.prototype.onTouchMove=function(e){this.x=e.$stageX+this.offsetPointX,this.y=e.$stageY+this.offsetPointY},i.prototype.onTouchEnd=function(e){var t=e.$currentTarget;t.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this)},i}(e.Component);e.Panel=t,__reflect(t.prototype,"eui.Panel"),e.registerProperty(t,"elementsContent","Array",!0)}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i.thumb=null,i.labelDisplay=null,i._labelFunction=null,i._slideDuration=500,i._direction=e.Direction.LTR,i.slideToValue=0,i.animationValue=0,i.thumbInitX=0,i.thumbInitY=0,i.animation=new e.sys.Animation(i.animationUpdateHandler,i),i}return __extends(i,t),Object.defineProperty(i.prototype,"labelFunction",{get:function(){return this._labelFunction},set:function(e){this._labelFunction!=e&&(this._labelFunction=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.valueToLabel=function(e,t){return null!=this.labelFunction?this._labelFunction(e,t):e+" / "+t},Object.defineProperty(i.prototype,"slideDuration",{get:function(){return this._slideDuration},set:function(e){e=0|+e,this._slideDuration!==e&&(this._slideDuration=e,this.animation.isPlaying&&(this.animation.stop(),this.setValue(this.slideToValue)))},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"direction",{get:function(){return this._direction},set:function(e){this._direction!=e&&(this.thumb&&(this.thumb.x=this.thumbInitX),this.thumb&&(this.thumb.y=this.thumbInitY),this._direction=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),i.prototype.$setValue=function(e){if(this.value===e)return!1;var i=this.$Range,n=t.prototype.$setValue.call(this,e);if(this._slideDuration>0&&this.$stage){this.validateProperties();var r=this.animation;if(r.isPlaying&&(this.animationValue=this.slideToValue,this.invalidateDisplayList(),r.stop()),this.slideToValue=this.nearestValidValue(e,i[7]),this.slideToValue===this.animationValue)return n;var o=this._slideDuration*(Math.abs(this.animationValue-this.slideToValue)/(i[0]-i[2]));r.duration=o===1/0?0:o,r.from=this.animationValue,r.to=this.slideToValue,r.play()}else this.animationValue=this.value;return n},i.prototype.animationUpdateHandler=function(e){var t=this.$Range,i=this.nearestValidValue(e.currentValue,t[7]);this.animationValue=Math.min(t[0],Math.max(t[2],i)),this.invalidateDisplayList()},i.prototype.partAdded=function(e,i){t.prototype.partAdded.call(this,e,i),i===this.thumb&&(this.thumb.x&&(this.thumbInitX=this.thumb.x),this.thumb.y&&(this.thumbInitY=this.thumb.y),this.thumb.addEventListener(egret.Event.RESIZE,this.onThumbResize,this))},i.prototype.partRemoved=function(e,i){t.prototype.partRemoved.call(this,e,i),i===this.thumb&&this.thumb.removeEventListener(egret.Event.RESIZE,this.onThumbResize,this)},i.prototype.onThumbResize=function(e){this.updateSkinDisplayList()},i.prototype.updateSkinDisplayList=function(){var t=this.animation.isPlaying?this.animationValue:this.value,i=this.maximum,n=this.thumb;if(n){var r=n.width,o=n.height,a=Math.round(t/i*r);(0>a||a===1/0)&&(a=0);var s=Math.round(t/i*o);(0>s||s===1/0)&&(s=0);var l=n.$scrollRect;l||(l=egret.$TempRectangle),l.setTo(0,0,r,o);var u=n.x-l.x,c=n.y-l.y;switch(this._direction){case e.Direction.LTR:l.width=a,n.x=u;break;case e.Direction.RTL:l.width=a,l.x=r-a,n.x=l.x;break;case e.Direction.TTB:l.height=s,n.y=c;break;case e.Direction.BTT:l.height=s,l.y=o-s,n.y=l.y}n.scrollRect=l}this.labelDisplay&&(this.labelDisplay.text=this.valueToLabel(t,i))},i}(e.Range);e.ProgressBar=t,__reflect(t.prototype,"eui.ProgressBar")}(eui||(eui={}));var eui;!function(e){var t={},i=function(i){function n(){var e=i.call(this)||this;return e.$indexNumber=0,e.$radioButtonGroup=null,e._group=null,e.groupChanged=!1,e._groupName="radioGroup",e._value=null,e.groupName="radioGroup",e}return __extends(n,i),Object.defineProperty(n.prototype,"enabled",{get:function(){return this.$Component[3]?!this.$radioButtonGroup||this.$radioButtonGroup.$enabled:!1},set:function(e){this.$setEnabled(e)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"group",{get:function(){if(!this._group&&this._groupName){var i=t[this._groupName];i||(i=new e.RadioButtonGroup,i.$name=this._groupName,t[this._groupName]=i),this._group=i}return this._group},set:function(e){this._group!=e&&(this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=e,this._groupName=e?this.group.$name:"radioGroup",this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"groupName",{get:function(){return this._groupName},set:function(e){e&&""!=e&&(this._groupName=e,this.$radioButtonGroup&&this.$radioButtonGroup.$removeInstance(this,!1),this._group=null,this.groupChanged=!0,this.invalidateProperties(),this.invalidateDisplayList())},enumerable:!0,configurable:!0}),n.prototype.$setSelected=function(e){var t=i.prototype.$setSelected.call(this,e);return this.invalidateDisplayList(),t},Object.defineProperty(n.prototype,"value",{get:function(){return this._value},set:function(t){this._value!=t&&(this._value=t,this.$selected&&this.group&&e.PropertyEvent.dispatchPropertyEvent(this.group,e.PropertyEvent.PROPERTY_CHANGE,"selectedValue"))},enumerable:!0,configurable:!0}),n.prototype.commitProperties=function(){this.groupChanged&&(this.addToGroup(),this.groupChanged=!1),i.prototype.commitProperties.call(this)},n.prototype.updateDisplayList=function(e,t){i.prototype.updateDisplayList.call(this,e,t),this.group&&(this.$selected?this._group.$setSelection(this,!1):this.group.selection==this&&this._group.$setSelection(null,!1))},n.prototype.buttonReleased=function(){this.enabled&&!this.selected&&(this.$radioButtonGroup||this.addToGroup(),i.prototype.buttonReleased.call(this),this.group.$setSelection(this,!0))},n.prototype.addToGroup=function(){var e=this.group;return e&&e.$addInstance(this),e},n}(e.ToggleButton);e.RadioButton=i,__reflect(i.prototype,"eui.RadioButton")}(eui||(eui={}));var eui;!function(e){function t(e,i){var n=e.parent,r=i.parent;if(!n||!r)return 0;var o=e.$nestLevel,a=i.$nestLevel,s=0,l=0;return n==r&&(s=n.getChildIndex(e),l=r.getChildIndex(i)),o>a||s>l?1:a>o||l>s?-1:e==i?0:t(n,r)}var i=0,n=function(n){function r(){var e=n.call(this)||this;return e.$name=null,e.radioButtons=[],e.$enabled=!0,e._selectedValue=null,e._selection=null,e.$name="_radioButtonGroup"+i++,e}return __extends(r,n),r.prototype.getRadioButtonAt=function(e){return this.radioButtons[e]},Object.defineProperty(r.prototype,"enabled",{get:function(){return this.$enabled},set:function(e){if(e=!!e,this.$enabled!==e){this.$enabled=e;for(var t=this.radioButtons,i=t.length,n=0;i>n;n++)t[n].invalidateState()}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"numRadioButtons",{get:function(){return this.radioButtons.length},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selectedValue",{get:function(){return this.selection?null!=this.selection.value?this.selection.value:this.selection.label:null},set:function(t){if(this._selectedValue=t,null==t)return void this.$setSelection(null,!1);for(var i=this.numRadioButtons,n=0;i>n;n++){var r=this.radioButtons[n];if(r.value==t||r.label==t){this.changeSelection(n,!1),this._selectedValue=null,e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedValue");break}}},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){return this._selection},set:function(e){this._selection!=e&&this.$setSelection(e,!1)},enumerable:!0,configurable:!0}),r.prototype.$addInstance=function(e){e.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this);var i=this.radioButtons;i.push(e),i.sort(t);for(var n=i.length,r=0;n>r;r++)i[r].$indexNumber=r;this._selectedValue&&(this.selectedValue=this._selectedValue),1==e.selected&&(this.selection=e),e.$radioButtonGroup=this,e.invalidateState()},r.prototype.$removeInstance=function(e,t){if(e)for(var i=!1,n=this.radioButtons,r=n.length,o=0;r>o;o++){var a=n[o];i?a.$indexNumber=a.$indexNumber-1:a==e&&(t&&e.addEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),e==this._selection&&(this._selection=null),e.$radioButtonGroup=null,e.invalidateState(),this.radioButtons.splice(o,1),i=!0,o--,r--)}},r.prototype.$setSelection=function(t,i){if(this._selection==t)return!1;if(t){for(var n=this.numRadioButtons,r=0;n>r;r++)if(t==this.getRadioButtonAt(r)){this.changeSelection(r,i);break}}else this._selection&&(this._selection.selected=!1,this._selection=null,i&&this.dispatchEventWith(egret.Event.CHANGE));return e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedValue"),!0},r.prototype.changeSelection=function(e,t){var i=this.getRadioButtonAt(e);i&&i!=this._selection&&(this._selection&&(this._selection.selected=!1),this._selection=i,this._selection.selected=!0,t&&this.dispatchEventWith(egret.Event.CHANGE))},r.prototype.addedHandler=function(e){var t=e.target;t==e.currentTarget&&(t.removeEventListener(egret.Event.ADDED_TO_STAGE,this.addedHandler,this),this.$addInstance(t))},r.prototype.removedHandler=function(e){var t=e.target;t==e.currentTarget&&(t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removedHandler,this),this.$removeInstance(t,!0))},r}(egret.EventDispatcher);e.RadioButtonGroup=n,__reflect(n.prototype,"eui.RadioButtonGroup"),e.registerBindable(n.prototype,"selectedValue")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(t,i,n){var r=e.call(this)||this;return r.$fillColor=0,r.$fillAlpha=1,r.$strokeColor=4473924,r.$strokeAlpha=1,r.$strokeWeight=0,r.$ellipseWidth=0,r.$ellipseHeight=0,r.touchChildren=!1,r.$graphics=new egret.Graphics,r.$graphics.$setTarget(r),r.width=t,r.height=i,r.fillColor=n,r}return __extends(t,e),t.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(8)},Object.defineProperty(t.prototype,"graphics",{get:function(){return this.$graphics},enumerable:!0,configurable:!0}),t.prototype.$measureContentBounds=function(e){this.$graphics&&e.setTo(0,0,this.width,this.height)},Object.defineProperty(t.prototype,"fillColor",{get:function(){return this.$fillColor},set:function(e){void 0!=e&&this.$fillColor!=e&&(this.$fillColor=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"fillAlpha",{get:function(){return this.$fillAlpha},set:function(e){this.$fillAlpha!=e&&(this.$fillAlpha=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeColor",{get:function(){return this.$strokeColor},set:function(e){this.$strokeColor!=e&&(this.$strokeColor=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeAlpha",{get:function(){return this.$strokeAlpha},set:function(e){this.$strokeAlpha!=e&&(this.$strokeAlpha=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"strokeWeight",{get:function(){return this.$strokeWeight},set:function(e){this.$strokeWeight!=e&&(this.$strokeWeight=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ellipseWidth",{get:function(){return this.$ellipseWidth},set:function(e){this.$ellipseWidth!=e&&(this.$ellipseWidth=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ellipseHeight",{get:function(){return this.$ellipseHeight},set:function(e){this.$ellipseHeight!=e&&(this.$ellipseHeight=e,this.invalidateDisplayList())},enumerable:!0,configurable:!0}),t.prototype.updateDisplayList=function(e,t){var i=this.graphics;i.clear(),this.$strokeWeight>0&&(i.beginFill(this.$fillColor,0),i.lineStyle(this.$strokeWeight,this.$strokeColor,this.$strokeAlpha,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight/2,this.$strokeWeight/2,e-this.$strokeWeight,t-this.$strokeWeight):i.drawRoundRect(this.$strokeWeight/2,this.$strokeWeight/2,e-this.$strokeWeight,t-this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()),i.beginFill(this.$fillColor,this.$fillAlpha),i.lineStyle(this.$strokeWeight,this.$strokeColor,0,!0,"normal","square","miter"),0==this.$ellipseWidth&&0==this.$ellipseHeight?i.drawRect(this.$strokeWeight,this.$strokeWeight,e-2*this.$strokeWeight,t-2*this.$strokeWeight):i.drawRoundRect(this.$strokeWeight,this.$strokeWeight,e-2*this.$strokeWeight,t-2*this.$strokeWeight,this.$ellipseWidth,this.$ellipseHeight),i.endFill()},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.$graphics&&this.$graphics.$onRemoveFromStage()},t}(e.Component);e.Rect=t,__reflect(t.prototype,"eui.Rect")}(eui||(eui={}));var eui;!function(e){var t,i=function(i){function n(){var t=i.call(this)||this;t.$bounces=!0,t.horizontalScrollBar=null,t.verticalScrollBar=null;var n=new e.sys.TouchScroll(t.horizontalUpdateHandler,t.horizontalEndHandler,t),r=new e.sys.TouchScroll(t.verticalUpdateHandler,t.verticalEndHanlder,t);return t.$Scroller={0:"auto",1:"auto",2:null,3:0,4:0,5:!1,6:!1,7:!1,8:n,9:r,10:null,11:!1,12:!1},t}return __extends(n,i),Object.defineProperty(n.prototype,"bounces",{get:function(){return this.$bounces},set:function(e){this.$bounces=!!e;var t=this.$Scroller[8];t&&(t.$bounces=this.$bounces);var i=this.$Scroller[9];i&&(i.$bounces=this.$bounces)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"throwSpeed",{get:function(){return this.$Scroller[8].$scrollFactor},set:function(e){e=+e,0>e&&(e=0),this.$Scroller[8].$scrollFactor=e,this.$Scroller[9].$scrollFactor=e},enumerable:!0,configurable:!0}),n.prototype.$getThrowInfo=function(i,n){return t?(t.currentPos=i,t.toPos=n):t=new e.ScrollerThrowEvent(e.ScrollerThrowEvent.THROW,!1,!1,i,n),t},Object.defineProperty(n.prototype,"scrollPolicyV",{get:function(){return this.$Scroller[0]},set:function(e){var t=this.$Scroller;t[0]!=e&&(t[0]=e,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"scrollPolicyH",{get:function(){return this.$Scroller[1]},set:function(e){var t=this.$Scroller;t[1]!=e&&(t[1]=e,this.checkScrollPolicy())},enumerable:!0,configurable:!0}),n.prototype.stopAnimation=function(){var t=this.$Scroller,i=t[9],n=t[8];i.animation.isPlaying?e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END):n.animation.isPlaying&&e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END),i.stop(),n.stop();var r=this.verticalScrollBar,o=this.horizontalScrollBar;r&&r.autoVisibility&&(r.visible=!1),o&&o.autoVisibility&&(o.visible=!1)},Object.defineProperty(n.prototype,"viewport",{get:function(){return this.$Scroller[10]},set:function(e){var t=this.$Scroller;e!=t[10]&&(this.uninstallViewport(),t[10]=e,t[11]=!1,this.installViewport())},enumerable:!0,configurable:!0}),n.prototype.installViewport=function(){var e=this.viewport;e&&(this.addChildAt(e,0),e.scrollEnabled=!0,e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),e.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),e.addEventListener(egret.Event.REMOVED,this.onViewPortRemove,this)),this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=e),this.verticalScrollBar&&(this.verticalScrollBar.viewport=e)},n.prototype.uninstallViewport=function(){this.horizontalScrollBar&&(this.horizontalScrollBar.viewport=null),this.verticalScrollBar&&(this.verticalScrollBar.viewport=null);var e=this.viewport;e&&(e.scrollEnabled=!1,e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onTouchBeginCapture,this,!0),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEndCapture,this,!0),e.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTapCapture,this,!0),e.removeEventListener(egret.Event.REMOVED,this.onViewPortRemove,this),0==this.$Scroller[11]&&this.removeChild(e))},n.prototype.onViewPortRemove=function(e){e.target==this.viewport&&(this.$Scroller[11]=!0,this.viewport=null)},n.prototype.setSkin=function(e){i.prototype.setSkin.call(this,e);var t=this.viewport;t&&this.addChildAt(t,0)},n.prototype.onTouchBeginCapture=function(e){if(this.$stage){this.$Scroller[12]=!1;var t=this.checkScrollPolicy();t&&this.onTouchBegin(e)}},n.prototype.onTouchEndCapture=function(e){this.$Scroller[12]&&(e.$bubbles=!1,this.dispatchBubbleEvent(e),e.$bubbles=!0,e.stopPropagation(),this.onTouchEnd(e))},n.prototype.onTouchTapCapture=function(e){this.$Scroller[12]&&(e.$bubbles=!1,this.dispatchBubbleEvent(e),e.$bubbles=!0,e.stopPropagation())},n.prototype.checkScrollPolicy=function(){var e=this.$Scroller,t=e[10];if(!t)return!1;var i,n=t.$UIComponent;switch(e[1]){case"auto":i=t.contentWidth>n[10]||0!==t.scrollH?!0:!1;break;case"on":i=!0;break;case"off":i=!1}e[6]=i;var r;switch(e[0]){case"auto":r=t.contentHeight>n[11]||0!==t.scrollV?!0:!1;break;case"on":r=!0;break;case"off":r=!1}return e[7]=r,i||r},n.prototype.onTouchBegin=function(e){if(!e.isDefaultPrevented()&&this.checkScrollPolicy()){this.downTarget=e.target;var t=this.$Scroller;this.stopAnimation(),t[3]=e.$stageX,t[4]=e.$stageY,t[6]&&t[8].start(e.$stageX),t[7]&&t[9].start(e.$stageY);var i=this.$stage;this.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),i.addEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),this.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this),this.tempStage=i}},n.prototype.onTouchMove=function(t){if(!t.isDefaultPrevented()){var i=this.$Scroller;if(!i[5]){var r=void 0;r=Math.abs(i[3]-t.$stageX)<n.scrollThreshold?!1:!0;var o=void 0;if(o=Math.abs(i[4]-t.$stageY)<n.scrollThreshold?!1:!0,!r&&!o)return;if(!o&&r&&"off"==i[1])return;if(!r&&o&&"off"==i[0])return;i[12]=!0,i[5]=!0,this.dispatchCancelEvent(t);var a=this.horizontalScrollBar,s=this.verticalScrollBar;a&&a.autoVisibility&&i[6]&&(a.visible=!0),s&&s.autoVisibility&&i[7]&&(s.visible=!0),i[2]&&i[2].reset(),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_START),this.$stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this)}t.preventDefault();var l=i[10],u=l.$UIComponent;i[6]&&i[8].update(t.$stageX,l.contentWidth-u[10],l.scrollH),i[7]&&i[9].update(t.$stageY,l.contentHeight-u[11],l.scrollV)}},n.prototype.onTouchCancel=function(e){this.$Scroller[5]||this.onRemoveListeners()},n.prototype.dispatchBubbleEvent=function(e){var t=this.$Scroller[10];if(t){var i=egret.Event.create(egret.TouchEvent,e.type,e.bubbles,e.cancelable);i.$initTo(e.$stageX,e.$stageY,e.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,a=.5*r.length,s=-1,l=0;o>l;l++)if(r[l]===t){s=l;break}r.splice(0,r.length-s+1),a=0,this.$dispatchPropagationEvent(i,r,a),egret.Event.release(i)}},n.prototype.dispatchCancelEvent=function(e){var t=this.$Scroller[10];if(t){var i=egret.Event.create(egret.TouchEvent,egret.TouchEvent.TOUCH_CANCEL,e.bubbles,e.cancelable);i.$initTo(e.$stageX,e.$stageY,e.touchPointID);var n=this.downTarget;i.$setTarget(n);for(var r=this.$getPropagationList(n),o=r.length,a=.5*r.length,s=-1,l=0;o>l;l++)if(r[l]===t){s=l;break}r.splice(0,s+1-2),r.splice(r.length-1-s+2,s+1-2),a-=s+1,this.$dispatchPropagationEvent(i,r,a),egret.Event.release(i)}},n.prototype.onTouchEnd=function(e){var t=this.$Scroller;t[5]=!1,this.onRemoveListeners();var i=t[10],n=i.$UIComponent;t[8].isStarted()&&t[8].finish(i.scrollH,i.contentWidth-n[10]),t[9].isStarted()&&t[9].finish(i.scrollV,i.contentHeight-n[11])},n.prototype.onRemoveListeners=function(){var e=this.tempStage||this.$stage;this.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onTouchEnd,this,!0),e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.onTouchMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onTouchCancel,this),this.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.onRemoveListeners,this)},n.prototype.horizontalUpdateHandler=function(e){var t=this.$Scroller[10];t&&(t.scrollH=e),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.verticalUpdateHandler=function(e){var t=this.$Scroller[10];t&&(t.scrollV=e),this.dispatchEventWith(egret.Event.CHANGE)},n.prototype.horizontalEndHandler=function(){this.$Scroller[9].isPlaying()||this.onChangeEnd()},n.prototype.verticalEndHanlder=function(){this.$Scroller[8].isPlaying()||this.onChangeEnd()},n.prototype.onChangeEnd=function(){var t=this.$Scroller,i=this.horizontalScrollBar,n=this.verticalScrollBar;(i&&i.visible||n&&n.visible)&&(t[2]||(t[2]=new egret.Timer(200,1),t[2].addEventListener(egret.TimerEvent.TIMER_COMPLETE,this.onAutoHideTimer,this)),t[2].reset(),t[2].start()),e.UIEvent.dispatchUIEvent(this,e.UIEvent.CHANGE_END)},n.prototype.onAutoHideTimer=function(e){var t=this.horizontalScrollBar,i=this.verticalScrollBar;t&&t.autoVisibility&&(t.visible=!1),i&&i.autoVisibility&&(i.visible=!1)},n.prototype.updateDisplayList=function(e,t){i.prototype.updateDisplayList.call(this,e,t);var n=this.viewport;n&&(n.setLayoutBoundsSize(e,t),n.setLayoutBoundsPosition(0,0))},n.prototype.partAdded=function(e,t){i.prototype.partAdded.call(this,e,t),t==this.horizontalScrollBar?(this.horizontalScrollBar.touchChildren=!1,this.horizontalScrollBar.touchEnabled=!1,this.horizontalScrollBar.viewport=this.viewport,this.horizontalScrollBar.autoVisibility&&(this.horizontalScrollBar.visible=!1)):t==this.verticalScrollBar&&(this.verticalScrollBar.touchChildren=!1,this.verticalScrollBar.touchEnabled=!1,this.verticalScrollBar.viewport=this.viewport,this.verticalScrollBar.autoVisibility&&(this.verticalScrollBar.visible=!1))},n.scrollThreshold=5,n}(e.Component);e.Scroller=i,__reflect(i.prototype,"eui.Scroller"),e.registerProperty(i,"viewport","eui.IViewport",!0)}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var i=null!==t&&t.apply(this,arguments)||this;return i.maxWidth=1e5,i.minWidth=0,i.maxHeight=1e5,i.minHeight=0,i.width=0/0,i.height=0/0,i.$elementsContent=[],i._hostComponent=null,i.$stateValues=new e.sys.StateValues,i}return __extends(i,t),Object.defineProperty(i.prototype,"elementsContent",{set:function(e){this.$elementsContent=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"hostComponent",{get:function(){return this._hostComponent},set:function(t){if(this._hostComponent!=t){this._hostComponent&&this._hostComponent.removeEventListener(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this),this._hostComponent=t;var i=this.$stateValues;i.parent=t,t&&(this.commitCurrentState(),this.$stateValues.intialized||(t.$stage?this.initializeStates(t.$stage):t.once(egret.Event.ADDED_TO_STAGE,this.onAddedToStage,this))),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"hostComponent")}},enumerable:!0,configurable:!0}),i.prototype.onAddedToStage=function(e){this.initializeStates(this._hostComponent.$stage)},i}(egret.EventDispatcher);e.Skin=t,__reflect(t.prototype,"eui.Skin"),e.sys.mixin(t,e.sys.StateClient),e.registerProperty(t,"elementsContent","Array",!0),e.registerProperty(t,"states","State[]"),e.registerBindable(t.prototype,"hostComponent")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.indexBeingUpdated=!1,e.requireSelection=!0,e.useVirtualLayout=!1,e}return __extends(i,t),i.prototype.createChildren=function(){if(!this.$layout){var i=new e.HorizontalLayout;i.gap=0,i.horizontalAlign=e.JustifyAlign.JUSTIFY,i.verticalAlign=e.JustifyAlign.CONTENT_JUSTIFY,this.$setLayout(i)}t.prototype.createChildren.call(this)},i.prototype.$setDataProvider=function(i){var n=this.$dataProvider;return n&&n instanceof e.ViewStack&&(n.removeEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.removeEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),i&&i instanceof e.ViewStack&&(i.addEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.onViewStackIndexChange,this),this.addEventListener(egret.Event.CHANGE,this.onIndexChanged,this)),t.prototype.$setDataProvider.call(this,i)},i.prototype.onIndexChanged=function(e){this.indexBeingUpdated=!0,this.$dataProvider.selectedIndex=this.selectedIndex,this.indexBeingUpdated=!1},i.prototype.onViewStackIndexChange=function(e){"selectedIndex"!=e.property||this.indexBeingUpdated||this.setSelectedIndex(this.$dataProvider.selectedIndex,!1)},i}(e.ListBase);e.TabBar=t,__reflect(t.prototype,"eui.TabBar")}(eui||(eui={}));var eui;!function(e){var t=egret.FocusEvent,i=function(i){function n(){var e=i.call(this)||this;return e.isFocus=!1,e.$TextInput={0:null,1:null,2:null,3:null,4:null,5:null,6:"",7:null,8:egret.TextFieldInputType.TEXT},e}return __extends(n,i),Object.defineProperty(n.prototype,"prompt",{get:function(){return this.promptDisplay?this.promptDisplay.text:this.$TextInput[0]},set:function(e){this.$TextInput[0]=e,this.promptDisplay&&(this.promptDisplay.text=e),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"displayAsPassword",{get:function(){if(this.textDisplay)return this.textDisplay.displayAsPassword;var e=this.$TextInput[1];return e?e:!1},set:function(e){this.$TextInput[1]=e,this.textDisplay&&(this.textDisplay.displayAsPassword=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"inputType",{get:function(){return this.textDisplay?this.textDisplay.inputType:this.$TextInput[8]},set:function(e){this.$TextInput[8]=e,this.textDisplay&&(this.textDisplay.inputType=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"textColor",{get:function(){return this.textDisplay?this.textDisplay.textColor:this.$TextInput[2]},set:function(e){this.$TextInput[2]=e,this.textDisplay&&(this.textDisplay.textColor=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxChars",{get:function(){if(this.textDisplay)return this.textDisplay.maxChars;var e=this.$TextInput[3];return e?e:0},set:function(e){this.$TextInput[3]=e,this.textDisplay&&(this.textDisplay.maxChars=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxWidth",{get:function(){if(this.textDisplay)return this.textDisplay.maxWidth;var e=this.$TextInput[4];return e?e:1e5},set:function(e){this.$TextInput[4]=e,this.textDisplay&&(this.textDisplay.maxWidth=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"maxHeight",{get:function(){this.textDisplay;var e=this.$TextInput[5];return e?e:1e5},set:function(e){this.$TextInput[5]=e,this.textDisplay&&(this.textDisplay.maxHeight=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"text",{get:function(){return this.textDisplay?this.textDisplay.text:this.$TextInput[6]},set:function(e){this.$TextInput[6]=e,this.textDisplay&&(this.textDisplay.text=e),this.invalidateProperties(),this.invalidateState()},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"restrict",{get:function(){return this.textDisplay?this.textDisplay.restrict:this.$TextInput[7]},set:function(e){this.$TextInput[7]=e,this.textDisplay&&(this.textDisplay.restrict=e),this.invalidateProperties()},enumerable:!0,configurable:!0}),n.prototype.focusInHandler=function(e){this.isFocus=!0,this.invalidateState()},n.prototype.focusOutHandler=function(e){this.isFocus=!1,this.invalidateState()},n.prototype.getCurrentState=function(){var e=this.skin;return!this.prompt||this.isFocus||this.text?this.enabled?"normal":"disabled":this.enabled&&e.hasState("normalWithPrompt")?"normalWithPrompt":!this.enabled&&e.hasState("disabledWithPrompt")?"disabledWithPrompt":void 0},n.prototype.partAdded=function(n,r){i.prototype.partAdded.call(this,n,r);var o=this.$TextInput;r==this.textDisplay?(this.textDisplayAdded(),this.textDisplay instanceof e.EditableText&&(this.textDisplay.addEventListener(t.FOCUS_IN,this.focusInHandler,this),this.textDisplay.addEventListener(t.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&o[0]&&(this.promptDisplay.text=o[0])},n.prototype.partRemoved=function(n,r){i.prototype.partRemoved.call(this,n,r),r==this.textDisplay?(this.textDisplayRemoved(),this.textDisplay instanceof e.EditableText&&(this.textDisplay.removeEventListener(t.FOCUS_IN,this.focusInHandler,this),this.textDisplay.removeEventListener(t.FOCUS_OUT,this.focusOutHandler,this))):r==this.promptDisplay&&(this.$TextInput[0]=this.promptDisplay.text)
},n.prototype.textDisplayAdded=function(){var e=this.$TextInput;e[1]&&(this.textDisplay.displayAsPassword=e[1]),e[2]&&(this.textDisplay.textColor=e[2]),e[3]&&(this.textDisplay.maxChars=e[3]),e[4]&&(this.textDisplay.maxWidth=e[4]),e[5]&&(this.textDisplay.maxHeight=e[5]),e[6]&&(this.textDisplay.text=e[6]),e[7]&&(this.textDisplay.restrict=e[7]),e[8]&&(this.textDisplay.inputType=e[8])},n.prototype.textDisplayRemoved=function(){var e=this.$TextInput;e[1]=this.textDisplay.displayAsPassword,e[2]=this.textDisplay.textColor,e[3]=this.textDisplay.maxChars,e[4]=this.textDisplay.maxWidth,e[5]=this.textDisplay.maxHeight,e[6]=this.textDisplay.text,e[7]=this.textDisplay.restrict,e[8]=this.textDisplay.inputType},n}(e.Component);e.TextInput=i,__reflect(i.prototype,"eui.TextInput")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(e.ToggleButton);e.CheckBox=t,__reflect(t.prototype,"eui.CheckBox")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(e.ToggleButton);e.ToggleSwitch=t,__reflect(t.prototype,"eui.ToggleSwitch")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.addEventListener(egret.Event.ADDED_TO_STAGE,t.onAddToStage,t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,t.onRemoveFromStage,t),t}return __extends(t,e),t.prototype.onAddToStage=function(e){this.$stage.addEventListener(egret.Event.RESIZE,this.onResize,this),this.onResize()},t.prototype.onRemoveFromStage=function(e){this.$stage.removeEventListener(egret.Event.RESIZE,this.onResize,this)},t.prototype.onResize=function(e){var t=this.$stage;this.$setWidth(t.$stageWidth),this.$setHeight(t.$stageHeight)},t}(e.Group);e.UILayer=t,__reflect(t.prototype,"eui.UILayer")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var a=o.height,s=o.x,l=r.scrollV,u=r.contentHeight,c=r.height;if(0>=l){var h=a*(1- -l/(.5*c));h=Math.max(5,Math.round(h)),n.setLayoutBoundsSize(0/0,h),n.setLayoutBoundsPosition(s,0)}else if(l>=u-c){var h=a*(1-(l-u+c)/(.5*c));h=Math.max(5,Math.round(h)),n.setLayoutBoundsSize(0/0,h),n.setLayoutBoundsPosition(s,i-h)}else{var p=(i-a)*l/(u-c);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(s,p)}}},t.prototype.onPropertyChanged=function(e){switch(e.property){case"scrollV":case"contentHeight":this.invalidateDisplayList()}},t}(e.ScrollBarBase);e.VScrollBar=t,__reflect(t.prototype,"eui.VScrollBar")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.pointToValue=function(e,t){if(!this.thumb||!this.track)return 0;var i=this.$Range,n=i[0]-i[2],r=this.getThumbRange();return i[2]+(0!=r?(r-t)/r*n:0)},t.prototype.getThumbRange=function(){var e=egret.$TempRectangle;this.track.getLayoutBounds(e);var t=e.height;return this.thumb.getLayoutBounds(e),t-e.height},t.prototype.updateSkinDisplayList=function(){if(this.thumb&&this.track){var e=this.$Range,t=this.getThumbRange(),i=e[0]-e[2],n=i>0?t-(this.pendingValue-e[2])/i*t:0,r=this.track.localToGlobal(0,n,egret.$TempPoint),o=r.x,a=r.y,s=this.thumb.$parent.globalToLocal(o,a,egret.$TempPoint).y,l=egret.$TempRectangle,u=l.height;if(this.thumb.getLayoutBounds(l),this.thumb.setLayoutBoundsPosition(l.x,Math.round(s)),this.trackHighlight){var c=this.trackHighlight.$parent.globalToLocal(o,a,egret.$TempPoint).y;this.trackHighlight.y=Math.round(c+u),this.trackHighlight.height=Math.round(t-c)}}},t}(e.SliderBase);e.VSlider=t,__reflect(t.prototype,"eui.VSlider")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){var i=t.call(this)||this;return i._selectedChild=null,i.proposedSelectedIndex=e.ListBase.NO_PROPOSED_SELECTION,i._selectedIndex=-1,i}return __extends(i,t),Object.defineProperty(i.prototype,"layout",{get:function(){return this.$layout},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedChild",{get:function(){var e=this.selectedIndex;return e>=0&&e<this.numChildren?this.getChildAt(e):null},set:function(e){var t=this.getChildIndex(e);t>=0&&t<this.numChildren&&this.setSelectedIndex(t)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"selectedIndex",{get:function(){return this.proposedSelectedIndex!=e.ListBase.NO_PROPOSED_SELECTION?this.proposedSelectedIndex:this._selectedIndex},set:function(e){e=0|+e,this.setSelectedIndex(e)},enumerable:!0,configurable:!0}),i.prototype.setSelectedIndex=function(t){t!=this.selectedIndex&&(this.proposedSelectedIndex=t,this.invalidateProperties(),e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"selectedIndex"))},i.prototype.$childAdded=function(i,n){t.prototype.$childAdded.call(this,i,n),this.showOrHide(i,!1);var r=this.selectedIndex;-1==r?this.setSelectedIndex(n):n<=this.selectedIndex&&this.$stage&&this.setSelectedIndex(r+1),e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,e.CollectionEventKind.ADD,n,-1,[i.name])},i.prototype.$childRemoved=function(i,n){t.prototype.$childRemoved.call(this,i,n),this.showOrHide(i,!0);var r=this.selectedIndex;n==r?this.numChildren>0?0==n?(this.proposedSelectedIndex=0,this.invalidateProperties()):this.setSelectedIndex(0):this.setSelectedIndex(-1):r>n&&this.setSelectedIndex(r-1),e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,e.CollectionEventKind.REMOVE,n,-1,[i.name])},i.prototype.commitProperties=function(){t.prototype.commitProperties.call(this),this.proposedSelectedIndex!=e.ListBase.NO_PROPOSED_SELECTION&&(this.commitSelection(this.proposedSelectedIndex),this.proposedSelectedIndex=e.ListBase.NO_PROPOSED_SELECTION)},i.prototype.commitSelection=function(e){e>=0&&e<this.numChildren?(this._selectedIndex=e,this._selectedChild&&this.showOrHide(this._selectedChild,!1),this._selectedChild=this.getElementAt(this._selectedIndex),this.showOrHide(this._selectedChild,!0)):(this._selectedChild=null,this._selectedIndex=-1),this.invalidateSize(),this.invalidateDisplayList()},i.prototype.showOrHide=function(e,t){egret.is(e,"eui.UIComponent")&&(e.includeInLayout=t),e.visible=t},Object.defineProperty(i.prototype,"length",{get:function(){return this.$children.length},enumerable:!0,configurable:!0}),i.prototype.getItemAt=function(e){var t=this.$children[e];return t?t.name:""},i.prototype.getItemIndex=function(e){for(var t=this.$children,i=t.length,n=0;i>n;n++)if(t[n].name==e)return n;return-1},i}(e.Group);e.ViewStack=t,__reflect(t.prototype,"eui.ViewStack",["eui.ICollection","egret.IEventDispatcher"]),e.registerBindable(t.prototype,"selectedIndex")}(eui||(eui={}));var eui;!function(e){var t;!function(e){function t(e){return-.5*(Math.cos(Math.PI*e)-1)}var i=function(){function e(e,i){this.easerFunction=t,this.isPlaying=!1,this.duration=500,this.currentValue=0,this.from=0,this.to=0,this.startTime=0,this.endFunction=null,this.updateFunction=e,this.thisObject=i}return e.prototype.play=function(){this.stop(),this.start()},e.prototype.start=function(){this.isPlaying=!1,this.currentValue=0,this.startTime=egret.getTimer(),this.doInterval(this.startTime),egret.startTick(this.doInterval,this)},e.prototype.stop=function(){this.isPlaying=!1,this.startTime=0,egret.stopTick(this.doInterval,this)},e.prototype.doInterval=function(e){var t=e-this.startTime;this.isPlaying||(this.isPlaying=!0);var i=this.duration,n=0==i?1:Math.min(t,i)/i;this.easerFunction&&(n=this.easerFunction(n)),this.currentValue=this.from+(this.to-this.from)*n,this.updateFunction&&this.updateFunction.call(this.thisObject,this);var r=t>=i;return r&&this.stop(),r&&this.endFunction&&this.endFunction.call(this.thisObject,this),!0},e}();e.Animation=i,__reflect(i.prototype,"eui.sys.Animation")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function r(e){var i=e.target;t.call(n,i.response)}function o(e){i.call(n)}var a=new egret.HttpRequest;a.addEventListener(egret.Event.COMPLETE,r,n),a.addEventListener(egret.IOErrorEvent.IO_ERROR,o,n),a.responseType=egret.HttpResponseType.TEXT,a.open(e),a.send()},e}();e.DefaultThemeAdapter=t,__reflect(t.prototype,"eui.DefaultThemeAdapter",["eui.IThemeAdapter"])}(eui||(eui={}));var eui;!function(e){function t(e,i){var n=Object.getOwnPropertyDescriptor(e,i);if(n)return n;var r=Object.getPrototypeOf(e);return r?t(r,i):null}function i(e,t){for(var i=e[n],r=i.length,o=0;r>o;o+=2){var a=i[o],s=i[o+1];a.call(s,t)}}var n="__listeners__",r="__bindables__",o=0,a=function(){function a(e,t,i,n){this.isExecuting=!1,this.property=e,this.handler=t,this.next=n,this.thisObject=i}return a.watch=function(e,t,i,n){if(t.length>0){var r=t.shift(),o=a.watch(null,t,i,n),s=new a(r,i,n,o);return s.reset(e),s}return null},a.checkBindable=function(a,s){var l=a[r];if(l&&-1!=l.indexOf(s))return!0;var u=egret.is(a,"egret.IEventDispatcher");u||a[n]||(a[n]=[]);var c=t(a,s);if(c&&c.set&&c.get){var h=c.set;c.set=function(t){this[s]!=t&&(h.call(this,t),u?e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,s):i(this,s))}}else{if(c&&(c.get||c.set))return!1;o++;var p="_"+o+s;a[p]=c?c.value:null,c={enumerable:!0,configurable:!0},c.get=function(){return this[p]},c.set=function(t){this[p]!=t&&(this[p]=t,u?e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,s):i(this,s))}}Object.defineProperty(a,s,c),e.registerBindable(a,s)},a.prototype.unwatch=function(){this.reset(null),this.handler=null,this.next&&(this.next.handler=null)},a.prototype.getValue=function(){return this.next?this.next.getValue():this.getHostPropertyValue()},a.prototype.setHandler=function(e,t){this.handler=e,this.thisObject=t,this.next&&this.next.setHandler(e,t)},a.prototype.reset=function(t){var i=this.host;if(i)if(egret.is(i,"egret.IEventDispatcher"))i.removeEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this);else{var r=i[n],o=r.indexOf(this);r.splice(o-1,2)}if(this.host=t,t)if(a.checkBindable(t,this.property),egret.is(t,"egret.IEventDispatcher"))t.addEventListener(e.PropertyEvent.PROPERTY_CHANGE,this.wrapHandler,this,!1,100);else{var r=t[n];r.push(this.onPropertyChange),r.push(this)}this.next&&this.next.reset(this.getHostPropertyValue())},a.prototype.getHostPropertyValue=function(){return this.host?this.host[this.property]:null},a.prototype.wrapHandler=function(e){this.onPropertyChange(e.property)},a.prototype.onPropertyChange=function(e){if(e==this.property&&!this.isExecuting)try{this.isExecuting=!0,this.next&&this.next.reset(this.getHostPropertyValue()),this.handler.call(this.thisObject,this.getValue())}finally{this.isExecuting=!1}},a}();e.Watcher=a,__reflect(a.prototype,"eui.Watcher")}(eui||(eui={}));var eui;!function(e){function t(t){for(var i=t[0],n=i instanceof e.Watcher?i.getValue():i,r=t.length,o=1;r>o;o++){var a=t[o];a instanceof e.Watcher&&(a=a.getValue()),n+=a}return n}var i=function(){function i(){}return i.bindProperty=function(t,i,n,r){var o=e.Watcher.watch(t,i,null,null);if(o){var a=function(e){n[r]=e};o.setHandler(a,null),a(o.getValue())}return o},i.bindHandler=function(t,i,n,r){var o=e.Watcher.watch(t,i,n,r);return o&&n.call(r,o.getValue()),o},i.$bindProperties=function(n,r,o,a,s){if(1==r.length&&1==o.length)return i.bindProperty(n,r[0].split("."),a,s);for(var l,u=function(){a[s]=t(r)},c=o.length,h=0;c>h;h++){var p=o[h],d=r[p].split(".");l=e.Watcher.watch(n,d,null,null),l&&(r[p]=l,l.setHandler(u,null))}return u(),l},i}();e.Binding=i,__reflect(i.prototype,"eui.Binding")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(e){var i=t.call(this)||this;return e?i._source=e:i._source=[],i}return __extends(i,t),Object.defineProperty(i.prototype,"source",{get:function(){return this._source},set:function(t){t||(t=[]),this._source=t,this.dispatchCoEvent(e.CollectionEventKind.RESET)},enumerable:!0,configurable:!0}),i.prototype.refresh=function(){this.dispatchCoEvent(e.CollectionEventKind.REFRESH)},Object.defineProperty(i.prototype,"length",{get:function(){return this._source.length},enumerable:!0,configurable:!0}),i.prototype.addItem=function(t){this._source.push(t),this.dispatchCoEvent(e.CollectionEventKind.ADD,this._source.length-1,-1,[t])},i.prototype.addItemAt=function(t,i){0>i||i>this._source.length,this._source.splice(i,0,t),this.dispatchCoEvent(e.CollectionEventKind.ADD,i,-1,[t])},i.prototype.getItemAt=function(e){return this._source[e]},i.prototype.getItemIndex=function(e){for(var t=this._source.length,i=0;t>i;i++)if(this._source[i]===e)return i;return-1},i.prototype.itemUpdated=function(t){var i=this.getItemIndex(t);-1!=i&&this.dispatchCoEvent(e.CollectionEventKind.UPDATE,i,-1,[t])},i.prototype.removeAll=function(){var t=this._source.concat();this._source=[],this.dispatchCoEvent(e.CollectionEventKind.REMOVE,0,-1,t)},i.prototype.removeItemAt=function(t){if(!(0>t||t>=this._source.length)){var i=this._source.splice(t,1)[0];return this.dispatchCoEvent(e.CollectionEventKind.REMOVE,t,-1,[i]),i}},i.prototype.replaceItemAt=function(t,i){if(!(0>i||i>=this._source.length)){var n=this._source.splice(i,1,t)[0];return this.dispatchCoEvent(e.CollectionEventKind.REPLACE,i,-1,[t],[n]),n}},i.prototype.replaceAll=function(e){e||(e=[]);for(var t=e.length,i=this._source.length,n=t;i>n;n++)this.removeItemAt(t);for(var n=0;t>n;n++)n>=i?this.addItemAt(e[n],n):this.replaceItemAt(e[n],n);this._source=e},i.prototype.dispatchCoEvent=function(t,i,n,r,o){e.CollectionEvent.dispatchCollectionEvent(this,e.CollectionEvent.COLLECTION_CHANGE,t,i,n,r,o)},i}(egret.EventDispatcher);e.ArrayCollection=t,__reflect(t.prototype,"eui.ArrayCollection",["eui.ICollection","egret.IEventDispatcher"]),e.registerProperty(t,"source","Array",!0)}(eui||(eui={}));var eui;!function(e){var t=e.sys.UIComponentImpl,i=function(i){function n(){var e=i.call(this)||this;return e._widthConstraint=0/0,e.$isShowPrompt=!1,e.$promptColor=6710886,e.$isFocusIn=!1,e.initializeUIValues(),e.type=egret.TextFieldType.INPUT,e.$EditableText={0:null,1:16777215,2:!1},e}return __extends(n,i),n.prototype.$invalidateTextField=function(){i.prototype.$invalidateTextField.call(this),this.invalidateSize()},n.prototype.$setWidth=function(e){var n=i.prototype.$setWidth.call(this,e),r=t.prototype.$setWidth.call(this,e);return n&&r},n.prototype.$setHeight=function(e){var n=i.prototype.$setHeight.call(this,e),r=t.prototype.$setHeight.call(this,e);return n&&r},n.prototype.$getText=function(){var e=i.prototype.$getText.call(this);return e==this.$EditableText[0]&&(e=""),e},n.prototype.$setText=function(t){var n=this.$EditableText[0];(n!=t||null==n)&&(this.$isShowPrompt=!1,this.textColor=this.$EditableText[1],this.displayAsPassword=this.$EditableText[2]),this.$isFocusIn||(""==t||null==t)&&(t=n,this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1));var r=i.prototype.$setText.call(this,t);return e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"text"),r},n.prototype.$onAddToStage=function(t,i){e.sys.UIComponentImpl.prototype.$onAddToStage.call(this,t,i),this.addEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.addEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},n.prototype.$onRemoveFromStage=function(){i.prototype.$onRemoveFromStage.call(this),this.removeEventListener(egret.FocusEvent.FOCUS_IN,this.onfocusIn,this),this.removeEventListener(egret.FocusEvent.FOCUS_OUT,this.onfocusOut,this)},Object.defineProperty(n.prototype,"prompt",{get:function(){return this.$EditableText[0]},set:function(e){var t=this.$EditableText,i=t[0];if(i!=e){t[0]=e;var n=this.text;n&&n!=i||this.showPromptText()}},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"promptColor",{get:function(){return this.$promptColor},set:function(e){if(e=0|+e,this.$promptColor!=e){this.$promptColor=e;var t=this.text;t&&t!=this.$EditableText[0]||this.showPromptText()}},enumerable:!0,configurable:!0}),n.prototype.onfocusOut=function(){this.$isFocusIn=!1,this.text||this.showPromptText()},n.prototype.onfocusIn=function(){this.$isFocusIn=!0,this.$isShowPrompt=!1,this.displayAsPassword=this.$EditableText[2];var e=this.$EditableText,t=this.text;t&&t!=e[0]||(this.textColor=e[1],this.text="")},n.prototype.showPromptText=function(){var e=this.$EditableText;this.$isShowPrompt=!0,i.prototype.$setTextColor.call(this,this.$promptColor),i.prototype.$setDisplayAsPassword.call(this,!1),this.text=e[0]},n.prototype.$setTextColor=function(e){return e=0|+e,this.$EditableText[1]=e,this.$isShowPrompt||i.prototype.$setTextColor.call(this,e),!0},n.prototype.$setDisplayAsPassword=function(e){return this.$EditableText[2]=e,this.$isShowPrompt||i.prototype.$setDisplayAsPassword.call(this,e),!0},n.prototype.createChildren=function(){this.onfocusOut()},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var e=this.$UIComponent,t=this.$TextField,n=t[3],r=0/0;isNaN(this._widthConstraint)?isNaN(e[8])?1e5!=e[13]&&(r=e[13]):r=e[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,n)},n.prototype.updateDisplayList=function(e,t){i.prototype.$setWidth.call(this,e),i.prototype.$setHeight.call(this,t)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(e,t){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(e){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(e,i){if(t.prototype.setLayoutBoundsSize.call(this,e,i),!isNaN(e)&&e!==this._widthConstraint&&0!=e){var n=this.$UIComponent;isNaN(n[9])&&e!=n[16]&&(this._widthConstraint=e,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(e,t){},n.prototype.getLayoutBounds=function(e){},n.prototype.getPreferredBounds=function(e){},n}(egret.TextField);e.EditableText=i,__reflect(i.prototype,"eui.EditableText",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),e.sys.implementUIComponent(i,egret.TextField),e.registerBindable(i.prototype,"text")}(eui||(eui={}));var eui;!function(e){var t;!function(e){function t(e){var t=e-1;return t*t*t+1}var i=4,n=[1,1.33,1.66,2],r=2.33,o=.02,a=.998,s=.95,l=Math.log(a),u=function(){function u(i,n,r){this.$scrollFactor=1,this.previousTime=0,this.velocity=0,this.previousVelocity=[],this.currentPosition=0,this.previousPosition=0,this.currentScrollPos=0,this.maxScrollPos=0,this.offsetPoint=0,this.$bounces=!0,this.started=!0,this.updateFunction=i,this.endFunction=n,this.target=r,this.animation=new e.Animation(this.onScrollingUpdate,this),this.animation.endFunction=this.finishScrolling,this.animation.easerFunction=t}return u.prototype.isPlaying=function(){return this.animation.isPlaying},u.prototype.stop=function(){this.animation.stop(),egret.stopTick(this.onTick,this),this.started=!1},u.prototype.isStarted=function(){return this.started},u.prototype.start=function(e){this.started=!0,this.velocity=0,this.previousVelocity.length=0,this.previousTime=egret.getTimer(),this.previousPosition=this.currentPosition=e,this.offsetPoint=e,egret.startTick(this.onTick,this)},u.prototype.update=function(e,t,i){t=Math.max(t,0),this.currentPosition=e,this.maxScrollPos=t;var n=this.offsetPoint-e,r=n+i;this.offsetPoint=e,0>r&&(this.$bounces?r-=.5*n:r=0),r>t&&(this.$bounces?r-=.5*n:r=t),this.currentScrollPos=r,this.updateFunction.call(this.target,r)},u.prototype.finish=function(e,t){egret.stopTick(this.onTick,this),this.started=!1;for(var i=this.velocity*r,u=this.previousVelocity,c=u.length,h=r,p=0;c>p;p++){var d=n[p];i+=u[0]*d,h+=d}var f=i/h,m=Math.abs(f),g=0,v=0;if(m>o)if(v=e+(f-o)/l*2*this.$scrollFactor,0>v||v>t)for(v=e;Math.abs(f)>o;)v-=f,f*=0>v||v>t?a*s:a,g++;else g=Math.log(o/m)/l;else v=e;if(this.target.$getThrowInfo){var y=this.target.$getThrowInfo(e,v);v=y.toPos}g>0?(this.$bounces||(0>v?v=0:v>t&&(v=t)),this.throwTo(v,g)):this.finishScrolling()},u.prototype.onTick=function(e){var t=e-this.previousTime;if(t>10){var n=this.previousVelocity;n.length>=i&&n.shift(),this.velocity=(this.currentPosition-this.previousPosition)/t,n.push(this.velocity),this.previousTime=e,this.previousPosition=this.currentPosition}return!0},u.prototype.finishScrolling=function(e){var t=this.currentScrollPos,i=this.maxScrollPos,n=t;0>t&&(n=0),t>i&&(n=i),this.throwTo(n,300)},u.prototype.throwTo=function(e,t){void 0===t&&(t=500);var i=this.currentScrollPos;if(i==e)return void this.endFunction.call(this.target);var n=this.animation;n.duration=t,n.from=i,n.to=e,n.play()},u.prototype.onScrollingUpdate=function(e){this.currentScrollPos=e.currentValue,this.updateFunction.call(this.target,e.currentValue)},u}();e.TouchScroll=u,__reflect(u.prototype,"eui.sys.TouchScroll")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.LTR="ltr",e.RTL="rtl",e.TTB="ttb",e.BTT="btt",e}();e.Direction=t,__reflect(t.prototype,"eui.Direction")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.AUTO="auto",e.OFF="off",e.ON="on",e}();e.ScrollPolicy=t,__reflect(t.prototype,"eui.ScrollPolicy")}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;return n.delayList=[],n.skinMap={},n.$styles={},n.initialized=!e,i&&egret.registerImplementation("eui.Theme",n),n.$configURL=e,n.load(e),n}return __extends(i,t),i.prototype.load=function(t){var i=this;e.getTheme(t,function(e){return i.onConfigLoaded(e)})},i.prototype.onConfigLoaded=function(e){var t;if("string"==typeof e)try{t=JSON.parse(e)}catch(i){egret.$error(3e3)}else t=e;if(t&&t.skins)for(var n=this.skinMap,r=t.skins,o=Object.keys(r),a=o.length,s=0;a>s;s++){var l=o[s];n[l]||this.mapSkin(l,r[l])}t.styles&&(this.$styles=t.styles);var u=t.paths;for(var c in u)EXML.update(c,u[c]);t.exmls&&0!=t.exmls.length?t.exmls[0].gjs?(t.exmls.forEach(function(e){return EXML.$parseURLContentAsJs(e.path,e.gjs,e.className)}),this.onLoaded()):t.exmls[0].content?(t.exmls.forEach(function(e){return EXML.$parseURLContent(e.path,e.content)}),this.onLoaded()):EXML.$loadAll(t.exmls,this.onLoaded,this,!0):this.onLoaded()},i.prototype.onLoaded=function(e,t){this.initialized=!0,this.handleDelayList(),this.dispatchEventWith(egret.Event.COMPLETE)},i.prototype.handleDelayList=function(){for(var e=this.delayList,t=e.length,i=0;t>i;i++){var n=e[i];if(!n.$Component[5]){var r=this.getSkinName(n);r&&(n.$Component[1]=r,n.$parseSkinName())}}e.length=0},i.prototype.getSkinName=function(e){if(!this.initialized)return-1==this.delayList.indexOf(e)&&this.delayList.push(e),"";var t=this.skinMap,i=t[e.hostComponentKey];return i||(i=this.findSkinName(e)),i},i.prototype.findSkinName=function(e){if(!e)return"";var t=e.__class__;if(void 0===t)return"";var i=this.skinMap[t];return i||"eui.Component"==t?i:this.findSkinName(Object.getPrototypeOf(e))},i.prototype.mapSkin=function(e,t){this.skinMap[e]=t},i.prototype.$getStyleConfig=function(e){return this.$styles[e]},i}(egret.EventDispatcher);e.Theme=t,__reflect(t.prototype,"eui.Theme")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(t,i,n,r,o,a,s,l){var u=e.call(this,t,i,n)||this;return u.$initTo(r,o,a,s,l),u}return __extends(t,e),t.prototype.$initTo=function(e,t,i,n,r){this.kind=e,this.location=0|+t,this.oldLocation=0|+i,this.items=n||[],this.oldItems=r||[]},t.prototype.clean=function(){e.prototype.clean.call(this),this.items=this.oldItems=null},t.dispatchCollectionEvent=function(e,i,n,r,o,a,s){if(!e.hasEventListener(i))return!0;var l=egret.Event.create(t,i);l.$initTo(n,r,o,a,s);var u=e.dispatchEvent(l);return egret.Event.release(l),u},t.COLLECTION_CHANGE="collectionChange",t}(egret.Event);e.CollectionEvent=t,__reflect(t.prototype,"eui.CollectionEvent")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.ADD="add",e.REFRESH="refresh",e.REMOVE="remove",e.REPLACE="replace",e.RESET="reset",e.UPDATE="update",e}();e.CollectionEventKind=t,__reflect(t.prototype,"eui.CollectionEventKind")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.item=null,t.itemRenderer=null,t.itemIndex=-1,t}return __extends(t,e),t.prototype.clean=function(){e.prototype.clean.call(this),this.item=this.itemRenderer=null},t.dispatchItemTapEvent=function(e,i,n){if(!e.hasEventListener(i))return!0;var r=egret.Event.create(t,i);r.item=n.data,r.itemIndex=n.itemIndex,r.itemRenderer=n;var o=e.dispatchEvent(r);return egret.Event.release(r),o},t.ITEM_TAP="itemTap",t}(egret.Event);e.ItemTapEvent=t,__reflect(t.prototype,"eui.ItemTapEvent")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(t,i,n,r){var o=e.call(this,t,i,n)||this;return o.property=r,o}return __extends(t,e),t.dispatchPropertyEvent=function(e,i,n){if(!e.hasEventListener(i))return!0;var r=egret.Event.create(t,i);r.property=n;var o=e.dispatchEvent(r);return egret.Event.release(r),o},t.PROPERTY_CHANGE="propertyChange",t}(egret.Event);e.PropertyEvent=t,__reflect(t.prototype,"eui.PropertyEvent")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(t,i,n,r,o){var a=e.call(this,t,i,n)||this;return r=+r,o=+o,a.currentPos=r,a.toPos=o,a}return __extends(t,e),t.THROW="throw",t}(egret.Event);e.ScrollerThrowEvent=t,__reflect(t.prototype,"eui.ScrollerThrowEvent")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(t,i,n){return e.call(this,t,i,n)||this}return __extends(t,e),t.dispatchUIEvent=function(e,i,n,r){if(!e.hasEventListener(i))return!0;var o=egret.Event.create(t,i,n,r),a=e.dispatchEvent(o);return egret.Event.release(o),a},t.CREATION_COMPLETE="creationComplete",t.CHANGE_END="changeEnd",t.CHANGE_START="changeStart",t.CLOSING="closing",t.MOVE="move",t}(egret.Event);e.UIEvent=t,__reflect(t.prototype,"eui.UIEvent")}(eui||(eui={}));var eui;!function(e){var t;!function(e){var t="eui.State",i="eui.AddItems",n="eui.SetProperty",r="eui.SetStateProperty",o="eui.Binding.$bindProperties",a=function(){function e(){this.indent=0}return e.prototype.toCode=function(){return""},e.prototype.getIndent=function(e){void 0===e&&(e=this.indent);for(var t="",i=0;e>i;i++)t+="	";return t},e}();e.CodeBase=a,__reflect(a.prototype,"eui.sys.CodeBase");var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.className="",t.superClass="",t.innerClassBlock=[],t.variableBlock=[],t.functionBlock=[],t}return __extends(t,e),t.prototype.addInnerClass=function(e){-1==this.innerClassBlock.indexOf(e)&&this.innerClassBlock.push(e)},t.prototype.addVariable=function(e){-1==this.variableBlock.indexOf(e)&&this.variableBlock.push(e)},t.prototype.getVariableByName=function(e){for(var t=this.variableBlock,i=t.length,n=0;i>n;n++){var r=t[n];if(r.name==e)return r}return null},t.prototype.addFunction=function(e){-1==this.functionBlock.indexOf(e)&&this.functionBlock.push(e)},t.prototype.getFuncByName=function(e){for(var t=this.functionBlock,i=t.length,n=0;i>n;n++){var r=t[n];if(r.name==e)return r}return null},t.prototype.toCode=function(){var e=this.indent,t=this.getIndent(e),i=this.getIndent(e+1),n=this.getIndent(e+2),r=t+"(function (";r+=this.superClass?"_super) {\n"+i+"__extends("+this.className+", _super);\n":") {\n";for(var o=this.innerClassBlock,a=o.length,s=0;a>s;s++){var l=o[s];l.indent=e+1,r+=i+"var "+l.className+" = "+l.toCode()+"\n\n"}r+=i+"function "+this.className+"() {\n",this.superClass&&(r+=n+"_super.call(this);\n");var u=this.variableBlock;a=u.length;for(var s=0;a>s;s++){var c=u[s];c.defaultValue&&(r+=n+c.toCode()+"\n")}if(this.constructCode){var h=this.constructCode.toCode().split("\n");a=h.length;for(var s=0;a>s;s++){var p=h[s];r+=n+p+"\n"}}r+=i+"}\n",r+=i+"var _proto = "+this.className+".prototype;\n\n";var d=this.functionBlock;a=d.length;for(var s=0;a>s;s++){var f=d[s];f.indent=e+1,r+=f.toCode()+"\n"}return r+=i+"return "+this.className+";\n"+t,r+=this.superClass?"})("+this.superClass+");":"})();"},t}(a);e.EXClass=s,__reflect(s.prototype,"eui.sys.EXClass");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lines=[],t}return __extends(t,e),t.prototype.addVar=function(e,t){var i=t?" = "+t:"";this.addCodeLine("var "+e+i+";")},t.prototype.addAssignment=function(e,t,i){var n=i?"."+i:"";this.addCodeLine(e+n+" = "+t+";")},t.prototype.addReturn=function(e){this.addCodeLine("return "+e+";")},t.prototype.addEmptyLine=function(){this.addCodeLine("")},t.prototype.startIf=function(e){this.addCodeLine("if("+e+")"),this.startBlock()},t.prototype.startElse=function(){this.addCodeLine("else"),this.startBlock()},t.prototype.startElseIf=function(e){this.addCodeLine("else if("+e+")"),this.startBlock()},t.prototype.startBlock=function(){this.addCodeLine("{"),this.indent++},t.prototype.endBlock=function(){this.indent--,this.addCodeLine("}")},t.prototype.doFunction=function(e,t){var i=t.join(",");this.addCodeLine(e+"("+i+")")},t.prototype.addCodeLine=function(e){this.lines.push(this.getIndent()+e)},t.prototype.addCodeLineAt=function(e,t){this.lines.splice(t,0,this.getIndent()+e)},t.prototype.containsCodeLine=function(e){return-1!=this.lines.indexOf(e)},t.prototype.concat=function(e){this.lines=this.lines.concat(e.lines)},t.prototype.toCode=function(){return this.lines.join("\n")},t}(a);e.EXCodeBlock=l,__reflect(l.prototype,"eui.sys.EXCodeBlock");var u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.codeBlock=null,t.isGet=!1,t.name="",t}return __extends(t,e),t.prototype.toCode=function(){var e,t=this.getIndent(),i=this.getIndent(this.indent+1),n=t;if(this.isGet?(e=this.getIndent(this.indent+2),n+='Object.defineProperty(_proto, "skinParts", {\n',n+=i+"get: function () {\n"):(e=i,n+="_proto."+this.name+" = function () {\n"),this.codeBlock)for(var r=this.codeBlock.toCode().split("\n"),o=r.length,a=0;o>a;a++){var s=r[a];n+=e+s+"\n"}return n+=this.isGet?i+"},\n"+i+"enumerable: true,\n"+i+"configurable: true\n"+t+"});":t+"};"},t}(a);e.EXFunction=u,__reflect(u.prototype,"eui.sys.EXFunction");var c=function(e){function t(t,i){var n=e.call(this)||this;return n.indent=2,n.name=t,n.defaultValue=i,n}return __extends(t,e),t.prototype.toCode=function(){return this.defaultValue?"this."+this.name+" = "+this.defaultValue+";":""},t}(a);e.EXVariable=c,__reflect(c.prototype,"eui.sys.EXVariable");var h=function(e){function i(t,i){var n=e.call(this)||this;return n.name="",n.stateGroups=[],n.addItems=[],n.setProperty=[],n.name=t,i&&(n.stateGroups=i),n}return __extends(i,e),i.prototype.addOverride=function(e){e instanceof p?this.addItems.push(e):this.setProperty.push(e)},i.prototype.toCode=function(){for(var e=this.getIndent(1),i="new "+t+' ("'+this.name+'",\n'+e+"[\n",n=0,r=!0,o=this.addItems.concat(this.setProperty);n<o.length;){r?r=!1:i+=",\n";for(var a=o[n],s=a.toCode().split("\n"),l=s.length,u=0;l>u;u++){var c=s[u];s[u]=e+e+c}i+=s.join("\n"),n++}return i+="\n"+e+"])"},i}(a);e.EXState=h,__reflect(h.prototype,"eui.sys.EXState");var p=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.target=t,o.property=i,o.position=n,o.relativeTo=r,o}return __extends(t,e),t.prototype.toCode=function(){var e="new "+i+'("'+this.target+'","'+this.property+'",'+this.position+',"'+this.relativeTo+'")';return e},t}(a);e.EXAddItems=p,__reflect(p.prototype,"eui.sys.EXAddItems");var d=function(e){function t(t,i,n){var r=e.call(this)||this;return r.target=t,r.name=i,r.value=n,r}return __extends(t,e),t.prototype.toCode=function(){return"new "+n+'("'+this.target+'","'+this.name+'",'+this.value+")"},t}(a);e.EXSetProperty=d,__reflect(d.prototype,"eui.sys.EXSetProperty");
var f=function(e){function t(t,i,n,r){var o=e.call(this)||this;return t=t?"this."+t:"this",o.target=t,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(t,e),t.prototype.toCode=function(){var e=this.templates.join(","),t=this.chainIndex.join(",");return"new "+r+"(this, ["+e+"],["+t+"],"+this.target+',"'+this.property+'")'},t}(a);e.EXSetStateProperty=f,__reflect(f.prototype,"eui.sys.EXSetStateProperty");var m=function(e){function t(t,i,n,r){var o=e.call(this)||this;return o.target=t,o.property=i,o.templates=n,o.chainIndex=r,o}return __extends(t,e),t.prototype.toCode=function(){var e=this.templates.join(","),t=this.chainIndex.join(",");return o+"(this, ["+e+"],["+t+"],"+this.target+',"'+this.property+'")'},t}(a);e.EXBinding=m,__reflect(m.prototype,"eui.sys.EXBinding")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=e.sys.UIComponentImpl,i=function(i){function n(e){var t=i.call(this)||this;return t.$createChildrenCalled=!1,t.$fontChanged=!1,t._widthConstraint=0/0,t._heightConstraint=0/0,t.initializeUIValues(),t.text=e,t}return __extends(n,i),n.prototype.$invalidateContentBounds=function(){i.prototype.$invalidateContentBounds.call(this),this.invalidateSize()},n.prototype.$setWidth=function(e){var n=i.prototype.$setWidth.call(this,e),r=t.prototype.$setWidth.call(this,e);return n&&r},n.prototype.$setHeight=function(e){var n=i.prototype.$setHeight.call(this,e),r=t.prototype.$setHeight.call(this,e);return n&&r},n.prototype.$setText=function(t){var n=i.prototype.$setText.call(this,t);return e.PropertyEvent.dispatchPropertyEvent(this,e.PropertyEvent.PROPERTY_CHANGE,"text"),n},n.prototype.$setFont=function(e){return this.$fontForBitmapLabel==e?!1:(this.$fontForBitmapLabel=e,this.$createChildrenCalled?this.$parseFont():this.$fontChanged=!0,this.$fontStringChanged=!0,!0)},n.prototype.$parseFont=function(){this.$fontChanged=!1;var t=this.$fontForBitmapLabel;"string"==typeof t?e.getAssets(t,function(e){this.$setFontData(e,t)},this):this.$setFontData(t)},n.prototype.$setFontData=function(e,t){return t&&t!=this.$fontForBitmapLabel?void 0:e==this.$font?!1:(this.$font=e,this.$invalidateContentBounds(),!0)},n.prototype.createChildren=function(){this.$fontChanged&&this.$parseFont(),this.$createChildrenCalled=!0},n.prototype.childrenCreated=function(){},n.prototype.commitProperties=function(){},n.prototype.measure=function(){var e=this.$UIComponent,t=this.$textFieldWidth,n=this.$textFieldHeight,r=0/0;isNaN(this._widthConstraint)?isNaN(e[8])?1e5!=e[13]&&(r=e[13]):r=e[8]:(r=this._widthConstraint,this._widthConstraint=0/0),i.prototype.$setWidth.call(this,r);var o=0/0;isNaN(this._heightConstraint)?isNaN(e[9])?1e5!=e[15]&&(o=e[15]):o=e[9]:(o=this._heightConstraint,this._heightConstraint=0/0),i.prototype.$setHeight.call(this,o),this.setMeasuredSize(this.textWidth,this.textHeight),i.prototype.$setWidth.call(this,t),i.prototype.$setHeight.call(this,n)},n.prototype.updateDisplayList=function(e,t){i.prototype.$setWidth.call(this,e),i.prototype.$setHeight.call(this,t)},n.prototype.invalidateParentLayout=function(){},n.prototype.setMeasuredSize=function(e,t){},n.prototype.invalidateProperties=function(){},n.prototype.validateProperties=function(){},n.prototype.invalidateSize=function(){},n.prototype.validateSize=function(e){},n.prototype.invalidateDisplayList=function(){},n.prototype.validateDisplayList=function(){},n.prototype.validateNow=function(){},n.prototype.setLayoutBoundsSize=function(e,i){if(t.prototype.setLayoutBoundsSize.call(this,e,i),!isNaN(e)&&e!==this._widthConstraint&&0!=e){var n=this.$UIComponent;isNaN(n[9])&&e!=n[16]&&(this._widthConstraint=e,this._heightConstraint=i,this.invalidateSize())}},n.prototype.setLayoutBoundsPosition=function(e,t){},n.prototype.getLayoutBounds=function(e){},n.prototype.getPreferredBounds=function(e){},n}(egret.BitmapText);e.BitmapLabel=i,__reflect(i.prototype,"eui.BitmapLabel",["eui.UIComponent","egret.DisplayObject","eui.IDisplayText"]),e.sys.implementUIComponent(i,egret.BitmapText),e.registerBindable(i.prototype,"text")}(eui||(eui={}));var EXML;!function(e){function t(e){return u.parse(e)}function i(e,t,i,n){if(void 0===n&&(n=!1),n&&e in h)return void(t&&t.call(i,h[e],e));var r=c[e];return r?void r.push([t,i]):(c[e]=[[t,i]],void l(e,s))}function n(e,t,i,n){if(void 0===n&&(n=!1),!e||0==e.length)return void(t&&t.call(i,[],e));var o=[];e.forEach(function(a){var s=function(n,a){o[n]=a,o.push(n),o.length==e.length&&r(e,o,t,i)};return n&&a in h?void s(a,""):void l(a,s)})}function r(e,t,i,n){var r=[];e.forEach(function(e,i){if(e in h&&!t[e])return void(r[i]=h[e]);var n=t[e],o=s(e,n);r[i]=o}),i&&i.call(n,r,e)}function o(e,t){h[e]=t;var i=c[e];delete c[e];for(var n=i?i.length:0,r=0;n>r;r++){var o=i[r];o[0]&&o[1]&&o[0].call(o[1],t,e)}}function a(e,t,i){var n=null;t&&(n=u.$parseCode(t,i),o(e,n))}function s(e,i){var n=null;if(i&&"string"==typeof i)try{n=t(i)}catch(r){console.error(e+"\n"+r.message)}if(i&&i.prototype&&(n=i),e){n&&(h[e]=n);var o=c[e];delete c[e];for(var a=o?o.length:0,s=0;a>s;s++){var l=o[s];l[0]&&l[1]&&l[0].call(l[1],n,e)}}return n}function l(e,t){var i=e;-1==e.indexOf("://")&&(i=p+e);var n=function(i){i||(i=""),t(e,i)};eui.getTheme(i,n)}var u=new eui.sys.EXMLParser,c={},h={},p="";Object.defineProperty(e,"prefixURL",{get:function(){return p},set:function(e){p=e},enumerable:!0,configurable:!0}),e.parse=t,e.load=i,e.$loadAll=n,e.update=o,e.$parseURLContentAsJs=a,e.$parseURLContent=s}(EXML||(EXML={}));var eui;!function(e){var t;!function(e){function t(e){return"[object Array]"===Object.prototype.toString.call(e)}function i(e){var t=egret.getDefinitionByName(e);return t?t.prototype:null}function n(e){if(!e)return null;var t;return t=new e}e.NS_S="http://ns.egret.com/eui",e.NS_W="http://ns.egret.com/wing";var r=["Point","Matrix","Rectangle"],o=["Array","boolean","string","number"],a="eui.",s=0,l={},u=function(){function u(){}return u.prototype.$describe=function(e){if(!e)return null;var i=Object.getPrototypeOf(e);if(!i)return null;var r;if(i.hasOwnProperty("__hashCode__")&&(r=l[i.__hashCode__]))return r;var a=Object.getPrototypeOf(i);if(!a)return null;var u=n(a.constructor),c=this.$describe(u);if(c){var h=function(){};h.prototype=c,r=new h}else r={};for(var p=Object.keys(i).concat(Object.keys(e)),d=p.length,f=e.__meta__,m=0;d>m;m++){var g=p[m];if("constructor"!=g&&"_"!=g.charAt(0)&&"$"!=g.charAt(0)){var v=void 0;if(f&&f[g])v=f[g];else if(t(e[g]))v="Array";else{if(v=typeof e[g],"function"==v)continue;-1==o.indexOf(v)&&(v="any")}r[g]=v}}return Object.getPrototypeOf(a)&&(i.__hashCode__=s++,l[i.__hashCode__]=r),r},u.prototype.getClassNameById=function(t,n){if(n==e.NS_S){if("Object"==t)return t;if(-1!=r.indexOf(t))return"egret."+t}var s="";return-1!=o.indexOf(t)?t:(n==e.NS_W||(s=n&&n!=e.NS_S?n.substring(0,n.length-1)+t:a+t),i(s)||(s=""),s)},u.prototype.getDefaultPropById=function(e,t){var n,r=this.getClassNameById(e,t),o=i(r);return o&&(n=o.__defaultProperty__),n?n:""},u.prototype.getPropertyType=function(e,t){if("Object"==t)return"any";var r="",o=i(t);if(o){if(!o.hasOwnProperty("__hashCode__")){var a=egret.getDefinitionByName(t),s=n(a);if(!s)return r;this.$describe(s)}var u=l[o.__hashCode__];u&&(r=u[e])}return r},u}();e.EXMLConfig=u,__reflect(u.prototype,"eui.sys.EXMLConfig")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.en_US=egret.$locale_strings.en_US||{};var t=egret.$locale_strings.en_US;t[2001]="EXML parsing error {0}: EXML file can't be found ",t[2002]="EXML parsing error : invalid XML file:\n{0}",t[2003]="EXML parsing error {0}: the class definitions corresponding to nodes can't be found  \n {1}",t[2004]="EXML parsing error {0}: nodes cannot contain id property with the same name \n {1}",t[2005]="EXML parsing error {0}: property with the name of '{1}' does not exist on the node, or the property does not have a default value: \n {2}",t[2006]="EXML parsing error {0}: undefined view state name: '{1}' \n {2}",t[2007]="EXML parsing error {0}: only UIComponent objects within the container can use the includeIn and excludeFrom properties\n {1}",t[2008]="EXML parsing error {0}: fail to assign values of '{1}' class to property: '{2}' \n {3}",t[2009]="EXML parsing error {0}: only one ID can be referenced in the node property value '{}' label; and complex expression is not allowed to use \n {1}",t[2010]="EXML parsing error {0}: ID referenced by property: '{1}':  '{2}' does not exist \n {3}",t[2011]="EXML parsing error {0}: fail to assign more than one child nodes to the same property: '{1}' \n {2}",t[2012]="EXML parsing error {0}: no default property exists on the node; and you must explicitly declare the property name that the child node  is assigned to \n {1}",t[2013]="EXML parsing error {0}: view state grammar is not allowed to use on property nodes of Array class \n {1} ",t[2014]="EXML parsing error {0}: assigning the skin class itself to the node property is not allowed \n {1}",t[2015]="EXML parsing error {0}: class definition referenced by node: {1} does not exist \n {2}",t[2016]="EXML parsing error {0}: format error of 'scale9Grid' property value on the node: {1}",t[2017]="EXML parsing error {0}: namespace prefix missing on the node: {1}",t[2018]="EXML parsing error {0}: format error of 'skinName' property value on the node: {1}",t[2019]="EXML parsing error {0}: the container’s child item must be visible nodes: {1}",t[2020]="EXML parsing error {0}: for child nodes in w: Declarations, the includeIn and excludeFrom properties are not allowed to use \n {1}",t[2021]="Compile errors in {0}, the attribute name: {1}, the attribute value: {2}.",t[2022]="EXML parsing error: there contains illegal characters in the id `{0}`",t[2101]="EXML parsing warnning : fail to register the class property : {0},there is already a class with the same name in the global,please try to rename the class name for the exml. \n {1}",t[2102]="EXML parsing warnning {0}: no child node can be found on the property code \n {1}",t[2103]="EXML parsing warnning {0}: the same property '{1}' on the node is assigned multiple times \n {2}",t[2104]="EXML parsing warnning, Instantiate class {0} error，the parameters of its constructor method must be empty.",t[2201]="BasicLayout doesn't support virtualization.",t[2202]="parse skinName error，the parsing result of skinName must be a instance of eui.Skin.",t[2203]="Could not find the skin class '{0}'。",t[2301]="parse source failed，could not find asset from URL：{0} ."}(eui||(eui={}));var eui;!function(e){egret.$locale_strings=egret.$locale_strings||{},egret.$locale_strings.zh_CN=egret.$locale_strings.zh_CN||{};var t=egret.$locale_strings.zh_CN;t[2001]="EXML解析错误 {0}: 找不到EXML文件",t[2002]="EXML解析错误: 不是有效的XML文件:\n{0}",t[2003]="EXML解析错误 {0}: 无法找到节点所对应的类定义\n{1}",t[2004]="EXML解析错误 {0}: 节点不能含有同名的id属性\n{1}",t[2005]="EXML解析错误 {0}: 节点上不存在名为'{1}'的属性，或者该属性没有初始值:\n{2}",t[2006]="EXML解析错误 {0}: 未定义的视图状态名称:'{1}'\n{2}",t[2007]="EXML解析错误 {0}: 只有处于容器内的 UIComponent 对象可以使用includeIn和excludeFrom属性\n{1}",t[2008]="EXML解析错误 {0}: 无法将'{1}'类型的值赋给属性:'{2}'\n{3}",t[2009]="EXML解析错误 {0}: 在节点属性值的‘{}’标签内只能引用一个ID，不允许使用复杂表达式\n{1}",t[2010]="EXML解析错误 {0}: 属性:'{1}'所引用的ID: '{2}'不存在\n{3}",t[2011]="EXML解析错误 {0}: 无法将多个子节点赋值给同一个属性:'{1}'\n{2}",t[2012]="EXML解析错误 {0}: 节点上不存在默认属性，必须显式声明子节点要赋值到的属性名\n{1}",t[2013]="EXML解析错误 {0}: 类型为Array的属性节点上不允许使用视图状态语法\n{1}",t[2014]="EXML解析错误 {0}: 不允许将皮肤类自身赋值给节点属性\n{1}",t[2015]="EXML解析错误 {0}: 节点引用的类定义:{1}不存在\n{2}",t[2016]="EXML解析错误 {0}: 节点上'scale9Grid'属性值的格式错误:{1}",t[2017]="EXML解析错误 {0}: 节点上缺少命名空间前缀:{1}",t[2018]="EXML解析错误 {0}: 节点上'skinName'属性值的格式错误:{1}",t[2019]="EXML解析错误 {0}: 容器的子项必须是可视节点:{1}",t[2020]="EXML解析错误 {0}: 在w:Declarations内的子节点，不允许使用includeIn和excludeFrom属性\n{1}",t[2021]="{0} 中存在编译错误，属性名 : {1}，属性值 : {2}",t[2022]="EXML解析错误: id `{0}` 中含有非法字符",t[2101]="EXML解析警告: 在EXML根节点上声明的 class 属性: {0} 注册失败，所对应的类已经存在，请尝试重命名要注册的类名。\n{1}",t[2102]="EXML解析警告 {0}: 在属性节点上找不到任何子节点\n{1}",t[2103]="EXML解析警告 {0}: 节点上的同一个属性'{1}'被多次赋值\n{2}",t[2104]="EXML解析警告，无法直接实例化自定义组件：{0} ，在EXML中使用的自定义组件必须要能直接被实例化，否则可能导致后续EXML解析报错。",t[2201]="BasicLayout 不支持虚拟化。",t[2202]="皮肤解析出错，属性 skinName 的值必须要能够解析为一个 eui.Skin 的实例。",t[2203]="找不到指定的皮肤类 '{0}'。",t[2301]="素材解析失败，找不到URL：{0} 所对应的资源。"}(eui||(eui={}));var eui;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),i.prototype.measure=function(){t.prototype.measure.call(this),e.sys.measure(this.$target)},i.prototype.updateDisplayList=function(i,n){t.prototype.updateDisplayList.call(this,i,n);var r=this.$target,o=e.sys.updateDisplayList(r,i,n);r.setContentSize(Math.ceil(o.x),Math.ceil(o.y))},i}(e.LayoutBase);e.BasicLayout=t,__reflect(t.prototype,"eui.BasicLayout")}(eui||(eui={})),function(e){var t;!function(e){function t(e,t){if(!e||"number"==typeof e)return e;var i=e,n=i.indexOf("%");if(-1==n)return+i;var r=+i.substring(0,n);return.01*r*t}function i(e){if(e){for(var t=0,i=0,n=egret.$TempRectangle,o=e.numChildren,a=0;o>a;a++){var s=e.getChildAt(a);if(egret.is(s,r)&&s.$includeInLayout){var l=s.$UIComponent,u=+l[4],c=+l[5],h=+l[0],p=+l[1],d=+l[2],f=+l[3],m=void 0,g=void 0;s.getPreferredBounds(n),isNaN(h)||isNaN(p)?isNaN(u)?isNaN(h)&&isNaN(p)?m=n.x:(m=isNaN(h)?0:h,m+=isNaN(p)?0:p):m=2*Math.abs(u):m=h+p,isNaN(d)||isNaN(f)?isNaN(c)?isNaN(d)&&isNaN(f)?g=n.y:(g=isNaN(d)?0:d,g+=isNaN(f)?0:f):g=2*Math.abs(c):g=d+f;var v=n.width,y=n.height;t=Math.ceil(Math.max(t,m+v)),i=Math.ceil(Math.max(i,g+y))}}e.setMeasuredSize(t,i)}}function n(e,i,n){if(e){for(var o=e.numChildren,a=0,s=0,l=egret.$TempRectangle,u=0;o>u;u++){var c=e.getChildAt(u);if(egret.is(c,r)&&c.$includeInLayout){var h=c.$UIComponent,p=t(h[4],.5*i),d=t(h[5],.5*n),f=t(h[0],i),m=t(h[1],i),g=t(h[2],n),v=t(h[3],n),y=h[6],_=h[7],b=0/0,w=0/0;isNaN(f)||isNaN(m)?isNaN(y)||(b=Math.round(i*Math.min(.01*y,1))):b=i-m-f,isNaN(g)||isNaN(v)?isNaN(_)||(w=Math.round(n*Math.min(.01*_,1))):w=n-v-g,c.setLayoutBoundsSize(b,w),c.getLayoutBounds(l);var x=l.width,E=l.height,S=0/0,T=0/0;S=isNaN(p)?isNaN(f)?isNaN(m)?l.x:i-x-m:f:Math.round((i-x)/2+p),T=isNaN(d)?isNaN(g)?isNaN(v)?l.y:n-E-v:g:Math.round((n-E)/2+d),c.setLayoutBoundsPosition(S,T),a=Math.max(a,S+x),s=Math.max(s,T+E)}}return egret.$TempPoint.setTo(a,s)}}var r="eui.UIComponent";e.measure=i,e.updateDisplayList=n}(t=e.sys||(e.sys={}))}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.LEFT="left",e.JUSTIFY_USING_GAP="justifyUsingGap",e.JUSTIFY_USING_WIDTH="justifyUsingWidth",e}();e.ColumnAlign=t,__reflect(t.prototype,"eui.ColumnAlign")}(eui||(eui={}));var eui;!function(e){var t="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var e=this.$target,i=e.numElements,n=i,r=0,o=0,a=egret.$TempRectangle,s=0;i>s;s++){var l=e.getElementAt(s);egret.is(l,t)&&l.$includeInLayout?(l.getPreferredBounds(a),r+=a.width,o=Math.max(o,a.height)):n--}r+=(n-1)*this.$gap;var u=this.$paddingLeft+this.$paddingRight,c=this.$paddingTop+this.$paddingBottom;e.setMeasuredSize(r+u,o+c)},n.prototype.measureVirtual=function(){for(var e=this.$target,i=this.$typicalWidth,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalHeight),o=egret.$TempRectangle,a=this.endIndex,s=this.elementSizeTable,l=this.startIndex;a>l;l++){var u=e.getElementAt(l);egret.is(u,t)&&u.$includeInLayout&&(u.getPreferredBounds(o),n+=o.width,n-=isNaN(s[l])?i:s[l],r=Math.max(r,o.height))}var c=this.$paddingLeft+this.$paddingRight,h=this.$paddingTop+this.$paddingBottom;e.setMeasuredSize(n+c,r+h)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,c=Math.max(0,i-o-a),h=Math.max(0,n-s-l),p=this.$horizontalAlign==e.JustifyAlign.JUSTIFY,d=this.$verticalAlign==e.JustifyAlign.JUSTIFY||this.$verticalAlign==e.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var m,g,v,y=r.numElements,_=y,b=o,w=s,x=0,E=0,S=[],T=c,C=this.maxElementSize,M=egret.$TempRectangle;for(m=0;y>m;m++){var P=r.getElementAt(m);if(egret.is(P,t)&&P.$includeInLayout)if(P.getPreferredBounds(M),C=Math.max(C,M.height),p)x+=M.width;else{var I=P.$UIComponent;isNaN(I[6])?T-=M.width:(E+=I[6],v=new e.sys.ChildInfo,v.layoutElement=P,v.percent=I[6],v.min=I[12],v.max=I[13],S.push(v))}else _--}T-=u*(_-1),T=T>0?T:0;var L,R=c-x-u*(_-1),A=_,O={};if(p){if(0>R){for(L=T/_,m=0;y>m;m++)g=r.getElementAt(m),egret.is(g,t)&&g.$includeInLayout&&(g.getPreferredBounds(M),M.width<=L&&(T-=M.width,A--));T=T>0?T:0}}else if(E>0){this.flexChildrenProportionally(c,T,E,S);var k=0,D=S.length;for(m=0;D>m;m++){v=S[m];var N=Math.round(v.size+k);k+=v.size-N,O[v.layoutElement.$hashCode]=N,T-=N}T=T>0?T:0}this.$horizontalAlign==egret.HorizontalAlign.CENTER?b=o+.5*T:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(b=o+T);var B=o,U=s,G=0,F=0,H=Math.ceil(h);this.$verticalAlign==e.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(h,C)));var j,z,$=0;for(m=0;y>m;m++){var V=0;if(g=r.getElementAt(m),egret.is(g,t)&&g.$includeInLayout){if(g.getPreferredBounds(M),j=0/0,p?(z=0/0,R>0?z=T*M.width/x:0>R&&M.width>L&&(z=T/A),isNaN(z)||(j=Math.round(z+$),$+=z-j)):j=O[g.$hashCode],d)w=s,g.setLayoutBoundsSize(j,H),g.getLayoutBounds(M);else{var W=0/0,I=g.$UIComponent;if(!isNaN(g.percentHeight)){var X=Math.min(100,I[7]);W=Math.round(h*X*.01)}g.setLayoutBoundsSize(j,W),g.getLayoutBounds(M),V=(h-M.height)*f,V=V>0?V:0,w=s+V}g.setLayoutBoundsPosition(Math.round(b),Math.round(w)),G=Math.ceil(M.width),F=Math.ceil(M.height),B=Math.max(B,b+G),U=Math.max(U,w+F),b+=G+u}}this.maxElementSize=C,r.setContentSize(B+a,U+l)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,c=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(c)-u+a,void r.setContentSize(o,r.contentHeight);var h=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,h);var p=this.$verticalAlign==e.JustifyAlign.JUSTIFY||this.$verticalAlign==e.JustifyAlign.CONTENT_JUSTIFY,d=this.$verticalAlign==e.JustifyAlign.CONTENT_JUSTIFY,f=0;p||(this.$verticalAlign==egret.VerticalAlign.MIDDLE?f=.5:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(f=1));var m,g=egret.$TempRectangle,v=Math.max(0,n-s-l),y=Math.ceil(v),_=this.$typicalHeight,b=this.$typicalWidth,w=this.maxElementSize,x=Math.max(_,this.maxElementSize);if(d){for(var E=this.startIndex;h>=E;E++)m=r.getVirtualElementAt(E),egret.is(m,t)&&m.$includeInLayout&&(m.getPreferredBounds(g),w=Math.max(w,g.height));y=Math.ceil(Math.max(v,w))}for(var S,T=0,C=0,M=0,P=!1,I=this.elementSizeTable,L=this.startIndex;h>=L;L++){var R=0;m=r.getVirtualElementAt(L),egret.is(m,t)&&m.$includeInLayout&&(m.getPreferredBounds(g),d||(w=Math.max(w,g.height)),p?(C=s,m.setLayoutBoundsSize(0/0,y),m.getLayoutBounds(g)):(m.getLayoutBounds(g),R=(v-g.height)*f,R=R>0?R:0,C=s+R),M=Math.max(M,g.height),P||(S=isNaN(I[L])?b:I[L],S!=g.width&&(P=!0)),I[L]=g.width,T=this.getStartPosition(L),m.setLayoutBoundsPosition(Math.round(T),Math.round(C)))}M+=s+l,o=this.getStartPosition(c)-u+a,this.maxElementSize=w,r.setContentSize(o,M),(P||x<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(e){if(!this.$useVirtualLayout&&this.$target){var t=this.$target.getElementAt(e);if(t)return t.x}for(var i=this.$typicalWidth,n=this.$paddingLeft,r=this.$gap,o=this.elementSizeTable,a=0;e>a;a++){var s=o[a];isNaN(s)&&(s=i),n+=s+r}return n},n.prototype.getElementSize=function(e){if(this.$useVirtualLayout){var t=this.elementSizeTable[e];return isNaN(t)&&(t=this.$typicalWidth),t}return this.$target?this.$target.getElementAt(e).width:0},n.prototype.getElementTotalSize=function(){for(var e=this.$typicalWidth,t=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var a=r[o];isNaN(a)&&(a=e),i+=a+t}return i-=t},n.prototype.elementAdded=function(e){this.useVirtualLayout&&(i.prototype.elementAdded.call(this,e),this.elementSizeTable.splice(e,0,this.$typicalWidth))},n.prototype.getIndexInView=function(){var e=this.$target;if(!e||0==e.numElements)return this.startIndex=this.endIndex=-1,!1;var t=e.$UIComponent;if(t[10]<=0||t[11]<=0)return this.startIndex=this.endIndex=-1,!1;var i=e.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingRight,r=e.scrollH;if(r>n-this.$paddingRight)return this.startIndex=-1,this.endIndex=-1,!1;var o=e.scrollH+t[10];if(o<this.$paddingLeft)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,s=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||s!=this.endIndex},n}(e.LinearLayoutBase);e.HorizontalLayout=i,__reflect(i.prototype,"eui.HorizontalLayout")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.JUSTIFY="justify",e.CONTENT_JUSTIFY="contentJustify",e}();e.JustifyAlign=t,__reflect(t.prototype,"eui.JustifyAlign")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.TOP="top",e.JUSTIFY_USING_GAP="justifyUsingGap",e.JUSTIFY_USING_HEIGHT="justifyUsingHeight",e}();e.RowAlign=t,__reflect(t.prototype,"eui.RowAlign")}(eui||(eui={}));var eui;!function(e){var t="eui.UIComponent",i=function(i){function n(){var t=i.call(this)||this;return t.explicitHorizontalGap=0/0,t._horizontalGap=6,t.explicitVerticalGap=0/0,t._verticalGap=6,t._columnCount=-1,t._requestedColumnCount=0,t._rowCount=-1,t._requestedRowCount=0,t.explicitColumnWidth=0/0,t._columnWidth=0/0,t.explicitRowHeight=0/0,t._rowHeight=0/0,t._paddingLeft=0,t._paddingRight=0,t._paddingTop=0,t._paddingBottom=0,t._horizontalAlign=e.JustifyAlign.JUSTIFY,t._verticalAlign=e.JustifyAlign.JUSTIFY,t._columnAlign=e.ColumnAlign.LEFT,t._rowAlign=e.RowAlign.TOP,t._orientation=e.TileOrientation.ROWS,t.maxElementWidth=0,t.maxElementHeight=0,t.startIndex=-1,t.endIndex=-1,t.indexInViewCalculated=!1,t}return __extends(n,i),Object.defineProperty(n.prototype,"horizontalGap",{get:function(){return this._horizontalGap},set:function(e){e=+e,e!==this._horizontalGap&&(this.explicitHorizontalGap=e,this._horizontalGap=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalGap",{get:function(){return this._verticalGap},set:function(e){e=+e,e!==this._verticalGap&&(this.explicitVerticalGap=e,this._verticalGap=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnCount",{get:function(){return this._columnCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedColumnCount",{get:function(){return this._requestedColumnCount},set:function(e){e=+e||0,this._requestedColumnCount!==e&&(this._requestedColumnCount=e,this._columnCount=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowCount",{get:function(){return this._rowCount},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"requestedRowCount",{get:function(){return this._requestedRowCount},set:function(e){e=+e||0,this._requestedRowCount!=e&&(this._requestedRowCount=e,this._rowCount=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnWidth",{get:function(){return this._columnWidth},set:function(e){e=+e,e!==this._columnWidth&&(this.explicitColumnWidth=e,this._columnWidth=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowHeight",{get:function(){return this._rowHeight},set:function(e){e=+e,e!==this._rowHeight&&(this.explicitRowHeight=e,this._rowHeight=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(e){e=+e||0,this._paddingLeft!=e&&(this._paddingLeft=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(e){e=+e||0,this._paddingRight!==e&&(this._paddingRight=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(e){e=+e||0,this._paddingTop!=e&&(this._paddingTop=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(e){e=+e||0,this._paddingBottom!==e&&(this._paddingBottom=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"horizontalAlign",{get:function(){return this._horizontalAlign},set:function(e){this._horizontalAlign!=e&&(this._horizontalAlign=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"verticalAlign",{get:function(){return this._verticalAlign},set:function(e){this._verticalAlign!=e&&(this._verticalAlign=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"columnAlign",{get:function(){return this._columnAlign},set:function(e){this._columnAlign!=e&&(this._columnAlign=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"rowAlign",{get:function(){return this._rowAlign},set:function(e){this._rowAlign!=e&&(this._rowAlign=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"orientation",{get:function(){return this._orientation},set:function(e){this._orientation!=e&&(this._orientation=e,this.invalidateTargetLayout())},enumerable:!0,configurable:!0}),n.prototype.invalidateTargetLayout=function(){var e=this.$target;e&&(e.invalidateSize(),e.invalidateDisplayList())},n.prototype.measure=function(){var e=this.$target;if(e){var t=this._columnCount,i=this._rowCount,n=this._columnWidth,r=this._rowHeight,o=0,a=0,s=e.$UIComponent;this.calculateRowAndColumn(s[8],s[9]);var l=this._requestedColumnCount>0?this._requestedColumnCount:this._columnCount,u=this._requestedRowCount>0?this._requestedRowCount:this._rowCount,c=isNaN(this._horizontalGap)?0:this._horizontalGap,h=isNaN(this._verticalGap)?0:this._verticalGap;l>0&&(o=l*(this._columnWidth+c)-c),u>0&&(a=u*(this._rowHeight+h)-h);var p=this._paddingLeft+this._paddingRight,d=this._paddingTop+this._paddingBottom;e.setMeasuredSize(o+p,a+d),this._columnCount=t,this._rowCount=i,this._columnWidth=n,this._rowHeight=r}},n.prototype.calculateRowAndColumn=function(i,n){var r=this.$target,o=isNaN(this._horizontalGap)?0:this._horizontalGap,a=isNaN(this._verticalGap)?0:this._verticalGap;this._rowCount=this._columnCount=-1;for(var s=r.numElements,l=s,u=0;l>u;u++){var c=r.getElementAt(u);!c||egret.is(c,t)&&c.$includeInLayout||s--}if(0==s)return void(this._rowCount=this._columnCount=0);(isNaN(this.explicitColumnWidth)||isNaN(this.explicitRowHeight))&&this.updateMaxElementSize(),isNaN(this.explicitColumnWidth)?this._columnWidth=this.maxElementWidth:this._columnWidth=this.explicitColumnWidth,isNaN(this.explicitRowHeight)?this._rowHeight=this.maxElementHeight:this._rowHeight=this.explicitRowHeight;var h=this._columnWidth+o;0>=h&&(h=1);var p=this._rowHeight+a;0>=p&&(p=1);var d=this._orientation==e.TileOrientation.COLUMNS,f=!isNaN(i),m=!isNaN(n),g=this._paddingLeft,v=this._paddingRight,y=this._paddingTop,_=this._paddingBottom;if(this._requestedColumnCount>0||this._requestedRowCount>0)this._requestedRowCount>0&&(this._rowCount=Math.min(this._requestedRowCount,s)),this._requestedColumnCount>0&&(this._columnCount=Math.min(this._requestedColumnCount,s));else if(f||m)if(!f||m&&d){var b=Math.max(0,n-y-_);this._rowCount=Math.floor((b+a)/p),this._rowCount=Math.max(1,Math.min(this._rowCount,s))}else{var w=Math.max(0,i-g-v);this._columnCount=Math.floor((w+o)/h),this._columnCount=Math.max(1,Math.min(this._columnCount,s))}else{var x=Math.sqrt(s*h*p);d?this._rowCount=Math.max(1,Math.round(x/p)):this._columnCount=Math.max(1,Math.round(x/h))}-1==this._rowCount&&(this._rowCount=Math.max(1,Math.ceil(s/this._columnCount))),-1==this._columnCount&&(this._columnCount=Math.max(1,Math.ceil(s/this._rowCount))),this._requestedColumnCount>0&&this._requestedRowCount>0&&(this._orientation==e.TileOrientation.ROWS?this._rowCount=Math.max(1,Math.ceil(s/this._requestedColumnCount)):this._columnCount=Math.max(1,Math.ceil(s/this._requestedRowCount)))},n.prototype.updateMaxElementSize=function(){this.$target&&(this.$useVirtualLayout?(this.maxElementWidth=Math.max(this.maxElementWidth,this.$typicalWidth),this.maxElementHeight=Math.max(this.maxElementHeight,this.$typicalHeight),this.doUpdateMaxElementSize(this.startIndex,this.endIndex)):this.doUpdateMaxElementSize(0,this.$target.numElements-1))},n.prototype.doUpdateMaxElementSize=function(e,i){var n=this.maxElementWidth,r=this.maxElementHeight,o=egret.$TempRectangle,a=this.$target;if(-1!=e&&-1!=i)for(var s=e;i>=s;s++){var l=a.getVirtualElementAt(s);egret.is(l,t)&&l.$includeInLayout&&(l.getPreferredBounds(o),n=Math.max(n,o.width),r=Math.max(r,o.height))}this.maxElementWidth=n,this.maxElementHeight=r},n.prototype.clearVirtualLayoutCache=function(){i.prototype.clearVirtualLayoutCache.call(this),this.maxElementWidth=0,this.maxElementHeight=0},n.prototype.scrollPositionChanged=function(){if(this.$useVirtualLayout){var e=this.getIndexInView();e&&(this.indexInViewCalculated=!0,this.$target.invalidateDisplayList())}},n.prototype.getIndexInView=function(){if(!this.$target||0==this.$target.numElements)return this.startIndex=this.endIndex=-1,!1;var t=this.$target,i=t.numElements;if(!this.$useVirtualLayout)return this.startIndex=0,this.endIndex=i-1,!1;var n=t.$UIComponent;if(0==n[10]||0==n[11])return this.startIndex=this.endIndex=-1,!1;var r=this.startIndex,o=this.endIndex,a=this._paddingLeft,s=this._paddingTop,l=isNaN(this._horizontalGap)?0:this._horizontalGap,u=isNaN(this._verticalGap)?0:this._verticalGap;if(this._orientation==e.TileOrientation.COLUMNS){var c=this._columnWidth+l;if(0>=c)return this.startIndex=0,this.endIndex=i-1,!1;var h=t.scrollH,p=h+n[10],d=Math.floor((h-a)/c);0>d&&(d=0);var f=Math.ceil((p-a)/c);0>f&&(f=0),this.startIndex=Math.min(i-1,Math.max(0,d*this._rowCount)),this.endIndex=Math.min(i-1,Math.max(0,f*this._rowCount-1))}else{var m=this._rowHeight+u;if(0>=m)return this.startIndex=0,this.endIndex=i-1,!1;var g=t.scrollV,v=g+n[11],y=Math.floor((g-s)/m);0>y&&(y=0);var _=Math.ceil((v-s)/m);0>_&&(_=0),this.startIndex=Math.min(i-1,Math.max(0,y*this._columnCount)),this.endIndex=Math.min(i-1,Math.max(0,_*this._columnCount-1))}return this.startIndex!=r||this.endIndex!=o},n.prototype.updateDisplayList=function(n,r){if(i.prototype.updateDisplayList.call(this,n,r),this.$target){var o=this.$target,a=this._paddingLeft,s=this._paddingRight,l=this._paddingTop,u=this._paddingBottom;if(this.indexInViewCalculated)this.indexInViewCalculated=!1;else{if(this.calculateRowAndColumn(n,r),0==this._rowCount||0==this._columnCount)return void o.setContentSize(a+s,l+u);this.adjustForJustify(n,r),this.getIndexInView()}if(this.$useVirtualLayout&&(this.calculateRowAndColumn(n,r),this.adjustForJustify(n,r)),-1==this.startIndex||-1==this.endIndex)return void o.setContentSize(0,0);var c=this.endIndex;o.setVirtualElementIndicesInView(this.startIndex,c);for(var h,p,d,f,m,g=this._orientation==e.TileOrientation.COLUMNS,v=this.startIndex,y=isNaN(this._horizontalGap)?0:this._horizontalGap,_=isNaN(this._verticalGap)?0:this._verticalGap,b=this._rowCount,w=this._columnCount,x=this._columnWidth,E=this._rowHeight,S=this.startIndex;c>=S;S++)if(h=this.$useVirtualLayout?this.target.getVirtualElementAt(S):this.target.getElementAt(S),egret.is(h,t)&&h.$includeInLayout){switch(g?(f=Math.ceil((v+1)/b)-1,m=Math.ceil((v+1)%b)-1,-1==m&&(m=b-1)):(f=Math.ceil((v+1)%w)-1,-1==f&&(f=w-1),m=Math.ceil((v+1)/w)-1),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:p=n-(f+1)*(x+y)+y-s;
break;case egret.HorizontalAlign.LEFT:p=f*(x+y)+a;break;default:p=f*(x+y)+a}switch(this._verticalAlign){case egret.VerticalAlign.TOP:d=m*(E+_)+l;break;case egret.VerticalAlign.BOTTOM:d=r-(m+1)*(E+_)+_-u;break;default:d=m*(E+_)+l}this.sizeAndPositionElement(h,p,d,x,E),v++}var T=a+s,C=l+u,M=(x+y)*w-y,P=(E+_)*b-_;o.setContentSize(M+T,P+C)}},n.prototype.sizeAndPositionElement=function(t,i,n,r,o){var a=0/0,s=0/0,l=t.$UIComponent;this._horizontalAlign==e.JustifyAlign.JUSTIFY?a=r:isNaN(l[6])||(a=r*l[6]*.01),this._verticalAlign==e.JustifyAlign.JUSTIFY?s=o:isNaN(l[7])||(s=o*l[7]*.01),t.setLayoutBoundsSize(Math.round(a),Math.round(s));var u=i,c=egret.$TempRectangle;switch(t.getLayoutBounds(c),this._horizontalAlign){case egret.HorizontalAlign.RIGHT:u+=r-c.width;break;case egret.HorizontalAlign.CENTER:u=i+(r-c.width)/2}var h=n;switch(this._verticalAlign){case egret.VerticalAlign.BOTTOM:h+=o-c.height;break;case egret.VerticalAlign.MIDDLE:h+=(o-c.height)/2}t.setLayoutBoundsPosition(Math.round(u),Math.round(h))},n.prototype.adjustForJustify=function(t,i){var n=this._paddingLeft,r=this._paddingRight,o=this._paddingTop,a=this._paddingBottom,s=Math.max(0,t-n-r),l=Math.max(0,i-o-a);isNaN(this.explicitVerticalGap)||(this._verticalGap=this.explicitVerticalGap),isNaN(this.explicitHorizontalGap)||(this._horizontalGap=this.explicitHorizontalGap),this._verticalGap=isNaN(this._verticalGap)?0:this._verticalGap,this._horizontalGap=isNaN(this._horizontalGap)?0:this._horizontalGap;var u,c=l-this._rowHeight*this._rowCount,h=s-this._columnWidth*this._columnCount;c>0&&(this._rowAlign==e.RowAlign.JUSTIFY_USING_GAP?(u=Math.max(1,this._rowCount-1),this._verticalGap=c/u):this._rowAlign==e.RowAlign.JUSTIFY_USING_HEIGHT&&this._rowCount>0&&(this._rowHeight+=(c-(this._rowCount-1)*this._verticalGap)/this._rowCount)),h>0&&(this._columnAlign==e.ColumnAlign.JUSTIFY_USING_GAP?(u=Math.max(1,this._columnCount-1),this._horizontalGap=h/u):this._columnAlign==e.ColumnAlign.JUSTIFY_USING_WIDTH&&this._columnCount>0&&(this._columnWidth+=(h-(this._columnCount-1)*this._horizontalGap)/this._columnCount))},n}(e.LayoutBase);e.TileLayout=i,__reflect(i.prototype,"eui.TileLayout")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(){}return e.ROWS="rows",e.COLUMNS="columns",e}();e.TileOrientation=t,__reflect(t.prototype,"eui.TileOrientation")}(eui||(eui={}));var eui;!function(e){var t="eui.UIComponent",i=function(i){function n(){return null!==i&&i.apply(this,arguments)||this}return __extends(n,i),n.prototype.measureReal=function(){for(var e=this.$target,i=e.numElements,n=i,r=0,o=0,a=egret.$TempRectangle,s=0;i>s;s++){var l=e.getElementAt(s);egret.is(l,t)&&l.$includeInLayout?(l.getPreferredBounds(a),o+=a.height,r=Math.max(r,a.width)):n--}o+=(n-1)*this.$gap;var u=this.$paddingLeft+this.$paddingRight,c=this.$paddingTop+this.$paddingBottom;e.setMeasuredSize(r+u,o+c)},n.prototype.measureVirtual=function(){for(var e=this.$target,i=this.$typicalHeight,n=this.getElementTotalSize(),r=Math.max(this.maxElementSize,this.$typicalWidth),o=egret.$TempRectangle,a=this.endIndex,s=this.elementSizeTable,l=this.startIndex;a>l;l++){var u=e.getElementAt(l);egret.is(u,t)&&u.$includeInLayout&&(u.getPreferredBounds(o),n+=o.height,n-=isNaN(s[l])?i:s[l],r=Math.max(r,o.width))}var c=this.$paddingLeft+this.$paddingRight,h=this.$paddingTop+this.$paddingBottom;e.setMeasuredSize(r+c,n+h)},n.prototype.updateDisplayListReal=function(i,n){var r=this.$target,o=this.$paddingLeft,a=this.$paddingRight,s=this.$paddingTop,l=this.$paddingBottom,u=this.$gap,c=Math.max(0,i-o-a),h=Math.max(0,n-s-l),p=this.$verticalAlign==e.JustifyAlign.JUSTIFY,d=this.$horizontalAlign==e.JustifyAlign.JUSTIFY||this.$horizontalAlign==e.JustifyAlign.CONTENT_JUSTIFY,f=0;d||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var m,g,v,y=r.numElements,_=y,b=o,w=s,x=0,E=0,S=[],T=h,C=this.maxElementSize,M=egret.$TempRectangle;for(m=0;y>m;m++){var P=r.getElementAt(m);if(egret.is(P,t)&&P.$includeInLayout)if(P.getPreferredBounds(M),C=Math.max(C,M.width),p)x+=M.height;else{var I=P.$UIComponent;isNaN(I[7])?T-=M.height:(E+=I[7],v=new e.sys.ChildInfo,v.layoutElement=P,v.percent=I[7],v.min=I[14],v.max=I[15],S.push(v))}else _--}T-=u*(_-1),T=T>0?T:0;var L,R=h-x-u*(_-1),A=_,O={};if(p){if(0>R){for(L=T/_,m=0;y>m;m++)g=r.getElementAt(m),egret.is(g,t)&&g.$includeInLayout&&(g.getPreferredBounds(M),M.height<=L&&(T-=M.height,A--));T=T>0?T:0}}else if(E>0){this.flexChildrenProportionally(h,T,E,S);var k=0,D=S.length;for(m=0;D>m;m++){v=S[m];var N=Math.round(v.size+k);k+=v.size-N,O[v.layoutElement.$hashCode]=N,T-=N}T=T>0?T:0}this.$verticalAlign==egret.VerticalAlign.MIDDLE?w=s+.5*T:this.$verticalAlign==egret.VerticalAlign.BOTTOM&&(w=s+T);var B=o,U=s,G=0,F=0,H=Math.ceil(c);this.$horizontalAlign==e.JustifyAlign.CONTENT_JUSTIFY&&(H=Math.ceil(Math.max(c,C)));var j,z,$=0;for(m=0;y>m;m++){var V=0;if(g=r.getElementAt(m),egret.is(g,t)&&g.$includeInLayout){if(g.getPreferredBounds(M),j=0/0,p?(z=0/0,R>0?z=T*M.height/x:0>R&&M.height>L&&(z=T/A),isNaN(z)||(j=Math.round(z+$),$+=z-j)):j=O[g.$hashCode],d)b=o,g.setLayoutBoundsSize(H,j),g.getLayoutBounds(M);else{var W=0/0,I=g.$UIComponent;if(!isNaN(I[6])){var X=Math.min(100,I[6]);W=Math.round(c*X*.01)}g.setLayoutBoundsSize(W,j),g.getLayoutBounds(M),V=(c-M.width)*f,V=V>0?V:0,b=o+V}g.setLayoutBoundsPosition(Math.round(b),Math.round(w)),G=Math.ceil(M.width),F=Math.ceil(M.height),B=Math.max(B,b+G),U=Math.max(U,w+F),w+=F+u}}this.maxElementSize=C,r.setContentSize(B+a,U+l)},n.prototype.updateDisplayListVirtual=function(i,n){var r=this.$target;this.indexInViewCalculated?this.indexInViewCalculated=!1:this.getIndexInView();var o,a=this.$paddingBottom,s=this.$paddingLeft,l=this.$paddingRight,u=this.$gap,c=r.numElements;if(-1==this.startIndex||-1==this.endIndex)return o=this.getStartPosition(c)-u+a,void r.setContentSize(r.contentWidth,o);var h=this.endIndex;r.setVirtualElementIndicesInView(this.startIndex,h);var p=this.$horizontalAlign==e.JustifyAlign.JUSTIFY||this.$horizontalAlign==e.JustifyAlign.CONTENT_JUSTIFY,d=this.$horizontalAlign==e.JustifyAlign.CONTENT_JUSTIFY,f=0;p||(this.$horizontalAlign==egret.HorizontalAlign.CENTER?f=.5:this.$horizontalAlign==egret.HorizontalAlign.RIGHT&&(f=1));var m,g=egret.$TempRectangle,v=Math.max(0,i-s-l),y=Math.ceil(v),_=this.$typicalHeight,b=this.$typicalWidth,w=this.maxElementSize,x=Math.max(b,this.maxElementSize);if(d){for(var E=this.startIndex;h>=E;E++)m=r.getVirtualElementAt(E),egret.is(m,t)&&m.$includeInLayout&&(m.getPreferredBounds(g),w=Math.max(w,g.width));y=Math.ceil(Math.max(v,w))}for(var S,T=0,C=0,M=0,P=!1,I=this.elementSizeTable,L=this.startIndex;h>=L;L++){var R=0;m=r.getVirtualElementAt(L),egret.is(m,t)&&m.$includeInLayout&&(m.getPreferredBounds(g),d||(w=Math.max(w,g.width)),p?(T=s,m.setLayoutBoundsSize(y,0/0),m.getLayoutBounds(g)):(m.getLayoutBounds(g),R=(v-g.width)*f,R=R>0?R:0,T=s+R),M=Math.max(M,g.width),P||(S=isNaN(I[L])?_:I[L],S!=g.height&&(P=!0)),I[L]=g.height,C=this.getStartPosition(L),m.setLayoutBoundsPosition(Math.round(T),Math.round(C)))}M+=s+l,o=this.getStartPosition(c)-u+a,this.maxElementSize=w,r.setContentSize(M,o),(P||x<this.maxElementSize)&&r.invalidateSize()},n.prototype.getStartPosition=function(e){if(!this.$useVirtualLayout&&this.$target){var t=this.$target.getElementAt(e);if(t)return t.y}for(var i=this.$typicalHeight,n=this.$paddingTop,r=this.$gap,o=this.elementSizeTable,a=0;e>a;a++){var s=o[a];isNaN(s)&&(s=i),n+=s+r}return n},n.prototype.getElementSize=function(e){if(this.$useVirtualLayout){var t=this.elementSizeTable[e];return isNaN(t)&&(t=this.$typicalHeight),t}return this.$target?this.$target.getElementAt(e).height:0},n.prototype.getElementTotalSize=function(){for(var e=this.$typicalHeight,t=this.$gap,i=0,n=this.$target.numElements,r=this.elementSizeTable,o=0;n>o;o++){var a=r[o];isNaN(a)&&(a=e),i+=a+t}return i-=t},n.prototype.elementAdded=function(e){this.$useVirtualLayout&&(i.prototype.elementAdded.call(this,e),this.elementSizeTable.splice(e,0,this.$typicalHeight))},n.prototype.getIndexInView=function(){var e=this.$target;if(!e||0==e.numElements)return this.startIndex=this.endIndex=-1,!1;var t=e.$UIComponent;if(0==t[10]||0==t[11])return this.startIndex=this.endIndex=-1,!1;var i=e.numElements,n=this.getStartPosition(i-1)+this.elementSizeTable[i-1]+this.$paddingBottom,r=e.scrollV;if(r>n-this.$paddingBottom)return this.startIndex=-1,this.endIndex=-1,!1;var o=e.scrollV+t[11];if(o<this.$paddingTop)return this.startIndex=-1,this.endIndex=-1,!1;var a=this.startIndex,s=this.endIndex;return this.startIndex=this.findIndexAt(r,0,i-1),-1==this.startIndex&&(this.startIndex=0),this.endIndex=this.findIndexAt(o,0,i-1),-1==this.endIndex&&(this.endIndex=i-1),a!=this.startIndex||s!=this.endIndex},n}(e.LinearLayoutBase);e.VerticalLayout=i,__reflect(i.prototype,"eui.VerticalLayout")}(eui||(eui={}));var eui;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.updateDisplayList=function(t,i){e.prototype.updateDisplayList.call(this,t,i);var n=this.thumb,r=this.$viewport;if(n&&r){var o=egret.$TempRectangle;n.getPreferredBounds(o);var a=o.width,s=o.y,l=r.scrollH,u=r.contentWidth,c=r.width;if(0>=l){var h=a*(1- -l/(.5*c));h=Math.max(5,Math.round(h)),n.setLayoutBoundsSize(h,0/0),n.setLayoutBoundsPosition(0,s)}else if(l>=u-c){var h=a*(1-(l-u+c)/(.5*c));h=Math.max(5,Math.round(h)),n.setLayoutBoundsSize(h,0/0),n.setLayoutBoundsPosition(t-h,s)}else{var p=(t-a)*l/(u-c);n.setLayoutBoundsSize(0/0,0/0),n.setLayoutBoundsPosition(p,s)}}},t.prototype.onPropertyChanged=function(e){switch(e.property){case"scrollH":case"contentWidth":this.invalidateDisplayList()}},t}(e.ScrollBarBase);e.HScrollBar=t,__reflect(t.prototype,"eui.HScrollBar")}(eui||(eui={}));var eui;!function(e){var t=function(){function e(e,t,i,n){this.target=e,this.propertyName=t,this.position=i,this.relativeTo=n}return e.prototype.apply=function(e,t){var i,n=e[this.relativeTo],r=e[this.target],o=this.propertyName?e[this.propertyName]:t;if(r&&o){switch(this.position){case 0:i=0;break;case 1:i=-1;break;case 2:i=o.getChildIndex(n);break;case 3:i=o.getChildIndex(n)+1}-1==i&&(i=o.numChildren),egret.is(o,"eui.Component")&&o.$Component[8].$elementsContent.push(r),o.addChildAt(r,i)}},e.prototype.remove=function(e,t){var i=this.propertyName?e[this.propertyName]:t,n=e[this.target];if(n&&i&&(n.$parent===i&&i.removeChild(n),egret.is(i,"eui.Component"))){var r=i.$Component[8].$elementsContent,o=r.indexOf(n);o>-1&&r.splice(o,1)}},e}();e.AddItems=t,__reflect(t.prototype,"eui.AddItems",["eui.IOverride"])}(eui||(eui={}));var eui;!function(e){var t=function(){function e(e,t,i){this.target=e,this.name=t,this.value=i}return e.prototype.apply=function(e,t){var i=this.target?e[this.target]:e;i&&(this.oldValue=i[this.name],this.setPropertyValue(i,this.name,this.value,this.oldValue))},e.prototype.remove=function(e,t){var i=this.target?e[this.target]:e;i&&(this.setPropertyValue(i,this.name,this.oldValue,this.oldValue),this.oldValue=null)},e.prototype.setPropertyValue=function(e,t,i,n){void 0===i||null===i?e[t]=i:"number"==typeof n?e[t]=+i:"boolean"==typeof n?e[t]=this.toBoolean(i):e[t]=i},e.prototype.toBoolean=function(e){return"string"==typeof e?"true"==e.toLowerCase():0!=e},e}();e.SetProperty=t,__reflect(t.prototype,"eui.SetProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(e){var t=function(){function t(e,t,i,n,r){this.host=e,this.templates=t,this.chainIndex=i,this.target=n,this.prop=r}return t.prototype.apply=function(t,i){if(this.target){var n=this.target[this.prop];this.oldValue&&this.setPropertyValue(this.target,this.prop,this.oldValue,this.oldValue),n&&(this.oldValue=n),e.Binding.$bindProperties(this.host,this.templates.concat(),this.chainIndex.concat(),this.target,this.prop)}},t.prototype.remove=function(e,t){if(this.target){var i=this.oldValue;this.target[this.prop]&&(this.oldValue=this.target[this.prop]),i&&this.setPropertyValue(this.target,this.prop,i,i)}},t.prototype.setPropertyValue=function(e,t,i,n){void 0===i||null===i?e[t]=i:"number"==typeof n?e[t]=+i:"boolean"==typeof n?e[t]=this.toBoolean(i):e[t]=i},t.prototype.toBoolean=function(e){return"string"==typeof e?"true"==e.toLowerCase():0!=e},t}();e.SetStateProperty=t,__reflect(t.prototype,"eui.SetStateProperty",["eui.IOverride"])}(eui||(eui={}));var eui;!function(e){var t;!function(e){function t(e,t,i,n,o,a,s,l,u,c){var h;if(!isNaN(i)&&isNaN(n)){if(h=r(e,t,i,a,i,l,i,c))return h}else if(isNaN(i)&&!isNaN(n)&&(h=r(e,t,o,n,s,n,u,n)))return h;return h=r(e,t,o,a,s,l,u,c)}function i(e,t,i,r,o,a,s,l,u,c){var h;if(!isNaN(i)&&isNaN(r)){if(h=n(e,t,i,a,i,l,i,c))return h}else if(isNaN(i)&&!isNaN(r)&&(h=n(e,t,o,r,s,r,u,r)))return h;return h=n(e,t,o,a,s,l,u,c)}function n(e,t,i,n,r,a,l,u){var c=t.b,h=t.d;if(c>-1e-9&&1e-9>c&&(c=0),h>-1e-9&&1e-9>h&&(h=0),0==c&&0==h)return null;if(0==c&&0==h)return null;if(0==c)return egret.Point.create(i,e/Math.abs(h));if(0==h)return egret.Point.create(e/Math.abs(c),n);var p,d,f,m=c*h>=0?h:-h;if(0!=m&&i>0){var g=1/m;i=Math.max(r,Math.min(l,i)),d=i,f=(e-c*d)*g,f>=a&&u>=f&&c*d+m*f>=0&&(p=egret.Point.create(d,f)),f=(-e-c*d)*g,f>=a&&u>=f&&0>c*d+m*f&&(!p||s(p.x,p.y,t).width>s(d,f,t).width)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(0!=c&&n>0){var v=1/c;n=Math.max(a,Math.min(u,n)),f=n,d=(e-m*f)*v,d>=r&&l>=d&&c*d+m*f>=0&&(!p||s(p.x,p.y,t).width>s(d,f,t).width)&&(p=egret.Point.create(d,f)),d=(-e-m*f)*v,d>=r&&l>=d&&0>c*d+m*f&&(!p||s(p.x,p.y,t).width>s(d,f,t).width)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(p)return p;var y=t.a,_=t.c,b=y*_>=0?_:-_;return o(c,m,e,r,a,l,u,y,b)}function r(e,t,i,n,r,a,l,u){var c=t.a,h=t.c;if(c>-1e-9&&1e-9>c&&(c=0),h>-1e-9&&1e-9>h&&(h=0),0==c&&0==h)return null;if(0==c)return egret.Point.create(i,e/Math.abs(h));if(0==h)return egret.Point.create(e/Math.abs(c),n);var p,d,f,m=c*h>=0?h:-h;if(0!=m&&i>0){var g=1/m;i=Math.max(r,Math.min(l,i)),d=i,f=(e-c*d)*g,f>=a&&u>=f&&c*d+m*f>=0&&(p=egret.Point.create(d,f)),f=(-e-c*d)*g,f>=a&&u>=f&&0>c*d+m*f&&(!p||s(p.x,p.y,t).height>s(d,f,t).height)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(0!=c&&n>0){var v=1/c;n=Math.max(a,Math.min(u,n)),f=n,d=(e-m*f)*v,d>=r&&l>=d&&c*d+m*f>=0&&(!p||s(p.x,p.y,t).height>s(d,f,t).height)&&(egret.Point.release(p),p=egret.Point.create(d,f)),d=(-e-m*f)*v,d>=r&&l>=d&&0>c*d+m*f&&(!p||s(p.x,p.y,t).height>s(d,f,t).height)&&(egret.Point.release(p),p=egret.Point.create(d,f))}if(p)return p;var y=t.b,_=t.d,b=y*_>=0?_:-_;return o(c,m,e,r,a,l,u,y,b)}function o(e,t,i,n,r,o,a,s,l){if(0==e||0==t)return null;var u,c,h=(i-n*e)/t,p=(i-o*e)/t,d=Math.max(r,Math.min(h,p)),f=Math.min(a,Math.max(h,p)),m=s*t-e*l;return f>=d?(c=Math.abs(m)<1e-9?i/(e+t):s*i/m,c=Math.max(d,Math.min(c,f)),u=(i-t*c)/e,egret.Point.create(u,c)):(h=-(n*e+i)/t,p=-(o*e+i)/t,d=Math.max(r,Math.min(h,p)),f=Math.min(a,Math.max(h,p)),f>=d?(c=Math.abs(m)<1e-9?-i/(e+t):-s*i/m,c=Math.max(d,Math.min(c,f)),u=(-i-t*c)/e,egret.Point.create(u,c)):null)}function a(e,t,i,n,r,a,s){var u=i.a,c=i.b,h=i.c,p=i.d;if(u>-1e-9&&1e-9>u&&(u=0),c>-1e-9&&1e-9>c&&(c=0),h>-1e-9&&1e-9>h&&(h=0),p>-1e-9&&1e-9>p&&(p=0),0==c&&0==h)return 0==u||0==p?null:egret.Point.create(e/Math.abs(u),t/Math.abs(p));if(0==u&&0==p)return 0==c||0==h?null:egret.Point.create(t/Math.abs(c),e/Math.abs(h));var d=u*h>=0?h:-h,f=c*p>=0?p:-p,m=u*f-c*d;if(Math.abs(m)<1e-9)return 0==d||0==u||u==-d?null:Math.abs(u*t-c*e)>1e-9?null:o(u,d,e,n,n,a,s,c,f);var g=1/m;e*=g,t*=g;var v;return v=l(u,d,c,f,e,t),v&&n<=v.x&&v.x<=a&&r<=v.y&&v.y<=s&&u*v.x+d*v.x>=0&&c*v.x+f*v.y>=0?v:(v=l(u,d,c,f,e,-t),v&&n<=v.x&&v.x<=a&&r<=v.y&&v.y<=s&&u*v.x+d*v.x>=0&&c*v.x+f*v.y<0?v:(v=l(u,d,c,f,-e,t),v&&n<=v.x&&v.x<=a&&r<=v.y&&v.y<=s&&u*v.x+d*v.x<0&&c*v.x+f*v.y>=0?v:(v=l(u,d,c,f,-e,-t),v&&n<=v.x&&v.x<=a&&r<=v.y&&v.y<=s&&u*v.x+d*v.x<0&&c*v.x+f*v.y<0?v:(egret.Point.release(v),null))))}function s(e,t,i){var n=egret.$TempRectangle.setTo(0,0,e,t);return i.$transformBounds(n),n}function l(e,t,i,n,r,o){return egret.Point.create(n*r-t*o,e*o-i*r)}var u=.1,c=.1,h=function(){function e(){}return e.fitBounds=function(e,n,r,o,l,h,p,d,f,m,g){if(isNaN(e)&&isNaN(n))return egret.Point.create(h,p);var v,y=c>d?0:d-c,_=c>f?0:f-c,b=m+c,w=g+c;if(isNaN(e)||isNaN(n))return isNaN(e)?i(n,r,o,l,h,p,y,_,b,w):t(e,r,o,l,h,p,y,_,b,w);if(v=a(e,n,r,y,_,b,w),!v){var x=void 0;if(x=t(e,r,o,l,h,p,y,_,b,w)){var E=s(x.x,x.y,r).height;E-u>n&&(egret.Point.release(x),x=null)}var S=void 0;if(S=i(n,r,o,l,h,p,y,_,b,w)){var T=s(S.x,S.y,r).width;T-u>e&&(egret.Point.release(S),S=null)}v=x&&S?x.x*x.y>S.x*S.y?x:S:x?x:S,egret.Point.release(x),egret.Point.release(S)}return v},e}();e.MatrixUtil=h,__reflect(h.prototype,"eui.sys.MatrixUtil")}(t=e.sys||(e.sys={}))}(eui||(eui={}));var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__decorate=this&&this.__decorate||function(e,t,i,n){var r,o=arguments.length,a=3>o?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(3>o?r(a):o>3?r(t,i,a):r(t,i))||a);return o>3&&a&&Object.defineProperty(t,i,a),a},RES;!function(e){}(RES||(RES={}));var RES;!function(e){var t=function(){function t(){this.groupTotalDic={},this.numLoadedDic={},this.groupErrorDic={},this.retryTimesDic={},this.maxRetryTimes=3,this.reporterDic={},this.dispatcherDic={},this.failedList=new Array,this.loadItemErrorDic={},this.errorDic={},this.itemListPriorityDic={},this.itemLoadDic={},this.promiseHash={},this.lazyLoadList=new Array,this.loadingCount=0,this.thread=4}return t.prototype.pushResItem=function(e){if(this.promiseHash[e.root+e.name])return this.promiseHash[e.root+e.name];this.lazyLoadList.push(e),this.itemListPriorityDic[Number.NEGATIVE_INFINITY]=this.lazyLoadList,this.updatelistPriority(this.lazyLoadList,Number.NEGATIVE_INFINITY);var t=new egret.EventDispatcher;this.dispatcherDic[e.root+e.name]=t;var i=new Promise(function(e,i){t.addEventListener("complete",function(t){e(t.data)},null),t.addEventListener("error",function(e){i(e.data)},null)});return this.promiseHash[e.root+e.name]=i,this.loadNextResource(),i},t.prototype.pushResGroup=function(e,t,i,n){if(this.promiseHash[t])return this.promiseHash[t];for(var r=e.length,o=0;r>o;o++){var a=e[o];a.groupNames||(a.groupNames=[]),a.groupNames.push(t)}this.groupTotalDic[t]=e.length,this.numLoadedDic[t]=0,this.updatelistPriority(e,i),this.reporterDic[t]=n;var s=new egret.EventDispatcher;this.dispatcherDic[t]=s;var l=new Promise(function(e,t){s.addEventListener("complete",e,null),s.addEventListener("error",function(e){t(e.data)},null)});return this.promiseHash[t]=l,this.loadNextResource(),l},t.prototype.updatelistPriority=function(e,t){void 0==this.itemListPriorityDic[t]&&(this.itemListPriorityDic[t]=[]);for(var i=0,n=e;i<n.length;i++){var r=n[i];if(1!=this.itemLoadDic[r.root+r.name]){var o=this.findPriorityInDic(r);if(void 0==o)this.itemListPriorityDic[t].push(r);else if(t>o){this.itemListPriorityDic[t].push(r);var a=this.itemListPriorityDic[o].indexOf(r);this.itemListPriorityDic[o].splice(a,1)}}}},t.prototype.findPriorityInDic=function(e){for(var t in this.itemListPriorityDic)if(this.itemListPriorityDic[t].indexOf(e)>-1)return parseInt(t)},t.prototype.loadNextResource=function(){for(;this.loadingCount<this.thread;){var e=this.loadSingleResource();if(!e)break}},t.prototype.loadSingleResource=function(){var t=this,i=this.getOneResourceInfoInGroup();return i?(this.itemLoadDic[i.root+i.name]=1,this.loadingCount++,this.loadResource(i).then(function(n){if(t.loadingCount--,delete t.itemLoadDic[i.root+i.name],e.host.save(i,n),t.promiseHash[i.root+i.name]){var r=t.deleteDispatcher(i.root+i.name);r.dispatchEventWith("complete",!1,n)}var o=i.groupNames;if(o){delete i.groupNames;for(var a=0,s=o;a<s.length;a++){var l=s[a];t.setGroupProgress(l,i)&&t.loadGroupEnd(l)}}t.loadNextResource()})["catch"](function(n){if(!n)throw i.name+" load fail";if(!n.__resource_manager_error__)throw n;delete t.itemLoadDic[i.root+i.name],t.loadingCount--,delete e.host.state[i.root+i.name];var r=t.retryTimesDic[i.name]||1;if(!(r>t.maxRetryTimes))return t.retryTimesDic[i.name]=r+1,t.failedList.push(i),void t.loadNextResource();if(delete t.retryTimesDic[i.name],t.promiseHash[i.root+i.name]){var o=t.deleteDispatcher(i.root+i.name);o.dispatchEventWith("error",!1,{r:i,error:n})}var a=i.groupNames;if(a){delete i.groupNames;for(var s=0,l=a;s<l.length;s++){var u=l[s];t.loadItemErrorDic[u]||(t.loadItemErrorDic[u]=[]),-1==t.loadItemErrorDic[u].indexOf(i)&&t.loadItemErrorDic[u].push(i),t.groupErrorDic[u]=!0,t.setGroupProgress(u,i)?t.loadGroupEnd(u,n):t.errorDic[u]=n}}t.loadNextResource()}),!0):!1},t.prototype.getOneResourceInfoInGroup=function(){if(this.failedList.length>0)return this.failedList.shift();var e=Number.NEGATIVE_INFINITY;for(var t in this.itemListPriorityDic)e=Math.max(e,t);var i=this.itemListPriorityDic[e];return i?0==i.length?(delete this.itemListPriorityDic[e],this.getOneResourceInfoInGroup()):i.shift():void 0},t.prototype.setGroupProgress=function(e,t){var i=this.reporterDic[e];this.numLoadedDic[e]++;var n=this.numLoadedDic[e],r=this.groupTotalDic[e];return i&&i.onProgress&&i.onProgress(n,r,t),n==r},t.prototype.loadGroupEnd=function(e,t){delete this.groupTotalDic[e],delete this.numLoadedDic[e],delete this.reporterDic[e];var i=this.deleteDispatcher(e);if(t){delete this.groupErrorDic[e];var n=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e],i.dispatchEventWith("error",!1,{itemList:n,lastError:t})}else{var r=this.groupErrorDic[e];if(delete this.groupErrorDic[e],r){var n=this.loadItemErrorDic[e];delete this.loadItemErrorDic[e];var o=this.errorDic[e];delete this.errorDic[e],i.dispatchEventWith("error",!1,{itemList:n,error:o})}else i.dispatchEventWith("complete")}},t.prototype.deleteDispatcher=function(e){delete this.promiseHash[e];var t=this.dispatcherDic[e];return delete this.dispatcherDic[e],t},t.prototype.loadResource=function(t,i){if(!i){if(1==e.FEATURE_FLAG.FIX_DUPLICATE_LOAD){var n=e.host.state[t.root+t.name];if(2==n)return Promise.resolve(e.host.get(t));if(1==n)return t.promise}i=e.processor.isSupport(t)}if(!i)throw new e.ResourceManagerError(2001,t.name,t.type);e.host.state[t.root+t.name]=1;var r=i.onLoadStart(e.host,t);return t.promise=r,r},t.prototype.unloadResource=function(t){var i=e.host.get(t);if(!i)return console.warn("尝试释放不存在的资源:",t.name),!1;var n=e.processor.isSupport(t);return n?(n.onRemoveStart(e.host,t),e.host.remove(t),1==t.extra&&e.config.removeResourceData(t),!0):!0},t}();e.ResourceLoader=t,__reflect(t.prototype,"RES.ResourceLoader")}(RES||(RES={}));var RES;!function(e){e.checkNull=function(e,t,i){var n=i.value;i.value=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];return e[0]?n.apply(this,e):(console.warn("方法"+t+"的参数不能为null"),null)}},e.FEATURE_FLAG={FIX_DUPLICATE_LOAD:1};var t;!function(e){function t(e){i=e}var i="warning";e.setUpgradeGuideLevel=t}(t=e.upgrade||(e.upgrade={}))}(RES||(RES={}));var RES;!function(e){function t(t){var i=e.config.config.fileSystem.getFile(t);return i||(t=e.resourceNameSelector(t),i=e.config.config.fileSystem.getFile(t)),i}function i(e,t){var i;i=e.indexOf(".json")>=0?"legacyResourceConfig":"resourceConfig",n={type:i,root:t,url:e,name:e}}e.resourceNameSelector=function(e){return e},e.getResourceInfo=t;var n;e.setConfigURL=i;var r=function(){function i(){}return i.prototype.init=function(){return this.config||(this.config={alias:{},groups:{},resourceRoot:n.root,mergeSelector:null,fileSystem:null,loadGroup:[]}),e.queue.pushResItem(n)["catch"](function(t){return e.isCompatible||t.__resource_manager_error__||(t.error?console.error(t.error.stack):console.error(t.stack),t=new e.ResourceManagerError(1002)),e.host.remove(n),Promise.reject(t)})},i.prototype.getGroupByName=function(t){var i=this.config.groups[t],n=[];if(!i)return n;for(var r=0,o=i;r<o.length;r++){var a=o[r],s=void 0;if(s=e.config.getResourceWithSubkey(a),null!=s){var l=s.r,u=s.key;if(null==l)throw new e.ResourceManagerError(2005,u);-1==n.indexOf(l)&&n.push(l)}}return n},i.prototype.__temp__get__type__via__url=function(t){var i=this.config.alias[t];if(i||(i=t),e.typeSelector){var n=e.typeSelector(i);if(!n)throw new e.ResourceManagerError(2004,i);return n}return console.warn("RES.mapConfig 并未设置 typeSelector"),"unknown"},i.prototype.getResourceWithSubkey=function(e){e=this.getKeyByAlias(e);var t=e.indexOf("#"),i="";t>=0&&(i=e.substr(t+1),e=e.substr(0,t));var n=this.getResource(e);return n?{r:n,key:e,subkey:i}:null},i.prototype.getKeyByAlias=function(e){return this.config.alias[e]?this.config.alias[e]:e},i.prototype.getResource=function(e){var i=this.config.alias[e];i||(i=e);var n=t(i);return n?n:null},i.prototype.createGroup=function(e,t,i){if(void 0===i&&(i=!1),!i&&this.config.groups[e]||!t||0==t.length)return!1;for(var n=[],r=0,o=t;r<o.length;r++){var a=o[r];if(this.config.groups[a]){var s=this.config.groups[a];n=n.concat(s)}else n.push(a)}return this.config.groups[e]=n,!0},i.prototype.addSubkey=function(e,t){this.addAlias(e,t+"#"+e)},i.prototype.addAlias=function(e,t){this.config.alias[t]&&(t=this.config.alias[t]),this.config.alias[e]=t},i.prototype.addResourceData=function(t){e.hasRes(t.name)||(t.type||(t.type=this.__temp__get__type__via__url(t.url)),e.config.config.fileSystem.addFile(t))},i.prototype.removeResourceData=function(t){e.hasRes(t.name)&&(e.config.config.fileSystem.removeFile(t.url),this.config.alias[t.name]&&delete this.config.alias[t.name])},i}();e.ResourceConfig=r,__reflect(r.prototype,"RES.ResourceConfig")}(RES||(RES={}));var RES;!function(e){function t(t){return e.path.basename(t).split(".").join("_")}function i(t){var i,n=t.substr(t.lastIndexOf(".")+1);switch(n){case e.ResourceItem.TYPE_XML:case e.ResourceItem.TYPE_JSON:case e.ResourceItem.TYPE_SHEET:i=n;break;case"png":case"jpg":case"gif":case"jpeg":case"bmp":i=e.ResourceItem.TYPE_IMAGE;break;case"fnt":i=e.ResourceItem.TYPE_FONT;break;case"txt":i=e.ResourceItem.TYPE_TEXT;break;case"mp3":case"ogg":case"mpeg":case"wav":case"m4a":case"mp4":case"aiff":case"wma":case"mid":i=e.ResourceItem.TYPE_SOUND;break;case"mergeJson":case"zip":case"pvr":i=n;break;default:i=e.ResourceItem.TYPE_BIN}return i}function n(t,i){throw new e.ResourceManagerError(2002)}function r(t){e.isCompatible=t}function o(t,i){if(i.indexOf("://")>=0){var n=i.split("://");i=n[0]+"://"+e.path.normalize(n[1]+"/"),t=t.replace(i,"")}else i=e.path.normalize(i+"/"),t=t.replace(i,"");return e.setConfigURL(t,i),T||(T=new S),a(T.loadConfig())}function a(t){return e.isCompatible?void t["catch"](function(e){}).then():t}function s(e,t,i){return void 0===t&&(t=0),a(T.loadGroup(e,t,i))}function l(e){return T.isGroupLoaded(e)}function u(t){return T.getGroupByName(t).map(function(t){return e.ResourceItem.convertToResItem(t)})}function c(e,t,i){return void 0===i&&(i=!1),T.createGroup(e,t,i)}function h(e){return T.hasRes(e)}function p(e){return T.getRes(e)}function d(e,t,i){return a(T.getResAsync.apply(T,arguments))}function f(e,t,i,n){return void 0===n&&(n=""),a(T.getResByUrl(e,t,i,n))}function m(e,t){return T.destroyRes(e,t)}function g(e){T||(T=new S),T.setMaxLoadingThread(e)}function v(e){T.setMaxRetryTimes(e)}function y(e,t,i,n,r){void 0===n&&(n=!1),void 0===r&&(r=0),T||(T=new S),T.addEventListener(e,t,i,n,r)}function _(e,t,i,n){void 0===n&&(n=!1),T.removeEventListener(e,t,i,n)}function b(e){T.addResourceData(e)}function w(){return T||(T=new S),T.vcs}function x(e){T||(T=new S),T.registerVersionController(e)}function E(e){return T.vcs?T.vcs.getVirtualUrl(e):e}e.nameSelector=t,e.typeSelector=i,e.registerAnalyzer=n,e.setIsCompatible=r,e.isCompatible=!1,e.loadConfig=o,e.loadGroup=s,e.isGroupLoaded=l,e.getGroupByName=u,e.createGroup=c,e.hasRes=h,e.getRes=p,e.getResAsync=d,e.getResByUrl=f,e.destroyRes=m,e.setMaxLoadingThread=g,e.setMaxRetryTimes=v,e.addEventListener=y,e.removeEventListener=_,e.$addResourceData=b,e.getVersionController=w,e.registerVersionController=x,e.getVirtualUrl=E;var S=function(t){function i(){var i=t.call(this)||this;return i.isVcsInit=!1,i.normalLoadConfig=function(){return e.config.init().then(function(t){e.ResourceEvent.dispatchResourceEvent(i,e.ResourceEvent.CONFIG_COMPLETE)},function(t){return e.ResourceEvent.dispatchResourceEvent(i,e.ResourceEvent.CONFIG_LOAD_ERROR),Promise.reject(t)})},e.VersionController&&(i.vcs=new e.VersionController),i}return __extends(i,t),i.prototype.registerVersionController=function(e){this.vcs=e,this.isVcsInit=!1},i.prototype.loadConfig=function(){var e=this;return!this.isVcsInit&&this.vcs?(this.isVcsInit=!0,this.vcs.init().then(function(){return e.normalLoadConfig()})):this.normalLoadConfig()},i.prototype.isGroupLoaded=function(t){var i=e.config.getGroupByName(t);return i.every(function(t){return null!=e.host.get(t)})},i.prototype.getGroupByName=function(t){return e.config.getGroupByName(t)},i.prototype.loadGroup=function(t,i,n){var r=this;void 0===i&&(i=0);var o={onProgress:function(i,o,a){n&&n.onProgress&&n.onProgress(i,o,a),e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.GROUP_PROGRESS,t,a,i,o)}};return this._loadGroup(t,i,o).then(function(i){-1==e.config.config.loadGroup.indexOf(t)&&e.config.config.loadGroup.push(t),e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.GROUP_COMPLETE,t)},function(i){if(-1==e.config.config.loadGroup.indexOf(t)&&e.config.config.loadGroup.push(t),i.itemList)for(var n=i.itemList,o=n.length,a=0;o>a;a++){var s=n[a];delete s.promise,e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.ITEM_LOAD_ERROR,t,s)}return e.isCompatible&&console.warn(i.error.message),e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.GROUP_LOAD_ERROR,t),Promise.reject(i.error)})},i.prototype._loadGroup=function(t,i,n){void 0===i&&(i=0);var r=e.config.getGroupByName(t);return 0==r.length?new Promise(function(i,n){n({error:new e.ResourceManagerError(2005,t)})}):e.queue.pushResGroup(r,t,i,n)},i.prototype.createGroup=function(t,i,n){return void 0===n&&(n=!1),e.config.createGroup(t,i,n)},i.prototype.hasRes=function(t){return null!=e.config.getResourceWithSubkey(t)},i.prototype.getRes=function(t){var i=e.config.getResourceWithSubkey(t);if(i){var n=i.r,r=i.key,o=i.subkey,a=e.processor.isSupport(n);return a&&a.getData&&o?a.getData(e.host,n,r,o):e.host.get(n)}return null},i.prototype.getResAsync=function(t,i,n){var r=this,o=t,a=e.config.getResourceWithSubkey(t);if(null==a)return i&&i.call(n,null,o),Promise.reject(new e.ResourceManagerError(2006,t));var s=a.r,l=a.subkey;return e.queue.pushResItem(s).then(function(r){e.host.save(s,r);var a=e.processor.isSupport(s);return a&&a.getData&&l&&(r=a.getData(e.host,s,t,l)),i&&i.call(n,r,o),r},function(t){return e.host.remove(s),e.ResourceEvent.dispatchResourceEvent(r,e.ResourceEvent.ITEM_LOAD_ERROR,"",s),i?(i.call(n,null,o),Promise.reject(null)):Promise.reject(t)})},i.prototype.getResByUrl=function(t,i,n,r){var o=this;void 0===r&&(r="");var a=e.config.getResource(t);if(!a&&(r||(r=e.config.__temp__get__type__via__url(t)),a={name:t,url:t,type:r,root:"",extra:1},e.config.addResourceData(a),a=e.config.getResource(t),!a))throw"never";return e.queue.pushResItem(a).then(function(t){return e.host.save(a,t),i&&a&&i.call(n,t,a.url),t},function(r){return e.host.remove(a),e.ResourceEvent.dispatchResourceEvent(o,e.ResourceEvent.ITEM_LOAD_ERROR,"",a),i?(i.call(n,null,t),Promise.reject(null)):Promise.reject(r)})},i.prototype.destroyRes=function(t,i){void 0===i&&(i=!0);var n=e.config.getGroupByName(t);if(n&&n.length>0){var r=e.config.config.loadGroup.indexOf(t);if(-1==r)return!1;if(i||1==e.config.config.loadGroup.length&&e.config.config.loadGroup[0]==t){for(var o=0,a=n;o<a.length;o++){var s=a[o];e.queue.unloadResource(s)}e.config.config.loadGroup.splice(r,1)}else{for(var l={},u=0,c=e.config.config.loadGroup;u<c.length;u++){var h=c[u];for(var p in e.config.config.groups[h]){var d=e.config.config.groups[h][p];
l[d]?l[d]++:l[d]=1}}for(var f=0,m=n;f<m.length;f++){var s=m[f];l[s.name]&&1==l[s.name]&&e.queue.unloadResource(s)}e.config.config.loadGroup.splice(r,1)}return!0}var s=e.config.getResource(t);return s?e.queue.unloadResource(s):(console.warn("在内存"+t+"资源不存在"),!1)},i.prototype.setMaxLoadingThread=function(t){1>t&&(t=1),e.queue.thread=t},i.prototype.setMaxRetryTimes=function(t){t=Math.max(t,0),e.queue.maxRetryTimes=t},i.prototype.addResourceData=function(t){t.root="",e.config.addResourceData(t)},__decorate([e.checkNull],i.prototype,"hasRes",null),__decorate([e.checkNull],i.prototype,"getRes",null),__decorate([e.checkNull],i.prototype,"getResAsync",null),__decorate([e.checkNull],i.prototype,"getResByUrl",null),i}(egret.EventDispatcher);e.Resource=S,__reflect(S.prototype,"RES.Resource");var T}(RES||(RES={}));var RES;!function(e){var t;!function(e){function t(e){var t=e.split("/");return t.filter(function(e,i){return!!e||i==t.length-1}).join("/")}function i(e){return e.substr(e.lastIndexOf("/")+1)}function n(e){return e.substr(0,e.lastIndexOf("/"))}e.normalize=t,e.basename=i,e.dirname=n}(t=e.path||(e.path={}))}(RES||(RES={}));var RES;!function(e){function t(){e.config.config.fileSystem.profile(),console.log(i);var t=0;for(var n in i){var r=i[n];r instanceof egret.Texture&&(t+=r.$bitmapWidth*r.$bitmapHeight*4)}console.log("gpu size : "+(t/1024).toFixed(3)+"kb")}var i={};e.profile=t,e.host={state:{},get resourceConfig(){return e.config},load:function(t,i){var n="string"==typeof i?e.processor._map[i]:i;return e.queue.loadResource(t,n)},unload:function(t){return e.queue.unloadResource(t)},save:function(t,n){e.host.state[t.root+t.name]=2,delete t.promise,i[t.root+t.name]=n},get:function(e){return i[e.root+e.name]},remove:function(t){delete e.host.state[t.root+t.name],delete i[t.root+t.name]}},e.config=new e.ResourceConfig,e.queue=new e.ResourceLoader;var n=function(e){function t(i,n,r){var o=e.call(this)||this;return o.__resource_manager_error__=!0,o.name=i.toString(),o.message=t.errorMessage[i].replace("{0}",n).replace("{1}",r),o}return __extends(t,e),t.errorMessage={1001:"文件加载失败:{0}",1002:"ResourceManager 初始化失败：配置文件加载失败",2001:"{0}解析失败,不支持指定解析类型:'{1}'，请编写自定义 Processor ，更多内容请参见 https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2002:"Analyzer 相关API 在 ResourceManager 中不再支持，请编写自定义 Processor ，更多内容请参见 https://github.com/egret-labs/resourcemanager/blob/master/docs/README.md#processor",2003:"{0}解析失败,错误原因:{1}",2004:"无法找到文件类型:{0}",2005:'RES加载了不存在或空的资源组:"{0}"',2006:"资源配置文件中无法找到特定的资源:{0}"},t}(Error);e.ResourceManagerError=n,__reflect(n.prototype,"RES.ResourceManagerError")}(RES||(RES={}));var RES;!function(e){var t;!function(t){function i(e){return t._map[e.type]}function n(e,i){t._map[e]=i}function r(t,i){var n=this;return new Promise(function(r,o){var a=function(){var e=t.data?t.data:t.response;r(e)},s=function(){var t=new e.ResourceManagerError(1001,i.url);o(t)};t.addEventListener(egret.Event.COMPLETE,a,n),t.addEventListener(egret.IOErrorEvent.IO_ERROR,s,n)})}function o(e,t){if(-1!=t.indexOf("://"))return t;e=e.split("\\").join("/");var i=e.match(/#.*|\?.*/),n="";i&&(n=i[0]);var r=e.lastIndexOf("/");return e=-1!=r?e.substring(0,r+1)+t:t,e+n}t.isSupport=i,t.map=n,t.getRelativePath=o,t.ImageProcessor={onLoadStart:function(t,i){var n=new egret.ImageLoader;return n.load(e.getVirtualUrl(i.root+i.url)),r(n,i).then(function(e){var n=new egret.Texture;n._setBitmapData(e);var r=t.resourceConfig.getResource(i.name);if(r&&r.scale9grid){var o=r.scale9grid.split(",");n.scale9Grid=new egret.Rectangle(parseInt(o[0]),parseInt(o[1]),parseInt(o[2]),parseInt(o[3]))}return n})},onRemoveStart:function(e,t){var i=e.get(t);i.dispose()}},t.BinaryProcessor={onLoadStart:function(t,i){var n=new egret.HttpRequest;return n.responseType=egret.HttpResponseType.ARRAY_BUFFER,n.open(e.getVirtualUrl(i.root+i.url),"get"),n.send(),r(n,i)},onRemoveStart:function(e,t){}},t.TextProcessor={onLoadStart:function(t,i){var n=new egret.HttpRequest;return n.responseType=egret.HttpResponseType.TEXT,n.open(e.getVirtualUrl(i.root+i.url),"get"),n.send(),r(n,i)},onRemoveStart:function(e,t){return!0}},t.JsonProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(e){var t=JSON.parse(e);return t})},onRemoveStart:function(e,t){}},t.XMLProcessor={onLoadStart:function(e,t){return e.load(t,"text").then(function(e){var t=egret.XML.parse(e);return t})},onRemoveStart:function(e,t){return!0}},t.CommonJSProcessor={onLoadStart:function(t,i){return t.load(i,"text").then(function(t){var n=new Function("require","exports",t),r=function(){},o={};try{n(r,o)}catch(a){throw new e.ResourceManagerError(2003,i.name,a.message)}return o})},onRemoveStart:function(e,t){}},t.SheetProcessor={onLoadStart:function(t,i){return t.load(i,"json").then(function(n){var r=t.resourceConfig.getResource(e.nameSelector(n.file));if(!r){var a=o(i.url,n.file);r={name:a,url:a,type:"image",root:i.root}}return t.load(r).then(function(e){var i=n.frames,o=new egret.SpriteSheet(e);o.$resourceInfo=r;for(var a in i){var s=i[a],l=o.createTexture(a,s.x,s.y,s.w,s.h,s.offX,s.offY,s.sourceW,s.sourceH);if(s.scale9grid){var u=s.scale9grid,c=u.split(",");l.scale9Grid=new egret.Rectangle(parseInt(c[0]),parseInt(c[1]),parseInt(c[2]),parseInt(c[3]))}}return t.save(r,e),o},function(e){throw t.remove(r),e})})},getData:function(e,t,i,n){var r=e.get(t);return r?r.getTexture(n):null},onRemoveStart:function(e,t){var i=e.get(t),n=i.$resourceInfo;i.dispose(),e.unload(n)}};var a=function(e,t){var i="",n=t.split("\n"),r=n[2],o=r.indexOf('file="');-1!=o&&(r=r.substring(o+6),o=r.indexOf('"'),i=r.substring(0,o)),e=e.split("\\").join("/");var o=e.lastIndexOf("/");return e=-1!=o?e.substring(0,o+1)+i:i};t.FontProcessor={onLoadStart:function(t,i){return t.load(i,"text").then(function(n){var r;try{r=JSON.parse(n)}catch(s){r=n}var l;l="string"==typeof r?a(i.url,r):o(i.url,r.file);var u=t.resourceConfig.getResource(e.nameSelector(l));return u||(u={name:l,url:l,type:"image",root:i.root}),t.load(u).then(function(e){var i=new egret.BitmapFont(e,r);return i.$resourceInfo=u,t.save(u,e),i},function(e){throw t.remove(u),e})})},onRemoveStart:function(e,t){var i=e.get(t),n=i.$resourceInfo;e.unload(n)}},t.SoundProcessor={onLoadStart:function(t,i){var n=new egret.Sound;return n.load(e.getVirtualUrl(i.root+i.url)),r(n,i).then(function(){return n})},onRemoveStart:function(e,t){}},t.MovieClipProcessor={onLoadStart:function(t,i){var n,r;return t.load(i,"json").then(function(o){n=o;var a=i.name,s=a.substring(0,a.lastIndexOf("."))+".png";if(r=t.resourceConfig.getResource(s),!r)throw new e.ResourceManagerError(1001,s);return t.load(r)}).then(function(e){t.save(r,e);var i=e,o=new egret.MovieClipDataFactory(n,i);return o})},onRemoveStart:function(e,t){var i=e.get(t);i.clearCache(),i.$spriteSheet.dispose();var n=t.name,r=n.substring(0,n.lastIndexOf("."))+".png",o=e.resourceConfig.getResource(r);o&&e.unload(o)}},t.MergeJSONProcessor={onLoadStart:function(t,i){return t.load(i,"json").then(function(t){for(var n in t)e.config.addSubkey(n,i.name);return t})},getData:function(e,t,i,n){var r=e.get(t);return r?r[n]:(console.error("missing resource :"+t.name),null)},onRemoveStart:function(e,t){}},t.LegacyResourceConfigProcessor={onLoadStart:function(t,i){return t.load(i,"json").then(function(n){var r=e.config.config,o=i.root,a=r.fileSystem;a||(a={fsData:{},getFile:function(e){return p[e]},addFile:function(e){e.type||(e.type=""),void 0==o&&(e.root=""),p[e.name]=e},profile:function(){console.log(p)},removeFile:function(e){delete p[e]}},r.fileSystem=a);for(var s=r.groups,l=0,u=n.groups;l<u.length;l++){var c=u[l];""==c.keys?s[c.name]=[]:s[c.name]=c.keys.split(",")}for(var h=r.alias,p=a.fsData,d=function(e){p[e.name]=e,p[e.name].root=o,e.subkeys&&e.subkeys.split(",").forEach(function(t){h[t]=e.name+"#"+t,h[e.name+"."+t]=e.name+"#"+t})},f=0,m=n.resources;f<m.length;f++){var g=m[f];d(g)}return t.save(i,n),n})},onRemoveStart:function(){}},t._map={image:t.ImageProcessor,json:t.JsonProcessor,text:t.TextProcessor,xml:t.XMLProcessor,sheet:t.SheetProcessor,font:t.FontProcessor,bin:t.BinaryProcessor,commonjs:t.CommonJSProcessor,sound:t.SoundProcessor,movieclip:t.MovieClipProcessor,mergeJson:t.MergeJSONProcessor,legacyResourceConfig:t.LegacyResourceConfigProcessor}}(t=e.processor||(e.processor={}))}(RES||(RES={}));var RES;!function(e){var t=function(t){function i(e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var r=t.call(this,e,i,n)||this;return r.itemsLoaded=0,r.itemsTotal=0,r.groupName="",r}return __extends(i,t),i.dispatchResourceEvent=function(t,n,r,o,a,s){void 0===r&&(r=""),void 0===o&&(o=void 0),void 0===a&&(a=0),void 0===s&&(s=0);var l=egret.Event.create(i,n);l.groupName=r,o&&(l.resItem=e.ResourceItem.convertToResItem(o)),l.itemsLoaded=a,l.itemsTotal=s;var u=t.dispatchEvent(l);return egret.Event.release(l),u},i.ITEM_LOAD_ERROR="itemLoadError",i.CONFIG_COMPLETE="configComplete",i.CONFIG_LOAD_ERROR="configLoadError",i.GROUP_PROGRESS="groupProgress",i.GROUP_COMPLETE="groupComplete",i.GROUP_LOAD_ERROR="groupLoadError",i}(egret.Event);e.ResourceEvent=t,__reflect(t.prototype,"RES.ResourceEvent")}(RES||(RES={}));var RES;!function(e){var t;!function(t){function i(t){var i=t.name;if(e.config.config)for(var n in e.config.config.alias)e.config.config.alias[n]==t.url&&(i=n);else i=t.url;var r={name:i,url:t.url,type:t.type,data:t,root:t.root};return r}t.TYPE_XML="xml",t.TYPE_IMAGE="image",t.TYPE_BIN="bin",t.TYPE_TEXT="text",t.TYPE_JSON="json",t.TYPE_SHEET="sheet",t.TYPE_FONT="font",t.TYPE_SOUND="sound",t.convertToResItem=i}(t=e.ResourceItem||(e.ResourceItem={}))}(RES||(RES={}));var RES;!function(e){var t=function(){function t(e){this.data=e}return t.prototype.profile=function(){console.log(this.data)},t.prototype.addFile=function(t,i){i||(i=""),t=e.path.normalize(t);var n=e.path.basename(t),r=e.path.dirname(t);this.exists(r)||this.mkdir(r);var o=this.resolve(r);o[n]={url:t,type:i}},t.prototype.getFile=function(e){var t=this.resolve(e);return t&&(t.name=e),t},t.prototype.resolve=function(t){if(""==t)return this.data;t=e.path.normalize(t);for(var i=t.split("/"),n=this.data,r=0,o=i;r<o.length;r++){var a=o[r];if(!n)return n;n=n[a]}return n},t.prototype.mkdir=function(t){t=e.path.normalize(t);for(var i=t.split("/"),n=this.data,r=0,o=i;r<o.length;r++){var a=o[r];n[a]||(n[a]={}),n=n[a]}},t.prototype.exists=function(t){if(""==t)return!0;t=e.path.normalize(t);for(var i=t.split("/"),n=this.data,r=0,o=i;r<o.length;r++){var a=o[r];if(!n[a])return!1;n=n[a]}return!0},t}();e.NewFileSystem=t,__reflect(t.prototype,"RES.NewFileSystem")}(RES||(RES={}));var RES;!function(e){var t=function(){function e(){}return e.prototype.init=function(){return this.versionInfo=this.getLocalData("all.manifest"),Promise.resolve()},e.prototype.getVirtualUrl=function(e){return e},e.prototype.getLocalData=function(e){if(egret_native.readUpdateFileSync&&egret_native.readResourceFileSync){var t=egret_native.readUpdateFileSync(e);if(null!=t)return JSON.parse(t);if(t=egret_native.readResourceFileSync(e),null!=t)return JSON.parse(t)}return null},e}();e.NativeVersionController=t,__reflect(t.prototype,"RES.NativeVersionController",["RES.IVersionController"]),egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE&&(e.VersionController=t)}(RES||(RES={}));var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},egret;!function(e){var t=function(){function t(){e.$error(1014)}return t.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},t.getPowIn=function(e){return function(t){return Math.pow(t,e)}},t.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},t.getPowInOut=function(e){return function(t){return(t*=2)<1?.5*Math.pow(t,e):1-.5*Math.abs(Math.pow(2-t,e))}},t.sineIn=function(e){return 1-Math.cos(e*Math.PI/2)},t.sineOut=function(e){return Math.sin(e*Math.PI/2)},t.sineInOut=function(e){return-.5*(Math.cos(Math.PI*e)-1)},t.getBackIn=function(e){return function(t){return t*t*((e+1)*t-e)}},t.getBackOut=function(e){return function(t){return--t*t*((e+1)*t+e)+1}},t.getBackInOut=function(e){return e*=1.525,function(t){return(t*=2)<1?.5*(t*t*((e+1)*t-e)):.5*((t-=2)*t*((e+1)*t+e)+2)}},t.circIn=function(e){return-(Math.sqrt(1-e*e)-1)},t.circOut=function(e){return Math.sqrt(1- --e*e)},t.circInOut=function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},t.bounceIn=function(e){return 1-t.bounceOut(1-e)},t.bounceOut=function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},t.bounceInOut=function(e){return.5>e?.5*t.bounceIn(2*e):.5*t.bounceOut(2*e-1)+.5},t.getElasticIn=function(e,t){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=t/i*Math.asin(1/e);return-(e*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/t))}},t.getElasticOut=function(e,t){var i=2*Math.PI;return function(n){if(0==n||1==n)return n;var r=t/i*Math.asin(1/e);return e*Math.pow(2,-10*n)*Math.sin((n-r)*i/t)+1}},t.getElasticInOut=function(e,t){var i=2*Math.PI;return function(n){var r=t/i*Math.asin(1/e);return(n*=2)<1?-.5*(e*Math.pow(2,10*(n-=1))*Math.sin((n-r)*i/t)):e*Math.pow(2,-10*(n-=1))*Math.sin((n-r)*i/t)*.5+1}},t.quadIn=t.getPowIn(2),t.quadOut=t.getPowOut(2),t.quadInOut=t.getPowInOut(2),t.cubicIn=t.getPowIn(3),t.cubicOut=t.getPowOut(3),t.cubicInOut=t.getPowInOut(3),t.quartIn=t.getPowIn(4),t.quartOut=t.getPowOut(4),t.quartInOut=t.getPowInOut(4),t.quintIn=t.getPowIn(5),t.quintOut=t.getPowOut(5),t.quintInOut=t.getPowInOut(5),t.backIn=t.getBackIn(1.7),t.backOut=t.getBackOut(1.7),t.backInOut=t.getBackInOut(1.7),t.elasticIn=t.getElasticIn(1,.3),t.elasticOut=t.getElasticOut(1,.3),t.elasticInOut=t.getElasticInOut(1,.3*1.5),t}();e.Ease=t,__reflect(t.prototype,"egret.Ease")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(e,i,n){var r=t.call(this)||this;return r._target=null,r._useTicks=!1,r.ignoreGlobalPause=!1,r.loop=!1,r.pluginData=null,r._steps=null,r.paused=!1,r.duration=0,r._prevPos=-1,r.position=null,r._prevPosition=0,r._stepPosition=0,r.passive=!1,r.initialize(e,i,n),r}return __extends(i,t),i.get=function(e,t,n,r){return void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(e),new i(e,t,n)},i.removeTweens=function(e){if(e.tween_count){for(var t=i._tweens,n=t.length-1;n>=0;n--)t[n]._target==e&&(t[n].paused=!0,t.splice(n,1));e.tween_count=0}},i.pauseTweens=function(t){if(t.tween_count)for(var i=e.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==t&&(i[n].paused=!0)},i.resumeTweens=function(t){if(t.tween_count)for(var i=e.Tween._tweens,n=i.length-1;n>=0;n--)i[n]._target==t&&(i[n].paused=!1)},i.tick=function(e,t){void 0===t&&(t=!1);var n=e-i._lastTime;i._lastTime=e;for(var r=i._tweens.concat(),o=r.length-1;o>=0;o--){var a=r[o];t&&!a.ignoreGlobalPause||a.paused||a.$tick(a._useTicks?1:n)}return!1},i._register=function(t,n){var r=t._target,o=i._tweens;if(n)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),o.push(t),i._inited||(i._lastTime=e.getTimer(),e.ticker.$startTick(i.tick,null),i._inited=!0);else{r&&r.tween_count--;for(var a=o.length;a--;)if(o[a]==t)return void o.splice(a,1)}},i.removeAllTweens=function(){for(var e=i._tweens,t=0,n=e.length;n>t;t++){var r=e[t];r.paused=!0,r._target.tween_count=0}e.length=0},i.prototype.initialize=function(e,t,n){this._target=e,t&&(this._useTicks=t.useTicks,this.ignoreGlobalPause=t.ignoreGlobalPause,this.loop=t.loop,t.onChange&&this.addEventListener("change",t.onChange,t.onChangeObj),t.override&&i.removeTweens(e)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],t&&t.paused?this.paused=!0:i._register(this,!0),t&&null!=t.position&&this.setPosition(t.position,i.NONE)},i.prototype.setPosition=function(e,t){void 0===t&&(t=1),0>e&&(e=0);var i=e,n=!1;if(i>=this.duration)if(this.loop){var r=i%this.duration;i=i>0&&0===r?this.duration:r}else i=this.duration,n=!0;if(i==this._prevPos)return n;n&&this.setPaused(!0);var o=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=e,this._target&&this._steps.length>0){for(var a=this._steps.length,s=-1,l=0;a>l&&!("step"==this._steps[l].type&&(s=l,this._steps[l].t<=i&&this._steps[l].t+this._steps[l].d>=i));l++);for(var l=0;a>l;l++)if("action"==this._steps[l].type)0!=t&&(this._useTicks?this._runAction(this._steps[l],i,i):1==t&&o>i?(o!=this.duration&&this._runAction(this._steps[l],o,this.duration),this._runAction(this._steps[l],0,i,!0)):this._runAction(this._steps[l],o,i));else if("step"==this._steps[l].type&&s==l){var u=this._steps[s];this._updateTargetProps(u,Math.min((this._stepPosition=i-u.t)/u.d,1))}}return this.dispatchEventWith("change"),n},i.prototype._runAction=function(e,t,i,n){void 0===n&&(n=!1);var r=t,o=i;t>i&&(r=i,o=t);var a=e.t;(a==o||a>r&&o>a||n&&a==t)&&e.f.apply(e.o,e.p)},i.prototype._updateTargetProps=function(e,t){var n,r,o,a,s,l;if(e||1!=t){if(this.passive=!!e.v,this.passive)return;e.e&&(t=e.e(t,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var u in this._initQueueProps){null==(a=n[u])&&(n[u]=a=this._initQueueProps[u]),null==(s=r[u])&&(r[u]=s=a),o=a==s||0==t||1==t||"number"!=typeof a?1==t?s:a:a+(s-a)*t;var c=!1;if(l=i._plugins[u])for(var h=0,p=l.length;p>h;h++){var d=l[h].tween(this,u,o,n,r,t,!!e&&n==r,!e);d==i.IGNORE?c=!0:o=d}c||(this._target[u]=o)}},i.prototype.setPaused=function(e){return this.paused==e?this:(this.paused=e,i._register(this,!e),this)},i.prototype._cloneProps=function(e){var t={};for(var i in e)t[i]=e[i];return t},i.prototype._addStep=function(e){return e.d>0&&(e.type="step",this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},i.prototype._appendQueueProps=function(e){var t,n,r,o,a;for(var s in e)if(void 0===this._initQueueProps[s]){if(n=this._target[s],t=i._plugins[s])for(r=0,o=t.length;o>r;r++)n=t[r].init(this,s,n);this._initQueueProps[s]=this._curQueueProps[s]=void 0===n?null:n}else n=this._curQueueProps[s];for(var s in e){if(n=this._curQueueProps[s],t=i._plugins[s])for(a=a||{},r=0,o=t.length;o>r;r++)t[r].step&&t[r].step(this,s,n,e[s],a);this._curQueueProps[s]=e[s]}return a&&this._appendQueueProps(a),this._curQueueProps},i.prototype._addAction=function(e){return e.t=this.duration,e.type="action",this._steps.push(e),this},i.prototype._set=function(e,t){for(var i in e)t[i]=e[i]},i.prototype.wait=function(e,t){if(null==e||0>=e)return this;var i=this._cloneProps(this._curQueueProps);return this._addStep({d:e,p0:i,p1:i,v:t})},i.prototype.to=function(e,t,i){return void 0===i&&(i=void 0),(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(e))}),this.set(e)},i.prototype.call=function(e,t,i){return void 0===t&&(t=void 0),void 0===i&&(i=void 0),this._addAction({f:e,p:i?i:[],o:t?t:this._target})},i.prototype.set=function(e,t){return void 0===t&&(t=null),this._appendQueueProps(e),this._addAction({f:this._set,o:this,p:[e,t?t:this._target]})},i.prototype.play=function(e){return e||(e=this),this.call(e.setPaused,e,[!1])},i.prototype.pause=function(e){return e||(e=this),this.call(e.setPaused,e,[!0])},i.prototype.$tick=function(e){this.paused||this.setPosition(this._prevPosition+e)},i.NONE=0,i.LOOP=1,i.REVERSE=2,i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(e.EventDispatcher);e.Tween=t,__reflect(t.prototype,"egret.Tween")}(egret||(egret={}));var egret;!function(e){var t;!function(t){function i(t){if("function"==typeof t)return t;var i=e.Ease[t];return"function"==typeof i?i:null}function n(e,t,i,n){var r=e.prototype;r.__meta__=r.__meta__||{},r.__meta__[t]=i,n&&(r.__defaultProperty__=t)}var r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.name="",t}return __extends(t,e),t}(e.EventDispatcher);t.BasePath=r,__reflect(r.prototype,"egret.tween.BasePath");var o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.props=void 0,t.duration=500,t.ease=void 0,t}return __extends(t,e),t}(r);t.To=o,__reflect(o.prototype,"egret.tween.To");var a=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.duration=500,t.passive=void 0,t}return __extends(t,e),t}(r);t.Wait=a,__reflect(a.prototype,"egret.tween.Wait");var s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.props=void 0,t}return __extends(t,e),t}(r);t.Set=s,__reflect(s.prototype,"egret.tween.Set");var l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.delta=0,t}return __extends(t,e),t}(r);t.Tick=l,__reflect(l.prototype,"egret.tween.Tick");var u=function(t){function n(){var e=t.call(this)||this;return e.isStop=!1,e}return __extends(n,t),Object.defineProperty(n.prototype,"props",{get:function(){return this._props},set:function(e){this._props=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"target",{get:function(){return this._target},set:function(e){this._target=e},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"paths",{get:function(){return this._paths},set:function(e){this._paths=e||[]},enumerable:!0,configurable:!0}),n.prototype.play=function(e){this.tween?(this.tween.setPaused(!1),this.isStop&&void 0==e&&(e=0,this.isStop=!1),void 0!==e&&null!==e&&this.tween.setPosition(e)):this.createTween(e)},n.prototype.pause=function(){this.tween&&this.tween.setPaused(!0)},n.prototype.stop=function(){this.pause(),this.isStop=!0},n.prototype.createTween=function(t){this.tween=e.Tween.get(this._target,this._props),this._paths&&this.applyPaths(),void 0!==t&&null!==t&&this.tween.setPosition(t)},n.prototype.applyPaths=function(){for(var e=0;e<this._paths.length;e++){var t=this._paths[e];this.applyPath(t)}},n.prototype.applyPath=function(e){var t=this;e instanceof o?this.tween.to(e.props,e.duration,i(e.ease)):e instanceof a?this.tween.wait(e.duration,e.passive):e instanceof s?this.tween.set(e.props):e instanceof l&&this.tween.$tick(e.delta),this.tween.call(function(){return t.pathComplete(e)})},n.prototype.pathComplete=function(e){e.dispatchEventWith("complete"),this.dispatchEventWith("pathComplete",!1,e);var t=this._paths.indexOf(e);t>=0&&t===this._paths.length-1&&this.dispatchEventWith("complete")},n}(e.EventDispatcher);t.TweenItem=u,__reflect(u.prototype,"egret.tween.TweenItem"),n(u,"paths","Array",!0);var c=function(e){function t(){var t=e.call(this)||this;return t.completeCount=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"items",{get:function(){return this._items},set:function(e){this.completeCount=0,this.registerEvent(!1),this._items=e,this.registerEvent(!0)},enumerable:!0,configurable:!0}),t.prototype.registerEvent=function(e){var t=this;this._items&&this._items.forEach(function(i){e?i.addEventListener("complete",t.itemComplete,t):i.removeEventListener("complete",t.itemComplete,t)})},t.prototype.play=function(e){if(this._items)for(var t=0;t<this._items.length;t++){var i=this._items[t];i.play(e)}},t.prototype.pause=function(){if(this._items)for(var e=0;e<this._items.length;e++){var t=this._items[e];t.pause()}},t.prototype.stop=function(){if(this._items)for(var e=0;e<this._items.length;e++){var t=this._items[e];t.stop()}},t.prototype.itemComplete=function(e){var t=e.currentTarget;this.completeCount++,this.dispatchEventWith("itemComplete",!1,t),this.completeCount===this.items.length&&(this.dispatchEventWith("complete"),this.completeCount=0)},t}(e.EventDispatcher);t.TweenGroup=c,__reflect(c.prototype,"egret.tween.TweenGroup"),n(c,"items","Array",!0)}(t=e.tween||(e.tween={}))}(egret||(egret={}));var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},egret;!function(e){var t=function(){function e(){}return e.BINARY="binary",e.TEXT="text",e.VARIABLES="variables",e.TEXTURE="texture",e.SOUND="sound",e}();e.URLLoaderDataFormat=t,__reflect(t.prototype,"egret.URLLoaderDataFormat")}(egret||(egret={}));var egret;!function(e){var t=function(e){function t(t,i,n){var r=e.call(this)||this;return r._name=t,r._frame=0|i,n&&(r._end=0|n),r}return __extends(t,e),Object.defineProperty(t.prototype,"name",{get:function(){return this._name},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"frame",{get:function(){return this._frame},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"end",{get:function(){return this._end},enumerable:!0,configurable:!0}),t.prototype.clone=function(){return new t(this._name,this._frame,this._end)},t}(e.EventDispatcher);e.FrameLabel=t,__reflect(t.prototype,"egret.FrameLabel")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e.$mcData=null,e.numFrames=1,e.frames=[],e.labels=null,e.events=[],e.frameRate=0,e.textureData=null,e.spriteSheet=null,e}return __extends(i,t),i.prototype.$init=function(e,t,i){this.textureData=t,this.spriteSheet=i,this.setMCData(e)},i.prototype.getKeyFrameData=function(e){var t=this.frames[e-1];return t.frame&&(t=this.frames[t.frame-1]),t},i.prototype.getTextureByFrame=function(e){var t=this.getKeyFrameData(e);if(t.res){var i=this.getTextureByResName(t.res);return i}return null},i.prototype.$getOffsetByFrame=function(e,t){var i=this.getKeyFrameData(e);i.res&&t.setTo(0|i.x,0|i.y)},i.prototype.getTextureByResName=function(e){if(null==this.spriteSheet)return null;var t=this.spriteSheet.getTexture(e);if(!t){var i=this.textureData[e];t=this.spriteSheet.createTexture(e,i.x,i.y,i.w,i.h)}return t},i.prototype.$isDataValid=function(){return this.frames.length>0},i.prototype.$isTextureValid=function(){return null!=this.textureData&&null!=this.spriteSheet},i.prototype.$fillMCData=function(e){this.frameRate=e.frameRate||24,this.fillFramesData(e.frames),this.fillFrameLabelsData(e.labels),this.fillFrameEventsData(e.events)},i.prototype.fillFramesData=function(e){for(var t,i=this.frames,n=e?e.length:0,r=0;n>r;r++){var o=e[r];if(i.push(o),o.duration){var a=parseInt(o.duration);if(a>1){t=i.length;for(var s=1;a>s;s++)i.push({frame:t})}}}this.numFrames=i.length},i.prototype.fillFrameLabelsData=function(t){if(t){var i=t.length;if(i>0){this.labels=[];for(var n=0;i>n;n++){var r=t[n];this.labels.push(new e.FrameLabel(r.name,r.frame,r.end))}}}},i.prototype.fillFrameEventsData=function(e){if(e){var t=e.length;if(t>0){this.events=[];for(var i=0;t>i;i++){var n=e[i];this.events[n.frame]=n.name}}}},Object.defineProperty(i.prototype,"mcData",{get:function(){return this.$mcData},set:function(e){this.setMCData(e)},enumerable:!0,configurable:!0}),i.prototype.setMCData=function(e){this.$mcData!=e&&(this.$mcData=e,e&&this.$fillMCData(e))},i}(e.HashObject);e.MovieClipData=t,__reflect(t.prototype,"egret.MovieClipData")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(e,i){var n=t.call(this)||this;return n.enableCache=!0,n.$mcDataCache={},n.$mcDataSet=e,n.setTexture(i),n}return __extends(i,t),i.prototype.clearCache=function(){this.$mcDataCache={}},i.prototype.generateMovieClipData=function(t){if(void 0===t&&(t=""),""==t&&this.$mcDataSet)for(t in this.$mcDataSet.mc)break;if(""==t)return null;var i=this.findFromCache(t,this.$mcDataCache);return i||(i=new e.MovieClipData,this.fillData(t,i,this.$mcDataCache)),i},i.prototype.findFromCache=function(e,t){return this.enableCache&&t[e]?t[e]:null},i.prototype.fillData=function(e,t,i){if(this.$mcDataSet){var n=this.$mcDataSet.mc[e];n&&(t.$init(n,this.$mcDataSet.res,this.$spriteSheet),this.enableCache&&(i[e]=t))}},Object.defineProperty(i.prototype,"mcDataSet",{get:function(){return this.$mcDataSet},set:function(e){this.$mcDataSet=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"texture",{set:function(e){this.setTexture(e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"spriteSheet",{get:function(){return this.$spriteSheet},enumerable:!0,configurable:!0}),i.prototype.setTexture=function(t){this.$spriteSheet=t?new e.SpriteSheet(t):null},i}(e.EventDispatcher);e.MovieClipDataFactory=t,__reflect(t.prototype,"egret.MovieClipDataFactory")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(e,i,n,r){void 0===i&&(i=!1),void 0===n&&(n=!1),void 0===r&&(r=null);var o=t.call(this,e,i,n)||this;return o.frameLabel=null,o.frameLabel=r,o}return __extends(i,t),i.dispatchMovieClipEvent=function(t,n,r){void 0===r&&(r=null);var o=e.Event.create(i,n);o.frameLabel=r;var a=t.dispatchEvent(o);return e.Event.release(o),a},i.FRAME_LABEL="frame_label",i}(e.Event);e.MovieClipEvent=t,__reflect(t.prototype,"egret.MovieClipEvent")}(egret||(egret={}));var egret;!function(e){var t=function(){function t(){e.$error(1014)}return t.get=function(e){return-1>e&&(e=-1),e>1&&(e=1),function(t){return 0==e?t:0>e?t*(t*-e+1+e):t*((2-t)*e+(1-e))}},t.getPowOut=function(e){return function(t){return 1-Math.pow(1-t,e)}},t.quintOut=t.getPowOut(5),t.quartOut=t.getPowOut(4),t}();e.ScrollEase=t,__reflect(t.prototype,"egret.ScrollEase");var i=function(t){function i(e,i,n){var r=t.call(this)||this;return r._target=null,r._useTicks=!1,r.ignoreGlobalPause=!1,r.loop=!1,r.pluginData=null,r._steps=null,r._actions=null,r.paused=!1,r.duration=0,r._prevPos=-1,r.position=null,r._prevPosition=0,r._stepPosition=0,r.passive=!1,r.initialize(e,i,n),r}return __extends(i,t),i.get=function(e,t,n,r){return void 0===t&&(t=null),void 0===n&&(n=null),void 0===r&&(r=!1),r&&i.removeTweens(e),new i(e,t,n)},i.removeTweens=function(e){if(e.tween_count){for(var t=i._tweens,n=t.length-1;n>=0;n--)t[n]._target==e&&(t[n].paused=!0,t.splice(n,1));e.tween_count=0}},i.tick=function(e,t){void 0===t&&(t=!1);var n=e-i._lastTime;i._lastTime=e;for(var r=i._tweens.concat(),o=r.length-1;o>=0;o--){var a=r[o];t&&!a.ignoreGlobalPause||a.paused||a.tick(a._useTicks?1:n)}return!1},i._register=function(t,n){var r=t._target,o=i._tweens;if(n)r&&(r.tween_count=r.tween_count>0?r.tween_count+1:1),o.push(t),i._inited||(i._lastTime=e.getTimer(),e.ticker.$startTick(i.tick,null),i._inited=!0);else{r&&r.tween_count--;for(var a=o.length;a--;)if(o[a]==t)return void o.splice(a,1)}},i.prototype.initialize=function(e,t,n){this._target=e,t&&(this._useTicks=t.useTicks,this.ignoreGlobalPause=t.ignoreGlobalPause,this.loop=t.loop,t.onChange&&this.addEventListener("change",t.onChange,t.onChangeObj),t.override&&i.removeTweens(e)),this.pluginData=n||{},this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],t&&t.paused?this.paused=!0:i._register(this,!0),t&&null!=t.position&&this.setPosition(t.position)},i.prototype.setPosition=function(e,t){void 0===t&&(t=1),0>e&&(e=0);var i=e,n=!1;if(i>=this.duration&&(this.loop?i%=this.duration:(i=this.duration,n=!0)),i==this._prevPos)return n;var r=this._prevPos;if(this.position=this._prevPos=i,this._prevPosition=e,this._target)if(n)this._updateTargetProps(null,1);else if(this._steps.length>0){var o=void 0,a=this._steps.length;for(o=0;a>o&&!(this._steps[o].t>i);o++);var s=this._steps[o-1];this._updateTargetProps(s,(this._stepPosition=i-s.t)/s.d)}return n&&this.setPaused(!0),0!=t&&this._actions.length>0&&(this._useTicks?this._runActions(i,i):1==t&&r>i?(r!=this.duration&&this._runActions(r,this.duration),this._runActions(0,i,!0)):this._runActions(r,i)),this.dispatchEventWith("change"),n},i.prototype._runActions=function(e,t,i){void 0===i&&(i=!1);var n=e,r=t,o=-1,a=this._actions.length,s=1;for(e>t&&(n=t,r=e,o=a,a=s=-1);(o+=s)!=a;){var l=this._actions[o],u=l.t;(u==r||u>n&&r>u||i&&u==e)&&l.f.apply(l.o,l.p)}},i.prototype._updateTargetProps=function(e,t){var n,r,o,a,s,l;if(e||1!=t){if(this.passive=!!e.v,this.passive)return;e.e&&(t=e.e(t,0,1,1)),n=e.p0,r=e.p1}else this.passive=!1,n=r=this._curQueueProps;for(var u in this._initQueueProps){null==(a=n[u])&&(n[u]=a=this._initQueueProps[u]),null==(s=r[u])&&(r[u]=s=a),o=a==s||0==t||1==t||"number"!=typeof a?1==t?s:a:a+(s-a)*t;
var c=!1;if(l=i._plugins[u])for(var h=0,p=l.length;p>h;h++){var d=l[h].tween(this,u,o,n,r,t,!!e&&n==r,!e);d==i.IGNORE?c=!0:o=d}c||(this._target[u]=o)}},i.prototype.setPaused=function(e){return this.paused=e,i._register(this,!e),this},i.prototype._cloneProps=function(e){var t={};for(var i in e)t[i]=e[i];return t},i.prototype._addStep=function(e){return e.d>0&&(this._steps.push(e),e.t=this.duration,this.duration+=e.d),this},i.prototype._appendQueueProps=function(e){var t,n,r,o,a;for(var s in e)if(void 0===this._initQueueProps[s]){if(n=this._target[s],t=i._plugins[s])for(r=0,o=t.length;o>r;r++)n=t[r].init(this,s,n);this._initQueueProps[s]=this._curQueueProps[s]=void 0===n?null:n}else n=this._curQueueProps[s];for(var s in e){if(n=this._curQueueProps[s],t=i._plugins[s])for(a=a||{},r=0,o=t.length;o>r;r++)t[r].step&&t[r].step(this,s,n,e[s],a);this._curQueueProps[s]=e[s]}return a&&this._appendQueueProps(a),this._curQueueProps},i.prototype._addAction=function(e){return e.t=this.duration,this._actions.push(e),this},i.prototype.to=function(e,t,i){return void 0===i&&(i=void 0),(isNaN(t)||0>t)&&(t=0),this._addStep({d:t||0,p0:this._cloneProps(this._curQueueProps),e:i,p1:this._cloneProps(this._appendQueueProps(e))})},i.prototype.call=function(e,t,i){return void 0===t&&(t=void 0),void 0===i&&(i=void 0),this._addAction({f:e,p:i?i:[],o:t?t:this._target})},i.prototype.tick=function(e){this.paused||this.setPosition(this._prevPosition+e)},i._tweens=[],i.IGNORE={},i._plugins={},i._inited=!1,i._lastTime=0,i}(e.EventDispatcher);e.ScrollTween=i,__reflect(i.prototype,"egret.ScrollTween")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(i){void 0===i&&(i=null);var n=t.call(this)||this;return n.scrollBeginThreshold=10,n.scrollSpeed=1,n._content=null,n.delayTouchBeginEvent=null,n.touchBeginTimer=null,n.touchEnabled=!0,n._ScrV_Props_=new e.ScrollViewProperties,i&&n.setContent(i),n}return __extends(i,t),Object.defineProperty(i.prototype,"bounces",{get:function(){return this._ScrV_Props_._bounces},set:function(e){this._ScrV_Props_._bounces=!!e},enumerable:!0,configurable:!0}),i.prototype.setContent=function(e){this._content!==e&&(this.removeContent(),e&&(this._content=e,t.prototype.addChild.call(this,e),this._addEvents()))},i.prototype.removeContent=function(){this._content&&(this._removeEvents(),t.prototype.removeChildAt.call(this,0)),this._content=null},Object.defineProperty(i.prototype,"verticalScrollPolicy",{get:function(){return this._ScrV_Props_._verticalScrollPolicy},set:function(e){e!=this._ScrV_Props_._verticalScrollPolicy&&(this._ScrV_Props_._verticalScrollPolicy=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"horizontalScrollPolicy",{get:function(){return this._ScrV_Props_._horizontalScrollPolicy},set:function(e){e!=this._ScrV_Props_._horizontalScrollPolicy&&(this._ScrV_Props_._horizontalScrollPolicy=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollLeft",{get:function(){return this._ScrV_Props_._scrollLeft},set:function(e){e!=this._ScrV_Props_._scrollLeft&&(this._ScrV_Props_._scrollLeft=e,this._validatePosition(!1,!0),this._updateContentPosition())},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"scrollTop",{get:function(){return this._ScrV_Props_._scrollTop},set:function(e){e!=this._ScrV_Props_._scrollTop&&(this._ScrV_Props_._scrollTop=e,this._validatePosition(!0,!1),this._updateContentPosition())},enumerable:!0,configurable:!0}),i.prototype.setScrollPosition=function(e,t,i){if(void 0===i&&(i=!1),(!i||0!=e||0!=t)&&(i||this._ScrV_Props_._scrollTop!=e||this._ScrV_Props_._scrollLeft!=t)){var n=this._ScrV_Props_._scrollTop,r=this._ScrV_Props_._scrollLeft;if(i){var o=this.getMaxScrollLeft(),a=this.getMaxScrollTop();(0>=n||n>=a)&&(e/=2),(0>=r||r>=o)&&(t/=2);var s=n+e,l=r+t,u=this._ScrV_Props_._bounces;u||((0>=s||s>=a)&&(s=Math.max(0,Math.min(s,a))),(0>=l||l>=o)&&(l=Math.max(0,Math.min(l,o)))),this._ScrV_Props_._scrollTop=s,this._ScrV_Props_._scrollLeft=l}else this._ScrV_Props_._scrollTop=e,this._ScrV_Props_._scrollLeft=t;this._validatePosition(!0,!0),this._updateContentPosition()}},i.prototype._validatePosition=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),e){var i=this.height,n=this._getContentHeight();this._ScrV_Props_._scrollTop=Math.max(this._ScrV_Props_._scrollTop,(0-i)/2),this._ScrV_Props_._scrollTop=Math.min(this._ScrV_Props_._scrollTop,n>i?n-i/2:i/2)}if(t){var r=this.width,o=this._getContentWidth();this._ScrV_Props_._scrollLeft=Math.max(this._ScrV_Props_._scrollLeft,(0-r)/2),this._ScrV_Props_._scrollLeft=Math.min(this._ScrV_Props_._scrollLeft,o>r?o-r/2:r/2)}},i.prototype.$setWidth=function(e){this.$explicitWidth!=e&&(t.prototype.$setWidth.call(this,e),this._updateContentPosition())},i.prototype.$setHeight=function(e){this.$explicitHeight!=e&&(t.prototype.$setHeight.call(this,e),this._updateContentPosition())},i.prototype._updateContentPosition=function(){var t=this.height,i=this.width;this.scrollRect=new e.Rectangle(Math.round(this._ScrV_Props_._scrollLeft),Math.round(this._ScrV_Props_._scrollTop),i,t),this.dispatchEvent(new e.Event(e.Event.CHANGE))},i.prototype._checkScrollPolicy=function(){var e=this._ScrV_Props_._horizontalScrollPolicy,t=this.__checkScrollPolicy(e,this._getContentWidth(),this.width);this._ScrV_Props_._hCanScroll=t;var i=this._ScrV_Props_._verticalScrollPolicy,n=this.__checkScrollPolicy(i,this._getContentHeight(),this.height);return this._ScrV_Props_._vCanScroll=n,t||n},i.prototype.__checkScrollPolicy=function(e,t,i){return"on"==e?!0:"off"==e?!1:t>i},i.prototype._addEvents=function(){this.addEventListener(e.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.addEventListener(e.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.addEventListener(e.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._removeEvents=function(){this.removeEventListener(e.TouchEvent.TOUCH_BEGIN,this._onTouchBegin,this),this.removeEventListener(e.TouchEvent.TOUCH_BEGIN,this._onTouchBeginCapture,this,!0),this.removeEventListener(e.TouchEvent.TOUCH_END,this._onTouchEndCapture,this,!0)},i.prototype._onTouchBegin=function(t){if(!t.$isDefaultPrevented){var i=this._checkScrollPolicy();i&&(this._ScrV_Props_._touchStartPosition.x=t.stageX,this._ScrV_Props_._touchStartPosition.y=t.stageY,(this._ScrV_Props_._isHTweenPlaying||this._ScrV_Props_._isVTweenPlaying)&&this._onScrollFinished(),this._tempStage=this.stage,this._tempStage.addEventListener(e.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.addEventListener(e.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.addEventListener(e.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.addEventListener(e.Event.ENTER_FRAME,this._onEnterFrame,this),this._logTouchEvent(t),t.preventDefault())}},i.prototype._onTouchBeginCapture=function(t){var i=this._checkScrollPolicy();if(i){for(var n=t.target;n!=this;){if("_checkScrollPolicy"in n&&(i=n._checkScrollPolicy()))return;n=n.parent}t.stopPropagation();var r=this.cloneTouchEvent(t);this.delayTouchBeginEvent=r,this.touchBeginTimer||(this.touchBeginTimer=new e.Timer(100,1),this.touchBeginTimer.addEventListener(e.TimerEvent.TIMER_COMPLETE,this._onTouchBeginTimer,this)),this.touchBeginTimer.start(),this._onTouchBegin(t)}},i.prototype._onTouchEndCapture=function(t){var i=this;if(this.delayTouchBeginEvent){this._onTouchBeginTimer(),t.stopPropagation();var n=this.cloneTouchEvent(t);e.callLater(function(){i.stage&&i.dispatchPropagationEvent(n)},this)}},i.prototype._onTouchBeginTimer=function(){this.touchBeginTimer.stop();var e=this.delayTouchBeginEvent;this.delayTouchBeginEvent=null,this.stage&&this.dispatchPropagationEvent(e)},i.prototype.dispatchPropagationEvent=function(t){for(var i=t.$target,n=this.$getPropagationList(i),r=n.length,o=.5*n.length,a=-1,s=0;r>s;s++)if(n[s]===this._content){a=s;break}n.splice(0,a+1),o-=a+1,this.$dispatchPropagationEvent(t,n,o),e.Event.release(t)},i.prototype._onTouchMove=function(e){if(this._ScrV_Props_._lastTouchPosition.x!=e.stageX||this._ScrV_Props_._lastTouchPosition.y!=e.stageY){if(!this._ScrV_Props_._scrollStarted){var t=e.stageX-this._ScrV_Props_._touchStartPosition.x,i=e.stageY-this._ScrV_Props_._touchStartPosition.y,n=Math.sqrt(t*t+i*i);if(n<this.scrollBeginThreshold)return void this._logTouchEvent(e)}this._ScrV_Props_._scrollStarted=!0,this.delayTouchBeginEvent&&(this.delayTouchBeginEvent=null,this.touchBeginTimer.stop()),this.touchChildren=!1;var r=this._getPointChange(e);this.setScrollPosition(r.y,r.x,!0),this._calcVelocitys(e),this._logTouchEvent(e)}},i.prototype._onTouchEnd=function(t){this.touchChildren=!0,this._ScrV_Props_._scrollStarted=!1,this._tempStage.removeEventListener(e.TouchEvent.TOUCH_MOVE,this._onTouchMove,this),this._tempStage.removeEventListener(e.TouchEvent.TOUCH_END,this._onTouchEnd,this),this._tempStage.removeEventListener(e.TouchEvent.LEAVE_STAGE,this._onTouchEnd,this),this.removeEventListener(e.Event.ENTER_FRAME,this._onEnterFrame,this),this._moveAfterTouchEnd()},i.prototype._onEnterFrame=function(t){var i=e.getTimer();i-this._ScrV_Props_._lastTouchTime>100&&i-this._ScrV_Props_._lastTouchTime<300&&this._calcVelocitys(this._ScrV_Props_._lastTouchEvent)},i.prototype._logTouchEvent=function(t){this._ScrV_Props_._lastTouchPosition.x=t.stageX,this._ScrV_Props_._lastTouchPosition.y=t.stageY,this._ScrV_Props_._lastTouchEvent=this.cloneTouchEvent(t),this._ScrV_Props_._lastTouchTime=e.getTimer()},i.prototype._getPointChange=function(e){return{x:this._ScrV_Props_._hCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.x-e.stageX,y:this._ScrV_Props_._vCanScroll===!1?0:this._ScrV_Props_._lastTouchPosition.y-e.stageY}},i.prototype._calcVelocitys=function(t){var i=e.getTimer();if(0==this._ScrV_Props_._lastTouchTime)return void(this._ScrV_Props_._lastTouchTime=i);var n=this._getPointChange(t),r=i-this._ScrV_Props_._lastTouchTime;n.x/=r,n.y/=r,this._ScrV_Props_._velocitys.push(n),this._ScrV_Props_._velocitys.length>5&&this._ScrV_Props_._velocitys.shift(),this._ScrV_Props_._lastTouchPosition.x=t.stageX,this._ScrV_Props_._lastTouchPosition.y=t.stageY},i.prototype._getContentWidth=function(){return this._content.$explicitWidth||this._content.width},i.prototype._getContentHeight=function(){return this._content.$explicitHeight||this._content.height},i.prototype.getMaxScrollLeft=function(){var e=this._getContentWidth()-this.width;return Math.max(0,e)},i.prototype.getMaxScrollTop=function(){var e=this._getContentHeight()-this.height;return Math.max(0,e)},i.prototype._moveAfterTouchEnd=function(){if(0!=this._ScrV_Props_._velocitys.length){for(var e={x:0,y:0},t=0,n=0;n<this._ScrV_Props_._velocitys.length;n++){var r=this._ScrV_Props_._velocitys[n],o=i.weight[n];e.x+=r.x*o,e.y+=r.y*o,t+=o}this._ScrV_Props_._velocitys.length=0,this.scrollSpeed<=0&&(this.scrollSpeed=1);var a=e.x/t*this.scrollSpeed,s=e.y/t*this.scrollSpeed,l=Math.abs(a),u=Math.abs(s),c=this.getMaxScrollLeft(),h=this.getMaxScrollTop(),p=l>.02?this.getAnimationDatas(a,this._ScrV_Props_._scrollLeft,c):{position:this._ScrV_Props_._scrollLeft,duration:1},d=u>.02?this.getAnimationDatas(s,this._ScrV_Props_._scrollTop,h):{position:this._ScrV_Props_._scrollTop,duration:1};this.setScrollLeft(p.position,p.duration),this.setScrollTop(d.position,d.duration)}},i.prototype.onTweenFinished=function(e){e==this._ScrV_Props_._vScrollTween&&(this._ScrV_Props_._isVTweenPlaying=!1),e==this._ScrV_Props_._hScrollTween&&(this._ScrV_Props_._isHTweenPlaying=!1),0==this._ScrV_Props_._isHTweenPlaying&&0==this._ScrV_Props_._isVTweenPlaying&&this._onScrollFinished()},i.prototype._onScrollStarted=function(){},i.prototype._onScrollFinished=function(){e.ScrollTween.removeTweens(this),this._ScrV_Props_._hScrollTween=null,this._ScrV_Props_._vScrollTween=null,this._ScrV_Props_._isHTweenPlaying=!1,this._ScrV_Props_._isVTweenPlaying=!1,this.dispatchEvent(new e.Event(e.Event.COMPLETE))},i.prototype.setScrollTop=function(t,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollTop(),Math.max(t,0));if(0==i)return void(this.scrollTop=n);0==this._ScrV_Props_._bounces&&(t=n);var r=e.ScrollTween.get(this).to({scrollTop:t},i,e.ScrollEase.quartOut);n!=t&&r.to({scrollTop:n},300,e.ScrollEase.quintOut),this._ScrV_Props_._isVTweenPlaying=!0,this._ScrV_Props_._vScrollTween=r,r.call(this.onTweenFinished,this,[r]),this._ScrV_Props_._isHTweenPlaying||this._onScrollStarted()},i.prototype.setScrollLeft=function(t,i){void 0===i&&(i=0);var n=Math.min(this.getMaxScrollLeft(),Math.max(t,0));if(0==i)return void(this.scrollLeft=n);0==this._ScrV_Props_._bounces&&(t=n);var r=e.ScrollTween.get(this).to({scrollLeft:t},i,e.ScrollEase.quartOut);n!=t&&r.to({scrollLeft:n},300,e.ScrollEase.quintOut),this._ScrV_Props_._isHTweenPlaying=!0,this._ScrV_Props_._hScrollTween=r,r.call(this.onTweenFinished,this,[r]),this._ScrV_Props_._isVTweenPlaying||this._onScrollStarted()},i.prototype.getAnimationDatas=function(e,t,i){var n=Math.abs(e),r=.95,o=0,a=.998,s=.02,l=t+500*e;if(0>l||l>i)for(l=t;Math.abs(e)!=1/0&&Math.abs(e)>s;)l+=e,e*=0>l||l>i?a*r:a,o++;else o=500*-Math.log(s/n);var u={position:Math.min(i+50,Math.max(l,-50)),duration:o};return u},i.prototype.cloneTouchEvent=function(t){var i=new e.TouchEvent(t.type,t.bubbles,t.cancelable);return i.touchPointID=t.touchPointID,i.$stageX=t.stageX,i.$stageY=t.stageY,i.touchDown=t.touchDown,i.$isDefaultPrevented=!1,i.$target=t.target,i},i.prototype.throwNotSupportedError=function(){e.$error(1023)},i.prototype.addChild=function(e){return this.throwNotSupportedError(),null},i.prototype.addChildAt=function(e,t){return this.throwNotSupportedError(),null},i.prototype.removeChild=function(e){return this.throwNotSupportedError(),null},i.prototype.removeChildAt=function(e){return this.throwNotSupportedError(),null},i.prototype.setChildIndex=function(e,t){this.throwNotSupportedError()},i.prototype.swapChildren=function(e,t){this.throwNotSupportedError()},i.prototype.swapChildrenAt=function(e,t){this.throwNotSupportedError()},i.weight=[1,1.33,1.66,2,2.33],i}(e.DisplayObjectContainer);e.ScrollView=t,__reflect(t.prototype,"egret.ScrollView")}(egret||(egret={}));var egret;!function(e){var t=function(){function t(){this._verticalScrollPolicy="auto",this._horizontalScrollPolicy="auto",this._scrollLeft=0,this._scrollTop=0,this._hCanScroll=!1,this._vCanScroll=!1,this._lastTouchPosition=new e.Point(0,0),this._touchStartPosition=new e.Point(0,0),this._scrollStarted=!1,this._lastTouchTime=0,this._lastTouchEvent=null,this._velocitys=[],this._isHTweenPlaying=!1,this._isVTweenPlaying=!1,this._hScrollTween=null,this._vScrollTween=null,this._bounces=!0}return t}();e.ScrollViewProperties=t,__reflect(t.prototype,"egret.ScrollViewProperties")}(egret||(egret={}));var egret;!function(e){function t(t){var i=t.url;return-1==i.indexOf("?")&&t.method==e.URLRequestMethod.GET&&t.data&&t.data instanceof e.URLVariables&&(i=i+"?"+t.data.toString()),i}var i=function(i){function n(t){void 0===t&&(t=null);var n=i.call(this)||this;return n.dataFormat=e.URLLoaderDataFormat.TEXT,n.data=null,n._request=null,n._status=-1,t&&n.load(t),n}return __extends(n,i),n.prototype.load=function(i){this._request=i,this.data=null;var n=this;if(n.dataFormat==e.URLLoaderDataFormat.TEXTURE)return void this.loadTexture(n);if(n.dataFormat==e.URLLoaderDataFormat.SOUND)return void this.loadSound(n);var r=t(i),o=new e.HttpRequest;o.open(r,i.method==e.URLRequestMethod.POST?e.HttpMethod.POST:e.HttpMethod.GET);var a;if(i.method!=e.URLRequestMethod.GET&&i.data)if(i.data instanceof e.URLVariables){o.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var s=i.data;a=s.toString()}else o.setRequestHeader("Content-Type","multipart/form-data"),a=i.data;for(var l=i.requestHeaders.length,u=0;l>u;u++){var c=i.requestHeaders[u];o.setRequestHeader(c.name,c.value)}o.addEventListener(e.Event.COMPLETE,function(){n.data=o.response,e.Event.dispatchEvent(n,e.Event.COMPLETE)},this),o.addEventListener(e.IOErrorEvent.IO_ERROR,function(){e.IOErrorEvent.dispatchIOErrorEvent(n)},this),o.responseType=n.dataFormat==e.URLLoaderDataFormat.BINARY?e.HttpResponseType.ARRAY_BUFFER:e.HttpResponseType.TEXT,o.send(a)},n.prototype.getResponseType=function(t){switch(t){case e.URLLoaderDataFormat.TEXT:case e.URLLoaderDataFormat.VARIABLES:return e.URLLoaderDataFormat.TEXT;case e.URLLoaderDataFormat.BINARY:return"arraybuffer";default:return t}},n.prototype.loadSound=function(t){function i(e){t.dispatchEvent(e)}function n(e){o(),t.dispatchEvent(e)}function r(i){o(),t.data=l,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},0)}function o(){l.removeEventListener(e.Event.COMPLETE,r,a),l.removeEventListener(e.IOErrorEvent.IO_ERROR,n,a),l.removeEventListener(e.ProgressEvent.PROGRESS,i,a)}var a=this,s=t._request.url,l=new e.Sound;l.addEventListener(e.Event.COMPLETE,r,a),l.addEventListener(e.IOErrorEvent.IO_ERROR,n,a),l.addEventListener(e.ProgressEvent.PROGRESS,i,a),l.load(s)},n.prototype.loadTexture=function(t){function i(e){t.dispatchEvent(e)}function n(e){o(),t.dispatchEvent(e)}function r(i){o();var n=l.data;n.source.setAttribute("bitmapSrc",s);var r=new e.Texture;r._setBitmapData(n),t.data=r,window.setTimeout(function(){t.dispatchEventWith(e.Event.COMPLETE)},a)}function o(){l.removeEventListener(e.Event.COMPLETE,r,a),l.removeEventListener(e.IOErrorEvent.IO_ERROR,n,a),l.removeEventListener(e.ProgressEvent.PROGRESS,i,a)}var a=this,s=t._request.url,l=new e.ImageLoader;l.addEventListener(e.Event.COMPLETE,r,a),l.addEventListener(e.IOErrorEvent.IO_ERROR,n,a),l.addEventListener(e.ProgressEvent.PROGRESS,i,a),l.load(s)},n.prototype.__recycle=function(){this._request=null,this.data=null},n}(e.EventDispatcher);e.URLLoader=i,__reflect(i.prototype,"egret.URLLoader")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(i){var n=t.call(this)||this;return n.$texture=null,n.offsetPoint=e.Point.create(0,0),n.$movieClipData=null,n.frames=null,n.$totalFrames=0,n.frameLabels=null,n.$frameLabelStart=0,n.$frameLabelEnd=0,n.frameEvents=null,n.frameIntervalTime=0,n.$eventPool=null,n.$isPlaying=!1,n.isStopped=!0,n.playTimes=0,n.$currentFrameNum=0,n.$nextFrameNum=1,n.displayedKeyFrameNum=0,n.passedTime=0,n.$frameRate=0/0,n.lastTime=0,n.$smoothing=e.Bitmap.defaultSmoothing,n.setMovieClipData(i),e.nativeRender||(n.$renderNode=new e.sys.NormalBitmapNode),n}return __extends(i,t),i.prototype.createNativeDisplayObject=function(){this.$nativeDisplayObject=new egret_native.NativeDisplayObject(11)},Object.defineProperty(i.prototype,"smoothing",{get:function(){return this.$smoothing},set:function(e){e!=this.$smoothing&&(this.$smoothing=e)},enumerable:!0,configurable:!0}),i.prototype.$init=function(){this.$reset();var e=this.$movieClipData;e&&e.$isDataValid()&&(this.frames=e.frames,this.$totalFrames=e.numFrames,this.frameLabels=e.labels,this.frameEvents=e.events,this.$frameRate=e.frameRate,this.frameIntervalTime=1e3/this.$frameRate,this._initFrame())},i.prototype.$reset=function(){this.frames=null,this.playTimes=0,this.$isPlaying=!1,this.setIsStopped(!0),this.$currentFrameNum=0,this.$nextFrameNum=1,this.displayedKeyFrameNum=0,this.passedTime=0,this.$eventPool=[]},i.prototype._initFrame=function(){this.$movieClipData.$isTextureValid()&&(this.advanceFrame(),this.constructFrame())},i.prototype.$updateRenderNode=function(){var t=this.$texture;if(t){var i=Math.round(this.offsetPoint.x),n=Math.round(this.offsetPoint.y),r=t.$bitmapWidth,o=t.$bitmapHeight,a=t.$getTextureWidth(),s=t.$getTextureHeight(),l=Math.round(t.$getScaleBitmapWidth()),u=Math.round(t.$getScaleBitmapHeight()),c=t.$sourceWidth,h=t.$sourceHeight;e.sys.BitmapNode.$updateTextureData(this.$renderNode,t.$bitmapData,t.$bitmapX,t.$bitmapY,r,o,i,n,a,s,l,u,c,h,e.BitmapFillMode.SCALE,this.$smoothing)}},i.prototype.$measureContentBounds=function(e){var t=this.$texture;if(t){var i=this.offsetPoint.x,n=this.offsetPoint.y,r=t.$getTextureWidth(),o=t.$getTextureHeight();e.setTo(i,n,r,o)}else e.setEmpty()},i.prototype.$onAddToStage=function(e,i){t.prototype.$onAddToStage.call(this,e,i),this.$isPlaying&&this.$totalFrames>1&&this.setIsStopped(!1)},i.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.setIsStopped(!0)},i.prototype.getFrameLabelByName=function(e,t){void 0===t&&(t=!1),t&&(e=e.toLowerCase());var i=this.frameLabels;if(i)for(var n=null,r=0;r<i.length;r++)if(n=i[r],t?n.name.toLowerCase()==e:n.name==e)return n;return null},i.prototype.getFrameStartEnd=function(e){var t=this.frameLabels;if(t)for(var i=null,n=0;n<t.length;n++)if(i=t[n],e==i.name){this.$frameLabelStart=i.frame,this.$frameLabelEnd=i.end;break}},i.prototype.getFrameLabelByFrame=function(e){var t=this.frameLabels;if(t)for(var i=null,n=0;n<t.length;n++)if(i=t[n],i.frame==e)return i;return null},i.prototype.getFrameLabelForFrame=function(e){var t=null,i=null,n=this.frameLabels;if(n)for(var r=0;r<n.length;r++){if(i=n[r],i.frame>e)return t;t=i}return t},i.prototype.play=function(t){void 0===t&&(t=0),this.lastTime=e.getTimer(),this.passedTime=0,this.$isPlaying=!0,this.setPlayTimes(t),this.$totalFrames>1&&this.$stage&&this.setIsStopped(!1)},i.prototype.stop=function(){this.$isPlaying=!1,this.setIsStopped(!0)},i.prototype.prevFrame=function(){this.gotoAndStop(this.$currentFrameNum-1)},i.prototype.nextFrame=function(){this.gotoAndStop(this.$currentFrameNum+1)},i.prototype.gotoAndPlay=function(t,i){void 0===i&&(i=0),(0==arguments.length||arguments.length>2)&&e.$error(1022,"MovieClip.gotoAndPlay()"),"string"==typeof t?this.getFrameStartEnd(t):(this.$frameLabelStart=0,this.$frameLabelEnd=0),this.play(i),this.gotoFrame(t)},i.prototype.gotoAndStop=function(t){1!=arguments.length&&e.$error(1022,"MovieClip.gotoAndStop()"),this.stop(),this.gotoFrame(t)},i.prototype.gotoFrame=function(t){var i;"string"==typeof t?i=this.getFrameLabelByName(t).frame:(i=parseInt(t+"",10),i!=t&&e.$error(1022,"Frame Label Not Found")),1>i?i=1:i>this.$totalFrames&&(i=this.$totalFrames),i!=this.$nextFrameNum&&(this.$nextFrameNum=i,this.advanceFrame(),this.constructFrame(),this.handlePendingEvent())},i.prototype.advanceTime=function(t){var i=this,n=t-i.lastTime;i.lastTime=t;var r=i.frameIntervalTime,o=i.passedTime+n;i.passedTime=o%r;var a=o/r;if(1>a)return!1;for(;a>=1;){if(a--,i.$nextFrameNum++,i.$nextFrameNum>i.$totalFrames||i.$frameLabelStart>0&&i.$nextFrameNum>i.$frameLabelEnd)if(-1==i.playTimes)i.$eventPool.push(e.Event.LOOP_COMPLETE),i.$nextFrameNum=1;else{if(i.playTimes--,!(i.playTimes>0)){i.$nextFrameNum=i.$totalFrames,i.$eventPool.push(e.Event.COMPLETE),i.stop();break}i.$eventPool.push(e.Event.LOOP_COMPLETE),i.$nextFrameNum=1}i.$currentFrameNum==i.$frameLabelEnd&&(i.$nextFrameNum=i.$frameLabelStart),i.advanceFrame()}return i.constructFrame(),i.handlePendingEvent(),!1},i.prototype.advanceFrame=function(){this.$currentFrameNum=this.$nextFrameNum;var t=this.frameEvents[this.$nextFrameNum];t&&""!=t&&e.MovieClipEvent.dispatchMovieClipEvent(this,e.MovieClipEvent.FRAME_LABEL,t)},i.prototype.constructFrame=function(){var t=this,i=t.$currentFrameNum;if(t.displayedKeyFrameNum!=i){var n=t.$movieClipData.getTextureByFrame(i);if(t.$texture=n,t.$movieClipData.$getOffsetByFrame(i,t.offsetPoint),t.displayedKeyFrameNum=i,t.$renderDirty=!0,e.nativeRender)t.$nativeDisplayObject.setDataToBitmapNode(t.$nativeDisplayObject.id,n,[n.$bitmapX,n.$bitmapY,n.$bitmapWidth,n.$bitmapHeight,t.offsetPoint.x,t.offsetPoint.y,n.$getScaleBitmapWidth(),n.$getScaleBitmapHeight(),n.$sourceWidth,n.$sourceHeight]),t.$nativeDisplayObject.setWidth(n.$getTextureWidth()+t.offsetPoint.x),t.$nativeDisplayObject.setHeight(n.$getTextureHeight()+t.offsetPoint.y);else{var r=t.$parent;r&&!r.$cacheDirty&&(r.$cacheDirty=!0,r.$cacheDirtyUp());var o=t.$maskedObject;o&&!o.$cacheDirty&&(o.$cacheDirty=!0,o.$cacheDirtyUp())}}},i.prototype.$renderFrame=function(){var e=this;e.$texture=e.$movieClipData.getTextureByFrame(e.$currentFrameNum),e.$renderDirty=!0;var t=e.$parent;t&&!t.$cacheDirty&&(t.$cacheDirty=!0,t.$cacheDirtyUp());var i=e.$maskedObject;i&&!i.$cacheDirty&&(i.$cacheDirty=!0,i.$cacheDirtyUp())},i.prototype.handlePendingEvent=function(){if(0!=this.$eventPool.length){this.$eventPool.reverse();for(var t=this.$eventPool,i=t.length,n=!1,r=!1,o=0;i>o;o++){var a=t.pop();a==e.Event.LOOP_COMPLETE?r=!0:a==e.Event.COMPLETE?n=!0:this.dispatchEventWith(a)}r&&this.dispatchEventWith(e.Event.LOOP_COMPLETE),n&&this.dispatchEventWith(e.Event.COMPLETE)}},Object.defineProperty(i.prototype,"totalFrames",{get:function(){return this.$totalFrames},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrame",{get:function(){return this.$currentFrameNum},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentFrameLabel",{get:function(){var e=this.getFrameLabelByFrame(this.$currentFrameNum);return e&&e.name},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"currentLabel",{get:function(){var e=this.getFrameLabelForFrame(this.$currentFrameNum);return e?e.name:null},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"frameRate",{get:function(){return this.$frameRate},set:function(e){e!=this.$frameRate&&(this.$frameRate=e,this.frameIntervalTime=1e3/this.$frameRate)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"isPlaying",{get:function(){return this.$isPlaying},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"movieClipData",{get:function(){return this.$movieClipData},set:function(e){this.setMovieClipData(e)},enumerable:!0,configurable:!0}),i.prototype.setMovieClipData=function(e){this.$movieClipData!=e&&(this.$movieClipData=e,this.$init())},i.prototype.setPlayTimes=function(e){(0>e||e>=1)&&(this.playTimes=0>e?-1:Math.floor(e))},i.prototype.setIsStopped=function(t){this.isStopped!=t&&(this.isStopped=t,t?e.ticker.$stopTick(this.advanceTime,this):(this.playTimes=0==this.playTimes?1:this.playTimes,this.lastTime=e.getTimer(),e.ticker.$startTick(this.advanceTime,this)))},i}(e.DisplayObject);e.MovieClip=t,__reflect(t.prototype,"egret.MovieClip")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(i){void 0===i&&(i=null);var n=t.call(this)||this;return n.data=null,n.method=e.URLRequestMethod.GET,n.url="",n.requestHeaders=[],n.url=i,n}return __extends(i,t),i}(e.HashObject);e.URLRequest=t,__reflect(t.prototype,"egret.URLRequest")}(egret||(egret={}));var egret;!function(e){var t=function(){function e(e,t){this.name="",this.value="",this.name=e,this.value=t}return e}();e.URLRequestHeader=t,__reflect(t.prototype,"egret.URLRequestHeader")}(egret||(egret={}));var egret;!function(e){var t=function(){function e(){}return e.GET="get",e.POST="post",e}();e.URLRequestMethod=t,__reflect(t.prototype,"egret.URLRequestMethod")}(egret||(egret={}));var egret;!function(e){var t=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.variables=null,null!==t&&i.decode(t),i}return __extends(t,e),t.prototype.decode=function(e){this.variables||(this.variables={}),e=e.split("+").join(" ");for(var t,i=/[?&]?([^=]+)=([^&]*)/g;t=i.exec(e);){var n=decodeURIComponent(t[1]),r=decodeURIComponent(t[2]);if(n in this.variables!=0){var o=this.variables[n];o instanceof Array?o.push(r):this.variables[n]=[o,r]}else this.variables[n]=r}},t.prototype.toString=function(){if(!this.variables)return"";var e=this.variables,t=[];for(var i in e)t.push(this.encodeValue(i,e[i]));return t.join("&")},t.prototype.encodeValue=function(e,t){return t instanceof Array?this.encodeArray(e,t):encodeURIComponent(e)+"="+encodeURIComponent(t)},t.prototype.encodeArray=function(e,t){return e?0==t.length?encodeURIComponent(e)+"=":t.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):""},t}(e.HashObject);e.URLVariables=t,__reflect(t.prototype,"egret.URLVariables")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(){var n=t.call(this)||this;return n._timeScale=1,n._paused=!1,n._callIndex=-1,n._lastTime=0,n.callBackList=[],null!=i.instance,e.ticker.$startTick(n.update,n),n._lastTime=e.getTimer(),n}return __extends(i,t),i.prototype.update=function(e){var t=e-this._lastTime;if(this._lastTime=e,this._paused)return!1;var i=t*this._timeScale;for(this._callList=this.callBackList.concat(),this._callIndex=0;this._callIndex<this._callList.length;this._callIndex++){var n=this._callList[this._callIndex];n.listener.call(n.thisObject,i)}return this._callIndex=-1,this._callList=null,!1},i.prototype.register=function(e,t,i){void 0===i&&(i=0),this.$insertEventBin(this.callBackList,"",e,t,!1,i,!1)},i.prototype.unregister=function(e,t){this.$removeEventBin(this.callBackList,e,t)},i.prototype.setTimeScale=function(e){this._timeScale=e},i.prototype.getTimeScale=function(){return this._timeScale},i.prototype.pause=function(){this._paused=!0},i.prototype.resume=function(){this._paused=!1},i.getInstance=function(){return null==i.instance&&(i.instance=new i),i.instance},i}(e.EventDispatcher);e.Ticker=t,__reflect(t.prototype,"egret.Ticker")}(egret||(egret={}));var egret;!function(e){var t=function(t){function i(){return t.call(this)||this}return __extends(i,t),Object.defineProperty(i.prototype,"stage",{get:function(){return e.sys.$TempStage},enumerable:!0,configurable:!0}),Object.defineProperty(i,"instance",{get:function(){return null==i._instance&&(i._instance=new i),i._instance},enumerable:!0,configurable:!0}),i.deviceType=null,i.DEVICE_PC="web",i.DEVICE_MOBILE="native",i}(e.EventDispatcher);e.MainContext=t,__reflect(t.prototype,"egret.MainContext")}(egret||(egret={})),egret.testDeviceType1=function(){if(!window.navigator)return!0;var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("mobile")||-1!=e.indexOf("android")},egret.MainContext.deviceType=egret.testDeviceType1()?egret.MainContext.DEVICE_MOBILE:egret.MainContext.DEVICE_PC,delete egret.testDeviceType1;var egret;!function(e){var t=function(t){function i(e){void 0===e&&(e=300);var i=t.call(this)||this;return i.objectPool=[],i._length=0,1>e&&(e=1),i.autoDisposeTime=e,i.frameCount=0,i}return __extends(i,t),i.$init=function(){e.ticker.$startTick(i.onUpdate,i)},i.onUpdate=function(e){for(var t=i._callBackList,n=t.length-1;n>=0;n--)t[n].$checkFrame();return!1},i.prototype.$checkFrame=function(){this.frameCount--,this.frameCount<=0&&this.dispose()},Object.defineProperty(i.prototype,"length",{get:function(){return this._length},enumerable:!0,configurable:!0}),i.prototype.push=function(e){var t=this.objectPool;-1==t.indexOf(e)&&(t.push(e),e.__recycle&&e.__recycle(),this._length++,0==this.frameCount&&(this.frameCount=this.autoDisposeTime,i._callBackList.push(this)))},i.prototype.pop=function(){return 0==this._length?null:(this._length--,this.objectPool.pop())},i.prototype.dispose=function(){this._length>0&&(this.objectPool=[],this._length=0),this.frameCount=0;var e=i._callBackList,t=e.indexOf(this);-1!=t&&e.splice(t,1)},i._callBackList=[],i}(e.HashObject);e.Recycler=t,__reflect(t.prototype,"egret.Recycler"),t.$init()}(egret||(egret={}));var egret;!function(e){function t(t,i,l){for(var u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var h={listener:t,thisObject:i,delay:l,originDelay:l,params:u};return a++,1==a&&(s=e.getTimer(),e.ticker.$startTick(n,null)),o++,r[o]=h,o}function i(t){r[t]&&(a--,delete r[t],0==a&&e.ticker.$stopTick(n,null))}function n(e){var t=e-s;s=e;for(var i in r){var n=r[i];n.delay-=t,n.delay<=0&&(n.delay=n.originDelay,n.listener.apply(n.thisObject,n.params))}return!1}var r={},o=0,a=0,s=0;e.setInterval=t,e.clearInterval=i}(egret||(egret={}));var egret;!function(e){function t(t,i,l){for(var u=[],c=3;c<arguments.length;c++)u[c-3]=arguments[c];var h={listener:t,thisObject:i,delay:l,params:u};return a++,1==a&&e.ticker&&(s=e.getTimer(),e.ticker.$startTick(n,null)),o++,r[o]=h,o}function i(t){r[t]&&(a--,delete r[t],0==a&&e.ticker&&e.ticker.$stopTick(n,null))}function n(e){var t=e-s;s=e;for(var n in r){var o=n,a=r[o];a.delay-=t,a.delay<=0&&(a.listener.apply(a.thisObject,a.params),i(o))}return!1}var r={},o=0,a=0,s=0;e.setTimeout=t,e.clearTimeout=i}(egret||(egret={})),!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.ES6Promise=t()
}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function i(e){W=e}function n(e){X=e}function r(){return function(){return process.nextTick(u)}}function o(){return"undefined"!=typeof V?function(){V(u)}:l()}function a(){var e=0,t=new J(u),i=document.createTextNode("");return t.observe(i,{characterData:!0}),function(){i.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;$>e;e+=2){var t=Q[e],i=Q[e+1];t(i),Q[e]=void 0,Q[e+1]=void 0}$=0}function c(){try{var e=require,t=e("vertx");return V=t.runOnLoop||t.runOnContext,o()}catch(i){return l()}}function h(e,t){var i=arguments,n=this,r=new this.constructor(d);void 0===r[tt]&&A(r);var o=n._state;return o?!function(){var e=i[o-1];X(function(){return I(o,r,e,n._result)})}():T(n,r,e,t),r}function p(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var i=new t(d);return w(i,e),i}function d(){}function f(){return new TypeError("You cannot resolve a promise with itself")}function m(){return new TypeError("A promises callback cannot return that same promise.")}function g(e){try{return e.then}catch(t){return ot.error=t,ot}}function v(e,t,i,n){try{e.call(t,i,n)}catch(r){return r}}function y(e,t,i){X(function(e){var n=!1,r=v(i,t,function(i){n||(n=!0,t!==i?w(e,i):E(e,i))},function(t){n||(n=!0,S(e,t))},"Settle: "+(e._label||" unknown promise"));!n&&r&&(n=!0,S(e,r))},e)}function _(e,t){t._state===nt?E(e,t._result):t._state===rt?S(e,t._result):T(t,void 0,function(t){return w(e,t)},function(t){return S(e,t)})}function b(e,i,n){i.constructor===e.constructor&&n===h&&i.constructor.resolve===p?_(e,i):n===ot?S(e,ot.error):void 0===n?E(e,i):t(n)?y(e,i,n):E(e,i)}function w(t,i){t===i?S(t,f()):e(i)?b(t,i,g(i)):E(t,i)}function x(e){e._onerror&&e._onerror(e._result),C(e)}function E(e,t){e._state===it&&(e._result=t,e._state=nt,0!==e._subscribers.length&&X(C,e))}function S(e,t){e._state===it&&(e._state=rt,e._result=t,X(x,e))}function T(e,t,i,n){var r=e._subscribers,o=r.length;e._onerror=null,r[o]=t,r[o+nt]=i,r[o+rt]=n,0===o&&e._state&&X(C,e)}function C(e){var t=e._subscribers,i=e._state;if(0!==t.length){for(var n=void 0,r=void 0,o=e._result,a=0;a<t.length;a+=3)n=t[a],r=t[a+i],n?I(i,n,r,o):r(o);e._subscribers.length=0}}function M(){this.error=null}function P(e,t){try{return e(t)}catch(i){return at.error=i,at}}function I(e,i,n,r){var o=t(n),a=void 0,s=void 0,l=void 0,u=void 0;if(o){if(a=P(n,r),a===at?(u=!0,s=a.error,a=null):l=!0,i===a)return void S(i,m())}else a=r,l=!0;i._state!==it||(o&&l?w(i,a):u?S(i,s):e===nt?E(i,a):e===rt&&S(i,a))}function L(e,t){try{t(function(t){w(e,t)},function(t){S(e,t)})}catch(i){S(e,i)}}function R(){return st++}function A(e){e[tt]=st++,e._state=void 0,e._result=void 0,e._subscribers=[]}function O(e,t){this._instanceConstructor=e,this.promise=new e(d),this.promise[tt]||A(this.promise),z(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?E(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&E(this.promise,this._result))):S(this.promise,k())}function k(){return new Error("Array Methods must be provided an Array")}function D(e){return new O(this,e).promise}function N(e){var t=this;return new t(z(e)?function(i,n){for(var r=e.length,o=0;r>o;o++)t.resolve(e[o]).then(i,n)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function B(e){var t=this,i=new t(d);return S(i,e),i}function U(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function G(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function F(e){this[tt]=R(),this._result=this._state=void 0,this._subscribers=[],d!==e&&("function"!=typeof e&&U(),this instanceof F?L(this,e):G())}function H(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(t){throw new Error("polyfill failed because global object is unavailable in this environment")}var i=e.Promise;if("undefined"!=typeof egret_native&&egret_native.capability&&!egret_native.capability("Promise")&&(i=void 0),i){var n=null;try{n=Object.prototype.toString.call(i.resolve())}catch(t){}if("[object Promise]"===n&&!i.cast)return}e.Promise=F}var j=void 0;j=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var z=j,$=0,V=void 0,W=void 0,X=function(e,t){Q[$]=e,Q[$+1]=t,$+=2,2===$&&(W?W(u):et())},Y="undefined"!=typeof window?window:void 0,q=Y||{},J=q.MutationObserver||q.WebKitMutationObserver,Z="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),K="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,Q=new Array(1e3),et=void 0;et=Z?r():J?a():K?s():void 0===Y&&"function"==typeof require?c():l();var tt=Math.random().toString(36).substring(16),it=void 0,nt=1,rt=2,ot=new M,at=new M,st=0;return O.prototype._enumerate=function(){for(var e=this.length,t=this._input,i=0;this._state===it&&e>i;i++)this._eachEntry(t[i],i)},O.prototype._eachEntry=function(e,t){var i=this._instanceConstructor,n=i.resolve;if(n===p){var r=g(e);if(r===h&&e._state!==it)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(i===F){var o=new i(d);b(o,e,r),this._willSettleAt(o,t)}else this._willSettleAt(new i(function(t){return t(e)}),t)}else this._willSettleAt(n(e),t)},O.prototype._settledAt=function(e,t,i){var n=this.promise;n._state===it&&(this._remaining--,e===rt?S(n,i):this._result[t]=i),0===this._remaining&&E(n,this._result)},O.prototype._willSettleAt=function(e,t){var i=this;T(e,void 0,function(e){return i._settledAt(nt,t,e)},function(e){return i._settledAt(rt,t,e)})},F.all=D,F.race=N,F.resolve=p,F.reject=B,F._setScheduler=i,F._setAsap=n,F._asap=X,F.prototype={constructor:F,then:h,"catch":function(e){return this.then(null,e)}},F.polyfill=H,F.Promise=F,F}),ES6Promise.polyfill();var LZString=function(){function e(e,t){if(!r[e]){r[e]={};for(var i=0;i<e.length;i++)r[e][e.charAt(i)]=i}return r[e][t]}var t=String.fromCharCode,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={},o={compressToBase64:function(e){if(null==e)return"";var t=o._compress(e,6,function(e){return i.charAt(e)});switch(t.length%4){default:case 0:return t;case 1:return t+"===";case 2:return t+"==";case 3:return t+"="}},decompressFromBase64:function(t){return null==t?"":""==t?null:o._decompress(t.length,32,function(n){return e(i,t.charAt(n))})},compressToUTF16:function(e){return null==e?"":o._compress(e,15,function(e){return t(e+32)})+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:o._decompress(e.length,16384,function(t){return e.charCodeAt(t)-32})},compressToUint8Array:function(e){for(var t=o.compress(e),i=new Uint8Array(2*t.length),n=0,r=t.length;r>n;n++){var a=t.charCodeAt(n);i[2*n]=a>>>8,i[2*n+1]=a%256}return i},decompressFromUint8Array:function(e){if(null===e||void 0===e)return o.decompress(e);for(var i=new Array(e.length/2),n=0,r=i.length;r>n;n++)i[n]=256*e[2*n]+e[2*n+1];var a=[];return i.forEach(function(e){a.push(t(e))}),o.decompress(a.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":o._compress(e,6,function(e){return n.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),o._decompress(t.length,32,function(i){return e(n,t.charAt(i))}))},compress:function(e){return o._compress(e,16,function(e){return t(e)})},_compress:function(e,t,i){if(null==e)return"";var n,r,o,a={},s={},l="",u="",c="",h=2,p=3,d=2,f=[],m=0,g=0;for(o=0;o<e.length;o+=1)if(l=e.charAt(o),Object.prototype.hasOwnProperty.call(a,l)||(a[l]=p++,s[l]=!0),u=c+l,Object.prototype.hasOwnProperty.call(a,u))c=u;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(n=0;d>n;n++)m<<=1,g==t-1?(g=0,f.push(i(m)),m=0):g++;for(r=c.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1}else{for(r=1,n=0;d>n;n++)m=m<<1|r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r=0;for(r=c.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1}h--,0==h&&(h=Math.pow(2,d),d++),delete s[c]}else for(r=a[c],n=0;d>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1;h--,0==h&&(h=Math.pow(2,d),d++),a[u]=p++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(n=0;d>n;n++)m<<=1,g==t-1?(g=0,f.push(i(m)),m=0):g++;for(r=c.charCodeAt(0),n=0;8>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1}else{for(r=1,n=0;d>n;n++)m=m<<1|r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r=0;for(r=c.charCodeAt(0),n=0;16>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1}h--,0==h&&(h=Math.pow(2,d),d++),delete s[c]}else for(r=a[c],n=0;d>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1;h--,0==h&&(h=Math.pow(2,d),d++)}for(r=2,n=0;d>n;n++)m=m<<1|1&r,g==t-1?(g=0,f.push(i(m)),m=0):g++,r>>=1;for(;;){if(m<<=1,g==t-1){f.push(i(m));break}g++}return f.join("")},decompress:function(e){return null==e?"":""==e?null:o._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,i,n){var r,o,a,s,l,u,c,h,p=[],d=4,f=4,m=3,g="",v=[],y={val:n(0),position:i,index:1};for(o=0;3>o;o+=1)p[o]=o;for(s=0,u=Math.pow(2,2),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;switch(r=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;h=t(s);break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;h=t(s);break;case 2:return""}for(p[3]=h,a=h,v.push(h);;){if(y.index>e)return"";for(s=0,u=Math.pow(2,m),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;switch(h=s){case 0:for(s=0,u=Math.pow(2,8),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=t(s),h=f-1,d--;break;case 1:for(s=0,u=Math.pow(2,16),c=1;c!=u;)l=y.val&y.position,y.position>>=1,0==y.position&&(y.position=i,y.val=n(y.index++)),s|=(l>0?1:0)*c,c<<=1;p[f++]=t(s),h=f-1,d--;break;case 2:return v.join("")}if(0==d&&(d=Math.pow(2,m),m++),p[h])g=p[h];else{if(h!==f)return null;g=a+a.charAt(0)}v.push(g),p[f++]=a+g.charAt(0),d--,a=g,0==d&&(d=Math.pow(2,m),m++)}}};return o}();"function"==typeof define&&define.amd?define(function(){return LZString}):"undefined"!=typeof module&&null!=module&&(module.exports=LZString),function(){"use strict";function e(e,t){var i=e.split("."),n=s;!(i[0]in n)&&n.execScript&&n.execScript("var "+i[0]);for(var r;i.length&&(r=i.shift());)i.length||t===a?n=n[r]?n[r]:n[r]={}:n[r]=t}function t(e){var t,i,n,r,o,a,s,u,c,h,p=e.length,d=0,f=Number.POSITIVE_INFINITY;for(u=0;p>u;++u)e[u]>d&&(d=e[u]),e[u]<f&&(f=e[u]);for(t=1<<d,i=new(l?Uint32Array:Array)(t),n=1,r=0,o=2;d>=n;){for(u=0;p>u;++u)if(e[u]===n){for(a=0,s=r,c=0;n>c;++c)a=a<<1|1&s,s>>=1;for(h=n<<16|u,c=a;t>c;c+=o)i[c]=h;++r}++n,r<<=1,o<<=1}return[i,d,f]}function i(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=l?new Uint8Array(e):e,this.m=!1,this.i=c,this.r=!1,(t||!(t={}))&&(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case u:this.b=32768,this.c=new(l?Uint8Array:Array)(32768+this.h+258);break;case c:this.b=0,this.c=new(l?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}function n(e,t){for(var i,n=e.f,r=e.d,o=e.input,a=e.a,s=o.length;t>r;){if(a>=s)throw Error("input buffer is broken");n|=o[a++]<<r,r+=8}return i=n&(1<<t)-1,e.f=n>>>t,e.d=r-t,e.a=a,i}function r(e,t){for(var i,n,r=e.f,o=e.d,a=e.input,s=e.a,l=a.length,u=t[0],c=t[1];c>o&&!(s>=l);)r|=a[s++]<<o,o+=8;if(i=u[r&(1<<c)-1],n=i>>>16,n>o)throw Error("invalid code length: "+n);return e.f=r>>n,e.d=o-n,e.a=s,65535&i}function o(e,t){var n,r;switch(this.input=e,this.a=0,(t||!(t={}))&&(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case L:this.method=L;break;default:throw Error("unsupported compression method")}if(0!==((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new i(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}var a=void 0,s=this,l="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView,u=0,c=1,h={t:u,s:c};i.prototype.k=function(){for(;!this.m;){var e=n(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var i=this.input,o=this.a,s=this.c,h=this.b,p=i.length,d=a,f=a,g=s.length,v=a;if(this.d=this.f=0,o+1>=p)throw Error("invalid uncompressed block header: LEN");if(d=i[o++]|i[o++]<<8,o+1>=p)throw Error("invalid uncompressed block header: NLEN");if(f=i[o++]|i[o++]<<8,d===~f)throw Error("invalid uncompressed block header: length verify");if(o+d>i.length)throw Error("input buffer is broken");switch(this.i){case u:for(;h+d>s.length;){if(v=g-h,d-=v,l)s.set(i.subarray(o,o+v),h),h+=v,o+=v;else for(;v--;)s[h++]=i[o++];this.b=h,s=this.e(),h=this.b}break;case c:for(;h+d>s.length;)s=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(l)s.set(i.subarray(o,o+d),h),h+=d,o+=d;else for(;d--;)s[h++]=i[o++];this.a=o,this.b=h,this.c=s;break;case 1:this.j(M,I);break;case 2:for(var y=n(this,5)+257,_=n(this,5)+1,b=n(this,4)+4,w=new(l?Uint8Array:Array)(m.length),x=a,E=a,S=a,T=a,C=a,P=a,L=a,R=a,A=a,R=0;b>R;++R)w[m[R]]=n(this,3);if(!l)for(R=b,b=w.length;b>R;++R)w[m[R]]=0;for(x=t(w),T=new(l?Uint8Array:Array)(y+_),R=0,A=y+_;A>R;)switch(C=r(this,x)){case 16:for(L=3+n(this,2);L--;)T[R++]=P;break;case 17:for(L=3+n(this,3);L--;)T[R++]=0;P=0;break;case 18:for(L=11+n(this,7);L--;)T[R++]=0;P=0;break;default:P=T[R++]=C}E=t(l?T.subarray(0,y):T.slice(0,y)),S=t(l?T.subarray(y):T.slice(y)),this.j(E,S);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var p,d,f=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],m=l?new Uint16Array(f):f,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],v=l?new Uint16Array(g):g,y=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],_=l?new Uint8Array(y):y,b=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],w=l?new Uint16Array(b):b,x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=l?new Uint8Array(x):x,S=new(l?Uint8Array:Array)(288);for(p=0,d=S.length;d>p;++p)S[p]=143>=p?8:255>=p?9:279>=p?7:8;var T,C,M=t(S),P=new(l?Uint8Array:Array)(30);for(T=0,C=P.length;C>T;++T)P[T]=5;var I=t(P);i.prototype.j=function(e,t){var i=this.c,o=this.b;this.o=e;for(var a,s,l,u,c=i.length-258;256!==(a=r(this,e));)if(256>a)o>=c&&(this.b=o,i=this.e(),o=this.b),i[o++]=a;else for(s=a-257,u=v[s],0<_[s]&&(u+=n(this,_[s])),a=r(this,t),l=w[a],0<E[a]&&(l+=n(this,E[a])),o>=c&&(this.b=o,i=this.e(),o=this.b);u--;)i[o]=i[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},i.prototype.w=function(e,t){var i=this.c,o=this.b;this.o=e;for(var a,s,l,u,c=i.length;256!==(a=r(this,e));)if(256>a)o>=c&&(i=this.e(),c=i.length),i[o++]=a;else for(s=a-257,u=v[s],0<_[s]&&(u+=n(this,_[s])),a=r(this,t),l=w[a],0<E[a]&&(l+=n(this,E[a])),o+u>c&&(i=this.e(),c=i.length);u--;)i[o]=i[o++-l];for(;8<=this.d;)this.d-=8,this.a--;this.b=o},i.prototype.e=function(){var e,t,i=new(l?Uint8Array:Array)(this.b-32768),n=this.b-32768,r=this.c;if(l)i.set(r.subarray(32768,i.length));else for(e=0,t=i.length;t>e;++e)i[e]=r[e+32768];if(this.g.push(i),this.l+=i.length,l)r.set(r.subarray(n,n+32768));else for(e=0;32768>e;++e)r[e]=r[n+e];return this.b=32768,r},i.prototype.z=function(e){var t,i,n,r,o=this.input.length/this.a+1|0,a=this.input,s=this.c;return e&&("number"==typeof e.p&&(o=e.p),"number"==typeof e.u&&(o+=e.u)),2>o?(i=(a.length-this.a)/this.o[2],r=258*(i/2)|0,n=r<s.length?s.length+r:s.length<<1):n=s.length*o,l?(t=new Uint8Array(n),t.set(s)):t=s,this.c=t},i.prototype.n=function(){var e,t,i,n,r,o=0,a=this.c,s=this.g,u=new(l?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return l?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,i=s.length;i>t;++t)for(e=s[t],n=0,r=e.length;r>n;++n)u[o++]=e[n];for(t=32768,i=this.b;i>t;++t)u[o++]=a[t];return this.g=[],this.buffer=u},i.prototype.v=function(){var e,t=this.b;return l?this.r?(e=new Uint8Array(t),e.set(this.c.subarray(0,t))):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},o.prototype.k=function(){var e,t,i=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(i[this.a++]<<24|i[this.a++]<<16|i[this.a++]<<8|i[this.a++])>>>0;var n=e;if("string"==typeof n){var r,o,a=n.split("");for(r=0,o=a.length;o>r;r++)a[r]=(255&a[r].charCodeAt(0))>>>0;n=a}for(var s,l=1,u=0,c=n.length,h=0;c>0;){s=c>1024?1024:c,c-=s;do l+=n[h++],u+=l;while(--s);l%=65521,u%=65521}if(t!==(u<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var L=8;e("Zlib.Inflate",o),e("Zlib.Inflate.prototype.decompress",o.prototype.k);var R,A,O,k,D={ADAPTIVE:h.s,BLOCK:h.t};if(Object.keys)R=Object.keys(D);else for(A in R=[],O=0,D)R[O++]=A;for(O=0,k=R.length;k>O;++O)A=R[O],e("Zlib.Inflate.BufferType."+A,D[A])}.call(this),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.THREE={})}(this,function(e){function t(){}function i(e,t){this.x=e||0,this.y=t||0}function n(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function r(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._w=void 0!==n?n:1}function o(e,t,i){this.x=e||0,this.y=t||0,this.z=i||0}function a(){this.elements=[1,0,0,0,1,0,0,0,1],0<arguments.length&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function s(e,t,n,r,o,l,u,c,h,p){Object.defineProperty(this,"id",{value:Jo++}),this.uuid=qo.generateUUID(),this.name="",this.image=void 0!==e?e:s.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==t?t:s.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:1001,this.wrapT=void 0!==r?r:1001,this.magFilter=void 0!==o?o:1006,this.minFilter=void 0!==l?l:1008,this.anisotropy=void 0!==h?h:1,this.format=void 0!==u?u:1023,this.type=void 0!==c?c:1009,this.offset=new i(0,0),this.repeat=new i(1,1),this.center=new i(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new a,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==p?p:3e3,this.version=0,this.onUpdate=null}function l(e,t,i,n){this.x=e||0,this.y=t||0,this.z=i||0,this.w=void 0!==n?n:1}function u(e,t,i){this.width=e,this.height=t,this.scissor=new l(0,0,e,t),this.scissorTest=!1,this.viewport=new l(0,0,e,t),i=i||{},void 0===i.minFilter&&(i.minFilter=1006),this.texture=new s(void 0,void 0,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.encoding),this.depthBuffer=void 0!==i.depthBuffer?i.depthBuffer:!0,this.stencilBuffer=void 0!==i.stencilBuffer?i.stencilBuffer:!0,this.depthTexture=void 0!==i.depthTexture?i.depthTexture:null}function c(e,t,i){u.call(this,e,t,i),this.activeMipMapLevel=this.activeCubeFace=0}function h(e,t,i,n,r,o,a,l,u,c,h,p){s.call(this,null,o,a,l,u,c,n,r,h,p),this.image={data:e,width:t,height:i},this.magFilter=void 0!==u?u:1003,this.minFilter=void 0!==c?c:1003,this.flipY=this.generateMipmaps=!1,this.unpackAlignment=1}function p(e,t){this.min=void 0!==e?e:new o(1/0,1/0,1/0),this.max=void 0!==t?t:new o(-(1/0),-(1/0),-(1/0))}function d(e,t){this.center=void 0!==e?e:new o,this.radius=void 0!==t?t:0}function f(e,t){this.normal=void 0!==e?e:new o(1,0,0),this.constant=void 0!==t?t:0}function m(e,t,i,n,r,o){this.planes=[void 0!==e?e:new f,void 0!==t?t:new f,void 0!==i?i:new f,void 0!==n?n:new f,void 0!==r?r:new f,void 0!==o?o:new f]}function g(e,t,i){return void 0===t&&void 0===i?this.set(e):this.setRGB(e,t,i)}function v(e){function t(t,i){var n=t.array,r=t.dynamic?e.DYNAMIC_DRAW:e.STATIC_DRAW,o=e.createBuffer();return e.bindBuffer(i,o),e.bufferData(i,n,r),t.onUploadCallback(),i=e.FLOAT,n instanceof Float32Array?i=e.FLOAT:n instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):n instanceof Uint16Array?i=e.UNSIGNED_SHORT:n instanceof Int16Array?i=e.SHORT:n instanceof Uint32Array?i=e.UNSIGNED_INT:n instanceof Int32Array?i=e.INT:n instanceof Int8Array?i=e.BYTE:n instanceof Uint8Array&&(i=e.UNSIGNED_BYTE),{buffer:o,type:i,bytesPerElement:n.BYTES_PER_ELEMENT,version:t.version}}var i=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),i.get(e)},remove:function(t){t.isInterleavedBufferAttribute&&(t=t.data);var n=i.get(t);n&&(e.deleteBuffer(n.buffer),i["delete"](t))},update:function(n,r){n.isInterleavedBufferAttribute&&(n=n.data);var o=i.get(n);if(void 0===o)i.set(n,t(n,r));else if(o.version<n.version){var a=n,s=a.array,l=a.updateRange;e.bindBuffer(r,o.buffer),!1===a.dynamic?e.bufferData(r,s,e.STATIC_DRAW):-1===l.count?e.bufferSubData(r,0,s):0===l.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(e.bufferSubData(r,l.offset*s.BYTES_PER_ELEMENT,s.subarray(l.offset,l.offset+l.count)),l.count=-1),o.version=n.version}}}}function y(e,t,i,n){this._x=e||0,this._y=t||0,this._z=i||0,this._order=n||y.DefaultOrder}function _(){this.mask=1}function b(){Object.defineProperty(this,"id",{value:ia++}),this.uuid=qo.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=b.DefaultUp.clone();var e=new o,t=new y,i=new r,s=new o(1,1,1);t.onChange(function(){i.setFromEuler(t,!1)}),i.onChange(function(){t.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{enumerable:!0,value:e},rotation:{enumerable:!0,value:t},quaternion:{enumerable:!0,value:i},scale:{enumerable:!0,value:s},modelViewMatrix:{value:new n},normalMatrix:{value:new a}}),this.matrix=new n,this.matrixWorld=new n,this.matrixAutoUpdate=b.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new _,this.visible=!0,this.receiveShadow=this.castShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function w(){b.call(this),this.type="Camera",this.matrixWorldInverse=new n,this.projectionMatrix=new n}function x(e,t,i,n,r,o){w.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=n,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function E(e,t,i,n,r,a){this.a=e,this.b=t,this.c=i,this.normal=n&&n.isVector3?n:new o,this.vertexNormals=Array.isArray(n)?n:[],this.color=r&&r.isColor?r:new g,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==a?a:0}function S(){Object.defineProperty(this,"id",{value:na+=2}),this.uuid=qo.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.lineDistancesNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.uvsNeedUpdate=this.verticesNeedUpdate=this.elementsNeedUpdate=!1}function T(e,t,i){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=!0===i,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function C(e,t,i){T.call(this,new Int8Array(e),t,i)}function M(e,t,i){T.call(this,new Uint8Array(e),t,i)}function P(e,t,i){T.call(this,new Uint8ClampedArray(e),t,i)}function I(e,t,i){T.call(this,new Int16Array(e),t,i)}function L(e,t,i){T.call(this,new Uint16Array(e),t,i)}function R(e,t,i){T.call(this,new Int32Array(e),t,i)}function A(e,t,i){T.call(this,new Uint32Array(e),t,i)}function O(e,t,i){T.call(this,new Float32Array(e),t,i)}function k(e,t,i){T.call(this,new Float64Array(e),t,i)}function D(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingSphere=this.boundingBox=null,this.groupsNeedUpdate=this.uvsNeedUpdate=this.colorsNeedUpdate=this.normalsNeedUpdate=this.verticesNeedUpdate=!1}function N(e){if(0===e.length)return-(1/0);for(var t=e[0],i=1,n=e.length;n>i;++i)e[i]>t&&(t=e[i]);return t}function B(){Object.defineProperty(this,"id",{value:ra+=2}),this.uuid=qo.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.drawRange={start:0,count:1/0}}function U(e,t,i,n,r,o){S.call(this),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new G(e,t,i,n,r,o)),this.mergeVertices()}function G(e,t,i,n,r,a){function s(e,t,i,n,r,a,s,m,g,v,y){var _=a/g,b=s/v,w=a/2,x=s/2,E=m/2;s=g+1;var S,T,C=v+1,M=a=0,P=new o;for(T=0;C>T;T++){var I=T*b-x;for(S=0;s>S;S++)P[e]=(S*_-w)*n,P[t]=I*r,P[i]=E,c.push(P.x,P.y,P.z),P[e]=0,P[t]=0,P[i]=m>0?1:-1,h.push(P.x,P.y,P.z),p.push(S/g),p.push(1-T/v),a+=1}for(T=0;v>T;T++)for(S=0;g>S;S++)e=d+S+s*(T+1),t=d+(S+1)+s*(T+1),i=d+(S+1)+s*T,u.push(d+S+s*T,e,i),u.push(e,t,i),M+=6;l.addGroup(f,M,y),f+=M,d+=a}B.call(this),this.type="BoxBufferGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:n,heightSegments:r,depthSegments:a};var l=this;e=e||1,t=t||1,i=i||1,n=Math.floor(n)||1,r=Math.floor(r)||1,a=Math.floor(a)||1;var u=[],c=[],h=[],p=[],d=0,f=0;s("z","y","x",-1,-1,i,t,e,a,r,0),s("z","y","x",1,-1,i,t,-e,a,r,1),s("x","z","y",1,1,e,i,t,n,a,2),s("x","z","y",1,-1,e,i,-t,n,a,3),s("x","y","z",1,-1,e,t,i,n,r,4),s("x","y","z",-1,-1,e,t,-i,n,r,5),this.setIndex(u),this.addAttribute("position",new O(c,3)),this.addAttribute("normal",new O(h,3)),this.addAttribute("uv",new O(p,2))}function F(e,t,i,n){S.call(this),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},this.fromBufferGeometry(new H(e,t,i,n)),this.mergeVertices()}function H(e,t,i,n){B.call(this),this.type="PlaneBufferGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:n},e=e||1,t=t||1;var r=e/2,o=t/2;i=Math.floor(i)||1,n=Math.floor(n)||1;var a=i+1,s=n+1,l=e/i,u=t/n,c=[],h=[],p=[],d=[];for(e=0;s>e;e++){var f=e*u-o;for(t=0;a>t;t++)h.push(t*l-r,-f,0),p.push(0,0,1),d.push(t/i),d.push(1-e/n)}for(e=0;n>e;e++)for(t=0;i>t;t++)r=t+a*(e+1),o=t+1+a*(e+1),s=t+1+a*e,c.push(t+a*e,r,s),c.push(r,o,s);this.setIndex(c),this.addAttribute("position",new O(h,3)),this.addAttribute("normal",new O(p,3)),this.addAttribute("uv",new O(d,2))}function j(){Object.defineProperty(this,"id",{value:oa++}),this.uuid=qo.generateUUID(),this.name="",this.type="Material",this.lights=this.fog=!0,this.blending=1,this.side=0,this.flatShading=!1,this.vertexColors=0,this.opacity=1,this.transparent=!1,this.blendSrc=204,this.blendDst=205,this.blendEquation=100,this.blendEquationAlpha=this.blendDstAlpha=this.blendSrcAlpha=null,this.depthFunc=3,this.depthWrite=this.depthTest=!0,this.clippingPlanes=null,this.clipShadows=this.clipIntersection=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetUnits=this.polygonOffsetFactor=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.overdraw=0,this.visible=!0,this.userData={},this.needsUpdate=!0}function z(e){j.call(this),this.type="MeshBasicMaterial",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.lights=this.morphTargets=this.skinning=!1,this.setValues(e)}function $(e){j.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader="void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.clipping=this.lights=this.fog=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==e&&(void 0!==e.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(e))}function V(e,t){this.origin=void 0!==e?e:new o,this.direction=void 0!==t?t:new o}function W(e,t){this.start=void 0!==e?e:new o,this.end=void 0!==t?t:new o}function X(e,t,i){this.a=void 0!==e?e:new o,this.b=void 0!==t?t:new o,this.c=void 0!==i?i:new o}function Y(e,t){b.call(this),this.type="Mesh",this.geometry=void 0!==e?e:new B,this.material=void 0!==t?t:new z({color:16777215*Math.random()}),this.drawMode=0,this.updateMorphTargets()}function q(e,t,i,n){function r(e,i){t.buffers.color.setClear(e.r,e.g,e.b,i,n)}var o,a,s,l=new g(0),u=0;return{getClearColor:function(){return l},setClearColor:function(e,t){l.set(e),u=void 0!==t?t:1,r(l,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,r(l,u)},render:function(t,n,c,h){n=n.background,null===n?r(l,u):n&&n.isColor&&(r(n,1),h=!0),(e.autoClear||h)&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),n&&n.isCubeTexture?(void 0===s&&(s=new Y(new G(1,1,1),new $({uniforms:ta.cube.uniforms,vertexShader:ta.cube.vertexShader,fragmentShader:ta.cube.fragmentShader,side:1,depthTest:!0,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(e,t,i){this.matrixWorld.copyPosition(i.matrixWorld)},i.update(s.geometry)),s.material.uniforms.tCube.value=n,t.push(s,s.geometry,s.material,0,null)):n&&n.isTexture&&(void 0===o&&(o=new x(-1,1,1,-1,0,1),a=new Y(new H(2,2),new z({depthTest:!1,depthWrite:!1,fog:!1})),i.update(a.geometry)),a.material.map=n,e.renderBufferDirect(o,null,a.geometry,a.material,a,null))}}}function J(e,t,i){var n;this.setMode=function(e){n=e},this.render=function(t,r){e.drawArrays(n,t,r),i.update(r,n)},this.renderInstances=function(e,r,o){var a=t.get("ANGLE_instanced_arrays");if(null===a)console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{var s=e.attributes.position;s.isInterleavedBufferAttribute?(o=s.data.count,a.drawArraysInstancedANGLE(n,0,o,e.maxInstancedCount)):a.drawArraysInstancedANGLE(n,r,o,e.maxInstancedCount),i.update(o,n,e.maxInstancedCount)}}}function Z(e,t,i){function n(t){if("highp"===t){if(0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision)return"highp";t="mediump"}return"mediump"===t&&0<e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision&&0<e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision?"mediump":"lowp"
}var r,o=void 0!==i.precision?i.precision:"highp",a=n(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a),i=!0===i.logarithmicDepthBuffer,a=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);var s=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS),l=e.getParameter(e.MAX_TEXTURE_SIZE),u=e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),c=e.getParameter(e.MAX_VERTEX_ATTRIBS),h=e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),p=e.getParameter(e.MAX_VARYING_VECTORS),d=e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),f=s>0,m=!!t.get("OES_texture_float");return{getMaxAnisotropy:function(){if(void 0!==r)return r;var i=t.get("EXT_texture_filter_anisotropic");return r=null!==i?e.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0},getMaxPrecision:n,precision:o,logarithmicDepthBuffer:i,maxTextures:a,maxVertexTextures:s,maxTextureSize:l,maxCubemapSize:u,maxAttributes:c,maxVertexUniforms:h,maxVaryings:p,maxFragmentUniforms:d,vertexTextures:f,floatFragmentTextures:m,floatVertexTextures:f&&m}}function K(){function e(){c.value!==n&&(c.value=n,c.needsUpdate=r>0),i.numPlanes=r,i.numIntersection=0}function t(e,t,n,r){var o=null!==e?e.length:0,a=null;if(0!==o){if(a=c.value,!0!==r||null===a)for(r=n+4*o,t=t.matrixWorldInverse,u.getNormalMatrix(t),(null===a||a.length<r)&&(a=new Float32Array(r)),r=0;r!==o;++r,n+=4)l.copy(e[r]).applyMatrix4(t,u),l.normal.toArray(a,n),a[n+3]=l.constant;c.value=a,c.needsUpdate=!0}return i.numPlanes=o,a}var i=this,n=null,r=0,o=!1,s=!1,l=new f,u=new a,c={value:null,needsUpdate:!1};this.uniform=c,this.numIntersection=this.numPlanes=0,this.init=function(e,i,a){var s=0!==e.length||i||0!==r||o;return o=i,n=t(e,a,0),r=e.length,s},this.beginShadows=function(){s=!0,t(null)},this.endShadows=function(){s=!1,e()},this.setState=function(i,a,l,u,h,p){if(!o||null===i||0===i.length||s&&!l)s?t(null):e();else{l=s?0:r;var d=4*l,f=h.clippingState||null;for(c.value=f,f=t(i,u,d,p),i=0;i!==d;++i)f[i]=n[i];h.clippingState=f,this.numIntersection=a?this.numPlanes:0,this.numPlanes+=l}}}function Q(e){var t={};return{get:function(i){if(void 0!==t[i])return t[i];switch(i){case"WEBGL_depth_texture":var n=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":n=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":n=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":n=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:n=e.getExtension(i)}return null===n&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),t[i]=n}}}function et(e,t,i){function n(e){e=e.target;var a=r[e.id];null!==a.index&&t.remove(a.index);for(var s in a.attributes)t.remove(a.attributes[s]);e.removeEventListener("dispose",n),delete r[e.id],(s=o[e.id])&&(t.remove(s),delete o[e.id]),(s=o[a.id])&&(t.remove(s),delete o[a.id]),i.memory.geometries--}var r={},o={};return{get:function(e,t){var o=r[t.id];return o?o:(t.addEventListener("dispose",n),t.isBufferGeometry?o=t:t.isGeometry&&(void 0===t._bufferGeometry&&(t._bufferGeometry=(new B).setFromObject(e)),o=t._bufferGeometry),r[t.id]=o,i.memory.geometries++,o)},update:function(i){var n=i.index,r=i.attributes;null!==n&&t.update(n,e.ELEMENT_ARRAY_BUFFER);for(var o in r)t.update(r[o],e.ARRAY_BUFFER);i=i.morphAttributes;for(o in i){n=i[o],r=0;for(var a=n.length;a>r;r++)t.update(n[r],e.ARRAY_BUFFER)}},getWireframeAttribute:function(i){var n=o[i.id];if(n)return n;n=[];var r=i.index,a=i.attributes;if(null!==r){r=r.array,a=0;for(var s=r.length;s>a;a+=3){var l=r[a+0],u=r[a+1],c=r[a+2];n.push(l,u,u,c,c,l)}}else for(r=a.position.array,a=0,s=r.length/3-1;s>a;a+=3)l=a+0,u=a+1,c=a+2,n.push(l,u,u,c,c,l);return n=new(65535<N(n)?A:L)(n,1),t.update(n,e.ELEMENT_ARRAY_BUFFER),o[i.id]=n}}}function tt(e,t,i){var n,r,o;this.setMode=function(e){n=e},this.setIndex=function(e){r=e.type,o=e.bytesPerElement},this.render=function(t,a){e.drawElements(n,a,r,t*o),i.update(a,n)},this.renderInstances=function(e,a,s){var l=t.get("ANGLE_instanced_arrays");null===l?console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays."):(l.drawElementsInstancedANGLE(n,s,r,a*o,e.maxInstancedCount),i.update(s,n,e.maxInstancedCount))}}function it(e){var t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.frame++,t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(i,n,r){switch(r=r||1,t.calls++,n){case e.TRIANGLES:t.triangles+=i/3*r;break;case e.TRIANGLE_STRIP:case e.TRIANGLE_FAN:t.triangles+=r*(i-2);break;case e.LINES:t.lines+=i/2*r;break;case e.LINE_STRIP:t.lines+=r*(i-1);break;case e.LINE_LOOP:t.lines+=r*i;break;case e.POINTS:t.points+=r*i;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",n)}}}}function nt(e,t){return Math.abs(t[1])-Math.abs(e[1])}function rt(e){var t={},i=new Float32Array(8);return{update:function(n,r,o,a){var s=n.morphTargetInfluences,l=s.length;if(n=t[r.id],void 0===n){n=[];for(var u=0;l>u;u++)n[u]=[u,0];t[r.id]=n}var c=o.morphTargets&&r.morphAttributes.position;for(o=o.morphNormals&&r.morphAttributes.normal,u=0;l>u;u++){var h=n[u];0!==h[1]&&(c&&r.removeAttribute("morphTarget"+u),o&&r.removeAttribute("morphNormal"+u))}for(u=0;l>u;u++)h=n[u],h[0]=u,h[1]=s[u];for(n.sort(nt),u=0;8>u;u++)(h=n[u])&&(s=h[0],l=h[1])?(c&&r.addAttribute("morphTarget"+u,c[s]),o&&r.addAttribute("morphNormal"+u,o[s]),i[u]=l):i[u]=0;a.getUniforms().setValue(e,"morphTargetInfluences",i)}}}function ot(e,t){var i={};return{update:function(n){var r=t.render.frame,o=n.geometry,a=e.get(n,o);return i[a.id]!==r&&(o.isGeometry&&a.updateFromObject(n),e.update(a),i[a.id]=r),a},dispose:function(){i={}}}}function at(e,t,i,n,r,o,a,l,u,c){e=void 0!==e?e:[],s.call(this,e,void 0!==t?t:301,i,n,r,o,a,l,u,c),this.flipY=!1}function st(e,t,i){var n=e[0];if(0>=n||n>0)return e;var r=t*i,o=la[r];if(void 0===o&&(o=new Float32Array(r),la[r]=o),0!==t)for(n.toArray(o,0),n=1,r=0;n!==t;++n)r+=i,e[n].toArray(o,r);return o}function lt(e,t){var i=ua[t];void 0===i&&(i=new Int32Array(t),ua[t]=i);for(var n=0;n!==t;++n)i[n]=e.allocTextureUnit();return i}function ut(e,t){e.uniform1f(this.addr,t)}function ct(e,t){e.uniform1i(this.addr,t)}function ht(e,t){void 0===t.x?e.uniform2fv(this.addr,t):e.uniform2f(this.addr,t.x,t.y)}function pt(e,t){void 0!==t.x?e.uniform3f(this.addr,t.x,t.y,t.z):void 0!==t.r?e.uniform3f(this.addr,t.r,t.g,t.b):e.uniform3fv(this.addr,t)}function dt(e,t){void 0===t.x?e.uniform4fv(this.addr,t):e.uniform4f(this.addr,t.x,t.y,t.z,t.w)}function ft(e,t){e.uniformMatrix2fv(this.addr,!1,t.elements||t)}function mt(e,t){void 0===t.elements?e.uniformMatrix3fv(this.addr,!1,t):(ha.set(t.elements),e.uniformMatrix3fv(this.addr,!1,ha))}function gt(e,t){void 0===t.elements?e.uniformMatrix4fv(this.addr,!1,t):(ca.set(t.elements),e.uniformMatrix4fv(this.addr,!1,ca))}function vt(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n),i.setTexture2D(t||aa,n)}function yt(e,t,i){var n=i.allocTextureUnit();e.uniform1i(this.addr,n),i.setTextureCube(t||sa,n)}function _t(e,t){e.uniform2iv(this.addr,t)}function bt(e,t){e.uniform3iv(this.addr,t)}function wt(e,t){e.uniform4iv(this.addr,t)}function xt(e){switch(e){case 5126:return ut;case 35664:return ht;case 35665:return pt;case 35666:return dt;case 35674:return ft;case 35675:return mt;case 35676:return gt;case 35678:case 36198:return vt;case 35680:return yt;case 5124:case 35670:return ct;case 35667:case 35671:return _t;case 35668:case 35672:return bt;case 35669:case 35673:return wt}}function Et(e,t){e.uniform1fv(this.addr,t)}function St(e,t){e.uniform1iv(this.addr,t)}function Tt(e,t){e.uniform2fv(this.addr,st(t,this.size,2))}function Ct(e,t){e.uniform3fv(this.addr,st(t,this.size,3))}function Mt(e,t){e.uniform4fv(this.addr,st(t,this.size,4))}function Pt(e,t){e.uniformMatrix2fv(this.addr,!1,st(t,this.size,4))}function It(e,t){e.uniformMatrix3fv(this.addr,!1,st(t,this.size,9))}function Lt(e,t){e.uniformMatrix4fv(this.addr,!1,st(t,this.size,16))}function Rt(e,t,i){var n=t.length,r=lt(i,n);for(e.uniform1iv(this.addr,r),e=0;e!==n;++e)i.setTexture2D(t[e]||aa,r[e])}function At(e,t,i){var n=t.length,r=lt(i,n);for(e.uniform1iv(this.addr,r),e=0;e!==n;++e)i.setTextureCube(t[e]||sa,r[e])}function Ot(e){switch(e){case 5126:return Et;case 35664:return Tt;case 35665:return Ct;case 35666:return Mt;case 35674:return Pt;case 35675:return It;case 35676:return Lt;case 35678:return Rt;case 35680:return At;case 5124:case 35670:return St;case 35667:case 35671:return _t;case 35668:case 35672:return bt;case 35669:case 35673:return wt}}function kt(e,t,i){this.id=e,this.addr=i,this.setValue=xt(t.type)}function Dt(e,t,i){this.id=e,this.addr=i,this.size=t.size,this.setValue=Ot(t.type)}function Nt(e){this.id=e,this.seq=[],this.map={}}function Bt(e,t,i){this.seq=[],this.map={},this.renderer=i,i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(var n=0;i>n;++n){var r=e.getActiveUniform(t,n),o=e.getUniformLocation(t,r.name),a=this,s=r.name,l=s.length;for(pa.lastIndex=0;;){var u=pa.exec(s),c=pa.lastIndex,h=u[1],p=u[3];if("]"===u[2]&&(h|=0),void 0===p||"["===p&&c+2===l){s=a,r=void 0===p?new kt(h,r,o):new Dt(h,r,o),s.seq.push(r),s.map[r.id]=r;break}p=a.map[h],void 0===p&&(p=new Nt(h),h=a,a=p,h.seq.push(a),h.map[a.id]=a),a=p}}}function Ut(e){e=e.split("\n");for(var t=0;t<e.length;t++)e[t]=t+1+": "+e[t];return e.join("\n")}function Gt(e,t,i){var n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),!1===e.getShaderParameter(n,e.COMPILE_STATUS)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==e.getShaderInfoLog(n)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",t===e.VERTEX_SHADER?"vertex":"fragment",e.getShaderInfoLog(n),Ut(i)),n}function Ft(e){switch(e){case 3e3:return["Linear","( value )"];case 3001:return["sRGB","( value )"];case 3002:return["RGBE","( value )"];case 3004:return["RGBM","( value, 7.0 )"];case 3005:return["RGBM","( value, 16.0 )"];case 3006:return["RGBD","( value, 256.0 )"];case 3007:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw Error("unsupported encoding: "+e)}}function Ht(e,t){return t=Ft(t),"vec4 "+e+"( vec4 value ) { return "+t[0]+"ToLinear"+t[1]+"; }"}function jt(e,t){return t=Ft(t),"vec4 "+e+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function zt(e,t){switch(t){case 1:t="Linear";break;case 2:t="Reinhard";break;case 3:t="Uncharted2";break;case 4:t="OptimizedCineon";break;default:throw Error("unsupported toneMapping: "+t)}return"vec3 "+e+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function $t(e,t,i){return e=e||{},[e.derivatives||t.envMapCubeUV||t.bumpMap||t.normalMap||t.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(e.fragDepth||t.logarithmicDepthBuffer)&&i.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",e.drawBuffers&&i.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(e.shaderTextureLOD||t.envMap)&&i.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Wt).join("\n")}function Vt(e){var t,i=[];for(t in e){var n=e[t];!1!==n&&i.push("#define "+t+" "+n)}return i.join("\n")}function Wt(e){return""!==e}function Xt(e,t){return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights)}function Yt(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}function qt(e){return e.replace(/^[ \t]*#include +<([\w\d.]+)>/gm,function(e,t){if(e=Zo[t],void 0===e)throw Error("Can not resolve #include <"+t+">");return qt(e)})}function Jt(e){return e.replace(/#pragma unroll_loop[\s]+?for \( int i = (\d+); i < (\d+); i \+\+ \) \{([\s\S]+?)(?=\})\}/g,function(e,t,i,n){for(e="",t=parseInt(t);t<parseInt(i);t++)e+=n.replace(/\[ i \]/g,"[ "+t+" ]");return e})}function Zt(e,t,i,n,r,o){var a=e.context,s=n.defines,l=r.vertexShader,u=r.fragmentShader,c="SHADOWMAP_TYPE_BASIC";1===o.shadowMapType?c="SHADOWMAP_TYPE_PCF":2===o.shadowMapType&&(c="SHADOWMAP_TYPE_PCF_SOFT");var h="ENVMAP_TYPE_CUBE",p="ENVMAP_MODE_REFLECTION",d="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(n.envMap.mapping){case 301:case 302:h="ENVMAP_TYPE_CUBE";break;case 306:case 307:h="ENVMAP_TYPE_CUBE_UV";break;case 303:case 304:h="ENVMAP_TYPE_EQUIREC";break;case 305:h="ENVMAP_TYPE_SPHERE"}switch(n.envMap.mapping){case 302:case 304:p="ENVMAP_MODE_REFRACTION"}switch(n.combine){case 0:d="ENVMAP_BLENDING_MULTIPLY";break;case 1:d="ENVMAP_BLENDING_MIX";break;case 2:d="ENVMAP_BLENDING_ADD"}}var f=0<e.gammaFactor?e.gammaFactor:1,m=$t(n.extensions,o,t),g=Vt(s),v=a.createProgram();n.isRawShaderMaterial?(s=[g].filter(Wt).join("\n"),0<s.length&&(s+="\n"),t=[m,g].filter(Wt).join("\n"),0<t.length&&(t+="\n")):(s=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,g,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+f,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_COLOR","	attribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif","\n"].filter(Wt).join("\n"),t=[m,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,g,o.alphaTest?"#define ALPHATEST "+o.alphaTest:"","#define GAMMA_FACTOR "+f,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+h:"",o.envMap?"#define "+p:"",o.envMap?"#define "+d:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+c:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&t.get("EXT_frag_depth")?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&t.get("EXT_shader_texture_lod")?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",0!==o.toneMapping?"#define TONE_MAPPING":"",0!==o.toneMapping?Zo.tonemapping_pars_fragment:"",0!==o.toneMapping?zt("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.envMapEncoding||o.emissiveMapEncoding?Zo.encodings_pars_fragment:"",o.mapEncoding?Ht("mapTexelToLinear",o.mapEncoding):"",o.envMapEncoding?Ht("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?Ht("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?jt("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Wt).join("\n")),l=qt(l),l=Xt(l,o),l=Yt(l,o),u=qt(u),u=Xt(u,o),u=Yt(u,o),l=Jt(l),u=Jt(u),u=t+u,l=Gt(a,a.VERTEX_SHADER,s+l),u=Gt(a,a.FRAGMENT_SHADER,u),a.attachShader(v,l),a.attachShader(v,u),void 0!==n.index0AttributeName?a.bindAttribLocation(v,0,n.index0AttributeName):!0===o.morphTargets&&a.bindAttribLocation(v,0,"position"),a.linkProgram(v),o=a.getProgramInfoLog(v).trim(),c=a.getShaderInfoLog(l).trim(),h=a.getShaderInfoLog(u).trim(),d=p=!0,!1===a.getProgramParameter(v,a.LINK_STATUS)?(p=!1,console.error("THREE.WebGLProgram: shader error: ",a.getError(),"gl.VALIDATE_STATUS",a.getProgramParameter(v,a.VALIDATE_STATUS),"gl.getProgramInfoLog",o,c,h)):""!==o?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",o):(""===c||""===h)&&(d=!1),d&&(this.diagnostics={runnable:p,material:n,programLog:o,vertexShader:{log:c,prefix:s},fragmentShader:{log:h,prefix:t}}),a.deleteShader(l),a.deleteShader(u);var y;this.getUniforms=function(){return void 0===y&&(y=new Bt(a,v,e)),y};var _;return this.getAttributes=function(){if(void 0===_){for(var e={},t=a.getProgramParameter(v,a.ACTIVE_ATTRIBUTES),i=0;t>i;i++){var n=a.getActiveAttrib(v,i).name;e[n]=a.getAttribLocation(v,n)}_=e}return _},this.destroy=function(){a.deleteProgram(v),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=da++,this.code=i,this.usedTimes=1,this.program=v,this.vertexShader=l,this.fragmentShader=u,this}function Kt(e,t,i){function n(e,t){if(e)e.isTexture?i=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),i=e.texture.encoding);else var i=3e3;return 3e3===i&&t&&(i=3007),i}var r=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow"},a="precision supportsVertexTextures map mapEncoding envMap envMapMode envMapEncoding lightMap aoMap emissiveMap emissiveMapEncoding bumpMap normalMap displacementMap specularMap roughnessMap metalnessMap gradientMap alphaMap combine vertexColors fog useFog fogExp flatShading sizeAttenuation logarithmicDepthBuffer skinning maxBones useVertexTexture morphTargets morphNormals maxMorphTargets maxMorphNormals premultipliedAlpha numDirLights numPointLights numSpotLights numHemiLights numRectAreaLights shadowMapEnabled shadowMapType toneMapping physicallyCorrectLights alphaTest doubleSided flipSided numClippingPlanes numClipIntersection depthPacking dithering".split(" ");this.getParameters=function(t,r,a,s,l,u,c){var h=o[t.type];if(c.isSkinnedMesh){var p=c.skeleton.bones;if(i.floatVertexTextures)p=1024;else{var d=Math.min(Math.floor((i.maxVertexUniforms-20)/4),p.length);d<p.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+p.length+" bones. This GPU supports "+d+"."),p=0):p=d}}else p=0;d=i.precision,null!==t.precision&&(d=i.getMaxPrecision(t.precision),d!==t.precision&&console.warn("THREE.WebGLProgram.getParameters:",t.precision,"not supported, using",d,"instead."));var f=e.getRenderTarget();return{shaderID:h,precision:d,supportsVertexTextures:i.vertexTextures,outputEncoding:n(f?f.texture:null,e.gammaOutput),map:!!t.map,mapEncoding:n(t.map,e.gammaInput),envMap:!!t.envMap,envMapMode:t.envMap&&t.envMap.mapping,envMapEncoding:n(t.envMap,e.gammaInput),envMapCubeUV:!!t.envMap&&(306===t.envMap.mapping||307===t.envMap.mapping),lightMap:!!t.lightMap,aoMap:!!t.aoMap,emissiveMap:!!t.emissiveMap,emissiveMapEncoding:n(t.emissiveMap,e.gammaInput),bumpMap:!!t.bumpMap,normalMap:!!t.normalMap,displacementMap:!!t.displacementMap,roughnessMap:!!t.roughnessMap,metalnessMap:!!t.metalnessMap,specularMap:!!t.specularMap,alphaMap:!!t.alphaMap,gradientMap:!!t.gradientMap,combine:t.combine,vertexColors:t.vertexColors,fog:!!s,useFog:t.fog,fogExp:s&&s.isFogExp2,flatShading:t.flatShading,sizeAttenuation:t.sizeAttenuation,logarithmicDepthBuffer:i.logarithmicDepthBuffer,skinning:t.skinning&&p>0,maxBones:p,useVertexTexture:i.floatVertexTextures,morphTargets:t.morphTargets,morphNormals:t.morphNormals,maxMorphTargets:e.maxMorphTargets,maxMorphNormals:e.maxMorphNormals,numDirLights:r.directional.length,numPointLights:r.point.length,numSpotLights:r.spot.length,numRectAreaLights:r.rectArea.length,numHemiLights:r.hemi.length,numClippingPlanes:l,numClipIntersection:u,dithering:t.dithering,shadowMapEnabled:e.shadowMap.enabled&&c.receiveShadow&&0<a.length,shadowMapType:e.shadowMap.type,toneMapping:e.toneMapping,physicallyCorrectLights:e.physicallyCorrectLights,premultipliedAlpha:t.premultipliedAlpha,alphaTest:t.alphaTest,doubleSided:2===t.side,flipSided:1===t.side,depthPacking:void 0!==t.depthPacking?t.depthPacking:!1}},this.getProgramCode=function(t,i){var n=[];if(i.shaderID?n.push(i.shaderID):(n.push(t.fragmentShader),n.push(t.vertexShader)),void 0!==t.defines)for(var r in t.defines)n.push(r),n.push(t.defines[r]);for(r=0;r<a.length;r++)n.push(i[a[r]]);return n.push(t.onBeforeCompile.toString()),n.push(e.gammaOutput),n.join()},this.acquireProgram=function(i,n,o,a){for(var s,l=0,u=r.length;u>l;l++){var c=r[l];if(c.code===a){s=c,++s.usedTimes;break}}return void 0===s&&(s=new Zt(e,t,a,i,n,o),r.push(s)),s},this.releaseProgram=function(e){if(0===--e.usedTimes){var t=r.indexOf(e);r[t]=r[r.length-1],r.pop(),e.destroy()}},this.programs=r}function Qt(){var e=new WeakMap;return{get:function(t){var i=e.get(t);return void 0===i&&(i={},e.set(t,i)),i},remove:function(t){e["delete"](t)},update:function(t,i,n){e.get(t)[i]=n},dispose:function(){e=new WeakMap}}}function ei(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.program&&t.program&&e.program!==t.program?e.program.id-t.program.id:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function ti(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function ii(){var e=[],t=0,i=[],n=[];return{opaque:i,transparent:n,init:function(){t=0,i.length=0,n.length=0},push:function(r,o,a,s,l){var u=e[t];void 0===u?(u={id:r.id,object:r,geometry:o,material:a,program:a.program,renderOrder:r.renderOrder,z:s,group:l},e[t]=u):(u.id=r.id,u.object=r,u.geometry=o,u.material=a,u.program=a.program,u.renderOrder=r.renderOrder,u.z=s,u.group=l),(!0===a.transparent?n:i).push(u),t++},sort:function(){1<i.length&&i.sort(ei),1<n.length&&n.sort(ti)}}}function ni(){var e={};return{get:function(t,i){return t=t.id+","+i.id,i=e[t],void 0===i&&(i=new ii,e[t]=i),i},dispose:function(){e={}}}}function ri(){var e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];switch(t.type){case"DirectionalLight":var n={direction:new o,color:new g,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"SpotLight":n={position:new o,direction:new o,color:new g,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i};break;case"PointLight":n={position:new o,color:new g,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new i,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new o,skyColor:new g,groundColor:new g};break;case"RectAreaLight":n={color:new g,position:new o,halfWidth:new o,halfHeight:new o}}return e[t.id]=n}}}function oi(){var e=new ri,t={id:fa++,hash:"",ambient:[0,0,0],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=new o,r=new n,a=new n;return{setup:function(n,o,s){var l=0,u=0,c=0,h=0,p=0,d=0,f=0,m=0;s=s.matrixWorldInverse;for(var g=0,v=n.length;v>g;g++){var y=n[g],_=y.color,b=y.intensity,w=y.distance,x=y.shadow&&y.shadow.map?y.shadow.map.texture:null;if(y.isAmbientLight)l+=_.r*b,u+=_.g*b,c+=_.b*b;else if(y.isDirectionalLight){var E=e.get(y);E.color.copy(y.color).multiplyScalar(y.intensity),E.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(s),(E.shadow=y.castShadow)&&(_=y.shadow,E.shadowBias=_.bias,E.shadowRadius=_.radius,E.shadowMapSize=_.mapSize),t.directionalShadowMap[h]=x,t.directionalShadowMatrix[h]=y.shadow.matrix,t.directional[h]=E,h++}else y.isSpotLight?(E=e.get(y),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),E.color.copy(_).multiplyScalar(b),E.distance=w,E.direction.setFromMatrixPosition(y.matrixWorld),i.setFromMatrixPosition(y.target.matrixWorld),E.direction.sub(i),E.direction.transformDirection(s),E.coneCos=Math.cos(y.angle),E.penumbraCos=Math.cos(y.angle*(1-y.penumbra)),E.decay=0===y.distance?0:y.decay,(E.shadow=y.castShadow)&&(_=y.shadow,E.shadowBias=_.bias,E.shadowRadius=_.radius,E.shadowMapSize=_.mapSize),t.spotShadowMap[d]=x,t.spotShadowMatrix[d]=y.shadow.matrix,t.spot[d]=E,d++):y.isRectAreaLight?(E=e.get(y),E.color.copy(_).multiplyScalar(b),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),a.identity(),r.copy(y.matrixWorld),r.premultiply(s),a.extractRotation(r),E.halfWidth.set(.5*y.width,0,0),E.halfHeight.set(0,.5*y.height,0),E.halfWidth.applyMatrix4(a),E.halfHeight.applyMatrix4(a),t.rectArea[f]=E,f++):y.isPointLight?(E=e.get(y),E.position.setFromMatrixPosition(y.matrixWorld),E.position.applyMatrix4(s),E.color.copy(y.color).multiplyScalar(y.intensity),E.distance=y.distance,E.decay=0===y.distance?0:y.decay,(E.shadow=y.castShadow)&&(_=y.shadow,E.shadowBias=_.bias,E.shadowRadius=_.radius,E.shadowMapSize=_.mapSize,E.shadowCameraNear=_.camera.near,E.shadowCameraFar=_.camera.far),t.pointShadowMap[p]=x,t.pointShadowMatrix[p]=y.shadow.matrix,t.point[p]=E,p++):y.isHemisphereLight&&(E=e.get(y),E.direction.setFromMatrixPosition(y.matrixWorld),E.direction.transformDirection(s),E.direction.normalize(),E.skyColor.copy(y.color).multiplyScalar(b),E.groundColor.copy(y.groundColor).multiplyScalar(b),t.hemi[m]=E,m++)}t.ambient[0]=l,t.ambient[1]=u,t.ambient[2]=c,t.directional.length=h,t.spot.length=d,t.rectArea.length=f,t.point.length=p,t.hemi.length=m,t.hash=t.id+","+h+","+p+","+d+","+f+","+m+","+o.length},state:t}}function ai(){var e=new oi,t=[],i=[],n=[];return{init:function(){t.length=0,i.length=0,n.length=0},state:{lightsArray:t,shadowsArray:i,spritesArray:n,lights:e},setupLights:function(n){e.setup(t,i,n)},pushLight:function(e){t.push(e)},pushShadow:function(e){i.push(e)},pushSprite:function(e){n.push(e)}}}function si(){var e={};return{get:function(t,i){return t=t.id+","+i.id,i=e[t],void 0===i&&(i=new ai,e[t]=i),i},dispose:function(){e={}}}}function li(e){j.call(this),this.type="MeshDepthMaterial",this.depthPacking=3200,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.lights=this.fog=!1,this.setValues(e)}function ui(e){j.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new o,this.nearDistance=1,this.farDistance=1e3,this.morphTargets=this.skinning=!1,this.displacementMap=this.alphaMap=this.map=null,this.displacementScale=1,this.displacementBias=0,this.lights=this.fog=!1,this.setValues(e)}function ci(e,t,r){function a(t,i,n,r,o,a){var s=t.geometry,l=v,u=t.customDepthMaterial;return n&&(l=y,u=t.customDistanceMaterial),u?l=u:(u=!1,i.morphTargets&&(s&&s.isBufferGeometry?u=s.morphAttributes&&s.morphAttributes.position&&0<s.morphAttributes.position.length:s&&s.isGeometry&&(u=s.morphTargets&&0<s.morphTargets.length)),t.isSkinnedMesh&&!1===i.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",t),t=t.isSkinnedMesh&&i.skinning,s=0,u&&(s|=1),t&&(s|=2),l=l[s]),e.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length&&(s=l.uuid,u=i.uuid,t=_[s],void 0===t&&(t={},_[s]=t),s=t[u],void 0===s&&(s=l.clone(),t[u]=s),l=s),l.visible=i.visible,l.wireframe=i.wireframe,l.side=null!=i.shadowSide?i.shadowSide:b[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,n&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function s(i,n,r,o){if(!1!==i.visible){if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&i.castShadow&&(!i.frustumCulled||c.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(r.matrixWorldInverse,i.matrixWorld);var l=t.update(i),u=i.material;if(Array.isArray(u))for(var h=l.groups,p=0,d=h.length;d>p;p++){var f=h[p],m=u[f.materialIndex];m&&m.visible&&(m=a(i,m,o,g,r.near,r.far),e.renderBufferDirect(r,null,l,m,i,f))}else u.visible&&(m=a(i,u,o,g,r.near,r.far),e.renderBufferDirect(r,null,l,m,i,null))}for(i=i.children,l=0,u=i.length;u>l;l++)s(i[l],n,r,o)}}var c=new m,h=new n,p=new i,d=new i(r,r),f=new o,g=new o,v=Array(4),y=Array(4),_={},b={0:1,1:0,2:2},w=[new o(1,0,0),new o(-1,0,0),new o(0,0,1),new o(0,0,-1),new o(0,1,0),new o(0,-1,0)],x=[new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,1,0),new o(0,0,1),new o(0,0,-1)],E=[new l,new l,new l,new l,new l,new l];for(r=0;4!==r;++r){var S=0!==(1&r),T=0!==(2&r),C=new li({depthPacking:3201,morphTargets:S,skinning:T});v[r]=C,S=new ui({morphTargets:S,skinning:T}),y[r]=S}var M=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=1,this.render=function(t,i,n){if(!1!==M.enabled&&(!1!==M.autoUpdate||!1!==M.needsUpdate)&&0!==t.length){var r=e.state;r.disable(e.context.BLEND),r.buffers.color.setClear(1,1,1,1),r.buffers.depth.setTest(!0),r.setScissorTest(!1);for(var o,a=0,l=t.length;l>a;a++){var m=t[a];o=m.shadow;var v=m&&m.isPointLight;if(void 0===o)console.warn("THREE.WebGLShadowMap:",m,"has no shadow.");else{var y=o.camera;if(p.copy(o.mapSize),p.min(d),v){var _=p.x,b=p.y;E[0].set(2*_,b,_,b),E[1].set(0,b,_,b),E[2].set(3*_,b,_,b),E[3].set(_,b,_,b),E[4].set(3*_,0,_,b),E[5].set(_,0,_,b),p.x*=4,p.y*=2}for(null===o.map&&(o.map=new u(p.x,p.y,{minFilter:1003,magFilter:1003,format:1023}),o.map.texture.name=m.name+".shadowMap",y.updateProjectionMatrix()),o.isSpotLightShadow&&o.update(m),_=o.map,b=o.matrix,g.setFromMatrixPosition(m.matrixWorld),y.position.copy(g),v?(o=6,b.makeTranslation(-g.x,-g.y,-g.z)):(o=1,f.setFromMatrixPosition(m.target.matrixWorld),y.lookAt(f),y.updateMatrixWorld(),b.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),b.multiply(y.projectionMatrix),b.multiply(y.matrixWorldInverse)),e.setRenderTarget(_),e.clear(),m=0;o>m;m++)v&&(f.copy(y.position),f.add(w[m]),y.up.copy(x[m]),y.lookAt(f),y.updateMatrixWorld(),r.viewport(E[m])),h.multiplyMatrices(y.projectionMatrix,y.matrixWorldInverse),c.setFromMatrix(h),s(i,n,y,v)
}}M.needsUpdate=!1}}}function hi(e,t,i,n,r,o,a,l,u){s.call(this,e,t,i,n,r,o,a,l,u),this.needsUpdate=!0}function pi(e,t,i,n,a){function s(e,t){return e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:t.id-e.id}var l,u,c,h,p,d,f,m,g,v,y,_,b,w,x,E,S,T,C,M,P,I,L=new o,R=new r,A=new o;this.render=function(r,o,O){if(0!==r.length){if(void 0===P){var k=new Float32Array([-.5,-.5,0,0,.5,-.5,1,0,.5,.5,1,1,-.5,.5,0,1]),D=new Uint16Array([0,1,2,0,2,3]);C=t.createBuffer(),M=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,C),t.bufferData(t.ARRAY_BUFFER,k,t.STATIC_DRAW),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,M),t.bufferData(t.ELEMENT_ARRAY_BUFFER,D,t.STATIC_DRAW),k=t.createProgram(),D=t.createShader(t.VERTEX_SHADER);var N=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(D,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform mat4 modelViewMatrix;\nuniform mat4 projectionMatrix;\nuniform float rotation;\nuniform vec2 center;\nuniform vec2 scale;\nuniform vec2 uvOffset;\nuniform vec2 uvScale;\nattribute vec2 position;\nattribute vec2 uv;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n	vUV = uvOffset + uv * uvScale;\n	vec2 alignedPosition = ( position - center ) * scale;\n	vec2 rotatedPosition;\n	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n	vec4 mvPosition;\n	mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n	mvPosition.xy += rotatedPosition;\n	gl_Position = projectionMatrix * mvPosition;\n	fogDepth = - mvPosition.z;\n}"].join("\n")),t.shaderSource(N,["precision "+a.precision+" float;","#define SHADER_NAME SpriteMaterial\nuniform vec3 color;\nuniform sampler2D map;\nuniform float opacity;\nuniform int fogType;\nuniform vec3 fogColor;\nuniform float fogDensity;\nuniform float fogNear;\nuniform float fogFar;\nuniform float alphaTest;\nvarying vec2 vUV;\nvarying float fogDepth;\nvoid main() {\n	vec4 texture = texture2D( map, vUV );\n	gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );\n	if ( gl_FragColor.a < alphaTest ) discard;\n	if ( fogType > 0 ) {\n		float fogFactor = 0.0;\n		if ( fogType == 1 ) {\n			fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n		} else {\n			const float LOG2 = 1.442695;\n			fogFactor = exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 );\n			fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n		}\n		gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n	}\n}"].join("\n")),t.compileShader(D),t.compileShader(N),t.attachShader(k,D),t.attachShader(k,N),t.linkProgram(k),P=k,S=t.getAttribLocation(P,"position"),T=t.getAttribLocation(P,"uv"),l=t.getUniformLocation(P,"uvOffset"),u=t.getUniformLocation(P,"uvScale"),c=t.getUniformLocation(P,"rotation"),h=t.getUniformLocation(P,"center"),p=t.getUniformLocation(P,"scale"),d=t.getUniformLocation(P,"color"),f=t.getUniformLocation(P,"map"),m=t.getUniformLocation(P,"opacity"),g=t.getUniformLocation(P,"modelViewMatrix"),v=t.getUniformLocation(P,"projectionMatrix"),y=t.getUniformLocation(P,"fogType"),_=t.getUniformLocation(P,"fogDensity"),b=t.getUniformLocation(P,"fogNear"),w=t.getUniformLocation(P,"fogFar"),x=t.getUniformLocation(P,"fogColor"),t.getUniformLocation(P,"fogDepth"),E=t.getUniformLocation(P,"alphaTest"),k=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),k.width=8,k.height=8,D=k.getContext("2d"),D.fillStyle="white",D.fillRect(0,0,8,8),I=new hi(k)}i.useProgram(P),i.initAttributes(),i.enableAttribute(S),i.enableAttribute(T),i.disableUnusedAttributes(),i.disable(t.CULL_FACE),i.enable(t.BLEND),t.bindBuffer(t.ARRAY_BUFFER,C),t.vertexAttribPointer(S,2,t.FLOAT,!1,16,0),t.vertexAttribPointer(T,2,t.FLOAT,!1,16,8),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,M),t.uniformMatrix4fv(v,!1,O.projectionMatrix.elements),i.activeTexture(t.TEXTURE0),t.uniform1i(f,0),D=k=0,(N=o.fog)?(t.uniform3f(x,N.color.r,N.color.g,N.color.b),N.isFog?(t.uniform1f(b,N.near),t.uniform1f(w,N.far),t.uniform1i(y,1),D=k=1):N.isFogExp2&&(t.uniform1f(_,N.density),t.uniform1i(y,2),D=k=2)):(t.uniform1i(y,0),D=k=0),N=0;for(var B=r.length;B>N;N++){var U=r[N];U.modelViewMatrix.multiplyMatrices(O.matrixWorldInverse,U.matrixWorld),U.z=-U.modelViewMatrix.elements[14]}r.sort(s);var G=[],F=[];for(N=0,B=r.length;B>N;N++){U=r[N];var H=U.material;if(!1!==H.visible){U.onBeforeRender(e,o,O,void 0,H,void 0),t.uniform1f(E,H.alphaTest),t.uniformMatrix4fv(g,!1,U.modelViewMatrix.elements),U.matrixWorld.decompose(L,R,A),G[0]=A.x,G[1]=A.y,F[0]=U.center.x-.5,F[1]=U.center.y-.5;var j=0;o.fog&&H.fog&&(j=D),k!==j&&(t.uniform1i(y,j),k=j),null!==H.map?(t.uniform2f(l,H.map.offset.x,H.map.offset.y),t.uniform2f(u,H.map.repeat.x,H.map.repeat.y)):(t.uniform2f(l,0,0),t.uniform2f(u,1,1)),t.uniform1f(m,H.opacity),t.uniform3f(d,H.color.r,H.color.g,H.color.b),t.uniform1f(c,H.rotation),t.uniform2fv(h,F),t.uniform2fv(p,G),i.setBlending(H.blending,H.blendEquation,H.blendSrc,H.blendDst,H.blendEquationAlpha,H.blendSrcAlpha,H.blendDstAlpha,H.premultipliedAlpha),i.buffers.depth.setTest(H.depthTest),i.buffers.depth.setMask(H.depthWrite),i.buffers.color.setMask(H.colorWrite),n.setTexture2D(H.map||I,0),t.drawElements(t.TRIANGLES,6,t.UNSIGNED_SHORT,0),U.onAfterRender(e,o,O,void 0,H,void 0)}}i.enable(t.CULL_FACE),i.reset()}}}function di(e,t,i){function n(t,i,n){var r=new Uint8Array(4),o=e.createTexture();for(e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST),t=0;n>t;t++)e.texImage2D(i+t,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,r);return o}function r(t){!0!==_[t]&&(e.enable(t),_[t]=!0)}function o(t){!1!==_[t]&&(e.disable(t),_[t]=!1)}function a(t,n,a,s,l,u,c,h){if(0!==t?r(e.BLEND):o(e.BLEND),5!==t){if(t!==x||h!==I)switch(t){case 2:h?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE,e.ONE,e.ONE)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.SRC_ALPHA,e.ONE));break;case 3:h?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.ONE_MINUS_SRC_COLOR));break;case 4:h?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA)):(e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ZERO,e.SRC_COLOR));break;default:h?(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA)):(e.blendEquationSeparate(e.FUNC_ADD,e.FUNC_ADD),e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA))}P=M=C=T=S=E=null}else l=l||n,u=u||a,c=c||s,(n!==E||l!==C)&&(e.blendEquationSeparate(i.convert(n),i.convert(l)),E=n,C=l),(a!==S||s!==T||u!==M||c!==P)&&(e.blendFuncSeparate(i.convert(a),i.convert(s),i.convert(u),i.convert(c)),S=a,T=s,M=u,P=c);x=t,I=h}function s(t){L!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),L=t)}function u(t){0!==t?(r(e.CULL_FACE),t!==R&&(1===t?e.cullFace(e.BACK):2===t?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):o(e.CULL_FACE),R=t}function c(t,i,n){t?(r(e.POLYGON_OFFSET_FILL),(O!==i||k!==n)&&(e.polygonOffset(i,n),O=i,k=n)):o(e.POLYGON_OFFSET_FILL)}function h(t){void 0===t&&(t=e.TEXTURE0+D-1),B!==t&&(e.activeTexture(t),B=t)}var p=new function(){var t=!1,i=new l,n=null,r=new l(0,0,0,0);return{setMask:function(i){n===i||t||(e.colorMask(i,i,i,i),n=i)},setLocked:function(e){t=e},setClear:function(t,n,o,a,s){!0===s&&(t*=a,n*=a,o*=a),i.set(t,n,o,a),!1===r.equals(i)&&(e.clearColor(t,n,o,a),r.copy(i))},reset:function(){t=!1,n=null,r.set(-1,0,0,0)}}},d=new function(){var t=!1,i=null,n=null,a=null;return{setTest:function(t){t?r(e.DEPTH_TEST):o(e.DEPTH_TEST)},setMask:function(n){i===n||t||(e.depthMask(n),i=n)},setFunc:function(t){if(n!==t){if(t)switch(t){case 0:e.depthFunc(e.NEVER);break;case 1:e.depthFunc(e.ALWAYS);break;case 2:e.depthFunc(e.LESS);break;case 3:e.depthFunc(e.LEQUAL);break;case 4:e.depthFunc(e.EQUAL);break;case 5:e.depthFunc(e.GEQUAL);break;case 6:e.depthFunc(e.GREATER);break;case 7:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}else e.depthFunc(e.LEQUAL);n=t}},setLocked:function(e){t=e},setClear:function(t){a!==t&&(e.clearDepth(t),a=t)},reset:function(){t=!1,a=n=i=null}}},f=new function(){var t=!1,i=null,n=null,a=null,s=null,l=null,u=null,c=null,h=null;return{setTest:function(t){t?r(e.STENCIL_TEST):o(e.STENCIL_TEST)},setMask:function(n){i===n||t||(e.stencilMask(n),i=n)},setFunc:function(t,i,r){(n!==t||a!==i||s!==r)&&(e.stencilFunc(t,i,r),n=t,a=i,s=r)},setOp:function(t,i,n){(l!==t||u!==i||c!==n)&&(e.stencilOp(t,i,n),l=t,u=i,c=n)},setLocked:function(e){t=e},setClear:function(t){h!==t&&(e.clearStencil(t),h=t)},reset:function(){t=!1,h=c=u=l=s=a=n=i=null}}},m=e.getParameter(e.MAX_VERTEX_ATTRIBS),g=new Uint8Array(m),v=new Uint8Array(m),y=new Uint8Array(m),_={},b=null,w=null,x=null,E=null,S=null,T=null,C=null,M=null,P=null,I=!1,L=null,R=null,A=null,O=null,k=null,D=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS),N=!1;m=0,m=e.getParameter(e.VERSION),-1!==m.indexOf("WebGL")?(m=parseFloat(/^WebGL ([0-9])/.exec(m)[1]),N=m>=1):-1!==m.indexOf("OpenGL ES")&&(m=parseFloat(/^OpenGL ES ([0-9])/.exec(m)[1]),N=m>=2);var B=null,U={},G=new l,F=new l,H={};return H[e.TEXTURE_2D]=n(e.TEXTURE_2D,e.TEXTURE_2D,1),H[e.TEXTURE_CUBE_MAP]=n(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),p.setClear(0,0,0,1),d.setClear(1),f.setClear(0),r(e.DEPTH_TEST),d.setFunc(3),s(!1),u(1),r(e.CULL_FACE),r(e.BLEND),a(1),{buffers:{color:p,depth:d,stencil:f},initAttributes:function(){for(var e=0,t=g.length;t>e;e++)g[e]=0},enableAttribute:function(i){g[i]=1,0===v[i]&&(e.enableVertexAttribArray(i),v[i]=1),0!==y[i]&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,0),y[i]=0)},enableAttributeAndDivisor:function(i,n){g[i]=1,0===v[i]&&(e.enableVertexAttribArray(i),v[i]=1),y[i]!==n&&(t.get("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(i,n),y[i]=n)},disableUnusedAttributes:function(){for(var t=0,i=v.length;t!==i;++t)v[t]!==g[t]&&(e.disableVertexAttribArray(t),v[t]=0)},enable:r,disable:o,getCompressedTextureFormats:function(){if(null===b&&(b=[],t.get("WEBGL_compressed_texture_pvrtc")||t.get("WEBGL_compressed_texture_s3tc")||t.get("WEBGL_compressed_texture_etc1")||t.get("WEBGL_compressed_texture_astc")))for(var i=e.getParameter(e.COMPRESSED_TEXTURE_FORMATS),n=0;n<i.length;n++)b.push(i[n]);return b},useProgram:function(t){return w!==t?(e.useProgram(t),w=t,!0):!1},setBlending:a,setMaterial:function(t,i){2===t.side?o(e.CULL_FACE):r(e.CULL_FACE);var n=1===t.side;i&&(n=!n),s(n),!0===t.transparent?a(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha):a(0),d.setFunc(t.depthFunc),d.setTest(t.depthTest),d.setMask(t.depthWrite),p.setMask(t.colorWrite),c(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)},setFlipSided:s,setCullFace:u,setLineWidth:function(t){t!==A&&(N&&e.lineWidth(t),A=t)},setPolygonOffset:c,setScissorTest:function(t){t?r(e.SCISSOR_TEST):o(e.SCISSOR_TEST)},activeTexture:h,bindTexture:function(t,i){null===B&&h();var n=U[B];void 0===n&&(n={type:void 0,texture:void 0},U[B]=n),(n.type!==t||n.texture!==i)&&(e.bindTexture(t,i||H[t]),n.type=t,n.texture=i)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(t){console.error("THREE.WebGLState:",t)}},scissor:function(t){!1===G.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),G.copy(t))},viewport:function(t){!1===F.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),F.copy(t))},reset:function(){for(var t=0;t<v.length;t++)1===v[t]&&(e.disableVertexAttribArray(t),v[t]=0);_={},B=b=null,U={},R=L=x=w=null,p.reset(),d.reset(),f.reset()}}}function fi(e,t,i,n,r,o,a){function s(e,t){if(e.width>t||e.height>t){if("data"in e)return void console.warn("THREE.WebGLRenderer: image in DataTexture is too big ("+e.width+"x"+e.height+").");t/=Math.max(e.width,e.height);var i=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return i.width=Math.floor(e.width*t),i.height=Math.floor(e.height*t),i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,i.width,i.height),console.warn("THREE.WebGLRenderer: image is too big ("+e.width+"x"+e.height+"). Resized to "+i.width+"x"+i.height,e),i}return e}function l(e){return qo.isPowerOfTwo(e.width)&&qo.isPowerOfTwo(e.height)}function u(e,t){return e.generateMipmaps&&t&&1003!==e.minFilter&&1006!==e.minFilter}function c(t,i,r,o){e.generateMipmap(t),n.get(i).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function h(t){return 1003===t||1004===t||1005===t?e.NEAREST:e.LINEAR}function p(t){t=t.target,t.removeEventListener("dispose",p);e:{var i=n.get(t);if(t.image&&i.__image__webglTextureCube)e.deleteTexture(i.__image__webglTextureCube);else{if(void 0===i.__webglInit)break e;e.deleteTexture(i.__webglTexture)}n.remove(t)}t.isVideoTexture&&delete b[t.id],a.memory.textures--}function d(t){t=t.target,t.removeEventListener("dispose",d);var i=n.get(t),r=n.get(t.texture);if(t){if(void 0!==r.__webglTexture&&e.deleteTexture(r.__webglTexture),t.depthTexture&&t.depthTexture.dispose(),t.isWebGLRenderTargetCube)for(r=0;6>r;r++)e.deleteFramebuffer(i.__webglFramebuffer[r]),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer[r]);else e.deleteFramebuffer(i.__webglFramebuffer),i.__webglDepthbuffer&&e.deleteRenderbuffer(i.__webglDepthbuffer);n.remove(t.texture),n.remove(t)}a.memory.textures--}function f(t,h){var d=n.get(t);if(t.isVideoTexture){var f=t.id,g=a.render.frame;b[f]!==g&&(b[f]=g,t.update())}if(0<t.version&&d.__version!==t.version)if(f=t.image,void 0===f)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined",t);else{if(!1!==f.complete){void 0===d.__webglInit&&(d.__webglInit=!0,t.addEventListener("dispose",p),d.__webglTexture=e.createTexture(),a.memory.textures++),i.activeTexture(e.TEXTURE0+h),i.bindTexture(e.TEXTURE_2D,d.__webglTexture),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,t.unpackAlignment),h=s(t.image,r.maxTextureSize),(1001!==t.wrapS||1001!==t.wrapT||1003!==t.minFilter&&1006!==t.minFilter)&&!1===l(h)&&(h instanceof HTMLImageElement||h instanceof HTMLCanvasElement||h instanceof ImageBitmap)&&(void 0===y&&(y=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),y.width=qo.floorPowerOfTwo(h.width),y.height=qo.floorPowerOfTwo(h.height),y.getContext("2d").drawImage(h,0,0,y.width,y.height),h=y),f=l(h),g=o.convert(t.format);var v=o.convert(t.type);m(e.TEXTURE_2D,t,f);var w=t.mipmaps;if(t.isDepthTexture){var x=e.DEPTH_COMPONENT;if(1015===t.type){if(!_)throw Error("Float Depth Texture only supported in WebGL2.0");x=e.DEPTH_COMPONENT32F}else _&&(x=e.DEPTH_COMPONENT16);1026===t.format&&x===e.DEPTH_COMPONENT&&1012!==t.type&&1014!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),t.type=1012,v=o.convert(t.type)),1027===t.format&&(x=e.DEPTH_STENCIL,1020!==t.type&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),t.type=1020,v=o.convert(t.type))),i.texImage2D(e.TEXTURE_2D,0,x,h.width,h.height,0,g,v,null)}else if(t.isDataTexture)if(0<w.length&&f){for(var E=0,S=w.length;S>E;E++)x=w[E],i.texImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,g,v,x.data);t.generateMipmaps=!1,d.__maxMipLevel=w.length-1}else i.texImage2D(e.TEXTURE_2D,0,g,h.width,h.height,0,g,v,h.data),d.__maxMipLevel=0;else if(t.isCompressedTexture){for(E=0,S=w.length;S>E;E++)x=w[E],1023!==t.format&&1022!==t.format?-1<i.getCompressedTextureFormats().indexOf(g)?i.compressedTexImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):i.texImage2D(e.TEXTURE_2D,E,g,x.width,x.height,0,g,v,x.data);d.__maxMipLevel=w.length-1}else if(0<w.length&&f){for(E=0,S=w.length;S>E;E++)x=w[E],i.texImage2D(e.TEXTURE_2D,E,g,g,v,x);t.generateMipmaps=!1,d.__maxMipLevel=w.length-1}else i.texImage2D(e.TEXTURE_2D,0,g,g,v,h),d.__maxMipLevel=0;return u(t,f)&&c(e.TEXTURE_2D,t,h.width,h.height),d.__version=t.version,void(t.onUpdate&&t.onUpdate(t))}console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete",t)}i.activeTexture(e.TEXTURE0+h),i.bindTexture(e.TEXTURE_2D,d.__webglTexture)}function m(i,a,s){s?(e.texParameteri(i,e.TEXTURE_WRAP_S,o.convert(a.wrapS)),e.texParameteri(i,e.TEXTURE_WRAP_T,o.convert(a.wrapT)),e.texParameteri(i,e.TEXTURE_MAG_FILTER,o.convert(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,o.convert(a.minFilter))):(e.texParameteri(i,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(i,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),1001===a.wrapS&&1001===a.wrapT||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.",a),e.texParameteri(i,e.TEXTURE_MAG_FILTER,h(a.magFilter)),e.texParameteri(i,e.TEXTURE_MIN_FILTER,h(a.minFilter)),1003!==a.minFilter&&1006!==a.minFilter&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.",a)),!(s=t.get("EXT_texture_filter_anisotropic"))||1015===a.type&&null===t.get("OES_texture_float_linear")||1016===a.type&&null===t.get("OES_texture_half_float_linear")||!(1<a.anisotropy||n.get(a).__currentAnisotropy)||(e.texParameterf(i,s.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),n.get(a).__currentAnisotropy=a.anisotropy)}function g(t,r,a,s){var l=o.convert(r.texture.format),u=o.convert(r.texture.type);i.texImage2D(s,0,l,r.width,r.height,0,l,u,null),e.bindFramebuffer(e.FRAMEBUFFER,t),e.framebufferTexture2D(e.FRAMEBUFFER,a,s,n.get(r.texture).__webglTexture,0),e.bindFramebuffer(e.FRAMEBUFFER,null)}function v(t,i){e.bindRenderbuffer(e.RENDERBUFFER,t),i.depthBuffer&&!i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,t)):i.depthBuffer&&i.stencilBuffer?(e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_STENCIL,i.width,i.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,t)):e.renderbufferStorage(e.RENDERBUFFER,e.RGBA4,i.width,i.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}var y,_="undefined"!=typeof WebGL2RenderingContext&&e instanceof WebGL2RenderingContext,b={};this.setTexture2D=f,this.setTextureCube=function(t,h){var d=n.get(t);if(6===t.image.length)if(0<t.version&&d.__version!==t.version){d.__image__webglTextureCube||(t.addEventListener("dispose",p),d.__image__webglTextureCube=e.createTexture(),a.memory.textures++),i.activeTexture(e.TEXTURE0+h),i.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube),e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,t.flipY),h=t&&t.isCompressedTexture;for(var f=t.image[0]&&t.image[0].isDataTexture,g=[],v=0;6>v;v++)g[v]=h||f?f?t.image[v].image:t.image[v]:s(t.image[v],r.maxCubemapSize);var y=g[0],_=l(y),b=o.convert(t.format),w=o.convert(t.type);for(m(e.TEXTURE_CUBE_MAP,t,_),v=0;6>v;v++)if(h)for(var x,E=g[v].mipmaps,S=0,T=E.length;T>S;S++)x=E[S],1023!==t.format&&1022!==t.format?-1<i.getCompressedTextureFormats().indexOf(b)?i.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,b,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,S,b,x.width,x.height,0,b,w,x.data);else f?i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,g[v].width,g[v].height,0,b,w,g[v].data):i.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+v,0,b,b,w,g[v]);d.__maxMipLevel=h?E.length-1:0,u(t,_)&&c(e.TEXTURE_CUBE_MAP,t,y.width,y.height),d.__version=t.version,t.onUpdate&&t.onUpdate(t)}else i.activeTexture(e.TEXTURE0+h),i.bindTexture(e.TEXTURE_CUBE_MAP,d.__image__webglTextureCube)},this.setTextureCubeDynamic=function(t,r){i.activeTexture(e.TEXTURE0+r),i.bindTexture(e.TEXTURE_CUBE_MAP,n.get(t).__webglTexture)},this.setupRenderTarget=function(t){var r=n.get(t),o=n.get(t.texture);t.addEventListener("dispose",d),o.__webglTexture=e.createTexture(),a.memory.textures++;var s=!0===t.isWebGLRenderTargetCube,h=l(t);if(s){r.__webglFramebuffer=[];for(var p=0;6>p;p++)r.__webglFramebuffer[p]=e.createFramebuffer()}else r.__webglFramebuffer=e.createFramebuffer();if(s){for(i.bindTexture(e.TEXTURE_CUBE_MAP,o.__webglTexture),m(e.TEXTURE_CUBE_MAP,t.texture,h),p=0;6>p;p++)g(r.__webglFramebuffer[p],t,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+p);u(t.texture,h)&&c(e.TEXTURE_CUBE_MAP,t.texture,t.width,t.height),i.bindTexture(e.TEXTURE_CUBE_MAP,null)}else i.bindTexture(e.TEXTURE_2D,o.__webglTexture),m(e.TEXTURE_2D,t.texture,h),g(r.__webglFramebuffer,t,e.COLOR_ATTACHMENT0,e.TEXTURE_2D),u(t.texture,h)&&c(e.TEXTURE_2D,t.texture,t.width,t.height),i.bindTexture(e.TEXTURE_2D,null);if(t.depthBuffer){if(r=n.get(t),o=!0===t.isWebGLRenderTargetCube,t.depthTexture){if(o)throw Error("target.depthTexture not supported in Cube render targets");if(t&&t.isWebGLRenderTargetCube)throw Error("Depth Texture with cube render targets is not supported");if(e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),!t.depthTexture||!t.depthTexture.isDepthTexture)throw Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");if(n.get(t.depthTexture).__webglTexture&&t.depthTexture.image.width===t.width&&t.depthTexture.image.height===t.height||(t.depthTexture.image.width=t.width,t.depthTexture.image.height=t.height,t.depthTexture.needsUpdate=!0),f(t.depthTexture,0),r=n.get(t.depthTexture).__webglTexture,1026===t.depthTexture.format)e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,r,0);else{if(1027!==t.depthTexture.format)throw Error("Unknown depthTexture format");e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,r,0)}}else if(o)for(r.__webglDepthbuffer=[],o=0;6>o;o++)e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer[o]),r.__webglDepthbuffer[o]=e.createRenderbuffer(),v(r.__webglDepthbuffer[o],t);else e.bindFramebuffer(e.FRAMEBUFFER,r.__webglFramebuffer),r.__webglDepthbuffer=e.createRenderbuffer(),v(r.__webglDepthbuffer,t);e.bindFramebuffer(e.FRAMEBUFFER,null)}},this.updateRenderTargetMipmap=function(t){var r=t.texture,o=l(t);if(u(r,o)){o=t.isWebGLRenderTargetCube?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D;var a=n.get(r).__webglTexture;i.bindTexture(o,a),c(o,r,t.width,t.height),i.bindTexture(o,null)}}}function mi(e,t){return{convert:function(i){if(1e3===i)return e.REPEAT;if(1001===i)return e.CLAMP_TO_EDGE;if(1002===i)return e.MIRRORED_REPEAT;if(1003===i)return e.NEAREST;if(1004===i)return e.NEAREST_MIPMAP_NEAREST;if(1005===i)return e.NEAREST_MIPMAP_LINEAR;if(1006===i)return e.LINEAR;if(1007===i)return e.LINEAR_MIPMAP_NEAREST;if(1008===i)return e.LINEAR_MIPMAP_LINEAR;if(1009===i)return e.UNSIGNED_BYTE;if(1017===i)return e.UNSIGNED_SHORT_4_4_4_4;if(1018===i)return e.UNSIGNED_SHORT_5_5_5_1;if(1019===i)return e.UNSIGNED_SHORT_5_6_5;if(1010===i)return e.BYTE;if(1011===i)return e.SHORT;if(1012===i)return e.UNSIGNED_SHORT;if(1013===i)return e.INT;if(1014===i)return e.UNSIGNED_INT;if(1015===i)return e.FLOAT;if(1016===i){var n=t.get("OES_texture_half_float");if(null!==n)return n.HALF_FLOAT_OES}if(1021===i)return e.ALPHA;if(1022===i)return e.RGB;if(1023===i)return e.RGBA;if(1024===i)return e.LUMINANCE;if(1025===i)return e.LUMINANCE_ALPHA;if(1026===i)return e.DEPTH_COMPONENT;if(1027===i)return e.DEPTH_STENCIL;if(100===i)return e.FUNC_ADD;if(101===i)return e.FUNC_SUBTRACT;if(102===i)return e.FUNC_REVERSE_SUBTRACT;if(200===i)return e.ZERO;if(201===i)return e.ONE;if(202===i)return e.SRC_COLOR;if(203===i)return e.ONE_MINUS_SRC_COLOR;if(204===i)return e.SRC_ALPHA;if(205===i)return e.ONE_MINUS_SRC_ALPHA;if(206===i)return e.DST_ALPHA;if(207===i)return e.ONE_MINUS_DST_ALPHA;if(208===i)return e.DST_COLOR;if(209===i)return e.ONE_MINUS_DST_COLOR;if(210===i)return e.SRC_ALPHA_SATURATE;if((33776===i||33777===i||33778===i||33779===i)&&(n=t.get("WEBGL_compressed_texture_s3tc"),null!==n)){if(33776===i)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(33777===i)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(33778===i)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(33779===i)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((35840===i||35841===i||35842===i||35843===i)&&(n=t.get("WEBGL_compressed_texture_pvrtc"),null!==n)){if(35840===i)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(35841===i)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(35842===i)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(35843===i)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(36196===i&&(n=t.get("WEBGL_compressed_texture_etc1"),null!==n))return n.COMPRESSED_RGB_ETC1_WEBGL;if((37808===i||37809===i||37810===i||37811===i||37812===i||37813===i||37814===i||37815===i||37816===i||37817===i||37818===i||37819===i||37820===i||37821===i)&&(n=t.get("WEBGL_compressed_texture_astc"),null!==n))return i;if((103===i||104===i)&&(n=t.get("EXT_blend_minmax"),null!==n)){if(103===i)return n.MIN_EXT;if(104===i)return n.MAX_EXT}return 1020===i&&(n=t.get("WEBGL_depth_texture"),null!==n)?n.UNSIGNED_INT_24_8_WEBGL:0}}}function gi(e,t,i,n){w.call(this),this.type="PerspectiveCamera",this.fov=void 0!==e?e:50,this.zoom=1,this.near=void 0!==i?i:.1,this.far=void 0!==n?n:2e3,this.focus=10,this.aspect=void 0!==t?t:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function vi(e){gi.call(this),this.cameras=e||[]}function yi(e){function t(){if(null!==a&&!0===a.isPresenting){var t=a.getEyeParameters("left"),n=t.renderWidth;t=t.renderHeight,_=e.getPixelRatio(),y=e.getSize(),e.setDrawingBufferSize(2*n,t,1)}else i.enabled&&e.setDrawingBufferSize(y.width,y.height,_)}var i=this,a=null,s=null,u=null,c=new n,h=new n;"undefined"!=typeof window&&"VRFrameData"in window&&(s=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",t,!1));var p=new n,d=new r,f=new o,m=new gi;m.bounds=new l(0,0,.5,1),m.layers.enable(1);var g=new gi;g.bounds=new l(.5,0,.5,1),g.layers.enable(2);var v=new vi([m,g]);v.layers.enable(1),v.layers.enable(2);var y,_;this.enabled=!1,this.userHeight=1.6,this.getDevice=function(){return a},this.setDevice=function(e){void 0!==e&&(a=e)},this.setPoseTarget=function(e){void 0!==e&&(u=e)},this.getCamera=function(e){if(null===a)return e;a.depthNear=e.near,a.depthFar=e.far,a.getFrameData(s);var t=a.stageParameters;t?c.fromArray(t.sittingToStandingTransform):c.makeTranslation(0,i.userHeight,0),t=s.pose;var n=null!==u?u:e;return n.matrix.copy(c),n.matrix.decompose(n.position,n.quaternion,n.scale),null!==t.orientation&&(d.fromArray(t.orientation),n.quaternion.multiply(d)),null!==t.position&&(d.setFromRotationMatrix(c),f.fromArray(t.position),f.applyQuaternion(d),n.position.add(f)),n.updateMatrixWorld(),!1===a.isPresenting?e:(m.near=e.near,g.near=e.near,m.far=e.far,g.far=e.far,v.matrixWorld.copy(e.matrixWorld),v.matrixWorldInverse.copy(e.matrixWorldInverse),m.matrixWorldInverse.fromArray(s.leftViewMatrix),g.matrixWorldInverse.fromArray(s.rightViewMatrix),h.getInverse(c),m.matrixWorldInverse.multiply(h),g.matrixWorldInverse.multiply(h),e=n.parent,null!==e&&(p.getInverse(e.matrixWorld),m.matrixWorldInverse.multiply(p),g.matrixWorldInverse.multiply(p)),m.matrixWorld.getInverse(m.matrixWorldInverse),g.matrixWorld.getInverse(g.matrixWorldInverse),m.projectionMatrix.fromArray(s.leftProjectionMatrix),g.projectionMatrix.fromArray(s.rightProjectionMatrix),v.projectionMatrix.copy(m.projectionMatrix),e=a.getLayers(),e.length&&(e=e[0],null!==e.leftBounds&&4===e.leftBounds.length&&m.bounds.fromArray(e.leftBounds),null!==e.rightBounds&&4===e.rightBounds.length&&g.bounds.fromArray(e.rightBounds)),v)},this.getStandingMatrix=function(){return c},this.submitFrame=function(){null!==a&&!0===a.isPresenting&&a.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",t)}}function _i(e){function t(){mt=new Q(dt),mt.get("WEBGL_depth_texture"),mt.get("OES_texture_float"),mt.get("OES_texture_float_linear"),mt.get("OES_texture_half_float"),mt.get("OES_texture_half_float_linear"),mt.get("OES_standard_derivatives"),mt.get("OES_element_index_uint"),mt.get("ANGLE_instanced_arrays"),At=new mi(dt,mt),gt=new Z(dt,mt,e),vt=new di(dt,mt,At),vt.scissor(j.copy(nt).multiplyScalar(X)),vt.viewport(H.copy(Y).multiplyScalar(X)),yt=new it(dt),_t=new Qt,bt=new fi(dt,mt,vt,_t,gt,At,yt),wt=new v(dt),xt=new et(dt,wt,yt),Et=new ot(xt,yt),Pt=new rt(dt),St=new Kt(O,mt,gt),Tt=new ni,Ct=new si,Mt=new q(O,vt,xt,P),It=new J(dt,mt,yt),Lt=new tt(dt,mt,yt),Rt=new pi(O,dt,vt,bt,gt),yt.programs=St.programs,O.context=dt,O.capabilities=gt,O.extensions=mt,O.properties=_t,O.renderLists=Tt,O.state=vt,O.info=yt}function i(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),k=!0}function r(){console.log("THREE.WebGLRenderer: Context Restored."),k=!1,t()}function a(e){e=e.target,e.removeEventListener("dispose",a),s(e),_t.remove(e)}function s(e){var t=_t.get(e).program;e.program=void 0,void 0!==t&&St.releaseProgram(t)}function u(e,t,i){e.render(function(e){O.renderBufferImmediate(e,t,i)})}function c(){var e=Ot.getDevice();e&&e.isPresenting?e.requestAnimationFrame(p):window.requestAnimationFrame(p)}function p(e){!1!==Dt&&(Nt(e),c())}function d(e,t,i){if(!1!==e.visible){if(e.layers.test(t.layers))if(e.isLight)A.pushLight(e),e.castShadow&&A.pushShadow(e);else if(e.isSprite)e.frustumCulled&&!st.intersectsSprite(e)||A.pushSprite(e);else if(e.isImmediateRenderObject)i&&pt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ht),R.push(e,null,e.material,pt.z,null);else if((e.isMesh||e.isLine||e.isPoints)&&(e.isSkinnedMesh&&e.skeleton.update(),!e.frustumCulled||st.intersectsObject(e))){i&&pt.setFromMatrixPosition(e.matrixWorld).applyMatrix4(ht);var n=Et.update(e),r=e.material;if(Array.isArray(r))for(var o=n.groups,a=0,s=o.length;s>a;a++){var l=o[a],u=r[l.materialIndex];u&&u.visible&&R.push(e,n,u,pt.z,l)}else r.visible&&R.push(e,n,r,pt.z,null)}for(e=e.children,a=0,s=e.length;s>a;a++)d(e[a],t,i)}}function f(e,t,i,n){for(var r=0,o=e.length;o>r;r++){var a=e[r],s=a.object,l=a.geometry,u=void 0===n?a.material:n;if(a=a.group,i.isArrayCamera){F=i;for(var c=i.cameras,h=0,p=c.length;p>h;h++){var d=c[h];if(s.layers.test(d.layers)){var f=d.bounds;vt.viewport(H.set(f.x*V,f.y*W,f.z*V,f.w*W).multiplyScalar(X)),g(s,t,d,l,u,a)}}}else F=null,g(s,t,i,l,u,a)}}function g(e,t,i,n,r,o){if(e.onBeforeRender(O,t,i,n,r,o),A=Ct.get(t,F||i),e.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),e.isImmediateRenderObject){var a=e.isMesh&&0>e.matrixWorld.determinant();vt.setMaterial(r,a),a=_(i,t.fog,r,e),U="",u(e,a,r)}else O.renderBufferDirect(i,t.fog,n,r,e,o);e.onAfterRender(O,t,i,n,r,o),A=Ct.get(t,F||i)}function y(e,t,i){var n=_t.get(e),r=A.state.lights;i=St.getParameters(e,r.state,A.state.shadowsArray,t,lt.numPlanes,lt.numIntersection,i);var o=St.getProgramCode(e,i),l=n.program,u=!0;if(void 0===l)e.addEventListener("dispose",a);else if(l.code!==o)s(e);else{if(n.lightsHash!==r.state.hash)_t.update(e,"lightsHash",r.state.hash);else if(void 0!==i.shaderID)return;u=!1}if(u&&(i.shaderID?(l=ta[i.shaderID],n.shader={name:e.type,uniforms:Ko.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader}):n.shader={name:e.type,uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},e.onBeforeCompile(n.shader,O),l=St.acquireProgram(e,n.shader,i,o),n.program=l,e.program=l),i=l.getAttributes(),e.morphTargets)for(o=e.numSupportedMorphTargets=0;o<O.maxMorphTargets;o++)0<=i["morphTarget"+o]&&e.numSupportedMorphTargets++;if(e.morphNormals)for(o=e.numSupportedMorphNormals=0;o<O.maxMorphNormals;o++)0<=i["morphNormal"+o]&&e.numSupportedMorphNormals++;i=n.shader.uniforms,(!e.isShaderMaterial&&!e.isRawShaderMaterial||!0===e.clipping)&&(n.numClippingPlanes=lt.numPlanes,n.numIntersection=lt.numIntersection,i.clippingPlanes=lt.uniform),n.fog=t,n.lightsHash=r.state.hash,e.lights&&(i.ambientLightColor.value=r.state.ambient,i.directionalLights.value=r.state.directional,i.spotLights.value=r.state.spot,i.rectAreaLights.value=r.state.rectArea,i.pointLights.value=r.state.point,i.hemisphereLights.value=r.state.hemi,i.directionalShadowMap.value=r.state.directionalShadowMap,i.directionalShadowMatrix.value=r.state.directionalShadowMatrix,i.spotShadowMap.value=r.state.spotShadowMap,i.spotShadowMatrix.value=r.state.spotShadowMatrix,i.pointShadowMap.value=r.state.pointShadowMap,i.pointShadowMatrix.value=r.state.pointShadowMatrix),e=n.program.getUniforms(),e=Bt.seqWithValue(e.seq,i),n.uniformsList=e
}function _(e,t,i,n){$=0;var r=_t.get(i),o=A.state.lights;ut&&(ct||e!==G)&&lt.setState(i.clippingPlanes,i.clipIntersection,i.clipShadows,e,r,e===G&&i.id===B),!1===i.needsUpdate&&(void 0===r.program?i.needsUpdate=!0:i.fog&&r.fog!==t?i.needsUpdate=!0:i.lights&&r.lightsHash!==o.state.hash?i.needsUpdate=!0:void 0===r.numClippingPlanes||r.numClippingPlanes===lt.numPlanes&&r.numIntersection===lt.numIntersection||(i.needsUpdate=!0)),i.needsUpdate&&(y(i,t,n),i.needsUpdate=!1);var a=!1,s=!1,l=!1;o=r.program;var u=o.getUniforms(),c=r.shader.uniforms;if(vt.useProgram(o.program)&&(l=s=a=!0),i.id!==B&&(B=i.id,s=!0),(a||e!==G)&&(u.setValue(dt,"projectionMatrix",e.projectionMatrix),gt.logarithmicDepthBuffer&&u.setValue(dt,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),G!==(F||e)&&(G=F||e,l=s=!0),(i.isShaderMaterial||i.isMeshPhongMaterial||i.isMeshStandardMaterial||i.envMap)&&(a=u.map.cameraPosition,void 0!==a&&a.setValue(dt,pt.setFromMatrixPosition(e.matrixWorld))),(i.isMeshPhongMaterial||i.isMeshLambertMaterial||i.isMeshBasicMaterial||i.isMeshStandardMaterial||i.isShaderMaterial||i.skinning)&&u.setValue(dt,"viewMatrix",e.matrixWorldInverse)),i.skinning&&(u.setOptional(dt,n,"bindMatrix"),u.setOptional(dt,n,"bindMatrixInverse"),e=n.skeleton))if(a=e.bones,gt.floatVertexTextures){if(void 0===e.boneTexture){a=Math.sqrt(4*a.length),a=qo.ceilPowerOfTwo(a),a=Math.max(a,4);var p=new Float32Array(a*a*4);p.set(e.boneMatrices);var d=new h(p,a,a,1023,1015);d.needsUpdate=!0,e.boneMatrices=p,e.boneTexture=d,e.boneTextureSize=a}u.setValue(dt,"boneTexture",e.boneTexture),u.setValue(dt,"boneTextureSize",e.boneTextureSize)}else u.setOptional(dt,e,"boneMatrices");return s&&(u.setValue(dt,"toneMappingExposure",O.toneMappingExposure),u.setValue(dt,"toneMappingWhitePoint",O.toneMappingWhitePoint),i.lights&&(s=l,c.ambientLightColor.needsUpdate=s,c.directionalLights.needsUpdate=s,c.pointLights.needsUpdate=s,c.spotLights.needsUpdate=s,c.rectAreaLights.needsUpdate=s,c.hemisphereLights.needsUpdate=s),t&&i.fog&&(c.fogColor.value=t.color,t.isFog?(c.fogNear.value=t.near,c.fogFar.value=t.far):t.isFogExp2&&(c.fogDensity.value=t.density)),i.isMeshBasicMaterial?b(c,i):i.isMeshLambertMaterial?(b(c,i),i.emissiveMap&&(c.emissiveMap.value=i.emissiveMap)):i.isMeshPhongMaterial?(b(c,i),i.isMeshToonMaterial?(w(c,i),i.gradientMap&&(c.gradientMap.value=i.gradientMap)):w(c,i)):i.isMeshStandardMaterial?(b(c,i),i.isMeshPhysicalMaterial&&(c.clearCoat.value=i.clearCoat,c.clearCoatRoughness.value=i.clearCoatRoughness),c.roughness.value=i.roughness,c.metalness.value=i.metalness,i.roughnessMap&&(c.roughnessMap.value=i.roughnessMap),i.metalnessMap&&(c.metalnessMap.value=i.metalnessMap),i.emissiveMap&&(c.emissiveMap.value=i.emissiveMap),i.bumpMap&&(c.bumpMap.value=i.bumpMap,c.bumpScale.value=i.bumpScale),i.normalMap&&(c.normalMap.value=i.normalMap,c.normalScale.value.copy(i.normalScale)),i.displacementMap&&(c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias),i.envMap&&(c.envMapIntensity.value=i.envMapIntensity)):i.isMeshDepthMaterial?(b(c,i),i.displacementMap&&(c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias)):i.isMeshDistanceMaterial?(b(c,i),i.displacementMap&&(c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias),c.referencePosition.value.copy(i.referencePosition),c.nearDistance.value=i.nearDistance,c.farDistance.value=i.farDistance):i.isMeshNormalMaterial?(b(c,i),i.bumpMap&&(c.bumpMap.value=i.bumpMap,c.bumpScale.value=i.bumpScale),i.normalMap&&(c.normalMap.value=i.normalMap,c.normalScale.value.copy(i.normalScale)),i.displacementMap&&(c.displacementMap.value=i.displacementMap,c.displacementScale.value=i.displacementScale,c.displacementBias.value=i.displacementBias)):i.isLineBasicMaterial?(c.diffuse.value=i.color,c.opacity.value=i.opacity,i.isLineDashedMaterial&&(c.dashSize.value=i.dashSize,c.totalSize.value=i.dashSize+i.gapSize,c.scale.value=i.scale)):i.isPointsMaterial?(c.diffuse.value=i.color,c.opacity.value=i.opacity,c.size.value=i.size*X,c.scale.value=.5*W,c.map.value=i.map,null!==i.map&&(!0===i.map.matrixAutoUpdate&&i.map.updateMatrix(),c.uvTransform.value.copy(i.map.matrix))):i.isShadowMaterial&&(c.color.value=i.color,c.opacity.value=i.opacity),void 0!==c.ltc_1&&(c.ltc_1.value=ea.LTC_1),void 0!==c.ltc_2&&(c.ltc_2.value=ea.LTC_2),Bt.upload(dt,r.uniformsList,c,O)),i.isShaderMaterial&&!0===i.uniformsNeedUpdate&&(Bt.upload(dt,r.uniformsList,c,O),i.uniformsNeedUpdate=!1),u.setValue(dt,"modelViewMatrix",n.modelViewMatrix),u.setValue(dt,"normalMatrix",n.normalMatrix),u.setValue(dt,"modelMatrix",n.matrixWorld),o}function b(e,t){if(e.opacity.value=t.opacity,t.color&&(e.diffuse.value=t.color),t.emissive&&e.emissive.value.copy(t.emissive).multiplyScalar(t.emissiveIntensity),t.map&&(e.map.value=t.map),t.alphaMap&&(e.alphaMap.value=t.alphaMap),t.specularMap&&(e.specularMap.value=t.specularMap),t.envMap&&(e.envMap.value=t.envMap,e.flipEnvMap.value=t.envMap&&t.envMap.isCubeTexture?-1:1,e.reflectivity.value=t.reflectivity,e.refractionRatio.value=t.refractionRatio,e.maxMipLevel.value=_t.get(t.envMap).__maxMipLevel),t.lightMap&&(e.lightMap.value=t.lightMap,e.lightMapIntensity.value=t.lightMapIntensity),t.aoMap&&(e.aoMap.value=t.aoMap,e.aoMapIntensity.value=t.aoMapIntensity),t.map)var i=t.map;else t.specularMap?i=t.specularMap:t.displacementMap?i=t.displacementMap:t.normalMap?i=t.normalMap:t.bumpMap?i=t.bumpMap:t.roughnessMap?i=t.roughnessMap:t.metalnessMap?i=t.metalnessMap:t.alphaMap?i=t.alphaMap:t.emissiveMap&&(i=t.emissiveMap);void 0!==i&&(i.isWebGLRenderTarget&&(i=i.texture),!0===i.matrixAutoUpdate&&i.updateMatrix(),e.uvTransform.value.copy(i.matrix))}function w(e,t){e.specular.value=t.specular,e.shininess.value=Math.max(t.shininess,1e-4),t.emissiveMap&&(e.emissiveMap.value=t.emissiveMap),t.bumpMap&&(e.bumpMap.value=t.bumpMap,e.bumpScale.value=t.bumpScale),t.normalMap&&(e.normalMap.value=t.normalMap,e.normalScale.value.copy(t.normalScale)),t.displacementMap&&(e.displacementMap.value=t.displacementMap,e.displacementScale.value=t.displacementScale,e.displacementBias.value=t.displacementBias)}console.log("THREE.WebGLRenderer","92"),e=e||{};var x=void 0!==e.canvas?e.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),E=void 0!==e.context?e.context:null,S=void 0!==e.alpha?e.alpha:!1,T=void 0!==e.depth?e.depth:!0,C=void 0!==e.stencil?e.stencil:!0,M=void 0!==e.antialias?e.antialias:!1,P=void 0!==e.premultipliedAlpha?e.premultipliedAlpha:!0,I=void 0!==e.preserveDrawingBuffer?e.preserveDrawingBuffer:!1,L=void 0!==e.powerPreference?e.powerPreference:"default",R=null,A=null;this.domElement=x,this.context=null,this.sortObjects=this.autoClearStencil=this.autoClearDepth=this.autoClearColor=this.autoClear=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.physicallyCorrectLights=this.gammaOutput=this.gammaInput=!1,this.toneMappingWhitePoint=this.toneMappingExposure=this.toneMapping=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var O=this,k=!1,D=null,N=null,B=-1,U="",G=null,F=null,H=new l,j=new l,z=null,$=0,V=x.width,W=x.height,X=1,Y=new l(0,0,V,W),nt=new l(0,0,V,W),at=!1,st=new m,lt=new K,ut=!1,ct=!1,ht=new n,pt=new o;try{S={alpha:S,depth:T,stencil:C,antialias:M,premultipliedAlpha:P,preserveDrawingBuffer:I,powerPreference:L},x.addEventListener("webglcontextlost",i,!1),x.addEventListener("webglcontextrestored",r,!1);var dt=E||x.getContext("webgl",S)||x.getContext("experimental-webgl",S);if(null===dt){if(null!==x.getContext("webgl"))throw Error("Error creating WebGL context with your selected attributes.");throw Error("Error creating WebGL context.")}void 0===dt.getShaderPrecisionFormat&&(dt.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ft){console.error("THREE.WebGLRenderer: "+ft.message)}var mt,gt,vt,yt,_t,bt,wt,xt,Et,St,Tt,Ct,Mt,Pt,It,Lt,Rt,At;t();var Ot=new yi(O);this.vr=Ot;var kt=new ci(O,Et,gt.maxTextureSize);this.shadowMap=kt,this.getContext=function(){return dt},this.getContextAttributes=function(){return dt.getContextAttributes()},this.forceContextLoss=function(){var e=mt.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){var e=mt.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(e){void 0!==e&&(X=e,this.setSize(V,W,!1))},this.getSize=function(){return{width:V,height:W}},this.setSize=function(e,t,i){var n=Ot.getDevice();n&&n.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(V=e,W=t,x.width=e*X,x.height=t*X,!1!==i&&(x.style.width=e+"px",x.style.height=t+"px"),this.setViewport(0,0,e,t))},this.getDrawingBufferSize=function(){return{width:V*X,height:W*X}},this.setDrawingBufferSize=function(e,t,i){V=e,W=t,X=i,x.width=e*i,x.height=t*i,this.setViewport(0,0,e,t)},this.getCurrentViewport=function(){return H},this.setViewport=function(e,t,i,n){Y.set(e,W-t-n,i,n),vt.viewport(H.copy(Y).multiplyScalar(X))},this.setScissor=function(e,t,i,n){nt.set(e,W-t-n,i,n),vt.scissor(j.copy(nt).multiplyScalar(X))},this.setScissorTest=function(e){vt.setScissorTest(at=e)},this.getClearColor=function(){return Mt.getClearColor()},this.setClearColor=function(){Mt.setClearColor.apply(Mt,arguments)},this.getClearAlpha=function(){return Mt.getClearAlpha()},this.setClearAlpha=function(){Mt.setClearAlpha.apply(Mt,arguments)},this.clear=function(e,t,i){var n=0;(void 0===e||e)&&(n|=dt.COLOR_BUFFER_BIT),(void 0===t||t)&&(n|=dt.DEPTH_BUFFER_BIT),(void 0===i||i)&&(n|=dt.STENCIL_BUFFER_BIT),dt.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.clearTarget=function(e,t,i,n){this.setRenderTarget(e),this.clear(t,i,n)},this.dispose=function(){x.removeEventListener("webglcontextlost",i,!1),x.removeEventListener("webglcontextrestored",r,!1),Tt.dispose(),Ct.dispose(),_t.dispose(),Et.dispose(),Ot.dispose(),Dt=!1},this.renderBufferImmediate=function(e,t,i){vt.initAttributes();var n=_t.get(e);if(e.hasPositions&&!n.position&&(n.position=dt.createBuffer()),e.hasNormals&&!n.normal&&(n.normal=dt.createBuffer()),e.hasUvs&&!n.uv&&(n.uv=dt.createBuffer()),e.hasColors&&!n.color&&(n.color=dt.createBuffer()),t=t.getAttributes(),e.hasPositions&&(dt.bindBuffer(dt.ARRAY_BUFFER,n.position),dt.bufferData(dt.ARRAY_BUFFER,e.positionArray,dt.DYNAMIC_DRAW),vt.enableAttribute(t.position),dt.vertexAttribPointer(t.position,3,dt.FLOAT,!1,0,0)),e.hasNormals){if(dt.bindBuffer(dt.ARRAY_BUFFER,n.normal),!i.isMeshPhongMaterial&&!i.isMeshStandardMaterial&&!i.isMeshNormalMaterial&&!0===i.flatShading)for(var r=0,o=3*e.count;o>r;r+=9){var a=e.normalArray,s=(a[r+0]+a[r+3]+a[r+6])/3,l=(a[r+1]+a[r+4]+a[r+7])/3,u=(a[r+2]+a[r+5]+a[r+8])/3;a[r+0]=s,a[r+1]=l,a[r+2]=u,a[r+3]=s,a[r+4]=l,a[r+5]=u,a[r+6]=s,a[r+7]=l,a[r+8]=u}dt.bufferData(dt.ARRAY_BUFFER,e.normalArray,dt.DYNAMIC_DRAW),vt.enableAttribute(t.normal),dt.vertexAttribPointer(t.normal,3,dt.FLOAT,!1,0,0)}e.hasUvs&&i.map&&(dt.bindBuffer(dt.ARRAY_BUFFER,n.uv),dt.bufferData(dt.ARRAY_BUFFER,e.uvArray,dt.DYNAMIC_DRAW),vt.enableAttribute(t.uv),dt.vertexAttribPointer(t.uv,2,dt.FLOAT,!1,0,0)),e.hasColors&&0!==i.vertexColors&&(dt.bindBuffer(dt.ARRAY_BUFFER,n.color),dt.bufferData(dt.ARRAY_BUFFER,e.colorArray,dt.DYNAMIC_DRAW),vt.enableAttribute(t.color),dt.vertexAttribPointer(t.color,3,dt.FLOAT,!1,0,0)),vt.disableUnusedAttributes(),dt.drawArrays(dt.TRIANGLES,0,e.count),e.count=0},this.renderBufferDirect=function(e,t,i,n,r,o){var a=r.isMesh&&0>r.matrixWorld.determinant();vt.setMaterial(n,a);var s=_(e,t,n,r);e=i.id+"_"+s.id+"_"+(!0===n.wireframe);var l=!1;e!==U&&(U=e,l=!0),r.morphTargetInfluences&&(Pt.update(r,i,n,s),l=!0),a=i.index;var u=i.attributes.position;if(t=1,!0===n.wireframe&&(a=xt.getWireframeAttribute(i),t=2),e=It,null!==a){var c=wt.get(a);e=Lt,e.setIndex(c)}if(l){if(i&&i.isInstancedBufferGeometry&&null===mt.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{vt.initAttributes(),l=i.attributes,s=s.getAttributes();var h=n.defaultAttributeValues;for(x in s){var p=s[x];if(p>=0){var d=l[x];if(void 0!==d){var f=d.normalized,m=d.itemSize,g=wt.get(d);if(void 0!==g){var v=g.buffer,y=g.type;if(g=g.bytesPerElement,d.isInterleavedBufferAttribute){var b=d.data,w=b.stride;d=d.offset,b&&b.isInstancedInterleavedBuffer?(vt.enableAttributeAndDivisor(p,b.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=b.meshPerAttribute*b.count)):vt.enableAttribute(p),dt.bindBuffer(dt.ARRAY_BUFFER,v),dt.vertexAttribPointer(p,m,y,f,w*g,d*g)}else d.isInstancedBufferAttribute?(vt.enableAttributeAndDivisor(p,d.meshPerAttribute),void 0===i.maxInstancedCount&&(i.maxInstancedCount=d.meshPerAttribute*d.count)):vt.enableAttribute(p),dt.bindBuffer(dt.ARRAY_BUFFER,v),dt.vertexAttribPointer(p,m,y,f,0,0)}}else if(void 0!==h&&(f=h[x],void 0!==f))switch(f.length){case 2:dt.vertexAttrib2fv(p,f);break;case 3:dt.vertexAttrib3fv(p,f);break;case 4:dt.vertexAttrib4fv(p,f);break;default:dt.vertexAttrib1fv(p,f)}}}vt.disableUnusedAttributes()}null!==a&&dt.bindBuffer(dt.ELEMENT_ARRAY_BUFFER,c.buffer)}c=1/0,null!==a?c=a.count:void 0!==u&&(c=u.count),a=i.drawRange.start*t,u=null!==o?o.start*t:0;var x=Math.max(a,u);if(o=Math.max(0,Math.min(c,a+i.drawRange.count*t,u+(null!==o?o.count*t:1/0))-1-x+1),0!==o){if(r.isMesh)if(!0===n.wireframe)vt.setLineWidth(n.wireframeLinewidth*(null===D?X:1)),e.setMode(dt.LINES);else switch(r.drawMode){case 0:e.setMode(dt.TRIANGLES);break;case 1:e.setMode(dt.TRIANGLE_STRIP);break;case 2:e.setMode(dt.TRIANGLE_FAN)}else r.isLine?(n=n.linewidth,void 0===n&&(n=1),vt.setLineWidth(n*(null===D?X:1)),r.isLineSegments?e.setMode(dt.LINES):r.isLineLoop?e.setMode(dt.LINE_LOOP):e.setMode(dt.LINE_STRIP)):r.isPoints&&e.setMode(dt.POINTS);i&&i.isInstancedBufferGeometry?0<i.maxInstancedCount&&e.renderInstances(i,x,o):e.render(x,o)}},this.compile=function(e,t){A=Ct.get(e,t),A.init(),e.traverse(function(e){e.isLight&&(A.pushLight(e),e.castShadow&&A.pushShadow(e))}),A.setupLights(t),e.traverse(function(t){if(t.material)if(Array.isArray(t.material))for(var i=0;i<t.material.length;i++)y(t.material[i],e.fog,t);else y(t.material,e.fog,t)})};var Dt=!1,Nt=null;this.animate=function(e){Nt=e,null!==Nt?Dt||(c(),Dt=!0):Dt=!1},this.render=function(e,t,i,n){if(t&&t.isCamera){if(!k){U="",B=-1,G=null,!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),Ot.enabled&&(t=Ot.getCamera(t)),A=Ct.get(e,t),A.init(),e.onBeforeRender(O,e,t,i),ht.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),st.setFromMatrix(ht),ct=this.localClippingEnabled,ut=lt.init(this.clippingPlanes,ct,t),R=Tt.get(e,t),R.init(),d(e,t,O.sortObjects),!0===O.sortObjects&&R.sort(),ut&&lt.beginShadows(),kt.render(A.state.shadowsArray,e,t),A.setupLights(t),ut&&lt.endShadows(),this.info.autoReset&&this.info.reset(),void 0===i&&(i=null),this.setRenderTarget(i),Mt.render(R,e,t,n),n=R.opaque;var r=R.transparent;if(e.overrideMaterial){var o=e.overrideMaterial;n.length&&f(n,e,t,o),r.length&&f(r,e,t,o)}else n.length&&f(n,e,t),r.length&&f(r,e,t);Rt.render(A.state.spritesArray,e,t),i&&bt.updateRenderTargetMipmap(i),vt.buffers.depth.setTest(!0),vt.buffers.depth.setMask(!0),vt.buffers.color.setMask(!0),vt.setPolygonOffset(!1),e.onAfterRender(O,e,t),Ot.enabled&&Ot.submitFrame(),A=R=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.allocTextureUnit=function(){var e=$;return e>=gt.maxTextures&&console.warn("THREE.WebGLRenderer: Trying to use "+e+" texture units while this GPU supports only "+gt.maxTextures),$+=1,e},this.setTexture2D=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTarget&&(e||(console.warn("THREE.WebGLRenderer.setTexture2D: don't use render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),bt.setTexture2D(t,i)}}(),this.setTexture=function(){var e=!1;return function(t,i){e||(console.warn("THREE.WebGLRenderer: .setTexture is deprecated, use setTexture2D instead."),e=!0),bt.setTexture2D(t,i)}}(),this.setTextureCube=function(){var e=!1;return function(t,i){t&&t.isWebGLRenderTargetCube&&(e||(console.warn("THREE.WebGLRenderer.setTextureCube: don't use cube render targets as textures. Use their .texture property instead."),e=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?bt.setTextureCube(t,i):bt.setTextureCubeDynamic(t,i)}}(),this.getRenderTarget=function(){return D},this.setRenderTarget=function(e){(D=e)&&void 0===_t.get(e).__webglFramebuffer&&bt.setupRenderTarget(e);var t=null,i=!1;e?(t=_t.get(e).__webglFramebuffer,e.isWebGLRenderTargetCube&&(t=t[e.activeCubeFace],i=!0),H.copy(e.viewport),j.copy(e.scissor),z=e.scissorTest):(H.copy(Y).multiplyScalar(X),j.copy(nt).multiplyScalar(X),z=at),N!==t&&(dt.bindFramebuffer(dt.FRAMEBUFFER,t),N=t),vt.viewport(H),vt.scissor(j),vt.setScissorTest(z),i&&(i=_t.get(e.texture),dt.framebufferTexture2D(dt.FRAMEBUFFER,dt.COLOR_ATTACHMENT0,dt.TEXTURE_CUBE_MAP_POSITIVE_X+e.activeCubeFace,i.__webglTexture,e.activeMipMapLevel))},this.readRenderTargetPixels=function(e,t,i,n,r,o){if(e&&e.isWebGLRenderTarget){var a=_t.get(e).__webglFramebuffer;if(a){var s=!1;a!==N&&(dt.bindFramebuffer(dt.FRAMEBUFFER,a),s=!0);try{var l=e.texture,u=l.format,c=l.type;1023!==u&&At.convert(u)!==dt.getParameter(dt.IMPLEMENTATION_COLOR_READ_FORMAT)?console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format."):1009===c||At.convert(c)===dt.getParameter(dt.IMPLEMENTATION_COLOR_READ_TYPE)||1015===c&&(mt.get("OES_texture_float")||mt.get("WEBGL_color_buffer_float"))||1016===c&&mt.get("EXT_color_buffer_half_float")?dt.checkFramebufferStatus(dt.FRAMEBUFFER)===dt.FRAMEBUFFER_COMPLETE?t>=0&&t<=e.width-n&&i>=0&&i<=e.height-r&&dt.readPixels(t,i,n,r,At.convert(u),At.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete."):console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.")}finally{s&&dt.bindFramebuffer(dt.FRAMEBUFFER,N)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(e,t,i){var n=t.image.width,r=t.image.height,o=At.convert(t.format);this.setTexture2D(t,0),dt.copyTexImage2D(dt.TEXTURE_2D,i||0,o,e.x,e.y,n,r,0)},this.copyTextureToTexture=function(e,t,i,n){var r=t.image.width,o=t.image.height,a=At.convert(i.format),s=At.convert(i.type);t=t.isDataTexture?t.image.data:t.image,this.setTexture2D(i,0),dt.texSubImage2D(dt.TEXTURE_2D,n||0,e.x,e.y,r,o,a,s,t)}}function bi(e,t){this.name="",this.color=new g(e),this.density=void 0!==t?t:25e-5}function wi(e,t,i){this.name="",this.color=new g(e),this.near=void 0!==t?t:1,this.far=void 0!==i?i:1e3}function xi(){b.call(this),this.type="Scene",this.overrideMaterial=this.fog=this.background=null,this.autoUpdate=!0}function Ei(e){j.call(this),this.type="SpriteMaterial",this.color=new g(16777215),this.map=null,this.rotation=0,this.lights=this.fog=!1,this.setValues(e)}function Si(e){b.call(this),this.type="Sprite",this.material=void 0!==e?e:new Ei,this.center=new i(.5,.5)}function Ti(){b.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function Ci(e,t){if(e=e||[],this.bones=e.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===t)this.calculateInverses();else if(this.bones.length===t.length)this.boneInverses=t.slice(0);else for(console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[],e=0,t=this.bones.length;t>e;e++)this.boneInverses.push(new n)}function Mi(){b.call(this),this.type="Bone"}function Pi(e,t){Y.call(this,e,t),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new n,this.bindMatrixInverse=new n,e=this.initBones(),e=new Ci(e),this.bind(e,this.matrixWorld),this.normalizeSkinWeights()}function Ii(e){j.call(this),this.type="LineBasicMaterial",this.color=new g(16777215),this.linewidth=1,this.linejoin=this.linecap="round",this.lights=!1,this.setValues(e)}function Li(e,t,i){return 1===i?(console.warn("THREE.Line: parameter THREE.LinePieces no longer supported. Created THREE.LineSegments instead."),new Ri(e,t)):(b.call(this),this.type="Line",this.geometry=void 0!==e?e:new B,void(this.material=void 0!==t?t:new Ii({color:16777215*Math.random()})))}function Ri(e,t){Li.call(this,e,t),this.type="LineSegments"}function Ai(e,t){Li.call(this,e,t),this.type="LineLoop"}function Oi(e){j.call(this),this.type="PointsMaterial",this.color=new g(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.lights=!1,this.setValues(e)}function ki(e,t){b.call(this),this.type="Points",this.geometry=void 0!==e?e:new B,this.material=void 0!==t?t:new Oi({color:16777215*Math.random()})}function Di(){b.call(this),this.type="Group"}function Ni(e,t,i,n,r,o,a,l,u){s.call(this,e,t,i,n,r,o,a,l,u),this.generateMipmaps=!1}function Bi(e,t,i,n,r,o,a,l,u,c,h,p){s.call(this,null,o,a,l,u,c,n,r,h,p),this.image={width:t,height:i},this.mipmaps=e,this.generateMipmaps=this.flipY=!1}function Ui(e,t,i,n,r,o,a,l,u,c){if(c=void 0!==c?c:1026,1026!==c&&1027!==c)throw Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&1026===c&&(i=1012),void 0===i&&1027===c&&(i=1020),s.call(this,null,n,r,o,a,l,c,i,u),this.image={width:e,height:t},this.magFilter=void 0!==a?a:1003,this.minFilter=void 0!==l?l:1003,this.generateMipmaps=this.flipY=!1}function Gi(e){B.call(this),this.type="WireframeGeometry";var t,i,n,r=[],a=[0,0],s={},l=["a","b","c"];if(e&&e.isGeometry){var u=e.faces,c=0;for(i=u.length;i>c;c++){var h=u[c];for(t=0;3>t;t++){var p=h[l[t]],d=h[l[(t+1)%3]];a[0]=Math.min(p,d),a[1]=Math.max(p,d),p=a[0]+","+a[1],void 0===s[p]&&(s[p]={index1:a[0],index2:a[1]})}}for(p in s)c=s[p],l=e.vertices[c.index1],r.push(l.x,l.y,l.z),l=e.vertices[c.index2],r.push(l.x,l.y,l.z)}else if(e&&e.isBufferGeometry)if(l=new o,null!==e.index){u=e.attributes.position,h=e.index;var f=e.groups;for(0===f.length&&(f=[{start:0,count:h.count,materialIndex:0}]),e=0,n=f.length;n>e;++e)for(c=f[e],t=c.start,i=c.count,c=t,i=t+i;i>c;c+=3)for(t=0;3>t;t++)p=h.getX(c+t),d=h.getX(c+(t+1)%3),a[0]=Math.min(p,d),a[1]=Math.max(p,d),p=a[0]+","+a[1],void 0===s[p]&&(s[p]={index1:a[0],index2:a[1]});for(p in s)c=s[p],l.fromBufferAttribute(u,c.index1),r.push(l.x,l.y,l.z),l.fromBufferAttribute(u,c.index2),r.push(l.x,l.y,l.z)}else for(u=e.attributes.position,c=0,i=u.count/3;i>c;c++)for(t=0;3>t;t++)s=3*c+t,l.fromBufferAttribute(u,s),r.push(l.x,l.y,l.z),s=3*c+(t+1)%3,l.fromBufferAttribute(u,s),r.push(l.x,l.y,l.z);this.addAttribute("position",new O(r,3))}function Fi(e,t,i){S.call(this),this.type="ParametricGeometry",this.parameters={func:e,slices:t,stacks:i},this.fromBufferGeometry(new Hi(e,t,i)),this.mergeVertices()}function Hi(e,t,i){B.call(this),this.type="ParametricBufferGeometry",this.parameters={func:e,slices:t,stacks:i};var n,r,a=[],s=[],l=[],u=[],c=new o,h=new o,p=new o,d=new o,f=new o,m=t+1;for(n=0;i>=n;n++){var g=n/i;for(r=0;t>=r;r++){var v=r/t;e(v,g,h),s.push(h.x,h.y,h.z),v-1e-5>=0?(e(v-1e-5,g,p),d.subVectors(h,p)):(e(v+1e-5,g,p),d.subVectors(p,h)),g-1e-5>=0?(e(v,g-1e-5,p),f.subVectors(h,p)):(e(v,g+1e-5,p),f.subVectors(p,h)),c.crossVectors(d,f).normalize(),l.push(c.x,c.y,c.z),u.push(v,g)}}for(n=0;i>n;n++)for(r=0;t>r;r++)e=n*m+r+1,c=(n+1)*m+r+1,h=(n+1)*m+r,a.push(n*m+r,e,h),a.push(e,c,h);this.setIndex(a),this.addAttribute("position",new O(s,3)),this.addAttribute("normal",new O(l,3)),this.addAttribute("uv",new O(u,2))}function ji(e,t,i,n){S.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:n},this.fromBufferGeometry(new zi(e,t,i,n)),this.mergeVertices()}function zi(e,t,n,r){function a(e){u.push(e.x,e.y,e.z)}function s(t,i){t*=3,i.x=e[t+0],i.y=e[t+1],i.z=e[t+2]}function l(e,t,i,n){0>n&&1===e.x&&(c[t]=e.x-1),0===i.x&&0===i.z&&(c[t]=n/2/Math.PI+.5)}B.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r},n=n||1,r=r||0;var u=[],c=[];!function(e){for(var i=new o,n=new o,r=new o,l=0;l<t.length;l+=3){s(t[l+0],i),s(t[l+1],n),s(t[l+2],r);var u,c,h=i,p=n,d=r,f=Math.pow(2,e),m=[];for(c=0;f>=c;c++){m[c]=[];var g=h.clone().lerp(d,c/f),v=p.clone().lerp(d,c/f),y=f-c;for(u=0;y>=u;u++)m[c][u]=0===u&&c===f?g:g.clone().lerp(v,u/y)}for(c=0;f>c;c++)for(u=0;2*(f-c)-1>u;u++)h=Math.floor(u/2),0===u%2?(a(m[c][h+1]),a(m[c+1][h]),a(m[c][h])):(a(m[c][h+1]),a(m[c+1][h+1]),a(m[c+1][h]))}}(r),function(e){for(var t=new o,i=0;i<u.length;i+=3)t.x=u[i+0],t.y=u[i+1],t.z=u[i+2],t.normalize().multiplyScalar(e),u[i+0]=t.x,u[i+1]=t.y,u[i+2]=t.z}(n),function(){for(var e=new o,t=0;t<u.length;t+=3)e.x=u[t+0],e.y=u[t+1],e.z=u[t+2],c.push(Math.atan2(e.z,-e.x)/2/Math.PI+.5,1-(Math.atan2(-e.y,Math.sqrt(e.x*e.x+e.z*e.z))/Math.PI+.5));e=new o,t=new o;for(var n=new o,r=new o,a=new i,s=new i,h=new i,p=0,d=0;p<u.length;p+=9,d+=6){e.set(u[p+0],u[p+1],u[p+2]),t.set(u[p+3],u[p+4],u[p+5]),n.set(u[p+6],u[p+7],u[p+8]),a.set(c[d+0],c[d+1]),s.set(c[d+2],c[d+3]),h.set(c[d+4],c[d+5]),r.copy(e).add(t).add(n).divideScalar(3);var f=Math.atan2(r.z,-r.x);l(a,d+0,e,f),l(s,d+2,t,f),l(h,d+4,n,f)}for(e=0;e<c.length;e+=6)t=c[e+0],n=c[e+2],r=c[e+4],a=Math.min(t,n,r),.9<Math.max(t,n,r)&&.1>a&&(.2>t&&(c[e+0]+=1),.2>n&&(c[e+2]+=1),.2>r&&(c[e+4]+=1))}(),this.addAttribute("position",new O(u,3)),this.addAttribute("normal",new O(u.slice(),3)),this.addAttribute("uv",new O(c,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}function $i(e,t){S.call(this),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Vi(e,t)),this.mergeVertices()}function Vi(e,t){zi.call(this,[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Wi(e,t){S.call(this),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Xi(e,t)),this.mergeVertices()}function Xi(e,t){zi.call(this,[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Yi(e,t){S.call(this),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new qi(e,t)),this.mergeVertices()}function qi(e,t){var i=(1+Math.sqrt(5))/2;zi.call(this,[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ji(e,t){S.call(this),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t},this.fromBufferGeometry(new Zi(e,t)),this.mergeVertices()}function Zi(e,t){var i=(1+Math.sqrt(5))/2,n=1/i;zi.call(this,[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-n,-i,0,-n,i,0,n,-i,0,n,i,-n,-i,0,-n,i,0,n,-i,0,n,i,0,-i,0,-n,i,0,-n,-i,0,n,i,0,n],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronBufferGeometry",this.parameters={radius:e,detail:t}}function Ki(e,t,i,n,r,o){S.call(this),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:n,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed."),e=new Qi(e,t,i,n,r),this.tangents=e.tangents,this.normals=e.normals,this.binormals=e.binormals,this.fromBufferGeometry(e),this.mergeVertices()}function Qi(e,t,n,r,a){function s(i){f=e.getPointAt(i/t,f);var o=l.normals[i];for(i=l.binormals[i],c=0;r>=c;c++){var a=c/r*Math.PI*2,s=Math.sin(a);a=-Math.cos(a),p.x=a*o.x+s*i.x,p.y=a*o.y+s*i.y,p.z=a*o.z+s*i.z,p.normalize(),g.push(p.x,p.y,p.z),h.x=f.x+n*p.x,h.y=f.y+n*p.y,h.z=f.z+n*p.z,m.push(h.x,h.y,h.z)}}B.call(this),this.type="TubeBufferGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:a},t=t||64,n=n||1,r=r||8,a=a||!1;var l=e.computeFrenetFrames(t,a);this.tangents=l.tangents,this.normals=l.normals,this.binormals=l.binormals;var u,c,h=new o,p=new o,d=new i,f=new o,m=[],g=[],v=[],y=[];for(u=0;t>u;u++)s(u);for(s(!1===a?t:0),u=0;t>=u;u++)for(c=0;r>=c;c++)d.x=u/t,d.y=c/r,v.push(d.x,d.y);!function(){for(c=1;t>=c;c++)for(u=1;r>=u;u++){var e=(r+1)*c+(u-1),i=(r+1)*c+u,n=(r+1)*(c-1)+u;y.push((r+1)*(c-1)+(u-1),e,n),y.push(e,i,n)}}(),this.setIndex(y),this.addAttribute("position",new O(m,3)),this.addAttribute("normal",new O(g,3)),this.addAttribute("uv",new O(v,2))}function en(e,t,i,n,r,o,a){S.call(this),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new tn(e,t,i,n,r,o)),this.mergeVertices()}function tn(e,t,i,n,r,a){function s(e,t,i,n,r){var o=Math.sin(e);t=i/t*e,i=Math.cos(t),r.x=n*(2+i)*.5*Math.cos(e),r.y=n*(2+i)*o*.5,r.z=n*Math.sin(t)*.5}B.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:n,p:r,q:a},e=e||1,t=t||.4,i=Math.floor(i)||64,n=Math.floor(n)||8,r=r||2,a=a||3;var l,u=[],c=[],h=[],p=[],d=new o,f=new o,m=new o,g=new o,v=new o,y=new o,_=new o;for(l=0;i>=l;++l){var b=l/i*r*Math.PI*2;for(s(b,r,a,e,m),s(b+.01,r,a,e,g),y.subVectors(g,m),_.addVectors(g,m),v.crossVectors(y,_),_.crossVectors(v,y),v.normalize(),_.normalize(),b=0;n>=b;++b){var w=b/n*Math.PI*2,x=-t*Math.cos(w);w=t*Math.sin(w),d.x=m.x+(x*_.x+w*v.x),d.y=m.y+(x*_.y+w*v.y),d.z=m.z+(x*_.z+w*v.z),c.push(d.x,d.y,d.z),f.subVectors(d,m).normalize(),h.push(f.x,f.y,f.z),p.push(l/i),p.push(b/n)}}for(b=1;i>=b;b++)for(l=1;n>=l;l++)e=(n+1)*b+(l-1),t=(n+1)*b+l,r=(n+1)*(b-1)+l,u.push((n+1)*(b-1)+(l-1),e,r),u.push(e,t,r);this.setIndex(u),this.addAttribute("position",new O(c,3)),this.addAttribute("normal",new O(h,3)),this.addAttribute("uv",new O(p,2))}function nn(e,t,i,n,r){S.call(this),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},this.fromBufferGeometry(new rn(e,t,i,n,r)),this.mergeVertices()}function rn(e,t,i,n,r){B.call(this),this.type="TorusBufferGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:n,arc:r},e=e||1,t=t||.4,i=Math.floor(i)||8,n=Math.floor(n)||6,r=r||2*Math.PI;var a,s,l=[],u=[],c=[],h=[],p=new o,d=new o,f=new o;for(a=0;i>=a;a++)for(s=0;n>=s;s++){var m=s/n*r,g=a/i*Math.PI*2;d.x=(e+t*Math.cos(g))*Math.cos(m),d.y=(e+t*Math.cos(g))*Math.sin(m),d.z=t*Math.sin(g),u.push(d.x,d.y,d.z),p.x=e*Math.cos(m),p.y=e*Math.sin(m),f.subVectors(d,p).normalize(),c.push(f.x,f.y,f.z),h.push(s/n),h.push(a/i)}for(a=1;i>=a;a++)for(s=1;n>=s;s++)e=(n+1)*(a-1)+s-1,t=(n+1)*(a-1)+s,r=(n+1)*a+s,l.push((n+1)*a+s-1,e,r),l.push(e,t,r);this.setIndex(l),this.addAttribute("position",new O(u,3)),this.addAttribute("normal",new O(c,3)),this.addAttribute("uv",new O(h,2))}function on(e,t,i,n,r){for(var o,a=0,s=t,l=i-n;i>s;s+=n)a+=(e[l]-e[s])*(e[s+1]+e[l+1]),l=s;if(r===a>0)for(r=t;i>r;r+=n)o=yn(r,e[r],e[r+1],o);else for(r=i-n;r>=t;r-=n)o=yn(r,e[r],e[r+1],o);return o&&fn(o,o.next)&&(_n(o),o=o.next),o}function an(e,t){if(!e)return e;t||(t=e);do{var i=!1;if(e.steiner||!fn(e,e.next)&&0!==dn(e.prev,e,e.next))e=e.next;else{if(_n(e),e=t=e.prev,e===e.next)break;i=!0}}while(i||e!==t);return t}function sn(e,t,i,n,r,o,a){if(e){if(!a&&o){var s=e,l=s;
do null===l.z&&(l.z=cn(l.x,l.y,n,r,o)),l.prevZ=l.prev,l=l.nextZ=l.next;while(l!==s);l.prevZ.nextZ=null,l.prevZ=null,s=l;var u,c,h,p,d=1;do{l=s;var f=s=null;for(c=0;l;){c++;var m=l;for(u=h=0;d>u&&(h++,m=m.nextZ);u++);for(p=d;h>0||p>0&&m;)0!==h&&(0===p||!m||l.z<=m.z)?(u=l,l=l.nextZ,h--):(u=m,m=m.nextZ,p--),f?f.nextZ=u:s=u,u.prevZ=f,f=u;l=m}f.nextZ=null,d*=2}while(c>1)}for(s=e;e.prev!==e.next;){if(l=e.prev,m=e.next,o)e:{f=e,p=n;var g=r,v=o;if(c=f.prev,h=f,d=f.next,0<=dn(c,h,d))f=!1;else{var y=c.x>h.x?c.x>d.x?c.x:d.x:h.x>d.x?h.x:d.x,_=c.y>h.y?c.y>d.y?c.y:d.y:h.y>d.y?h.y:d.y;for(u=cn(c.x<h.x?c.x<d.x?c.x:d.x:h.x<d.x?h.x:d.x,c.y<h.y?c.y<d.y?c.y:d.y:h.y<d.y?h.y:d.y,p,g,v),p=cn(y,_,p,g,v),g=f.nextZ;g&&g.z<=p;){if(g!==f.prev&&g!==f.next&&pn(c.x,c.y,h.x,h.y,d.x,d.y,g.x,g.y)&&0<=dn(g.prev,g,g.next)){f=!1;break e}g=g.nextZ}for(g=f.prevZ;g&&g.z>=u;){if(g!==f.prev&&g!==f.next&&pn(c.x,c.y,h.x,h.y,d.x,d.y,g.x,g.y)&&0<=dn(g.prev,g,g.next)){f=!1;break e}g=g.prevZ}f=!0}}else e:if(f=e,c=f.prev,h=f,d=f.next,0<=dn(c,h,d))f=!1;else{for(u=f.next.next;u!==f.prev;){if(pn(c.x,c.y,h.x,h.y,d.x,d.y,u.x,u.y)&&0<=dn(u.prev,u,u.next)){f=!1;break e}u=u.next}f=!0}if(f)t.push(l.i/i),t.push(e.i/i),t.push(m.i/i),_n(e),s=e=m.next;else if(e=m,e===s){if(a){if(1===a){a=t,s=i,l=e;do m=l.prev,f=l.next.next,!fn(m,f)&&mn(m,l,l.next,f)&&gn(m,f)&&gn(f,m)&&(a.push(m.i/s),a.push(l.i/s),a.push(f.i/s),_n(l),_n(l.next),l=e=f),l=l.next;while(l!==e);e=l,sn(e,t,i,n,r,o,2)}else if(2===a)e:{a=e;do{for(s=a.next.next;s!==a.prev;){if(l=a.i!==s.i){if(l=a,m=s,f=l.next.i!==m.i&&l.prev.i!==m.i){t:{f=l;do{if(f.i!==l.i&&f.next.i!==l.i&&f.i!==m.i&&f.next.i!==m.i&&mn(f,f.next,l,m)){f=!0;break t}f=f.next}while(f!==l);f=!1}f=!f}if(f=f&&gn(l,m)&&gn(m,l)){f=l,c=!1,h=(l.x+m.x)/2,m=(l.y+m.y)/2;do f.y>m!=f.next.y>m&&f.next.y!==f.y&&h<(f.next.x-f.x)*(m-f.y)/(f.next.y-f.y)+f.x&&(c=!c),f=f.next;while(f!==l);f=c}l=f}if(l){e=vn(a,s),a=an(a,a.next),e=an(e,e.next),sn(a,t,i,n,r,o),sn(e,t,i,n,r,o);break e}s=s.next}a=a.next}while(a!==e)}}else sn(an(e),t,i,n,r,o,1);break}}}}function ln(e,t){return e.x-t.x}function un(e,t){var i=t,n=e.x,r=e.y,o=-(1/0);do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var a=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(n>=a&&a>o){if(o=a,a===n){if(r===i.y)return i;if(r===i.next.y)return i.next}var s=i.x<i.next.x?i:i.next}}i=i.next}while(i!==t);if(!s)return null;if(n===o)return s.prev;t=s,a=s.x;var l=s.y,u=1/0;for(i=s.next;i!==t;){if(n>=i.x&&i.x>=a&&n!==i.x&&pn(l>r?n:o,r,a,l,l>r?o:n,r,i.x,i.y)){var c=Math.abs(r-i.y)/(n-i.x);(u>c||c===u&&i.x>s.x)&&gn(i,e)&&(s=i,u=c)}i=i.next}return s}function cn(e,t,i,n,r){return e=32767*(e-i)*r,t=32767*(t-n)*r,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),1431655765&(e|e<<1)|(1431655765&(t|t<<1))<<1}function hn(e){var t=e,i=e;do t.x<i.x&&(i=t),t=t.next;while(t!==e);return i}function pn(e,t,i,n,r,o,a,s){return(r-a)*(t-s)-(e-a)*(o-s)>=0&&(e-a)*(n-s)-(i-a)*(t-s)>=0&&(i-a)*(o-s)-(r-a)*(n-s)>=0}function dn(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function fn(e,t){return e.x===t.x&&e.y===t.y}function mn(e,t,i,n){return fn(e,t)&&fn(i,n)||fn(e,n)&&fn(i,t)?!0:0<dn(e,t,i)!=0<dn(e,t,n)&&0<dn(i,n,e)!=0<dn(i,n,t)}function gn(e,t){return 0>dn(e.prev,e,e.next)?0<=dn(e,t,e.next)&&0<=dn(e,e.prev,t):0>dn(e,t,e.prev)||0>dn(e,e.next,t)}function vn(e,t){var i=new bn(e.i,e.x,e.y),n=new bn(t.i,t.x,t.y),r=e.next,o=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,o.next=n,n.prev=o,n}function yn(e,t,i,n){return e=new bn(e,t,i),n?(e.next=n.next,e.prev=n,n.next.prev=e,n.next=e):(e.prev=e,e.next=e),e}function _n(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function bn(e,t,i){this.i=e,this.x=t,this.y=i,this.nextZ=this.prevZ=this.z=this.next=this.prev=null,this.steiner=!1}function wn(e){var t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function xn(e,t){for(var i=0;i<t.length;i++)e.push(t[i].x),e.push(t[i].y)}function En(e,t){S.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},this.fromBufferGeometry(new Sn(e,t)),this.mergeVertices()}function Sn(e,t){function n(e){function n(e,t,i){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),t.clone().multiplyScalar(i).add(e)}function l(e,t,n){var r=e.x-t.x,o=e.y-t.y,a=n.x-e.x,s=n.y-e.y,l=r*r+o*o;if(Math.abs(r*s-o*a)>Number.EPSILON){var u=Math.sqrt(l),c=Math.sqrt(a*a+s*s);if(l=t.x-o/u,t=t.y+r/u,s=((n.x-s/c-l)*s-(n.y+a/c-t)*a)/(r*s-o*a),a=l+r*s-e.x,r=t+o*s-e.y,o=a*a+r*r,2>=o)return new i(a,r);o=Math.sqrt(o/2)}else e=!1,r>Number.EPSILON?a>Number.EPSILON&&(e=!0):r<-Number.EPSILON?a<-Number.EPSILON&&(e=!0):Math.sign(o)===Math.sign(s)&&(e=!0),e?(a=-o,o=Math.sqrt(l)):(a=r,r=o,o=Math.sqrt(l/2));return new i(a/o,r/o)}function u(e,t){for(F=e.length;0<=--F;){var i=F,n=F-1;0>n&&(n=e.length-1);var o,s=g+2*w;for(o=0;s>o;o++){var l=U*o,u=U*(o+1),c=t+n+l,h=t+n+u;u=t+i+u,p(t+i+l),p(c),p(u),p(c),p(h),p(u),l=a.length/3,l=E.generateSideWallUV(r,a,l-6,l-3,l-2,l-1),d(l[0]),d(l[1]),d(l[3]),d(l[1]),d(l[2]),d(l[3])}}}function c(e,t,i){f.push(e),f.push(t),f.push(i)}function h(e,t,i){p(e),p(t),p(i),e=a.length/3,e=E.generateTopUV(r,a,e-3,e-2,e-1),d(e[0]),d(e[1]),d(e[2])}function p(e){a.push(f[3*e]),a.push(f[3*e+1]),a.push(f[3*e+2])}function d(e){s.push(e.x),s.push(e.y)}var f=[],m=void 0!==t.curveSegments?t.curveSegments:12,g=void 0!==t.steps?t.steps:1,v=void 0!==t.amount?t.amount:100,y=void 0!==t.bevelEnabled?t.bevelEnabled:!0,_=void 0!==t.bevelThickness?t.bevelThickness:6,b=void 0!==t.bevelSize?t.bevelSize:_-2,w=void 0!==t.bevelSegments?t.bevelSegments:3,x=t.extrudePath,E=void 0!==t.UVGenerator?t.UVGenerator:va,S=!1;if(x){var T=x.getSpacedPoints(g);S=!0,y=!1;var C=x.computeFrenetFrames(g,!1),M=new o,P=new o,I=new o}y||(b=_=w=0);var L;m=e.extractPoints(m),e=m.shape;var R=m.holes;if(!ga.isClockWise(e)){e=e.reverse();var A=0;for(L=R.length;L>A;A++){var O=R[A];ga.isClockWise(O)&&(R[A]=O.reverse())}}var k=ga.triangulateShape(e,R),D=e;for(A=0,L=R.length;L>A;A++)O=R[A],e=e.concat(O);var N,B,U=e.length,G=k.length;m=[];var F=0,H=D.length,j=H-1;for(N=F+1;H>F;F++,j++,N++)j===H&&(j=0),N===H&&(N=0),m[F]=l(D[F],D[j],D[N]);x=[];var z=m.concat();for(A=0,L=R.length;L>A;A++){O=R[A];var $=[];for(F=0,H=O.length,j=H-1,N=F+1;H>F;F++,j++,N++)j===H&&(j=0),N===H&&(N=0),$[F]=l(O[F],O[j],O[N]);x.push($),z=z.concat($)}for(j=0;w>j;j++){H=j/w;var V=_*Math.cos(H*Math.PI/2);for(N=b*Math.sin(H*Math.PI/2),F=0,H=D.length;H>F;F++){var W=n(D[F],m[F],N);c(W.x,W.y,-V)}for(A=0,L=R.length;L>A;A++)for(O=R[A],$=x[A],F=0,H=O.length;H>F;F++)W=n(O[F],$[F],N),c(W.x,W.y,-V)}for(N=b,F=0;U>F;F++)W=y?n(e[F],z[F],N):e[F],S?(P.copy(C.normals[0]).multiplyScalar(W.x),M.copy(C.binormals[0]).multiplyScalar(W.y),I.copy(T[0]).add(P).add(M),c(I.x,I.y,I.z)):c(W.x,W.y,0);for(H=1;g>=H;H++)for(F=0;U>F;F++)W=y?n(e[F],z[F],N):e[F],S?(P.copy(C.normals[H]).multiplyScalar(W.x),M.copy(C.binormals[H]).multiplyScalar(W.y),I.copy(T[H]).add(P).add(M),c(I.x,I.y,I.z)):c(W.x,W.y,v/g*H);for(j=w-1;j>=0;j--){for(H=j/w,V=_*Math.cos(H*Math.PI/2),N=b*Math.sin(H*Math.PI/2),F=0,H=D.length;H>F;F++)W=n(D[F],m[F],N),c(W.x,W.y,v+V);for(A=0,L=R.length;L>A;A++)for(O=R[A],$=x[A],F=0,H=O.length;H>F;F++)W=n(O[F],$[F],N),S?c(W.x,W.y+T[g-1].y,T[g-1].x+V):c(W.x,W.y,v+V)}!function(){var e=a.length/3;if(y){var t=0*U;for(F=0;G>F;F++)B=k[F],h(B[2]+t,B[1]+t,B[0]+t);for(t=U*(g+2*w),F=0;G>F;F++)B=k[F],h(B[0]+t,B[1]+t,B[2]+t)}else{for(F=0;G>F;F++)B=k[F],h(B[2],B[1],B[0]);for(F=0;G>F;F++)B=k[F],h(B[0]+U*g,B[1]+U*g,B[2]+U*g)}r.addGroup(e,a.length/3-e,0)}(),function(){var e=a.length/3,t=0;for(u(D,t),t+=D.length,A=0,L=R.length;L>A;A++)O=R[A],u(O,t),t+=O.length;r.addGroup(e,a.length/3-e,1)}()}B.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];for(var r=this,a=[],s=[],l=0,u=e.length;u>l;l++)n(e[l],t);this.addAttribute("position",new O(a,3)),this.addAttribute("uv",new O(s,2)),this.computeVertexNormals()}function Tn(e,t){S.call(this),this.type="TextGeometry",this.parameters={text:e,parameters:t},this.fromBufferGeometry(new Cn(e,t)),this.mergeVertices()}function Cn(e,t){t=t||{};var i=t.font;return i&&i.isFont?(e=i.generateShapes(e,t.size,t.curveSegments),t.amount=void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),Sn.call(this,e,t),void(this.type="TextBufferGeometry")):(console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new S)}function Mn(e,t,i,n,r,o,a){S.call(this),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new Pn(e,t,i,n,r,o,a)),this.mergeVertices()}function Pn(e,t,i,n,r,a,s){B.call(this),this.type="SphereBufferGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:n,phiLength:r,thetaStart:a,thetaLength:s},e=e||1,t=Math.max(3,Math.floor(t)||8),i=Math.max(2,Math.floor(i)||6),n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI,a=void 0!==a?a:0,s=void 0!==s?s:Math.PI;var l,u,c=a+s,h=0,p=[],d=new o,f=new o,m=[],g=[],v=[],y=[];for(u=0;i>=u;u++){var _=[],b=u/i;for(l=0;t>=l;l++){var w=l/t;d.x=-e*Math.cos(n+w*r)*Math.sin(a+b*s),d.y=e*Math.cos(a+b*s),d.z=e*Math.sin(n+w*r)*Math.sin(a+b*s),g.push(d.x,d.y,d.z),f.set(d.x,d.y,d.z).normalize(),v.push(f.x,f.y,f.z),y.push(w,1-b),_.push(h++)}p.push(_)}for(u=0;i>u;u++)for(l=0;t>l;l++)e=p[u][l+1],n=p[u][l],r=p[u+1][l],s=p[u+1][l+1],(0!==u||a>0)&&m.push(e,n,s),(u!==i-1||c<Math.PI)&&m.push(n,r,s);this.setIndex(m),this.addAttribute("position",new O(g,3)),this.addAttribute("normal",new O(v,3)),this.addAttribute("uv",new O(y,2))}function In(e,t,i,n,r,o){S.call(this),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:n,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Ln(e,t,i,n,r,o)),this.mergeVertices()}function Ln(e,t,n,r,a,s){B.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:a,thetaLength:s},e=e||.5,t=t||1,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,r=void 0!==r?Math.max(1,r):1;var l,u,c=[],h=[],p=[],d=[],f=e,m=(t-e)/r,g=new o,v=new i;for(l=0;r>=l;l++){for(u=0;n>=u;u++)e=a+u/n*s,g.x=f*Math.cos(e),g.y=f*Math.sin(e),h.push(g.x,g.y,g.z),p.push(0,0,1),v.x=(g.x/t+1)/2,v.y=(g.y/t+1)/2,d.push(v.x,v.y);f+=m}for(l=0;r>l;l++)for(t=l*(n+1),u=0;n>u;u++)e=u+t,a=e+n+1,s=e+n+2,f=e+1,c.push(e,a,f),c.push(a,s,f);this.setIndex(c),this.addAttribute("position",new O(h,3)),this.addAttribute("normal",new O(p,3)),this.addAttribute("uv",new O(d,2))}function Rn(e,t,i,n){S.call(this),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:n},this.fromBufferGeometry(new An(e,t,i,n)),this.mergeVertices()}function An(e,t,n,r){B.call(this),this.type="LatheBufferGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t)||12,n=n||0,r=r||2*Math.PI,r=qo.clamp(r,0,2*Math.PI);var a,s=[],l=[],u=[],c=1/t,h=new o,p=new i;for(a=0;t>=a;a++){var d=n+a*c*r,f=Math.sin(d),m=Math.cos(d);for(d=0;d<=e.length-1;d++)h.x=e[d].x*f,h.y=e[d].y,h.z=e[d].x*m,l.push(h.x,h.y,h.z),p.x=a/t,p.y=d/(e.length-1),u.push(p.x,p.y)}for(a=0;t>a;a++)for(d=0;d<e.length-1;d++)n=d+a*e.length,c=n+e.length,h=n+e.length+1,p=n+1,s.push(n,c,p),s.push(c,h,p);if(this.setIndex(s),this.addAttribute("position",new O(l,3)),this.addAttribute("uv",new O(u,2)),this.computeVertexNormals(),r===2*Math.PI)for(r=this.attributes.normal.array,s=new o,l=new o,u=new o,n=t*e.length*3,d=a=0;a<e.length;a++,d+=3)s.x=r[d+0],s.y=r[d+1],s.z=r[d+2],l.x=r[n+d+0],l.y=r[n+d+1],l.z=r[n+d+2],u.addVectors(s,l).normalize(),r[d+0]=r[n+d+0]=u.x,r[d+1]=r[n+d+1]=u.y,r[d+2]=r[n+d+2]=u.z}function On(e,t){S.call(this),this.type="ShapeGeometry","object"==typeof t&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),t=t.curveSegments),this.parameters={shapes:e,curveSegments:t},this.fromBufferGeometry(new kn(e,t)),this.mergeVertices()}function kn(e,t){function i(e){var i,s=r.length/3;e=e.extractPoints(t);var u=e.shape,c=e.holes;if(!1===ga.isClockWise(u))for(u=u.reverse(),e=0,i=c.length;i>e;e++){var h=c[e];!0===ga.isClockWise(h)&&(c[e]=h.reverse())}var p=ga.triangulateShape(u,c);for(e=0,i=c.length;i>e;e++)h=c[e],u=u.concat(h);for(e=0,i=u.length;i>e;e++)h=u[e],r.push(h.x,h.y,0),o.push(0,0,1),a.push(h.x,h.y);for(e=0,i=p.length;i>e;e++)u=p[e],n.push(u[0]+s,u[1]+s,u[2]+s),l+=3}B.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:e,curveSegments:t},t=t||12;var n=[],r=[],o=[],a=[],s=0,l=0;if(!1===Array.isArray(e))i(e);else for(var u=0;u<e.length;u++)i(e[u]),this.addGroup(s,l,u),s+=l,l=0;this.setIndex(n),this.addAttribute("position",new O(r,3)),this.addAttribute("normal",new O(o,3)),this.addAttribute("uv",new O(a,2))}function Dn(e,t){if(t.shapes=[],Array.isArray(e))for(var i=0,n=e.length;n>i;i++)t.shapes.push(e[i].uuid);else t.shapes.push(e.uuid);return t}function Nn(e,t){B.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:t};var i=[];t=Math.cos(qo.DEG2RAD*(void 0!==t?t:1));var n=[0,0],r={},o=["a","b","c"];if(e.isBufferGeometry){var a=new S;a.fromBufferGeometry(e)}else a=e.clone();a.mergeVertices(),a.computeFaceNormals(),e=a.vertices,a=a.faces;for(var s=0,l=a.length;l>s;s++)for(var u=a[s],c=0;3>c;c++){var h=u[o[c]],p=u[o[(c+1)%3]];n[0]=Math.min(h,p),n[1]=Math.max(h,p),h=n[0]+","+n[1],void 0===r[h]?r[h]={index1:n[0],index2:n[1],face1:s,face2:void 0}:r[h].face2=s}for(h in r)n=r[h],(void 0===n.face2||a[n.face1].normal.dot(a[n.face2].normal)<=t)&&(o=e[n.index1],i.push(o.x,o.y,o.z),o=e[n.index2],i.push(o.x,o.y,o.z));this.addAttribute("position",new O(i,3))}function Bn(e,t,i,n,r,o,a,s){S.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:n,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Un(e,t,i,n,r,o,a,s)),this.mergeVertices()}function Un(e,t,n,r,a,s,l,u){function c(n){var a,s=new i,c=new o,v=0,b=!0===n?e:t,w=!0===n?1:-1,x=g;for(a=1;r>=a;a++)d.push(0,y*w,0),f.push(0,w,0),m.push(.5,.5),g++;var E=g;for(a=0;r>=a;a++){var S=a/r*u+l,T=Math.cos(S);S=Math.sin(S),c.x=b*S,c.y=y*w,c.z=b*T,d.push(c.x,c.y,c.z),f.push(0,w,0),s.x=.5*T+.5,s.y=.5*S*w+.5,m.push(s.x,s.y),g++}for(a=0;r>a;a++)s=x+a,c=E+a,!0===n?p.push(c,c+1,s):p.push(c+1,c,s),v+=3;h.addGroup(_,v,!0===n?1:2),_+=v}B.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:a,openEnded:s,thetaStart:l,thetaLength:u};var h=this;e=void 0!==e?e:1,t=void 0!==t?t:1,n=n||1,r=Math.floor(r)||8,a=Math.floor(a)||1,s=void 0!==s?s:!1,l=void 0!==l?l:0,u=void 0!==u?u:2*Math.PI;var p=[],d=[],f=[],m=[],g=0,v=[],y=n/2,_=0;!function(){var i,s,c=new o,b=new o,w=0,x=(t-e)/n;for(s=0;a>=s;s++){var E=[],S=s/a,T=S*(t-e)+e;for(i=0;r>=i;i++){var C=i/r,M=C*u+l,P=Math.sin(M);M=Math.cos(M),b.x=T*P,b.y=-S*n+y,b.z=T*M,d.push(b.x,b.y,b.z),c.set(P,x,M).normalize(),f.push(c.x,c.y,c.z),m.push(C,1-S),E.push(g++)}v.push(E)}for(i=0;r>i;i++)for(s=0;a>s;s++)c=v[s+1][i],b=v[s+1][i+1],x=v[s][i+1],p.push(v[s][i],c,x),p.push(c,b,x),w+=6;h.addGroup(_,w,0),_+=w}(),!1===s&&(e>0&&c(!0),t>0&&c(!1)),this.setIndex(p),this.addAttribute("position",new O(d,3)),this.addAttribute("normal",new O(f,3)),this.addAttribute("uv",new O(m,2))}function Gn(e,t,i,n,r,o,a){Bn.call(this,0,e,t,i,n,r,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function Fn(e,t,i,n,r,o,a){Un.call(this,0,e,t,i,n,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:n,openEnded:r,thetaStart:o,thetaLength:a}}function Hn(e,t,i,n){S.call(this),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:n},this.fromBufferGeometry(new jn(e,t,i,n)),this.mergeVertices()}function jn(e,t,n,r){B.call(this),this.type="CircleBufferGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},e=e||1,t=void 0!==t?Math.max(3,t):8,n=void 0!==n?n:0,r=void 0!==r?r:2*Math.PI;var a,s=[],l=[],u=[],c=[],h=new o,p=new i;l.push(0,0,0),u.push(0,0,1),c.push(.5,.5);var d=0;for(a=3;t>=d;d++,a+=3){var f=n+d/t*r;h.x=e*Math.cos(f),h.y=e*Math.sin(f),l.push(h.x,h.y,h.z),u.push(0,0,1),p.x=(l[a]/e+1)/2,p.y=(l[a+1]/e+1)/2,c.push(p.x,p.y)}for(a=1;t>=a;a++)s.push(a,a+1,0);this.setIndex(s),this.addAttribute("position",new O(l,3)),this.addAttribute("normal",new O(u,3)),this.addAttribute("uv",new O(c,2))}function zn(e){j.call(this),this.type="ShadowMaterial",this.color=new g(0),this.transparent=!0,this.setValues(e)}function $n(e){$.call(this,e),this.type="RawShaderMaterial"}function Vn(e){j.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new g(16777215),this.metalness=this.roughness=.5,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.metalnessMap=this.roughnessMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Wn(e){Vn.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoatRoughness=this.clearCoat=0,this.setValues(e)}function Xn(e){j.call(this),this.type="MeshPhongMaterial",this.color=new g(16777215),this.specular=new g(1118481),this.shininess=30,this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.bumpMap=this.emissiveMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.envMap=this.alphaMap=this.specularMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Yn(e){Xn.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(e)}function qn(e){j.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalScale=new i(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.morphNormals=this.morphTargets=this.skinning=this.lights=this.fog=!1,this.setValues(e)}function Jn(e){j.call(this),this.type="MeshLambertMaterial",this.color=new g(16777215),this.lightMap=this.map=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new g(0),this.emissiveIntensity=1,this.envMap=this.alphaMap=this.specularMap=this.emissiveMap=null,this.combine=0,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinejoin=this.wireframeLinecap="round",this.morphNormals=this.morphTargets=this.skinning=!1,this.setValues(e)}function Zn(e){Ii.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}function Kn(e,t,i){var n=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(e){a++,!1===r&&void 0!==n.onStart&&n.onStart(e,o,a),r=!0},this.itemEnd=function(e){o++,void 0!==n.onProgress&&n.onProgress(e,o,a),o===a&&(r=!1,void 0!==n.onLoad)&&n.onLoad()},this.itemError=function(e){void 0!==n.onError&&n.onError(e)},this.resolveURL=function(e){return s?s(e):e},this.setURLModifier=function(e){return s=e,this}}function Qn(e){this.manager=void 0!==e?e:wa}function er(e){this.manager=void 0!==e?e:wa,this._parser=null}function tr(e){this.manager=void 0!==e?e:wa,this._parser=null}function ir(e){this.manager=void 0!==e?e:wa}function nr(e){this.manager=void 0!==e?e:wa}function rr(e){this.manager=void 0!==e?e:wa}function or(){this.type="Curve",this.arcLengthDivisions=200}function ar(e,t,i,n,r,o,a,s){or.call(this),this.type="EllipseCurve",this.aX=e||0,this.aY=t||0,this.xRadius=i||1,this.yRadius=n||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function sr(e,t,i,n,r,o){ar.call(this,e,t,i,i,n,r,o),this.type="ArcCurve"}function lr(){var e=0,t=0,i=0,n=0;return{initCatmullRom:function(r,o,a,s,l){r=l*(a-r),s=l*(s-o),e=o,t=r,i=-3*o+3*a-2*r-s,n=2*o-2*a+r+s},initNonuniformCatmullRom:function(r,o,a,s,l,u,c){r=((o-r)/l-(a-r)/(l+u)+(a-o)/u)*u,s=((a-o)/u-(s-o)/(u+c)+(s-a)/c)*u,e=o,t=r,i=-3*o+3*a-2*r-s,n=2*o-2*a+r+s},calc:function(r){var o=r*r;return e+t*r+i*o+n*o*r}}}function ur(e,t,i,n){or.call(this),this.type="CatmullRomCurve3",this.points=e||[],this.closed=t||!1,this.curveType=i||"centripetal",this.tension=n||.5}function cr(e,t,i,n,r){t=.5*(n-t),r=.5*(r-i);var o=e*e;return(2*i-2*n+t+r)*e*o+(-3*i+3*n-2*t-r)*o+t*e+i}function hr(e,t,i,n){var r=1-e;return r*r*t+2*(1-e)*e*i+e*e*n}function pr(e,t,i,n,r){var o=1-e,a=1-e;return o*o*o*t+3*a*a*e*i+3*(1-e)*e*e*n+e*e*e*r}function dr(e,t,n,r){or.call(this),this.type="CubicBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i,this.v3=r||new i}function fr(e,t,i,n){or.call(this),this.type="CubicBezierCurve3",this.v0=e||new o,this.v1=t||new o,this.v2=i||new o,this.v3=n||new o}function mr(e,t){or.call(this),this.type="LineCurve",this.v1=e||new i,this.v2=t||new i}function gr(e,t){or.call(this),this.type="LineCurve3",this.v1=e||new o,this.v2=t||new o}function vr(e,t,n){or.call(this),this.type="QuadraticBezierCurve",this.v0=e||new i,this.v1=t||new i,this.v2=n||new i}function yr(e,t,i){or.call(this),this.type="QuadraticBezierCurve3",this.v0=e||new o,this.v1=t||new o,this.v2=i||new o}function _r(e){or.call(this),this.type="SplineCurve",this.points=e||[]}function br(){or.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function wr(e){br.call(this),this.type="Path",this.currentPoint=new i,e&&this.setFromPoints(e)}function xr(e){wr.call(this,e),this.uuid=qo.generateUUID(),this.type="Shape",this.holes=[]}function Er(e,t){b.call(this),this.type="Light",this.color=new g(e),this.intensity=void 0!==t?t:1,this.receiveShadow=void 0}function Sr(e,t,i){Er.call(this,e,i),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(b.DefaultUp),this.updateMatrix(),this.groundColor=new g(t)}function Tr(e){this.camera=e,this.bias=0,this.radius=1,this.mapSize=new i(512,512),this.map=null,this.matrix=new n}function Cr(){Tr.call(this,new gi(50,1,.5,500))}function Mr(e,t,i,n,r,o){Er.call(this,e,t),this.type="SpotLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(e){this.intensity=e/Math.PI}}),this.distance=void 0!==i?i:0,this.angle=void 0!==n?n:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Cr}function Pr(e,t,i,n){Er.call(this,e,t),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(e){this.intensity=e/(4*Math.PI)}}),this.distance=void 0!==i?i:0,this.decay=void 0!==n?n:1,this.shadow=new Tr(new gi(90,1,.5,500))}function Ir(){Tr.call(this,new x(-5,5,5,-5,.5,500))}function Lr(e,t){Er.call(this,e,t),this.type="DirectionalLight",this.position.copy(b.DefaultUp),this.updateMatrix(),this.target=new b,this.shadow=new Ir}function Rr(e,t){Er.call(this,e,t),this.type="AmbientLight",this.castShadow=void 0}function Ar(e,t,i,n){Er.call(this,e,t),this.type="RectAreaLight",this.width=void 0!==i?i:10,this.height=void 0!==n?n:10}function Or(e,t,i,n){zr.call(this,e,t,i,n)}function kr(e,t,i){zr.call(this,e,t,i)}function Dr(e,t,i,n){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==n?n:new t.constructor(i),this.sampleValues=t,this.valueSize=i}function Nr(e,t,i,n){Dr.call(this,e,t,i,n)}function Br(e,t,i,n){zr.call(this,e,t,i,n)}function Ur(e,t,i,n){zr.call(this,e,t,i,n)}function Gr(e,t,i,n){zr.call(this,e,t,i,n)}function Fr(e,t,i,n){Dr.call(this,e,t,i,n),this._offsetNext=this._weightNext=this._offsetPrev=this._weightPrev=-0}function Hr(e,t,i,n){Dr.call(this,e,t,i,n)}function jr(e,t,i,n){Dr.call(this,e,t,i,n)}function zr(e,t,i,n){if(void 0===e)throw Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Pa.convertArray(t,this.TimeBufferType),this.values=Pa.convertArray(i,this.ValueBufferType),this.setInterpolation(n||this.DefaultInterpolation),this.validate(),this.optimize()}function $r(e,t,i,n){zr.call(this,e,t,i,n)}function Vr(e,t,i){this.name=e,this.tracks=i,this.duration=void 0!==t?t:-1,this.uuid=qo.generateUUID(),0>this.duration&&this.resetDuration(),this.optimize()}function Wr(e){this.manager=void 0!==e?e:wa,this.textures={}}function Xr(e){this.manager=void 0!==e?e:wa}function Yr(){}function qr(e){"boolean"==typeof e&&(console.warn("THREE.JSONLoader: showStatus parameter has been removed from constructor."),e=void 0),this.manager=void 0!==e?e:wa,this.withCredentials=!1}function Jr(e){this.manager=void 0!==e?e:wa,this.texturePath=""}function Zr(e){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==e?e:wa,this.options=void 0}function Kr(){this.type="ShapePath",this.color=new g,this.subPaths=[],this.currentPath=null}function Qr(e){this.type="Font",this.data=e}function eo(e){this.manager=void 0!==e?e:wa}function to(e){this.manager=void 0!==e?e:wa}function io(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new gi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new gi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function no(e,t,i){b.call(this),this.type="CubeCamera";var n=new gi(90,1,e,t);n.up.set(0,-1,0),n.lookAt(new o(1,0,0)),this.add(n);var r=new gi(90,1,e,t);r.up.set(0,-1,0),r.lookAt(new o(-1,0,0)),this.add(r);var a=new gi(90,1,e,t);a.up.set(0,0,1),a.lookAt(new o(0,1,0)),this.add(a);var s=new gi(90,1,e,t);s.up.set(0,0,-1),s.lookAt(new o(0,-1,0)),this.add(s);var l=new gi(90,1,e,t);l.up.set(0,-1,0),l.lookAt(new o(0,0,1)),this.add(l);var u=new gi(90,1,e,t);u.up.set(0,-1,0),u.lookAt(new o(0,0,-1)),this.add(u),this.renderTarget=new c(i,i,{format:1022,magFilter:1006,minFilter:1006}),this.renderTarget.texture.name="CubeCamera",this.update=function(e,t){null===this.parent&&this.updateMatrixWorld();var i=this.renderTarget,o=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,i.activeCubeFace=0,e.render(t,n,i),i.activeCubeFace=1,e.render(t,r,i),i.activeCubeFace=2,e.render(t,a,i),i.activeCubeFace=3,e.render(t,s,i),i.activeCubeFace=4,e.render(t,l,i),i.texture.generateMipmaps=o,i.activeCubeFace=5,e.render(t,u,i),e.setRenderTarget(null)},this.clear=function(e,t,i,n){for(var r=this.renderTarget,o=0;6>o;o++)r.activeCubeFace=o,e.setRenderTarget(r),e.clear(t,i,n);e.setRenderTarget(null)}}function ro(){b.call(this),this.type="AudioListener",this.context=Da.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null}function oo(e){b.call(this),this.type="Audio",this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.loop=!1,this.offset=this.startTime=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ao(e){oo.call(this,e),this.panner=this.context.createPanner(),this.panner.connect(this.gain)}function so(e,t){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=void 0!==t?t:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}function lo(e,t,i){switch(this.binding=e,this.valueSize=i,e=Float64Array,t){case"quaternion":t=this._slerp;break;case"string":case"bool":e=Array,t=this._select;break;default:t=this._lerp}this.buffer=new e(4*i),this._mixBufferRegion=t,this.referenceCount=this.useCount=this.cumulativeWeight=0}function uo(e,t,i){i=i||co.parseTrackName(t),this._targetGroup=e,this._bindings=e.subscribe_(t,i)}function co(e,t,i){this.path=t,this.parsedPath=i||co.parseTrackName(t),this.node=co.findNode(e,this.parsedPath.nodeName)||e,this.rootNode=e}function ho(){this.uuid=qo.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var e={};this._indicesByUUID=e;for(var t=0,i=arguments.length;t!==i;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var n=this;this.stats={objects:{get total(){return n._objects.length},get inUse(){return this.total-n.nCachedObjects_}},get bindingsPerObject(){return n._bindings.length}}}function po(e,t,i){this._mixer=e,this._clip=t,this._localRoot=i||null,e=t.tracks,t=e.length,i=Array(t);for(var n={endingStart:2400,endingEnd:2400},r=0;r!==t;++r){var o=e[r].createInterpolant(null);i[r]=o,o.settings=n}this._interpolantSettings=n,this._interpolants=i,this._propertyBindings=Array(t),this._weightInterpolant=this._timeScaleInterpolant=this._byClipCacheIndex=this._cacheIndex=null,this.loop=2201,this._loopCount=-1,this._startTime=null,this.time=0,this._effectiveWeight=this.weight=this._effectiveTimeScale=this.timeScale=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtEnd=this.zeroSlopeAtStart=!0}function fo(e){this._root=e,this._initMemoryManager(),this.time=this._accuIndex=0,this.timeScale=1}function mo(e,t){"string"==typeof e&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),e=t),this.value=e}function go(){B.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function vo(e,t,i,n){this.data=e,this.itemSize=t,this.offset=i,this.normalized=!0===n}function yo(e,t){this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function _o(e,t,i){yo.call(this,e,t),this.meshPerAttribute=i||1}function bo(e,t,i){T.call(this,e,t),this.meshPerAttribute=i||1}function wo(e,t,i,n){this.ray=new V(e,t),this.near=i||0,this.far=n||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function xo(e,t){return e.distance-t.distance}function Eo(e,t,i,n){if(!1!==e.visible&&(e.raycast(t,i),!0===n)){e=e.children,n=0;for(var r=e.length;r>n;n++)Eo(e[n],t,i,!0)}}function So(e){this.autoStart=void 0!==e?e:!0,this.elapsedTime=this.oldTime=this.startTime=0,this.running=!1}function To(e,t,i){return this.radius=void 0!==e?e:1,this.phi=void 0!==t?t:0,this.theta=void 0!==i?i:0,this}function Co(e,t,i){return this.radius=void 0!==e?e:1,this.theta=void 0!==t?t:0,this.y=void 0!==i?i:0,this}function Mo(e,t){this.min=void 0!==e?e:new i(1/0,1/0),this.max=void 0!==t?t:new i(-(1/0),-(1/0))}function Po(e){b.call(this),this.material=e,this.render=function(){}}function Io(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16711680,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=3*i.faces.length:i&&i.isBufferGeometry&&(t=i.attributes.normal.count),i=new B,t=new O(6*t,3),i.addAttribute("position",t),Ri.call(this,i,new Ii({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Lo(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new B,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];
for(var i=0,n=1;32>i;i++,n++){var r=i/32*Math.PI*2,o=n/32*Math.PI*2;t.push(Math.cos(r),Math.sin(r),1,Math.cos(o),Math.sin(o),1)}e.addAttribute("position",new O(t,3)),t=new Ii({fog:!1}),this.cone=new Ri(e,t),this.add(this.cone),this.update()}function Ro(e){var t=[];e&&e.isBone&&t.push(e);for(var i=0;i<e.children.length;i++)t.push.apply(t,Ro(e.children[i]));return t}function Ao(e){for(var t=Ro(e),i=new B,n=[],r=[],o=new g(0,0,1),a=new g(0,1,0),s=0;s<t.length;s++){var l=t[s];l.parent&&l.parent.isBone&&(n.push(0,0,0),n.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}i.addAttribute("position",new O(n,3)),i.addAttribute("color",new O(r,3)),n=new Ii({vertexColors:2,depthTest:!1,depthWrite:!1,transparent:!0}),Ri.call(this,i,n),this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}function Oo(e,t,i){this.light=e,this.light.updateMatrixWorld(),this.color=i,e=new Pn(t,4,2),t=new z({wireframe:!0,fog:!1}),Y.call(this,e,t),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function ko(e,t){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,e=new Ii({fog:!1}),t=new B,t.addAttribute("position",new T(new Float32Array(15),3)),this.line=new Li(t,e),this.add(this.line),this.update()}function Do(e,t,i){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,e=new Xi(t),e.rotateY(.5*Math.PI),this.material=new z({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=2),t=e.getAttribute("position"),t=new Float32Array(3*t.count),e.addAttribute("color",new T(t,3)),this.add(new Y(e,this.material)),this.update()}function No(e,t,i,n){e=e||10,t=t||10,i=new g(void 0!==i?i:4473924),n=new g(void 0!==n?n:8947848);var r=t/2,o=e/t,a=e/2;e=[];for(var s=[],l=0,u=0,c=-a;t>=l;l++,c+=o){e.push(-a,0,c,a,0,c),e.push(c,0,-a,c,0,a);var h=l===r?i:n;h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3,h.toArray(s,u),u+=3}t=new B,t.addAttribute("position",new O(e,3)),t.addAttribute("color",new O(s,3)),i=new Ii({vertexColors:2}),Ri.call(this,t,i)}function Bo(e,t,i,n,r,o){e=e||10,t=t||16,i=i||8,n=n||64,r=new g(void 0!==r?r:4473924),o=new g(void 0!==o?o:8947848);var a,s=[],l=[];for(a=0;t>=a;a++){var u=a/t*2*Math.PI,c=Math.sin(u)*e;u=Math.cos(u)*e,s.push(0,0,0),s.push(c,0,u);var h=1&a?r:o;l.push(h.r,h.g,h.b),l.push(h.r,h.g,h.b)}for(a=0;i>=a;a++){h=1&a?r:o;var p=e-e/i*a;for(t=0;n>t;t++)u=t/n*2*Math.PI,c=Math.sin(u)*p,u=Math.cos(u)*p,s.push(c,0,u),l.push(h.r,h.g,h.b),u=(t+1)/n*2*Math.PI,c=Math.sin(u)*p,u=Math.cos(u)*p,s.push(c,0,u),l.push(h.r,h.g,h.b)}e=new B,e.addAttribute("position",new O(s,3)),e.addAttribute("color",new O(l,3)),s=new Ii({vertexColors:2}),Ri.call(this,e,s)}function Uo(e,t,i,n){this.object=e,this.size=void 0!==t?t:1,e=void 0!==i?i:16776960,n=void 0!==n?n:1,t=0,(i=this.object.geometry)&&i.isGeometry?t=i.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead."),i=new B,t=new O(6*t,3),i.addAttribute("position",t),Ri.call(this,i,new Ii({color:e,linewidth:n})),this.matrixAutoUpdate=!1,this.update()}function Go(e,t,i){b.call(this),this.light=e,this.light.updateMatrixWorld(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,void 0===t&&(t=1),e=new B,e.addAttribute("position",new O([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3)),t=new Ii({fog:!1}),this.lightPlane=new Li(e,t),this.add(this.lightPlane),e=new B,e.addAttribute("position",new O([0,0,0,0,0,1],3)),this.targetLine=new Li(e,t),this.add(this.targetLine),this.update()}function Fo(e){function t(e,t,n){i(e,n),i(t,n)}function i(e,t){o.push(0,0,0),a.push(t.r,t.g,t.b),void 0===s[e]&&(s[e]=[]),s[e].push(o.length/3-1)}var n=new B,r=new Ii({color:16777215,vertexColors:1}),o=[],a=[],s={},l=new g(16755200),u=new g(16711680),c=new g(43775),h=new g(16777215),p=new g(3355443);t("n1","n2",l),t("n2","n4",l),t("n4","n3",l),t("n3","n1",l),t("f1","f2",l),t("f2","f4",l),t("f4","f3",l),t("f3","f1",l),t("n1","f1",l),t("n2","f2",l),t("n3","f3",l),t("n4","f4",l),t("p","n1",u),t("p","n2",u),t("p","n3",u),t("p","n4",u),t("u1","u2",c),t("u2","u3",c),t("u3","u1",c),t("c","t",h),t("p","c",p),t("cn1","cn2",p),t("cn3","cn4",p),t("cf1","cf2",p),t("cf3","cf4",p),n.addAttribute("position",new O(o,3)),n.addAttribute("color",new O(a,3)),Ri.call(this,n,r),this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function Ho(e,t){this.object=e,void 0===t&&(t=16776960),e=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new Float32Array(24),n=new B;n.setIndex(new T(e,1)),n.addAttribute("position",new T(i,3)),Ri.call(this,n,new Ii({color:t})),this.matrixAutoUpdate=!1,this.update()}function jo(e,t){this.type="Box3Helper",this.box=e,e=void 0!==t?t:16776960,t=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]);var i=new B;i.setIndex(new T(t,1)),i.addAttribute("position",new O([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),Ri.call(this,i,new Ii({color:e})),this.geometry.computeBoundingSphere()}function zo(e,t,i){this.type="PlaneHelper",this.plane=e,this.size=void 0===t?1:t,e=void 0!==i?i:16776960,t=new B,t.addAttribute("position",new O([1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],3)),t.computeBoundingSphere(),Li.call(this,t,new Ii({color:e})),t=new B,t.addAttribute("position",new O([1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],3)),t.computeBoundingSphere(),this.add(new Y(t,new z({color:e,opacity:.2,transparent:!0,depthWrite:!1})))}function $o(e,t,i,n,r,o){b.call(this),void 0===n&&(n=16776960),void 0===i&&(i=1),void 0===r&&(r=.2*i),void 0===o&&(o=.2*r),void 0===Na&&(Na=new B,Na.addAttribute("position",new O([0,0,0,0,1,0],3)),Ba=new Un(0,.5,1,5,1),Ba.translate(0,-.5,0)),this.position.copy(t),this.line=new Li(Na,new Ii({color:n})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Y(Ba,new z({color:n})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,r,o)}function Vo(e){e=e||1;var t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e];e=new B,e.addAttribute("position",new O(t,3)),e.addAttribute("color",new O([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3)),t=new Ii({vertexColors:2}),Ri.call(this,e,t)}function Wo(e){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ur.call(this,e),this.type="catmullrom",this.closed=!0}function Xo(e){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),ur.call(this,e),this.type="catmullrom"}function Yo(e){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),ur.call(this,e),this.type="catmullrom"}void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e}),void 0===Math.sign&&(Math.sign=function(e){return 0>e?-1:e>0?1:+e}),!1=="name"in Function.prototype&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(e){if(void 0===e||null===e)throw new TypeError("Cannot convert undefined or null to object");for(var t=Object(e),i=1;i<arguments.length;i++){var n=arguments[i];if(void 0!==n&&null!==n)for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t}}(),Object.assign(t.prototype,{addEventListener:function(e,t){void 0===this._listeners&&(this._listeners={});var i=this._listeners;void 0===i[e]&&(i[e]=[]),-1===i[e].indexOf(t)&&i[e].push(t)},hasEventListener:function(e,t){if(void 0===this._listeners)return!1;var i=this._listeners;return void 0!==i[e]&&-1!==i[e].indexOf(t)},removeEventListener:function(e,t){void 0!==this._listeners&&(e=this._listeners[e],void 0!==e&&(t=e.indexOf(t),-1!==t&&e.splice(t,1)))},dispatchEvent:function(e){if(void 0!==this._listeners){var t=this._listeners[e.type];if(void 0!==t){e.target=this,t=t.slice(0);for(var i=0,n=t.length;n>i;i++)t[i].call(this,e)}}}});var qo={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var e=[],t=0;256>t;t++)e[t]=(16>t?"0":"")+t.toString(16);return function(){var t=4294967295*Math.random()|0,i=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(e[255&t]+e[t>>8&255]+e[t>>16&255]+e[t>>24&255]+"-"+e[255&i]+e[i>>8&255]+"-"+e[i>>16&15|64]+e[i>>24&255]+"-"+e[63&n|128]+e[n>>8&255]+"-"+e[n>>16&255]+e[n>>24&255]+e[255&r]+e[r>>8&255]+e[r>>16&255]+e[r>>24&255]).toUpperCase()}}(),clamp:function(e,t,i){return Math.max(t,Math.min(i,e))},euclideanModulo:function(e,t){return(e%t+t)%t},mapLinear:function(e,t,i,n,r){return n+(e-t)*(r-n)/(i-t)},lerp:function(e,t,i){return(1-i)*e+i*t},smoothstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*(3-2*e))},smootherstep:function(e,t,i){return t>=e?0:e>=i?1:(e=(e-t)/(i-t),e*e*e*(e*(6*e-15)+10))},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},degToRad:function(e){return e*qo.DEG2RAD},radToDeg:function(e){return e*qo.RAD2DEG},isPowerOfTwo:function(e){return 0===(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}};Object.defineProperties(i.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(e){this.y=e}}}),Object.assign(i.prototype,{isVector2:!0,set:function(e,t){return this.x=e,this.y=t,this},setScalar:function(e){return this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(e){return this.x=e.x,this.y=e.y,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this)},addScalar:function(e){return this.x+=e,this.y+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this)},subScalar:function(e){return this.x-=e,this.y-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this},multiply:function(e){return this.x*=e.x,this.y*=e.y,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this},divide:function(e){return this.x/=e.x,this.y/=e.y,this},divideScalar:function(e){return this.multiplyScalar(1/e)},applyMatrix3:function(e){var t=this.x,i=this.y;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6],this.y=e[1]*t+e[4]*i+e[7],this},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this},clampScalar:function(){var e=new i,t=new i;return function(i,n){return e.set(i,i),t.set(n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(e){return this.x*e.x+this.y*e.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var e=Math.atan2(this.y,this.x);return 0>e&&(e+=2*Math.PI),e},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x;return e=this.y-e.y,t*t+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this},rotateAround:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=this.x-e.x,r=this.y-e.y;return this.x=n*i-r*t+e.x,this.y=n*t+r*i+e.y,this}}),Object.assign(n.prototype,{isMatrix4:!0,set:function(e,t,i,n,r,o,a,s,l,u,c,h,p,d,f,m){var g=this.elements;return g[0]=e,g[4]=t,g[8]=i,g[12]=n,g[1]=r,g[5]=o,g[9]=a,g[13]=s,g[2]=l,g[6]=u,g[10]=c,g[14]=h,g[3]=p,g[7]=d,g[11]=f,g[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new n).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],this},copyPosition:function(e){var t=this.elements;return e=e.elements,t[12]=e[12],t[13]=e[13],t[14]=e[14],this},extractBasis:function(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this},makeBasis:function(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this},extractRotation:function(){var e=new o;return function(t){var i=this.elements,n=t.elements,r=1/e.setFromMatrixColumn(t,0).length(),o=1/e.setFromMatrixColumn(t,1).length();return t=1/e.setFromMatrixColumn(t,2).length(),i[0]=n[0]*r,i[1]=n[1]*r,i[2]=n[2]*r,i[4]=n[4]*o,i[5]=n[5]*o,i[6]=n[6]*o,i[8]=n[8]*t,i[9]=n[9]*t,i[10]=n[10]*t,this}}(),makeRotationFromEuler:function(e){e&&e.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var t=this.elements,i=e.x,n=e.y,r=e.z,o=Math.cos(i);i=Math.sin(i);var a=Math.cos(n);n=Math.sin(n);var s=Math.cos(r);if(r=Math.sin(r),"XYZ"===e.order){e=o*s;var l=o*r,u=i*s,c=i*r;t[0]=a*s,t[4]=-a*r,t[8]=n,t[1]=l+u*n,t[5]=e-c*n,t[9]=-i*a,t[2]=c-e*n,t[6]=u+l*n,t[10]=o*a}else"YXZ"===e.order?(e=a*s,l=a*r,u=n*s,c=n*r,t[0]=e+c*i,t[4]=u*i-l,t[8]=o*n,t[1]=o*r,t[5]=o*s,t[9]=-i,t[2]=l*i-u,t[6]=c+e*i,t[10]=o*a):"ZXY"===e.order?(e=a*s,l=a*r,u=n*s,c=n*r,t[0]=e-c*i,t[4]=-o*r,t[8]=u+l*i,t[1]=l+u*i,t[5]=o*s,t[9]=c-e*i,t[2]=-o*n,t[6]=i,t[10]=o*a):"ZYX"===e.order?(e=o*s,l=o*r,u=i*s,c=i*r,t[0]=a*s,t[4]=u*n-l,t[8]=e*n+c,t[1]=a*r,t[5]=c*n+e,t[9]=l*n-u,t[2]=-n,t[6]=i*a,t[10]=o*a):"YZX"===e.order?(e=o*a,l=o*n,u=i*a,c=i*n,t[0]=a*s,t[4]=c-e*r,t[8]=u*r+l,t[1]=r,t[5]=o*s,t[9]=-i*s,t[2]=-n*s,t[6]=l*r+u,t[10]=e-c*r):"XZY"===e.order&&(e=o*a,l=o*n,u=i*a,c=i*n,t[0]=a*s,t[4]=-r,t[8]=n*s,t[1]=e*r+c,t[5]=o*s,t[9]=l*r-u,t[2]=u*r-l,t[6]=i*s,t[10]=c*r+e);return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},makeRotationFromQuaternion:function(e){var t=this.elements,i=e._x,n=e._y,r=e._z,o=e._w,a=i+i,s=n+n,l=r+r;e=i*a;var u=i*s;i*=l;var c=n*s;return n*=l,r*=l,a*=o,s*=o,o*=l,t[0]=1-(c+r),t[4]=u-o,t[8]=i+s,t[1]=u+o,t[5]=1-(e+r),t[9]=n-a,t[2]=i-s,t[6]=n+a,t[10]=1-(e+c),t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this},lookAt:function(){var e=new o,t=new o,i=new o;return function(n,r,o){var a=this.elements;return i.subVectors(n,r),0===i.lengthSq()&&(i.z=1),i.normalize(),e.crossVectors(o,i),0===e.lengthSq()&&(1===Math.abs(o.z)?i.x+=1e-4:i.z+=1e-4,i.normalize(),e.crossVectors(o,i)),e.normalize(),t.crossVectors(i,e),a[0]=e.x,a[4]=t.x,a[8]=i.x,a[1]=e.y,a[5]=t.y,a[9]=i.y,a[2]=e.z,a[6]=t.z,a[10]=i.z,this}}(),multiply:function(e,t){return void 0!==t?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(e,t)):this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[4],o=i[8],a=i[12],s=i[1],l=i[5],u=i[9],c=i[13],h=i[2],p=i[6],d=i[10],f=i[14],m=i[3],g=i[7],v=i[11];i=i[15];var y=n[0],_=n[4],b=n[8],w=n[12],x=n[1],E=n[5],S=n[9],T=n[13],C=n[2],M=n[6],P=n[10],I=n[14],L=n[3],R=n[7],A=n[11];return n=n[15],t[0]=e*y+r*x+o*C+a*L,t[4]=e*_+r*E+o*M+a*R,t[8]=e*b+r*S+o*P+a*A,t[12]=e*w+r*T+o*I+a*n,t[1]=s*y+l*x+u*C+c*L,t[5]=s*_+l*E+u*M+c*R,t[9]=s*b+l*S+u*P+c*A,t[13]=s*w+l*T+u*I+c*n,t[2]=h*y+p*x+d*C+f*L,t[6]=h*_+p*E+d*M+f*R,t[10]=h*b+p*S+d*P+f*A,t[14]=h*w+p*T+d*I+f*n,t[3]=m*y+g*x+v*C+i*L,t[7]=m*_+g*E+v*M+i*R,t[11]=m*b+g*S+v*P+i*A,t[15]=m*w+g*T+v*I+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this},applyToBufferAttribute:function(){var e=new o;return function(t){for(var i=0,n=t.count;n>i;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix4(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),determinant:function(){var e=this.elements,t=e[0],i=e[4],n=e[8],r=e[12],o=e[1],a=e[5],s=e[9],l=e[13],u=e[2],c=e[6],h=e[10],p=e[14];return e[3]*(+r*s*c-n*l*c-r*a*h+i*l*h+n*a*p-i*s*p)+e[7]*(+t*s*p-t*l*h+r*o*h-n*o*p+n*l*u-r*s*u)+e[11]*(+t*l*c-t*a*p-r*o*c+i*o*p+r*a*u-i*l*u)+e[15]*(-n*a*u-t*s*c+t*a*h+n*o*c-i*o*h+i*s*u)},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(e){var t=this.elements;return t[12]=e.x,t[13]=e.y,t[14]=e.z,this},getInverse:function(e,t){var i=this.elements,n=e.elements;e=n[0];var r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=n[7],h=n[8],p=n[9],d=n[10],f=n[11],m=n[12],g=n[13],v=n[14];n=n[15];var y=p*v*c-g*d*c+g*u*f-l*v*f-p*u*n+l*d*n,_=m*d*c-h*v*c-m*u*f+s*v*f+h*u*n-s*d*n,b=h*g*c-m*p*c+m*l*f-s*g*f-h*l*n+s*p*n,w=m*p*u-h*g*u-m*l*d+s*g*d+h*l*v-s*p*v,x=e*y+r*_+o*b+a*w;if(0===x){if(!0===t)throw Error("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/x,i[0]=y*t,i[1]=(g*d*a-p*v*a-g*o*f+r*v*f+p*o*n-r*d*n)*t,i[2]=(l*v*a-g*u*a+g*o*c-r*v*c-l*o*n+r*u*n)*t,i[3]=(p*u*a-l*d*a-p*o*c+r*d*c+l*o*f-r*u*f)*t,i[4]=_*t,i[5]=(h*v*a-m*d*a+m*o*f-e*v*f-h*o*n+e*d*n)*t,i[6]=(m*u*a-s*v*a-m*o*c+e*v*c+s*o*n-e*u*n)*t,i[7]=(s*d*a-h*u*a+h*o*c-e*d*c-s*o*f+e*u*f)*t,i[8]=b*t,i[9]=(m*p*a-h*g*a-m*r*f+e*g*f+h*r*n-e*p*n)*t,i[10]=(s*g*a-m*l*a+m*r*c-e*g*c-s*r*n+e*l*n)*t,i[11]=(h*l*a-s*p*a-h*r*c+e*p*c+s*r*f-e*l*f)*t,i[12]=w*t,i[13]=(h*g*o-m*p*o+m*r*d-e*g*d-h*r*v+e*p*v)*t,i[14]=(m*l*o-s*g*o-m*r*u+e*g*u+s*r*v-e*l*v)*t,i[15]=(s*p*o-h*l*o+h*r*u-e*p*u-s*r*d+e*l*d)*t,this},scale:function(e){var t=this.elements,i=e.x,n=e.y;return e=e.z,t[0]*=i,t[4]*=n,t[8]*=e,t[1]*=i,t[5]*=n,t[9]*=e,t[2]*=i,t[6]*=n,t[10]*=e,t[3]*=i,t[7]*=n,t[11]*=e,this},getMaxScaleOnAxis:function(){var e=this.elements;return Math.sqrt(Math.max(e[0]*e[0]+e[1]*e[1]+e[2]*e[2],e[4]*e[4]+e[5]*e[5]+e[6]*e[6],e[8]*e[8]+e[9]*e[9]+e[10]*e[10]))},makeTranslation:function(e,t,i){return this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this},makeRotationX:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(1,0,0,0,0,t,-e,0,0,e,t,0,0,0,0,1),this},makeRotationY:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,0,e,0,0,1,0,0,-e,0,t,0,0,0,0,1),this},makeRotationZ:function(e){var t=Math.cos(e);return e=Math.sin(e),this.set(t,-e,0,0,e,t,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(e,t){var i=Math.cos(t);t=Math.sin(t);var n=1-i,r=e.x,o=e.y;e=e.z;var a=n*r,s=n*o;return this.set(a*r+i,a*o-t*e,a*e+t*o,0,a*o+t*e,s*o+i,s*e-t*r,0,a*e-t*o,s*e+t*r,n*e*e+i,0,0,0,0,1),this},makeScale:function(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this},makeShear:function(e,t,i){return this.set(1,t,i,0,e,1,i,0,e,t,1,0,0,0,0,1),this},compose:function(e,t,i){return this.makeRotationFromQuaternion(t),this.scale(i),this.setPosition(e),this},decompose:function(){var e=new o,t=new n;return function(i,n,r){var o=this.elements,a=e.set(o[0],o[1],o[2]).length(),s=e.set(o[4],o[5],o[6]).length(),l=e.set(o[8],o[9],o[10]).length();0>this.determinant()&&(a=-a),i.x=o[12],i.y=o[13],i.z=o[14],t.copy(this),i=1/a,o=1/s;var u=1/l;return t.elements[0]*=i,t.elements[1]*=i,t.elements[2]*=i,t.elements[4]*=o,t.elements[5]*=o,t.elements[6]*=o,t.elements[8]*=u,t.elements[9]*=u,t.elements[10]*=u,n.setFromRotationMatrix(t),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(e,t,i,n,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements;return a[0]=2*r/(t-e),a[4]=0,a[8]=(t+e)/(t-e),a[12]=0,a[1]=0,a[5]=2*r/(i-n),a[9]=(i+n)/(i-n),a[13]=0,a[2]=0,a[6]=0,a[10]=-(o+r)/(o-r),a[14]=-2*o*r/(o-r),a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(e,t,i,n,r,o){var a=this.elements,s=1/(t-e),l=1/(i-n),u=1/(o-r);return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-((t+e)*s),a[1]=0,a[5]=2*l,a[9]=0,a[13]=-((i+n)*l),a[2]=0,a[6]=0,a[10]=-2*u,a[14]=-((o+r)*u),a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;16>i;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;16>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}),Object.assign(r,{slerp:function(e,t,i,n){return i.copy(e).slerp(t,n)},slerpFlat:function(e,t,i,n,r,o,a){var s=i[n+0],l=i[n+1],u=i[n+2];i=i[n+3],n=r[o+0];var c=r[o+1],h=r[o+2];if(r=r[o+3],i!==r||s!==n||l!==c||u!==h){o=1-a;var p=s*n+l*c+u*h+i*r,d=p>=0?1:-1,f=1-p*p;f>Number.EPSILON&&(f=Math.sqrt(f),p=Math.atan2(f,p*d),o=Math.sin(o*p)/f,a=Math.sin(a*p)/f),d*=a,s=s*o+n*d,l=l*o+c*d,u=u*o+h*d,i=i*o+r*d,o===1-a&&(a=1/Math.sqrt(s*s+l*l+u*u+i*i),s*=a,l*=a,u*=a,i*=a)}e[t]=s,e[t+1]=l,e[t+2]=u,e[t+3]=i}}),Object.defineProperties(r.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(e){this._w=e,this.onChangeCallback()}}}),Object.assign(r.prototype,{set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._w=n,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this.onChangeCallback(),this},setFromEuler:function(e,t){if(!e||!e.isEuler)throw Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var i=e._x,n=e._y,r=e._z;e=e.order;var o=Math.cos,a=Math.sin,s=o(i/2),l=o(n/2);return o=o(r/2),i=a(i/2),n=a(n/2),r=a(r/2),"XYZ"===e?(this._x=i*l*o+s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o-i*n*r):"YXZ"===e?(this._x=i*l*o+s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o+i*n*r):"ZXY"===e?(this._x=i*l*o-s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o-i*n*r):"ZYX"===e?(this._x=i*l*o-s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o+i*n*r):"YZX"===e?(this._x=i*l*o+s*n*r,this._y=s*n*o+i*l*r,this._z=s*l*r-i*n*o,this._w=s*l*o-i*n*r):"XZY"===e&&(this._x=i*l*o-s*n*r,this._y=s*n*o-i*l*r,this._z=s*l*r+i*n*o,this._w=s*l*o+i*n*r),!1!==t&&this.onChangeCallback(),this},setFromAxisAngle:function(e,t){t/=2;var i=Math.sin(t);return this._x=e.x*i,this._y=e.y*i,this._z=e.z*i,this._w=Math.cos(t),this.onChangeCallback(),this},setFromRotationMatrix:function(e){var t=e.elements,i=t[0];e=t[4];var n=t[8],r=t[1],o=t[5],a=t[9],s=t[2],l=t[6];t=t[10];var u=i+o+t;return u>0?(i=.5/Math.sqrt(u+1),this._w=.25/i,this._x=(l-a)*i,this._y=(n-s)*i,this._z=(r-e)*i):i>o&&i>t?(i=2*Math.sqrt(1+i-o-t),this._w=(l-a)/i,this._x=.25*i,this._y=(e+r)/i,this._z=(n+s)/i):o>t?(i=2*Math.sqrt(1+o-i-t),this._w=(n-s)/i,this._x=(e+r)/i,this._y=.25*i,this._z=(a+l)/i):(i=2*Math.sqrt(1+t-i-o),this._w=(r-e)/i,this._x=(n+s)/i,this._y=(a+l)/i,this._z=.25*i),this.onChangeCallback(),this},setFromUnitVectors:function(){var e,t=new o;return function(i,n){return void 0===t&&(t=new o),e=i.dot(n)+1,1e-6>e?(e=0,Math.abs(i.x)>Math.abs(i.z)?t.set(-i.y,i.x,0):t.set(0,-i.z,i.y)):t.crossVectors(i,n),this._x=t.x,this._y=t.y,this._z=t.z,this._w=e,this.normalize()}}(),inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var e=this.length();return 0===e?(this._z=this._y=this._x=0,this._w=1):(e=1/e,this._x*=e,this._y*=e,this._z*=e,this._w*=e),this.onChangeCallback(),this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(e,t)):this.multiplyQuaternions(this,e)},premultiply:function(e){return this.multiplyQuaternions(e,this)},multiplyQuaternions:function(e,t){var i=e._x,n=e._y,r=e._z;e=e._w;var o=t._x,a=t._y,s=t._z;return t=t._w,this._x=i*t+e*o+n*s-r*a,this._y=n*t+e*a+r*o-i*s,this._z=r*t+e*s+i*a-n*o,this._w=e*t-i*o-n*a-r*s,this.onChangeCallback(),this},slerp:function(e,t){if(0===t)return this;if(1===t)return this.copy(e);var i=this._x,n=this._y,r=this._z,o=this._w,a=o*e._w+i*e._x+n*e._y+r*e._z;if(0>a?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=n,this._z=r,this;if(e=Math.sqrt(1-a*a),.001>Math.abs(e))return this._w=.5*(o+this._w),this._x=.5*(i+this._x),this._y=.5*(n+this._y),this._z=.5*(r+this._z),this;var s=Math.atan2(e,a);return a=Math.sin((1-t)*s)/e,t=Math.sin(t*s)/e,this._w=o*a+this._w*t,this._x=i*a+this._x*t,this._y=n*a+this._y*t,this._z=r*a+this._z*t,this.onChangeCallback(),this},equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w},fromArray:function(e,t){return void 0===t&&(t=0),this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(o.prototype,{isVector3:!0,set:function(e,t,i){return this.x=e,this.y=t,this.z=i,this},setScalar:function(e){return this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this},multiply:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(e,t)):(this.x*=e.x,this.y*=e.y,this.z*=e.z,this)},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this},multiplyVectors:function(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this},applyEuler:function(){var e=new r;return function(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(e.setFromEuler(t))}}(),applyAxisAngle:function(){var e=new r;return function(t,i){return this.applyQuaternion(e.setFromAxisAngle(t,i))}}(),applyMatrix3:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[3]*i+e[6]*n,this.y=e[1]*t+e[4]*i+e[7]*n,this.z=e[2]*t+e[5]*i+e[8]*n,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z;e=e.elements;var r=1/(e[3]*t+e[7]*i+e[11]*n+e[15]);return this.x=(e[0]*t+e[4]*i+e[8]*n+e[12])*r,this.y=(e[1]*t+e[5]*i+e[9]*n+e[13])*r,this.z=(e[2]*t+e[6]*i+e[10]*n+e[14])*r,this},applyQuaternion:function(e){var t=this.x,i=this.y,n=this.z,r=e.x,o=e.y,a=e.z;e=e.w;var s=e*t+o*n-a*i,l=e*i+a*t-r*n,u=e*n+r*i-o*t;return t=-r*t-o*i-a*n,this.x=s*e+t*-r+l*-a-u*-o,this.y=l*e+t*-o+u*-r-s*-a,this.z=u*e+t*-a+s*-o-l*-r,this},project:function(){var e=new n;return function(t){return e.multiplyMatrices(t.projectionMatrix,e.getInverse(t.matrixWorld)),this.applyMatrix4(e)}}(),unproject:function(){var e=new n;return function(t){return e.multiplyMatrices(t.matrixWorld,e.getInverse(t.projectionMatrix)),this.applyMatrix4(e)}}(),transformDirection:function(e){var t=this.x,i=this.y,n=this.z;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n,this.y=e[1]*t+e[5]*i+e[9]*n,this.z=e[2]*t+e[6]*i+e[10]*n,this.normalize()},divide:function(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this},divideScalar:function(e){return this.multiplyScalar(1/e)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this},clampScalar:function(){var e=new o,t=new o;return function(i,n){return e.set(i,i,i),t.set(n,n,n),this.clamp(e,t)
}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},cross:function(e,t){return void 0!==t?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(e,t)):this.crossVectors(this,e)},crossVectors:function(e,t){var i=e.x,n=e.y;e=e.z;var r=t.x,o=t.y;return t=t.z,this.x=n*t-e*o,this.y=e*r-i*t,this.z=i*o-n*r,this},projectOnVector:function(e){var t=e.dot(this)/e.lengthSq();return this.copy(e).multiplyScalar(t)},projectOnPlane:function(){var e=new o;return function(t){return e.copy(this).projectOnVector(t),this.sub(e)}}(),reflect:function(){var e=new o;return function(t){return this.sub(e.copy(t).multiplyScalar(2*this.dot(t)))}}(),angleTo:function(e){return e=this.dot(e)/Math.sqrt(this.lengthSq()*e.lengthSq()),Math.acos(qo.clamp(e,-1,1))},distanceTo:function(e){return Math.sqrt(this.distanceToSquared(e))},distanceToSquared:function(e){var t=this.x-e.x,i=this.y-e.y;return e=this.z-e.z,t*t+i*i+e*e},manhattanDistanceTo:function(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)},setFromSpherical:function(e){var t=Math.sin(e.phi)*e.radius;return this.x=t*Math.sin(e.theta),this.y=Math.cos(e.phi)*e.radius,this.z=t*Math.cos(e.theta),this},setFromCylindrical:function(e){return this.x=e.radius*Math.sin(e.theta),this.y=e.y,this.z=e.radius*Math.cos(e.theta),this},setFromMatrixPosition:function(e){return e=e.elements,this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(e){var t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length();return e=this.setFromMatrixColumn(e,2).length(),this.x=t,this.y=i,this.z=e,this},setFromMatrixColumn:function(e,t){return this.fromArray(e.elements,4*t)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}}),Object.assign(a.prototype,{isMatrix3:!0,set:function(e,t,i,n,r,o,a,s,l){var u=this.elements;return u[0]=e,u[1]=n,u[2]=a,u[3]=t,u[4]=r,u[5]=s,u[6]=i,u[7]=o,u[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(e){var t=this.elements;return e=e.elements,t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],this},setFromMatrix4:function(e){return e=e.elements,this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var e=new o;return function(t){for(var i=0,n=t.count;n>i;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.applyMatrix3(this),t.setXYZ(i,e.x,e.y,e.z);return t}}(),multiply:function(e){return this.multiplyMatrices(this,e)},premultiply:function(e){return this.multiplyMatrices(e,this)},multiplyMatrices:function(e,t){var i=e.elements,n=t.elements;t=this.elements,e=i[0];var r=i[3],o=i[6],a=i[1],s=i[4],l=i[7],u=i[2],c=i[5];i=i[8];var h=n[0],p=n[3],d=n[6],f=n[1],m=n[4],g=n[7],v=n[2],y=n[5];return n=n[8],t[0]=e*h+r*f+o*v,t[3]=e*p+r*m+o*y,t[6]=e*d+r*g+o*n,t[1]=a*h+s*f+l*v,t[4]=a*p+s*m+l*y,t[7]=a*d+s*g+l*n,t[2]=u*h+c*f+i*v,t[5]=u*p+c*m+i*y,t[8]=u*d+c*g+i*n,this},multiplyScalar:function(e){var t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this},determinant:function(){var e=this.elements,t=e[0],i=e[1],n=e[2],r=e[3],o=e[4],a=e[5],s=e[6],l=e[7];return e=e[8],t*o*e-t*a*l-i*r*e+i*a*s+n*r*l-n*o*s},getInverse:function(e,t){e&&e.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var i=e.elements;e=this.elements;var n=i[0],r=i[1],o=i[2],a=i[3],s=i[4],l=i[5],u=i[6],c=i[7];i=i[8];var h=i*s-l*c,p=l*u-i*a,d=c*a-s*u,f=n*h+r*p+o*d;if(0===f){if(!0===t)throw Error("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0");return console.warn("THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0"),this.identity()}return t=1/f,e[0]=h*t,e[1]=(o*c-i*r)*t,e[2]=(l*r-o*s)*t,e[3]=p*t,e[4]=(i*n-o*u)*t,e[5]=(o*a-l*n)*t,e[6]=d*t,e[7]=(r*u-c*n)*t,e[8]=(s*n-r*a)*t,this},transpose:function(){var e=this.elements,t=e[1];return e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(e){return this.setFromMatrix4(e).getInverse(this).transpose()},transposeIntoArray:function(e){var t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this},setUvTransform:function(e,t,i,n,r,o,a){var s=Math.cos(r);r=Math.sin(r),this.set(i*s,i*r,-i*(s*o+r*a)+o+e,-n*r,n*s,-n*(-r*o+s*a)+a+t,0,0,1)},scale:function(e,t){var i=this.elements;return i[0]*=e,i[3]*=e,i[6]*=e,i[1]*=t,i[4]*=t,i[7]*=t,this},rotate:function(e){var t=Math.cos(e);e=Math.sin(e);var i=this.elements,n=i[0],r=i[3],o=i[6],a=i[1],s=i[4],l=i[7];return i[0]=t*n+e*a,i[3]=t*r+e*s,i[6]=t*o+e*l,i[1]=-e*n+t*a,i[4]=-e*r+t*s,i[7]=-e*o+t*l,this},translate:function(e,t){var i=this.elements;return i[0]+=e*i[2],i[3]+=e*i[5],i[6]+=e*i[8],i[1]+=t*i[2],i[4]+=t*i[5],i[7]+=t*i[8],this},equals:function(e){var t=this.elements;e=e.elements;for(var i=0;9>i;i++)if(t[i]!==e[i])return!1;return!0},fromArray:function(e,t){void 0===t&&(t=0);for(var i=0;9>i;i++)this.elements[i]=e[i+t];return this},toArray:function(e,t){void 0===e&&(e=[]),void 0===t&&(t=0);var i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}});var Jo=0;s.DEFAULT_IMAGE=void 0,s.DEFAULT_MAPPING=300,s.prototype=Object.assign(Object.create(t.prototype),{constructor:s,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.name=e.name,this.image=e.image,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.encoding=e.encoding,this},toJSON:function(e){var t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];var i={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY};if(void 0!==this.image){var n=this.image;if(void 0===n.uuid&&(n.uuid=qo.generateUUID()),!t&&void 0===e.images[n.uuid]){var r=e.images,o=n.uuid,a=n.uuid;if(n instanceof HTMLCanvasElement)var s=n;else{s=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),s.width=n.width,s.height=n.height;var l=s.getContext("2d");n instanceof ImageData?l.putImageData(n,0,0):l.drawImage(n,0,0,n.width,n.height)}s=2048<s.width||2048<s.height?s.toDataURL("image/jpeg",.6):s.toDataURL("image/png"),r[o]={uuid:a,url:s}}i.image=n.uuid}return t||(e.textures[this.uuid]=i),i},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(e){if(300===this.mapping){if(e.applyMatrix3(this.matrix),0>e.x||1<e.x)switch(this.wrapS){case 1e3:e.x-=Math.floor(e.x);break;case 1001:e.x=0>e.x?0:1;break;case 1002:e.x=1===Math.abs(Math.floor(e.x)%2)?Math.ceil(e.x)-e.x:e.x-Math.floor(e.x)}if(0>e.y||1<e.y)switch(this.wrapT){case 1e3:e.y-=Math.floor(e.y);break;case 1001:e.y=0>e.y?0:1;break;case 1002:e.y=1===Math.abs(Math.floor(e.y)%2)?Math.ceil(e.y)-e.y:e.y-Math.floor(e.y)}this.flipY&&(e.y=1-e.y)}}}),Object.defineProperty(s.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(l.prototype,{isVector4:!0,set:function(e,t,i,n){return this.x=e,this.y=t,this.z=i,this.w=n,this},setScalar:function(e){return this.w=this.z=this.y=this.x=e,this},setX:function(e){return this.x=e,this},setY:function(e){return this.y=e,this},setZ:function(e){return this.z=e,this},setW:function(e){return this.w=e,this},setComponent:function(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw Error("index is out of range: "+e)}return this},getComponent:function(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+e)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this},add:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(e,t)):(this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this)},addScalar:function(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this},addVectors:function(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this},addScaledVector:function(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this},sub:function(e,t){return void 0!==t?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(e,t)):(this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this)},subScalar:function(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this},subVectors:function(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this},multiplyScalar:function(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this},applyMatrix4:function(e){var t=this.x,i=this.y,n=this.z,r=this.w;return e=e.elements,this.x=e[0]*t+e[4]*i+e[8]*n+e[12]*r,this.y=e[1]*t+e[5]*i+e[9]*n+e[13]*r,this.z=e[2]*t+e[6]*i+e[10]*n+e[14]*r,this.w=e[3]*t+e[7]*i+e[11]*n+e[15]*r,this},divideScalar:function(e){return this.multiplyScalar(1/e)},setAxisAngleFromQuaternion:function(e){this.w=2*Math.acos(e.w);var t=Math.sqrt(1-e.w*e.w);return 1e-4>t?(this.x=1,this.z=this.y=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this},setAxisAngleFromRotationMatrix:function(e){e=e.elements;var t=e[0],i=e[4],n=e[8],r=e[1],o=e[5],a=e[9],s=e[2],l=e[6],u=e[10];return.01>Math.abs(i-r)&&.01>Math.abs(n-s)&&.01>Math.abs(a-l)?.1>Math.abs(i+r)&&.1>Math.abs(n+s)&&.1>Math.abs(a+l)&&.1>Math.abs(t+o+u-3)?(this.set(1,0,0,0),this):(e=Math.PI,t=(t+1)/2,o=(o+1)/2,u=(u+1)/2,i=(i+r)/4,n=(n+s)/4,a=(a+l)/4,t>o&&t>u?.01>t?(l=0,i=s=.707106781):(l=Math.sqrt(t),s=i/l,i=n/l):o>u?.01>o?(l=.707106781,s=0,i=.707106781):(s=Math.sqrt(o),l=i/s,i=a/s):.01>u?(s=l=.707106781,i=0):(i=Math.sqrt(u),l=n/i,s=a/i),this.set(l,s,i,e),this):(e=Math.sqrt((l-a)*(l-a)+(n-s)*(n-s)+(r-i)*(r-i)),.001>Math.abs(e)&&(e=1),this.x=(l-a)/e,this.y=(n-s)/e,this.z=(r-i)/e,this.w=Math.acos((t+o+u-1)/2),this)},min:function(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this},max:function(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this},clamp:function(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this},clampScalar:function(){var e,t;return function(i,n){return void 0===e&&(e=new l,t=new l),e.set(i,i,i,i),t.set(n,n,n,n),this.clamp(e,t)}}(),clampLength:function(e,t){var i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x),this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y),this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z),this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(e){return this.normalize().multiplyScalar(e)},lerp:function(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this},lerpVectors:function(e,t,i){return this.subVectors(t,e).multiplyScalar(i).add(e)},equals:function(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w},fromArray:function(e,t){return void 0===t&&(t=0),this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e},fromBufferAttribute:function(e,t,i){return void 0!==i&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}}),u.prototype=Object.assign(Object.create(t.prototype),{constructor:u,isWebGLRenderTarget:!0,setSize:function(e,t){(this.width!==e||this.height!==t)&&(this.width=e,this.height=t,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.width=e.width,this.height=e.height,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.depthTexture=e.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),c.prototype=Object.create(u.prototype),c.prototype.constructor=c,c.prototype.isWebGLRenderTargetCube=!0,h.prototype=Object.create(s.prototype),h.prototype.constructor=h,h.prototype.isDataTexture=!0,Object.assign(p.prototype,{isBox3:!0,set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromArray:function(e){for(var t=1/0,i=1/0,n=1/0,r=-(1/0),o=-(1/0),a=-(1/0),s=0,l=e.length;l>s;s+=3){var u=e[s],c=e[s+1],h=e[s+2];t>u&&(t=u),i>c&&(i=c),n>h&&(n=h),u>r&&(r=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,i,n),this.max.set(r,o,a),this},setFromBufferAttribute:function(e){for(var t=1/0,i=1/0,n=1/0,r=-(1/0),o=-(1/0),a=-(1/0),s=0,l=e.count;l>s;s++){var u=e.getX(s),c=e.getY(s),h=e.getZ(s);t>u&&(t=u),i>c&&(i=c),n>h&&(n=h),u>r&&(r=u),c>o&&(o=c),h>a&&(a=h)}return this.min.set(t,i,n),this.max.set(r,o,a),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new o;return function(t,i){return i=e.copy(i).multiplyScalar(.5),this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),setFromObject:function(e){return this.makeEmpty(),this.expandByObject(e)},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box3: .getCenter() target is now required"),e=new o),this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box3: .getSize() target is now required"),e=new o),this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},expandByObject:function(){function e(e){var o=e.geometry;if(void 0!==o)if(o.isGeometry)for(o=o.vertices,i=0,n=o.length;n>i;i++)r.copy(o[i]),r.applyMatrix4(e.matrixWorld),t.expandByPoint(r);else if(o.isBufferGeometry&&(o=o.attributes.position,void 0!==o))for(i=0,n=o.count;n>i;i++)r.fromBufferAttribute(o,i).applyMatrix4(e.matrixWorld),t.expandByPoint(r)}var t,i,n,r=new o;return function(i){return t=this,i.updateMatrixWorld(!0),i.traverse(e),this}}(),containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .getParameter() target is now required"),t=new o),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z?!1:!0},intersectsSphere:function(){var e=new o;return function(t){return this.clampPoint(t.center,e),e.distanceToSquared(t.center)<=t.radius*t.radius}}(),intersectsPlane:function(e){if(0<e.normal.x)var t=e.normal.x*this.min.x,i=e.normal.x*this.max.x;else t=e.normal.x*this.max.x,i=e.normal.x*this.min.x;return 0<e.normal.y?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),0<e.normal.z?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=e.constant&&i>=e.constant},intersectsTriangle:function(){function e(e){var r,o=0;for(r=e.length-3;r>=o;o+=3){l.fromArray(e,o);var a=c.x*Math.abs(l.x)+c.y*Math.abs(l.y)+c.z*Math.abs(l.z),s=t.dot(l),u=i.dot(l),h=n.dot(l);if(Math.max(-Math.max(s,u,h),Math.min(s,u,h))>a)return!1}return!0}var t=new o,i=new o,n=new o,r=new o,a=new o,s=new o,l=new o,u=new o,c=new o,h=new o;return function(o){return this.isEmpty()?!1:(this.getCenter(u),c.subVectors(this.max,u),t.subVectors(o.a,u),i.subVectors(o.b,u),n.subVectors(o.c,u),r.subVectors(i,t),a.subVectors(n,i),s.subVectors(t,n),o=[0,-r.z,r.y,0,-a.z,a.y,0,-s.z,s.y,r.z,0,-r.x,a.z,0,-a.x,s.z,0,-s.x,-r.y,r.x,0,-a.y,a.x,0,-s.y,s.x,0],e(o)?(o=[1,0,0,0,1,0,0,0,1],e(o)?(h.crossVectors(r,a),o=[h.x,h.y,h.z],e(o)):!1):!1)}}(),clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box3: .clampPoint() target is now required"),t=new o),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new o;return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),getBoundingSphere:function(){var e=new o;return function(t){return void 0===t&&(console.warn("THREE.Box3: .getBoundingSphere() target is now required"),t=new d),this.getCenter(t.center),t.radius=.5*this.getSize(e).length(),t}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},applyMatrix4:function(){var e=[new o,new o,new o,new o,new o,new o,new o,new o];return function(t){return this.isEmpty()?this:(e[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),e[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),e[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),e[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),e[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),e[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),e[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),e[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(e),this)}}(),translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Object.assign(d.prototype,{set:function(e,t){return this.center.copy(e),this.radius=t,this},setFromPoints:function(){var e=new p;return function(t,i){var n=this.center;void 0!==i?n.copy(i):e.setFromPoints(t).getCenter(n);for(var r=i=0,o=t.length;o>r;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.center.copy(e.center),this.radius=e.radius,this},empty:function(){return 0>=this.radius},containsPoint:function(e){return e.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(e){return e.distanceTo(this.center)-this.radius},intersectsSphere:function(e){var t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t},intersectsBox:function(e){return e.intersectsSphere(this)},intersectsPlane:function(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius},clampPoint:function(e,t){var i=this.center.distanceToSquared(e);return void 0===t&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),t=new o),t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t},getBoundingBox:function(e){return void 0===e&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),e=new p),e.set(this.center,this.center),e.expandByScalar(this.radius),e},applyMatrix4:function(e){return this.center.applyMatrix4(e),this.radius*=e.getMaxScaleOnAxis(),this},translate:function(e){return this.center.add(e),this},equals:function(e){return e.center.equals(this.center)&&e.radius===this.radius}}),Object.assign(f.prototype,{set:function(e,t){return this.normal.copy(e),this.constant=t,this},setComponents:function(e,t,i,n){return this.normal.set(e,t,i),this.constant=n,this},setFromNormalAndCoplanarPoint:function(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this},setFromCoplanarPoints:function(){var e=new o,t=new o;return function(i,n,r){return n=e.subVectors(r,n).cross(t.subVectors(i,n)).normalize(),this.setFromNormalAndCoplanarPoint(n,i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.normal.copy(e.normal),this.constant=e.constant,this},normalize:function(){var e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(e){return this.normal.dot(e)+this.constant},distanceToSphere:function(e){return this.distanceToPoint(e.center)-e.radius},projectPoint:function(e,t){return void 0===t&&(console.warn("THREE.Plane: .projectPoint() target is now required"),t=new o),t.copy(this.normal).multiplyScalar(-this.distanceToPoint(e)).add(e)},intersectLine:function(){var e=new o;return function(t,i){void 0===i&&(console.warn("THREE.Plane: .intersectLine() target is now required"),i=new o);var n=t.delta(e),r=this.normal.dot(n);if(0===r){if(0===this.distanceToPoint(t.start))return i.copy(t.start)}else if(r=-(t.start.dot(this.normal)+this.constant)/r,!(0>r||r>1))return i.copy(n).multiplyScalar(r).add(t.start)}}(),intersectsLine:function(e){var t=this.distanceToPoint(e.start);return e=this.distanceToPoint(e.end),0>t&&e>0||0>e&&t>0},intersectsBox:function(e){return e.intersectsPlane(this)},intersectsSphere:function(e){return e.intersectsPlane(this)},coplanarPoint:function(e){return void 0===e&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),e=new o),e.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var e=new o,t=new a;return function(i,n){return n=n||t.getNormalMatrix(i),i=this.coplanarPoint(e).applyMatrix4(i),n=this.normal.applyMatrix3(n).normalize(),this.constant=-i.dot(n),this}}(),translate:function(e){return this.constant-=e.dot(this.normal),this},equals:function(e){return e.normal.equals(this.normal)&&e.constant===this.constant}}),Object.assign(m.prototype,{set:function(e,t,i,n,r,o){var a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(n),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){for(var t=this.planes,i=0;6>i;i++)t[i].copy(e.planes[i]);return this},setFromMatrix:function(e){var t=this.planes,i=e.elements;e=i[0];var n=i[1],r=i[2],o=i[3],a=i[4],s=i[5],l=i[6],u=i[7],c=i[8],h=i[9],p=i[10],d=i[11],f=i[12],m=i[13],g=i[14];return i=i[15],t[0].setComponents(o-e,u-a,d-c,i-f).normalize(),t[1].setComponents(o+e,u+a,d+c,i+f).normalize(),t[2].setComponents(o+n,u+s,d+h,i+m).normalize(),t[3].setComponents(o-n,u-s,d-h,i-m).normalize(),t[4].setComponents(o-r,u-l,d-p,i-g).normalize(),t[5].setComponents(o+r,u+l,d+p,i+g).normalize(),this},intersectsObject:function(){var e=new d;return function(t){var i=t.geometry;return null===i.boundingSphere&&i.computeBoundingSphere(),e.copy(i.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSprite:function(){var e=new d;return function(t){return e.center.set(0,0,0),e.radius=.7071067811865476,e.applyMatrix4(t.matrixWorld),this.intersectsSphere(e)}}(),intersectsSphere:function(e){var t=this.planes,i=e.center;e=-e.radius;for(var n=0;6>n;n++)if(t[n].distanceToPoint(i)<e)return!1;return!0},intersectsBox:function(){var e=new o,t=new o;return function(i){for(var n=this.planes,r=0;6>r;r++){var o=n[r];e.x=0<o.normal.x?i.min.x:i.max.x,t.x=0<o.normal.x?i.max.x:i.min.x,e.y=0<o.normal.y?i.min.y:i.max.y,t.y=0<o.normal.y?i.max.y:i.min.y,e.z=0<o.normal.z?i.min.z:i.max.z,t.z=0<o.normal.z?i.max.z:i.min.z;var a=o.distanceToPoint(e);if(o=o.distanceToPoint(t),0>a&&0>o)return!1}return!0}}(),containsPoint:function(e){for(var t=this.planes,i=0;6>i;i++)if(0>t[i].distanceToPoint(e))return!1;return!0}});var Zo={alphamap_fragment:"#ifdef USE_ALPHAMAP\n	diffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif\n",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n	uniform sampler2D alphaMap;\n#endif\n",alphatest_fragment:"#ifdef ALPHATEST\n	if ( diffuseColor.a < ALPHATEST ) discard;\n#endif\n",aomap_fragment:"#ifdef USE_AOMAP\n	float ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n	reflectedLight.indirectDiffuse *= ambientOcclusion;\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n	#endif\n#endif\n",aomap_pars_fragment:"#ifdef USE_AOMAP\n	uniform sampler2D aoMap;\n	uniform float aoMapIntensity;\n#endif",begin_vertex:"\nvec3 transformed = vec3( position );\n",beginnormal_vertex:"\nvec3 objectNormal = vec3( normal );\n",bsdfs:"float punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n	if( decayExponent > 0.0 ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n		float maxDistanceCutoffFactor = pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n		return distanceFalloff * maxDistanceCutoffFactor;\n#else\n		return pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n#endif\n	}\n	return 1.0;\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n	return RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n	float fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n	return ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	float gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	return 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n	float a2 = pow2( alpha );\n	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n	return 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n	float a2 = pow2( alpha );\n	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n	return RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float alpha = pow2( roughness );\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n	float D = D_GGX( alpha, dotNH );\n	return F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n	const float LUT_SIZE  = 64.0;\n	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n	const float LUT_BIAS  = 0.5 / LUT_SIZE;\n	float dotNV = saturate( dot( N, V ) );\n	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n	uv = uv * LUT_SCALE + LUT_BIAS;\n	return uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n	float l = length( f );\n	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n	float x = dot( v1, v2 );\n	float y = abs( x );\n	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n	float b = 3.4175940 + ( 4.1616724 + y ) * y;\n	float v = a / b;\n	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n	return cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n	vec3 lightNormal = cross( v1, v2 );\n	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n	vec3 T1, T2;\n	T1 = normalize( V - N * dot( V, N ) );\n	T2 = - cross( N, T1 );\n	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n	vec3 coords[ 4 ];\n	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n	coords[ 0 ] = normalize( coords[ 0 ] );\n	coords[ 1 ] = normalize( coords[ 1 ] );\n	coords[ 2 ] = normalize( coords[ 2 ] );\n	coords[ 3 ] = normalize( coords[ 3 ] );\n	vec3 vectorFormFactor = vec3( 0.0 );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n	return vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n	float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n	vec4 r = roughness * c0 + c1;\n	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n	vec2 AB = vec2( -1.04, 1.04 ) * a004 + r.zw;\n	return specularColor * AB.x + AB.y;\n}\nfloat G_BlinnPhong_Implicit( ) {\n	return 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n	vec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n	float dotNH = saturate( dot( geometry.normal, halfDir ) );\n	float dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n	vec3 F = F_Schlick( specularColor, dotLH );\n	float G = G_BlinnPhong_Implicit( );\n	float D = D_BlinnPhong( shininess, dotNH );\n	return F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n	return ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n	return sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n	vec2 dHdxy_fwd() {\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n		return vec2( dBx, dBy );\n	}\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n		vec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n		vec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n		vec3 vN = surf_norm;\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n		float fDet = dot( vSigmaX, R1 );\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n	}\n#endif\n",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n	vec4 plane;\n	#pragma unroll_loop\n	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n		plane = clippingPlanes[ i ];\n		if ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n	}\n	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n		bool clipped = true;\n		#pragma unroll_loop\n		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n			plane = clippingPlanes[ i ];\n			clipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n		}\n		if ( clipped ) discard;\n	#endif\n#endif\n",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n	#if ! defined( PHYSICAL ) && ! defined( PHONG )\n		varying vec3 vViewPosition;\n	#endif\n	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif\n",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	varying vec3 vViewPosition;\n#endif\n",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG )\n	vViewPosition = - mvPosition.xyz;\n#endif\n",color_fragment:"#ifdef USE_COLOR\n	diffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif\n",color_pars_vertex:"#ifdef USE_COLOR\n	varying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n	vColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n	const highp float a = 12.9898, b = 78.233, c = 43758.5453;\n	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n	return fract(sin(sn) * c);\n}\nstruct IncidentLight {\n	vec3 color;\n	vec3 direction;\n	bool visible;\n};\nstruct ReflectedLight {\n	vec3 directDiffuse;\n	vec3 directSpecular;\n	vec3 indirectDiffuse;\n	vec3 indirectSpecular;\n};\nstruct GeometricContext {\n	vec3 position;\n	vec3 normal;\n	vec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	float distance = dot( planeNormal, point - pointOnPlane );\n	return - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n	return lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n	mat3 tmp;\n	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n	return tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n	vec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n	return dot( weights, color.rgb );\n}\n",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n	vec3 absDirection = abs(direction);\n	int face = -1;\n	if( absDirection.x > absDirection.z ) {\n		if(absDirection.x > absDirection.y )\n			face = direction.x > 0.0 ? 0 : 3;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	else {\n		if(absDirection.z > absDirection.y )\n			face = direction.z > 0.0 ? 2 : 5;\n		else\n			face = direction.y > 0.0 ? 1 : 4;\n	}\n	return face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n	float scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n	float dxRoughness = dFdx(roughness);\n	float dyRoughness = dFdy(roughness);\n	vec3 dx = dFdx( vec * scale * dxRoughness );\n	vec3 dy = dFdy( vec * scale * dyRoughness );\n	float d = max( dot( dx, dx ), dot( dy, dy ) );\n	d = clamp(d, 1.0, cubeUV_rangeClamp);\n	float mipLevel = 0.5 * log2(d);\n	return vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n	mipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n	float a = 16.0 * cubeUV_rcpTextureSize;\n	vec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n	vec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n	float powScale = exp2_packed.x * exp2_packed.y;\n	float scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n	float mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n	bool bRes = mipLevel == 0.0;\n	scale =  bRes && (scale < a) ? a : scale;\n	vec3 r;\n	vec2 offset;\n	int face = getFaceFromDirection(direction);\n	float rcpPowScale = 1.0 / powScale;\n	if( face == 0) {\n		r = vec3(direction.x, -direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 1) {\n		r = vec3(direction.y, direction.x, direction.z);\n		offset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 2) {\n		r = vec3(direction.z, direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n	}\n	else if( face == 3) {\n		r = vec3(direction.x, direction.z, direction.y);\n		offset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else if( face == 4) {\n		r = vec3(direction.y, direction.x, -direction.z);\n		offset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	else {\n		r = vec3(direction.z, -direction.x, direction.y);\n		offset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n		offset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n	}\n	r = normalize(r);\n	float texelOffset = 0.5 * cubeUV_rcpTextureSize;\n	vec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n	vec2 base = offset + vec2( texelOffset );\n	return base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV(vec3 reflectedDirection, float roughness ) {\n	float roughnessVal = roughness* cubeUV_maxLods3;\n	float r1 = floor(roughnessVal);\n	float r2 = r1 + 1.0;\n	float t = fract(roughnessVal);\n	vec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n	float s = mipInfo.y;\n	float level0 = mipInfo.x;\n	float level1 = level0 + 1.0;\n	level1 = level1 > 5.0 ? 5.0 : level1;\n	level0 += min( floor( s + 0.5 ), 5.0 );\n	vec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n	vec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n	vec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n	vec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n	vec4 result = mix(color10, color20, t);\n	return vec4(result.rgb, 1.0);\n}\n#endif\n",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n	transformedNormal = - transformedNormal;\n#endif\n",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n	uniform sampler2D displacementMap;\n	uniform float displacementScale;\n	uniform float displacementBias;\n#endif\n",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif\n",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n	vec4 emissiveColor = texture2D( emissiveMap, vUv );\n	emissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n	totalEmissiveRadiance *= emissiveColor.rgb;\n#endif\n",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n	uniform sampler2D emissiveMap;\n#endif\n",encodings_fragment:"  gl_FragColor = linearToOutputTexel( gl_FragColor );\n",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n	return value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n	return vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n	return vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n	float maxComponent = max( max( value.r, value.g ), value.b );\n	float fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n	return vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.xyz * value.w * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float M      = clamp( maxRGB / maxRange, 0.0, 1.0 );\n	M            = ceil( M * 255.0 ) / 255.0;\n	return vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n	return vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n	float maxRGB = max( value.x, max( value.g, value.b ) );\n	float D      = max( maxRange / maxRGB, 1.0 );\n	D            = min( floor( D ) / 255.0, 1.0 );\n	return vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n	vec3 Xp_Y_XYZp = value.rgb * cLogLuvM;\n	Xp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));\n	vec4 vResult;\n	vResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n	float Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n	vResult.w = fract(Le);\n	vResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;\n	return vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n	float Le = value.z * 255.0 + value.w;\n	vec3 Xp_Y_XYZp;\n	Xp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);\n	Xp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n	Xp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n	vec3 vRGB = Xp_Y_XYZp.rgb * cLogLuvInverseM;\n	return vec4( max(vRGB, 0.0), 1.0 );\n}\n",envmap_fragment:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n		#else\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#else\n		vec3 reflectVec = vReflect;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		reflectVec = normalize( reflectVec );\n		sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n		sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n		vec4 envColor = texture2D( envMap, sampleUV );\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		reflectVec = normalize( reflectVec );\n		vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#else\n		vec4 envColor = vec4( 0.0 );\n	#endif\n	envColor = envMapTexelToLinear( envColor );\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_MIX )\n		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n	#elif defined( ENVMAP_BLENDING_ADD )\n		outgoingLight += envColor.xyz * specularStrength * reflectivity;\n	#endif\n#endif\n",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n	uniform float reflectivity;\n	uniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n	#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n		varying vec3 vWorldPosition;\n	#endif\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n	uniform int maxMipLevel;\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n		uniform float refractionRatio;\n	#else\n		varying vec3 vReflect;\n	#endif\n#endif\n",envmap_pars_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		varying vec3 vWorldPosition;\n	#else\n		varying vec3 vReflect;\n		uniform float refractionRatio;\n	#endif\n#endif\n",envmap_vertex:"#ifdef USE_ENVMAP\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n		vWorldPosition = worldPosition.xyz;\n	#else\n		vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n		#ifdef ENVMAP_MODE_REFLECTION\n			vReflect = reflect( cameraToVertex, worldNormal );\n		#else\n			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n		#endif\n	#endif\n#endif\n",fog_vertex:"\n#ifdef USE_FOG\nfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n  varying float fogDepth;\n#endif\n",fog_fragment:"#ifdef USE_FOG\n	#ifdef FOG_EXP2\n		float fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n	#else\n		float fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n	#endif\n	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif\n",fog_pars_fragment:"#ifdef USE_FOG\n	uniform vec3 fogColor;\n	varying float fogDepth;\n	#ifdef FOG_EXP2\n		uniform float fogDensity;\n	#else\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n#endif\n",gradientmap_pars_fragment:"#ifdef TOON\n	uniform sampler2D gradientMap;\n	vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n		float dotNL = dot( normal, lightDirection );\n		vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n		#ifdef USE_GRADIENTMAP\n			return texture2D( gradientMap, coord ).rgb;\n		#else\n			return ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n		#endif\n	}\n#endif\n",lightmap_fragment:"#ifdef USE_LIGHTMAP\n	reflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif\n",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n	uniform sampler2D lightMap;\n	uniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n	vLightBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		getPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		getSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		getDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n		dotNL = dot( geometry.normal, directLight.direction );\n		directLightColor_Diffuse = PI * directLight.color;\n		vLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n		#ifdef DOUBLE_SIDED\n			vLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n		#endif\n	}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n		vLightFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		#ifdef DOUBLE_SIDED\n			vLightBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n		#endif\n	}\n#endif\n",lights_pars_begin:"uniform vec3 ambientLightColor;\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n	vec3 irradiance = ambientLightColor;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	return irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n	struct DirectionalLight {\n		vec3 direction;\n		vec3 color;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n	void getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		directLight.color = directionalLight.color;\n		directLight.direction = directionalLight.direction;\n		directLight.visible = true;\n	}\n#endif\n#if NUM_POINT_LIGHTS > 0\n	struct PointLight {\n		vec3 position;\n		vec3 color;\n		float distance;\n		float decay;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n		float shadowCameraNear;\n		float shadowCameraFar;\n	};\n	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n	void getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n		vec3 lVector = pointLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		directLight.color = pointLight.color;\n		directLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n		directLight.visible = ( directLight.color != vec3( 0.0 ) );\n	}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n	struct SpotLight {\n		vec3 position;\n		vec3 direction;\n		vec3 color;\n		float distance;\n		float decay;\n		float coneCos;\n		float penumbraCos;\n		int shadow;\n		float shadowBias;\n		float shadowRadius;\n		vec2 shadowMapSize;\n	};\n	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n	void getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n		vec3 lVector = spotLight.position - geometry.position;\n		directLight.direction = normalize( lVector );\n		float lightDistance = length( lVector );\n		float angleCos = dot( directLight.direction, spotLight.direction );\n		if ( angleCos > spotLight.coneCos ) {\n			float spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n			directLight.color = spotLight.color;\n			directLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n			directLight.visible = true;\n		} else {\n			directLight.color = vec3( 0.0 );\n			directLight.visible = false;\n		}\n	}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n	struct RectAreaLight {\n		vec3 color;\n		vec3 position;\n		vec3 halfWidth;\n		vec3 halfHeight;\n	};\n	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;\n	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n	struct HemisphereLight {\n		vec3 direction;\n		vec3 skyColor;\n		vec3 groundColor;\n	};\n	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n		float dotNL = dot( geometry.normal, hemiLight.direction );\n		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			irradiance *= PI;\n		#endif\n		return irradiance;\n	}\n#endif\n",lights_pars_maps:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n	vec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n		vec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n			vec4 envMapColor = textureCubeUV( queryVec, 1.0 );\n		#else\n			vec4 envMapColor = vec4( 0.0 );\n		#endif\n		return PI * envMapColor.rgb * envMapIntensity;\n	}\n	float getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		float maxMIPLevelScalar = float( maxMIPLevel );\n		float desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n		return clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n	}\n	vec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n		#ifdef ENVMAP_MODE_REFLECTION\n			vec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n		#else\n			vec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n		#endif\n		reflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n		float specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n		#ifdef ENVMAP_TYPE_CUBE\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n			#else\n				vec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_CUBE_UV )\n			vec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n			vec4 envMapColor = textureCubeUV(queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent));\n		#elif defined( ENVMAP_TYPE_EQUIREC )\n			vec2 sampleUV;\n			sampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n			sampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#elif defined( ENVMAP_TYPE_SPHERE )\n			vec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n			#ifdef TEXTURE_LOD_EXT\n				vec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#else\n				vec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n			#endif\n			envMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n		#endif\n		return envMapColor.rgb * envMapIntensity;\n	}\n#endif\n",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n	vec3	diffuseColor;\n	vec3	specularColor;\n	float	specularShininess;\n	float	specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifdef TOON\n		vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n	#else\n		float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n		vec3 irradiance = dotNL * directLight.color;\n	#endif\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	reflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	reflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct				RE_Direct_BlinnPhong\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )	(0)\n",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n	material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n	material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n	material.clearCoat = saturate( clearCoat );	material.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif\n",lights_physical_pars_fragment:"struct PhysicalMaterial {\n	vec3	diffuseColor;\n	float	specularRoughness;\n	vec3	specularColor;\n	#ifndef STANDARD\n		float clearCoat;\n		float clearCoatRoughness;\n	#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n	return DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n		vec3 normal = geometry.normal;\n		vec3 viewDir = geometry.viewDir;\n		vec3 position = geometry.position;\n		vec3 lightPos = rectAreaLight.position;\n		vec3 halfWidth = rectAreaLight.halfWidth;\n		vec3 halfHeight = rectAreaLight.halfHeight;\n		vec3 lightColor = rectAreaLight.color;\n		float roughness = material.specularRoughness;\n		vec3 rectCoords[ 4 ];\n		rectCoords[ 0 ] = lightPos - halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos + halfWidth - halfHeight;\n		rectCoords[ 2 ] = lightPos + halfWidth + halfHeight;\n		rectCoords[ 3 ] = lightPos - halfWidth + halfHeight;\n		vec2 uv = LTC_Uv( normal, viewDir, roughness );\n		vec4 t1 = texture2D( ltc_1, uv );\n		vec4 t2 = texture2D( ltc_2, uv );\n		mat3 mInv = mat3(\n			vec3( t1.x, 0, t1.y ),\n			vec3(    0, 1,    0 ),\n			vec3( t1.z, 0, t1.w )\n		);\n		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n	}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n	vec3 irradiance = dotNL * directLight.color;\n	#ifndef PHYSICALLY_CORRECT_LIGHTS\n		irradiance *= PI;\n	#endif\n	#ifndef STANDARD\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n	reflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n	#ifndef STANDARD\n		reflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	reflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n	#ifndef STANDARD\n		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n		float dotNL = dotNV;\n		float clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n	#else\n		float clearCoatDHR = 0.0;\n	#endif\n	reflectedLight.indirectSpecular += ( 1.0 - clearCoatDHR ) * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n	#ifndef STANDARD\n		reflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n	#endif\n}\n#define RE_Direct				RE_Direct_Physical\n#define RE_Direct_RectArea		RE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular		RE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}\n",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		getPointDirectLightIrradiance( pointLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		getSpotDirectLightIrradiance( spotLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		getDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n		#ifdef USE_SHADOWMAP\n		directLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n		#endif\n		RE_Direct( directLight, geometry, material, reflectedLight );\n	}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n	RectAreaLight rectAreaLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n		rectAreaLight = rectAreaLights[ i ];\n		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n	}\n#endif\n#if defined( RE_IndirectDiffuse )\n	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n	#if ( NUM_HEMI_LIGHTS > 0 )\n		#pragma unroll_loop\n		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n		}\n	#endif\n#endif\n#if defined( RE_IndirectSpecular )\n	vec3 radiance = vec3( 0.0 );\n	vec3 clearCoatRadiance = vec3( 0.0 );\n#endif\n",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n	#ifdef USE_LIGHTMAP\n		vec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n		#ifndef PHYSICALLY_CORRECT_LIGHTS\n			lightMapIrradiance *= PI;\n		#endif\n		irradiance += lightMapIrradiance;\n	#endif\n	#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n		irradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n	#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n	radiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n	#ifndef STANDARD\n		clearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n	#endif\n#endif\n",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n	RE_IndirectSpecular( radiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif\n",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n	gl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#ifdef USE_LOGDEPTHBUF\n	uniform float logDepthBufFC;\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n#endif\n",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		varying float vFragDepth;\n	#endif\n	uniform float logDepthBufFC;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n	#ifdef USE_LOGDEPTHBUF_EXT\n		vFragDepth = 1.0 + gl_Position.w;\n	#else\n		gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n		gl_Position.z *= gl_Position.w;\n	#endif\n#endif\n",map_fragment:"#ifdef USE_MAP\n	vec4 texelColor = texture2D( map, vUv );\n	texelColor = mapTexelToLinear( texelColor );\n	diffuseColor *= texelColor;\n#endif\n",map_pars_fragment:"#ifdef USE_MAP\n	uniform sampler2D map;\n#endif\n",map_particle_fragment:"#ifdef USE_MAP\n	vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n	vec4 mapTexel = texture2D( map, uv );\n	diffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n",map_particle_pars_fragment:"#ifdef USE_MAP\n	uniform mat3 uvTransform;\n	uniform sampler2D map;\n#endif\n",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n	vec4 texelMetalness = texture2D( metalnessMap, vUv );\n	metalnessFactor *= texelMetalness.b;\n#endif\n",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n	uniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n	objectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	objectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	objectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	objectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif\n",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n	#ifndef USE_MORPHNORMALS\n	uniform float morphTargetInfluences[ 8 ];\n	#else\n	uniform float morphTargetInfluences[ 4 ];\n	#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n	transformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	transformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	transformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	transformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n	#ifndef USE_MORPHNORMALS\n	transformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	transformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	transformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	transformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n	#endif\n#endif\n",normal_fragment_begin:"#ifdef FLAT_SHADED\n	vec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n	vec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n	vec3 normal = normalize( cross( fdx, fdy ) );\n#else\n	vec3 normal = normalize( vNormal );\n	#ifdef DOUBLE_SIDED\n		normal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n	#endif\n#endif\n",normal_fragment_maps:"#ifdef USE_NORMALMAP\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n#elif defined( USE_BUMPMAP )\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif\n",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n		vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n		vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n		float scale = sign( st1.t * st0.s - st0.t * st1.s );		scale *= float( gl_FrontFacing ) * 2.0 - 1.0;\n		vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n		vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n		vec3 N = normalize( surf_norm );\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n	}\n#endif\n",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n	return normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n	return 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n	vec4 r = vec4( fract( v * PackFactors ), v );\n	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n	return dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n	return ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n	return linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n	return (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n	return ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n	gl_FragColor.rgb *= gl_FragColor.a;\n#endif\n",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;\n",dithering_fragment:"#if defined( DITHERING )\n  gl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif\n",dithering_pars_fragment:"#if defined( DITHERING )\n	vec3 dithering( vec3 color ) {\n		float grid_position = rand( gl_FragCoord.xy );\n		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n		return color + dither_shift_RGB;\n	}\n#endif\n",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n	vec4 texelRoughness = texture2D( roughnessMap, vUv );\n	roughnessFactor *= texelRoughness.g;\n#endif\n",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n	uniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n	}\n	float texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n		const vec2 offset = vec2( 0.0, 1.0 );\n		vec2 texelSize = vec2( 1.0 ) / size;\n		vec2 centroidUV = floor( uv * size + 0.5 ) / size;\n		float lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n		float lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n		float rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n		float rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n		vec2 f = fract( uv * size + 0.5 );\n		float a = mix( lb, lt, f.y );\n		float b = mix( rb, rt, f.y );\n		float c = mix( a, b, f.x );\n		return c;\n	}\n	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n		float shadow = 1.0;\n		shadowCoord.xyz /= shadowCoord.w;\n		shadowCoord.z += shadowBias;\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n		bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n		bool frustumTest = all( frustumTestVec );\n		if ( frustumTest ) {\n		#if defined( SHADOWMAP_TYPE_PCF )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n			float dx0 = - texelSize.x * shadowRadius;\n			float dy0 = - texelSize.y * shadowRadius;\n			float dx1 = + texelSize.x * shadowRadius;\n			float dy1 = + texelSize.y * shadowRadius;\n			shadow = (\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n				texture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n			) * ( 1.0 / 9.0 );\n		#else\n			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n		#endif\n		}\n		return shadow;\n	}\n	vec2 cubeToUV( vec3 v, float texelSizeY ) {\n		vec3 absV = abs( v );\n		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n		absV *= scaleToCube;\n		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n		vec2 planar = v.xy;\n		float almostATexel = 1.5 * texelSizeY;\n		float almostOne = 1.0 - almostATexel;\n		if ( absV.z >= almostOne ) {\n			if ( v.z > 0.0 )\n				planar.x = 4.0 - v.x;\n		} else if ( absV.x >= almostOne ) {\n			float signX = sign( v.x );\n			planar.x = v.z * signX + 2.0 * signX;\n		} else if ( absV.y >= almostOne ) {\n			float signY = sign( v.y );\n			planar.x = v.x + 2.0 * signY + 2.0;\n			planar.y = v.z * signY - 2.0;\n		}\n		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n	}\n	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n		vec3 lightToPosition = shadowCoord.xyz;\n		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;\n		vec3 bd3D = normalize( lightToPosition );\n		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n			return (\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n			) * ( 1.0 / 9.0 );\n		#else\n			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n		#endif\n	}\n#endif\n",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n		uniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n		varying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n	#endif\n#endif\n",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		vSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n	}\n	#endif\n#endif\n",shadowmask_pars_fragment:"float getShadowMask() {\n	float shadow = 1.0;\n	#ifdef USE_SHADOWMAP\n	#if NUM_DIR_LIGHTS > 0\n	DirectionalLight directionalLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n		directionalLight = directionalLights[ i ];\n		shadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_SPOT_LIGHTS > 0\n	SpotLight spotLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n		spotLight = spotLights[ i ];\n		shadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n	}\n	#endif\n	#if NUM_POINT_LIGHTS > 0\n	PointLight pointLight;\n	#pragma unroll_loop\n	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n		pointLight = pointLights[ i ];\n		shadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n	}\n	#endif\n	#endif\n	return shadow;\n}\n",skinbase_vertex:"#ifdef USE_SKINNING\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n	#ifdef BONE_TEXTURE\n		uniform sampler2D boneTexture;\n		uniform int boneTextureSize;\n		mat4 getBoneMatrix( const in float i ) {\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureSize ) );\n			float y = floor( j / float( boneTextureSize ) );\n			float dx = 1.0 / float( boneTextureSize );\n			float dy = 1.0 / float( boneTextureSize );\n			y = dy * ( y + 0.5 );\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n			mat4 bone = mat4( v1, v2, v3, v4 );\n			return bone;\n		}\n	#else\n		uniform mat4 boneMatrices[ MAX_BONES ];\n		mat4 getBoneMatrix( const in float i ) {\n			mat4 bone = boneMatrices[ int(i) ];\n			return bone;\n		}\n	#endif\n#endif\n",skinning_vertex:"#ifdef USE_SKINNING\n	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	transformed = ( bindMatrixInverse * skinned ).xyz;\n#endif\n",skinnormal_vertex:"#ifdef USE_SKINNING\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n#endif\n",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n#else\n	specularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n	uniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n  gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif\n",tonemapping_pars_fragment:"#ifndef saturate\n	#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n	return toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	return saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n	color *= toneMappingExposure;\n	color = max( vec3( 0.0 ), color - 0.004 );\n	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\n",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	varying vec2 vUv;\n	uniform mat3 uvTransform;\n#endif\n",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	varying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	attribute vec2 uv2;\n	varying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n	vUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n	vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif\n",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldPosition;\nvoid main() {\n	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );\n	gl_FragColor.a *= opacity;\n}\n",cube_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n	gl_Position.z = gl_Position.w;\n}\n",depth_frag:"#if DEPTH_PACKING == 3200\n	uniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#if DEPTH_PACKING == 3200\n		diffuseColor.a = opacity;\n	#endif\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <logdepthbuf_fragment>\n	#if DEPTH_PACKING == 3200\n		gl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n	#elif DEPTH_PACKING == 3201\n		gl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n	#endif\n}\n",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n}\n",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( 1.0 );\n	#include <map_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	float dist = length( vWorldPosition - referencePosition );\n	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n	dist = saturate( dist );\n	gl_FragColor = packDepthToRGBA( dist );\n}\n",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_DISPLACEMENTMAP\n		#include <beginnormal_vertex>\n		#include <morphnormal_vertex>\n		#include <skinnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	vWorldPosition = worldPosition.xyz;\n}\n",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vec3 direction = normalize( vWorldPosition );\n	vec2 sampleUV;\n	sampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n	sampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n	gl_FragColor = texture2D( tEquirect, sampleUV );\n}\n",equirect_vert:"varying vec3 vWorldPosition;\n#include <common>\nvoid main() {\n	vWorldPosition = transformDirection( position, modelMatrix );\n	#include <begin_vertex>\n	#include <project_vertex>\n}\n",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	if ( mod( vLineDistance, totalSize ) > dashSize ) {\n		discard;\n	}\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <color_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	vLineDistance = scale * lineDistance;\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n	gl_Position = projectionMatrix * mvPosition;\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <fog_vertex>\n}\n",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	#ifdef USE_LIGHTMAP\n		reflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n	#else\n		reflectedLight.indirectDiffuse += vec3( 1.0 );\n	#endif\n	#include <aomap_fragment>\n	reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n	vec3 outgoingLight = reflectedLight.indirectDiffuse;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <skinbase_vertex>\n	#ifdef USE_ENVMAP\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <worldpos_vertex>\n	#include <clipping_planes_vertex>\n	#include <envmap_vertex>\n	#include <fog_vertex>\n}\n",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <emissivemap_fragment>\n	reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n	#include <lightmap_fragment>\n	reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n	#ifdef DOUBLE_SIDED\n		reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n	#else\n		reflectedLight.directDiffuse = vLightFront;\n	#endif\n	reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\n#ifdef DOUBLE_SIDED\n	varying vec3 vLightBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <lights_lambert_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <specularmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_phong_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	#include <envmap_fragment>\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <envmap_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n	uniform float clearCoat;\n	uniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <lights_pars_begin>\n#include <lights_pars_maps>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n	vec3 totalEmissiveRadiance = emissive;\n	#include <logdepthbuf_fragment>\n	#include <map_fragment>\n	#include <color_fragment>\n	#include <alphamap_fragment>\n	#include <alphatest_fragment>\n	#include <roughnessmap_fragment>\n	#include <metalnessmap_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	#include <emissivemap_fragment>\n	#include <lights_physical_fragment>\n	#include <lights_fragment_begin>\n	#include <lights_fragment_maps>\n	#include <lights_fragment_end>\n	#include <aomap_fragment>\n	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n	#include <premultiplied_alpha_fragment>\n	#include <dithering_fragment>\n}\n",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <uv2_vertex>\n	#include <color_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	vViewPosition = - mvPosition.xyz;\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n	#include <logdepthbuf_fragment>\n	#include <normal_fragment_begin>\n	#include <normal_fragment_maps>\n	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}\n",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	varying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n	varying vec3 vNormal;\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n	#include <uv_vertex>\n	#include <beginnormal_vertex>\n	#include <morphnormal_vertex>\n	#include <skinbase_vertex>\n	#include <skinnormal_vertex>\n	#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n	vNormal = normalize( transformedNormal );\n#endif\n	#include <begin_vertex>\n	#include <morphtarget_vertex>\n	#include <skinning_vertex>\n	#include <displacementmap_vertex>\n	#include <project_vertex>\n	#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP )\n	vViewPosition = - mvPosition.xyz;\n#endif\n}\n",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n	#include <clipping_planes_fragment>\n	vec3 outgoingLight = vec3( 0.0 );\n	vec4 diffuseColor = vec4( diffuse, opacity );\n	#include <logdepthbuf_fragment>\n	#include <map_particle_fragment>\n	#include <color_fragment>\n	#include <alphatest_fragment>\n	outgoingLight = diffuseColor.rgb;\n	gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n	#include <premultiplied_alpha_fragment>\n	#include <tonemapping_fragment>\n	#include <encodings_fragment>\n	#include <fog_fragment>\n}\n",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n	#include <color_vertex>\n	#include <begin_vertex>\n	#include <project_vertex>\n	#ifdef USE_SIZEATTENUATION\n		gl_PointSize = size * ( scale / - mvPosition.z );\n	#else\n		gl_PointSize = size;\n	#endif\n	#include <logdepthbuf_vertex>\n	#include <clipping_planes_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n	#include <fog_fragment>\n}\n",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n	#include <begin_vertex>\n	#include <project_vertex>\n	#include <worldpos_vertex>\n	#include <shadowmap_vertex>\n	#include <fog_vertex>\n}\n"},Ko={merge:function(e){for(var t={},i=0;i<e.length;i++){var n,r=this.clone(e[i]);
for(n in r)t[n]=r[n]}return t},clone:function(e){var t,i={};for(t in e){i[t]={};for(var n in e[t]){var r=e[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?i[t][n]=r.clone():Array.isArray(r)?i[t][n]=r.slice():i[t][n]=r}}return i}},Qo={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(g.prototype,{isColor:!0,r:1,g:1,b:1,set:function(e){return e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e),this},setScalar:function(e){return this.b=this.g=this.r=e,this},setHex:function(e){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,this},setRGB:function(e,t,i){return this.r=e,this.g=t,this.b=i,this},setHSL:function(){function e(e,t,i){return 0>i&&(i+=1),i>1&&--i,1/6>i?e+6*(t-e)*i:.5>i?t:2/3>i?e+6*(t-e)*(2/3-i):e}return function(t,i,n){return t=qo.euclideanModulo(t,1),i=qo.clamp(i,0,1),n=qo.clamp(n,0,1),0===i?this.r=this.g=this.b=n:(i=.5>=n?n*(1+i):n+i-n*i,n=2*n-i,this.r=e(n,i,t+1/3),this.g=e(n,i,t),this.b=e(n,i,t-1/3)),this}}(),setStyle:function(e){function t(t){void 0!==t&&1>parseFloat(t)&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}var i;if(i=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(e)){var n=i[2];switch(i[1]){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,t(i[5]),this;if(i=/^(\d+)%\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,t(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)%\s*,\s*(\d+)%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(n)){n=parseFloat(i[1])/360;var r=parseInt(i[2],10)/100,o=parseInt(i[3],10)/100;return t(i[5]),this.setHSL(n,r,o)}}}else if(i=/^#([A-Fa-f0-9]+)$/.exec(e)){if(i=i[1],n=i.length,3===n)return this.r=parseInt(i.charAt(0)+i.charAt(0),16)/255,this.g=parseInt(i.charAt(1)+i.charAt(1),16)/255,this.b=parseInt(i.charAt(2)+i.charAt(2),16)/255,this;if(6===n)return this.r=parseInt(i.charAt(0)+i.charAt(1),16)/255,this.g=parseInt(i.charAt(2)+i.charAt(3),16)/255,this.b=parseInt(i.charAt(4)+i.charAt(5),16)/255,this}return e&&0<e.length&&(i=Qo[e],void 0!==i?this.setHex(i):console.warn("THREE.Color: Unknown color "+e)),this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(e){return this.r=e.r,this.g=e.g,this.b=e.b,this},copyGammaToLinear:function(e,t){return void 0===t&&(t=2),this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},copyLinearToGamma:function(e,t){return void 0===t&&(t=2),t=t>0?1/t:1,this.r=Math.pow(e.r,t),this.g=Math.pow(e.g,t),this.b=Math.pow(e.b,t),this},convertGammaToLinear:function(){var e=this.r,t=this.g,i=this.b;return this.r=e*e,this.g=t*t,this.b=i*i,this},convertLinearToGamma:function(){return this.r=Math.sqrt(this.r),this.g=Math.sqrt(this.g),this.b=Math.sqrt(this.b),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(e){void 0===e&&(console.warn("THREE.Color: .getHSL() target is now required"),e={h:0,s:0,l:0});var t,i=this.r,n=this.g,r=this.b,o=Math.max(i,n,r),a=Math.min(i,n,r),s=(a+o)/2;if(a===o)a=t=0;else{var l=o-a;switch(a=.5>=s?l/(o+a):l/(2-o-a),o){case i:t=(n-r)/l+(r>n?6:0);break;case n:t=(r-i)/l+2;break;case r:t=(i-n)/l+4}t/=6}return e.h=t,e.s=a,e.l=s,e},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var e={};return function(t,i,n){return this.getHSL(e),e.h+=t,e.s+=i,e.l+=n,this.setHSL(e.h,e.s,e.l),this}}(),add:function(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this},addColors:function(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this},addScalar:function(e){return this.r+=e,this.g+=e,this.b+=e,this},sub:function(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this},multiply:function(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this},multiplyScalar:function(e){return this.r*=e,this.g*=e,this.b*=e,this},lerp:function(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this},equals:function(e){return e.r===this.r&&e.g===this.g&&e.b===this.b},fromArray:function(e,t){return void 0===t&&(t=0),this.r=e[t],this.g=e[t+1],this.b=e[t+2],this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e},toJSON:function(){return this.getHex()}});var ea={common:{diffuse:{value:new g(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new a},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new i(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new g(16777215)}},lights:{ambientLightColor:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new g(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new a}}},ta={basic:{uniforms:Ko.merge([ea.common,ea.specularmap,ea.envmap,ea.aomap,ea.lightmap,ea.fog]),vertexShader:Zo.meshbasic_vert,fragmentShader:Zo.meshbasic_frag},lambert:{uniforms:Ko.merge([ea.common,ea.specularmap,ea.envmap,ea.aomap,ea.lightmap,ea.emissivemap,ea.fog,ea.lights,{emissive:{value:new g(0)}}]),vertexShader:Zo.meshlambert_vert,fragmentShader:Zo.meshlambert_frag},phong:{uniforms:Ko.merge([ea.common,ea.specularmap,ea.envmap,ea.aomap,ea.lightmap,ea.emissivemap,ea.bumpmap,ea.normalmap,ea.displacementmap,ea.gradientmap,ea.fog,ea.lights,{emissive:{value:new g(0)},specular:{value:new g(1118481)},shininess:{value:30}}]),vertexShader:Zo.meshphong_vert,fragmentShader:Zo.meshphong_frag},standard:{uniforms:Ko.merge([ea.common,ea.envmap,ea.aomap,ea.lightmap,ea.emissivemap,ea.bumpmap,ea.normalmap,ea.displacementmap,ea.roughnessmap,ea.metalnessmap,ea.fog,ea.lights,{emissive:{value:new g(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:Zo.meshphysical_vert,fragmentShader:Zo.meshphysical_frag},points:{uniforms:Ko.merge([ea.points,ea.fog]),vertexShader:Zo.points_vert,fragmentShader:Zo.points_frag},dashed:{uniforms:Ko.merge([ea.common,ea.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zo.linedashed_vert,fragmentShader:Zo.linedashed_frag},depth:{uniforms:Ko.merge([ea.common,ea.displacementmap]),vertexShader:Zo.depth_vert,fragmentShader:Zo.depth_frag},normal:{uniforms:Ko.merge([ea.common,ea.bumpmap,ea.normalmap,ea.displacementmap,{opacity:{value:1}}]),vertexShader:Zo.normal_vert,fragmentShader:Zo.normal_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zo.cube_vert,fragmentShader:Zo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zo.equirect_vert,fragmentShader:Zo.equirect_frag},distanceRGBA:{uniforms:Ko.merge([ea.common,ea.displacementmap,{referencePosition:{value:new o},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zo.distanceRGBA_vert,fragmentShader:Zo.distanceRGBA_frag},shadow:{uniforms:Ko.merge([ea.lights,ea.fog,{color:{value:new g(0)},opacity:{value:1}}]),vertexShader:Zo.shadow_vert,fragmentShader:Zo.shadow_frag}};ta.physical={uniforms:Ko.merge([ta.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:Zo.meshphysical_vert,fragmentShader:Zo.meshphysical_frag},y.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" "),y.DefaultOrder="XYZ",Object.defineProperties(y.prototype,{x:{get:function(){return this._x},set:function(e){this._x=e,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(e){this._y=e,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(e){this._z=e,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(e){this._order=e,this.onChangeCallback()}}}),Object.assign(y.prototype,{isEuler:!0,set:function(e,t,i,n){return this._x=e,this._y=t,this._z=i,this._order=n||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this.onChangeCallback(),this},setFromRotationMatrix:function(e,t,i){var n=qo.clamp,r=e.elements;e=r[0];var o=r[4],a=r[8],s=r[1],l=r[5],u=r[9],c=r[2],h=r[6];return r=r[10],t=t||this._order,"XYZ"===t?(this._y=Math.asin(n(a,-1,1)),.99999>Math.abs(a)?(this._x=Math.atan2(-u,r),this._z=Math.atan2(-o,e)):(this._x=Math.atan2(h,l),this._z=0)):"YXZ"===t?(this._x=Math.asin(-n(u,-1,1)),.99999>Math.abs(u)?(this._y=Math.atan2(a,r),this._z=Math.atan2(s,l)):(this._y=Math.atan2(-c,e),this._z=0)):"ZXY"===t?(this._x=Math.asin(n(h,-1,1)),.99999>Math.abs(h)?(this._y=Math.atan2(-c,r),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(s,e))):"ZYX"===t?(this._y=Math.asin(-n(c,-1,1)),.99999>Math.abs(c)?(this._x=Math.atan2(h,r),this._z=Math.atan2(s,e)):(this._x=0,this._z=Math.atan2(-o,l))):"YZX"===t?(this._z=Math.asin(n(s,-1,1)),.99999>Math.abs(s)?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,e)):(this._x=0,this._y=Math.atan2(a,r))):"XZY"===t?(this._z=Math.asin(-n(o,-1,1)),.99999>Math.abs(o)?(this._x=Math.atan2(h,l),this._y=Math.atan2(a,e)):(this._x=Math.atan2(-u,r),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+t),this._order=t,!1!==i&&this.onChangeCallback(),this},setFromQuaternion:function(){var e=new n;return function(t,i,n){return e.makeRotationFromQuaternion(t),this.setFromRotationMatrix(e,i,n)}}(),setFromVector3:function(e,t){return this.set(e.x,e.y,e.z,t||this._order)},reorder:function(){var e=new r;return function(t){return e.setFromEuler(this),this.setFromQuaternion(e,t)}}(),equals:function(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order},fromArray:function(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this.onChangeCallback(),this},toArray:function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=0),e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e},toVector3:function(e){return e?e.set(this._x,this._y,this._z):new o(this._x,this._y,this._z)},onChange:function(e){return this.onChangeCallback=e,this},onChangeCallback:function(){}}),Object.assign(_.prototype,{set:function(e){this.mask=1<<e|0},enable:function(e){this.mask=this.mask|1<<e|0},toggle:function(e){this.mask^=1<<e|0},disable:function(e){this.mask&=~(1<<e|0)},test:function(e){return 0!==(this.mask&e.mask)}});var ia=0;b.DefaultUp=new o(0,1,0),b.DefaultMatrixAutoUpdate=!0,b.prototype=Object.assign(Object.create(t.prototype),{constructor:b,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(e){this.matrix.multiplyMatrices(e,this.matrix),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(e){return this.quaternion.premultiply(e),this},setRotationFromAxisAngle:function(e,t){this.quaternion.setFromAxisAngle(e,t)},setRotationFromEuler:function(e){this.quaternion.setFromEuler(e,!0)},setRotationFromMatrix:function(e){this.quaternion.setFromRotationMatrix(e)},setRotationFromQuaternion:function(e){this.quaternion.copy(e)},rotateOnAxis:function(){var e=new r;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.multiply(e),this}}(),rotateOnWorldAxis:function(){var e=new r;return function(t,i){return e.setFromAxisAngle(t,i),this.quaternion.premultiply(e),this}}(),rotateX:function(){var e=new o(1,0,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateY:function(){var e=new o(0,1,0);return function(t){return this.rotateOnAxis(e,t)}}(),rotateZ:function(){var e=new o(0,0,1);return function(t){return this.rotateOnAxis(e,t)}}(),translateOnAxis:function(){var e=new o;return function(t,i){return e.copy(t).applyQuaternion(this.quaternion),this.position.add(e.multiplyScalar(i)),this}}(),translateX:function(){var e=new o(1,0,0);return function(t){return this.translateOnAxis(e,t)}}(),translateY:function(){var e=new o(0,1,0);return function(t){return this.translateOnAxis(e,t)}}(),translateZ:function(){var e=new o(0,0,1);return function(t){return this.translateOnAxis(e,t)}}(),localToWorld:function(e){return e.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var e=new n;return function(t){return t.applyMatrix4(e.getInverse(this.matrixWorld))}}(),lookAt:function(){var e=new n,t=new o;return function(i,n,r){i.isVector3?t.copy(i):t.set(i,n,r),this.isCamera?e.lookAt(this.position,t,this.up):e.lookAt(t,this.position,this.up),this.quaternion.setFromRotationMatrix(e)}}(),add:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(null!==e.parent&&e.parent.remove(e),e.parent=this,e.dispatchEvent({type:"added"}),this.children.push(e)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)},remove:function(e){if(1<arguments.length){for(var t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}return t=this.children.indexOf(e),-1!==t&&(e.parent=null,e.dispatchEvent({type:"removed"}),this.children.splice(t,1)),this},getObjectById:function(e){return this.getObjectByProperty("id",e)},getObjectByName:function(e){return this.getObjectByProperty("name",e)},getObjectByProperty:function(e,t){if(this[e]===t)return this;for(var i=0,n=this.children.length;n>i;i++){var r=this.children[i].getObjectByProperty(e,t);if(void 0!==r)return r}},getWorldPosition:function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new o),this.updateMatrixWorld(!0),e.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var e=new o,t=new o;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),i=new r),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,i,t),i}}(),getWorldScale:function(){var e=new o,t=new r;return function(i){return void 0===i&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),i=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(e,t,i),i}}(),getWorldDirection:function(){var e=new r;return function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new o),this.getWorldQuaternion(e),t.set(0,0,1).applyQuaternion(e)}}(),raycast:function(){},traverse:function(e){e(this);for(var t=this.children,i=0,n=t.length;n>i;i++)t[i].traverse(e)},traverseVisible:function(e){if(!1!==this.visible){e(this);for(var t=this.children,i=0,n=t.length;n>i;i++)t[i].traverseVisible(e)}},traverseAncestors:function(e){var t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);for(var t=this.children,i=0,n=t.length;n>i;i++)t[i].updateMatrixWorld(e)},toJSON:function(e){function t(t,i){return void 0===t[i.uuid]&&(t[i.uuid]=i.toJSON(e)),i.uuid}function i(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var n=void 0===e||"string"==typeof e,r={};n&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),void 0!==this.geometry){o.geometry=t(e.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes)if(a=a.shapes,Array.isArray(a))for(var s=0,l=a.length;l>s;s++)t(e.shapes,a[s]);else t(e.shapes,a)}if(void 0!==this.material)if(Array.isArray(this.material)){for(a=[],s=0,l=this.material.length;l>s;s++)a.push(t(e.materials,this.material[s]));o.material=a}else o.material=t(e.materials,this.material);if(0<this.children.length)for(o.children=[],s=0;s<this.children.length;s++)o.children.push(this.children[s].toJSON(e).object);if(n){n=i(e.geometries),s=i(e.materials),l=i(e.textures);var u=i(e.images);a=i(e.shapes),0<n.length&&(r.geometries=n),0<s.length&&(r.materials=s),0<l.length&&(r.textures=l),0<u.length&&(r.images=u),0<a.length&&(r.shapes=a)}return r.object=o,r},clone:function(e){return(new this.constructor).copy(this,e)},copy:function(e,t){if(void 0===t&&(t=!0),this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(t=0;t<e.children.length;t++)this.add(e.children[t].clone());return this}}),w.prototype=Object.assign(Object.create(b.prototype),{constructor:w,isCamera:!0,copy:function(e,t){return b.prototype.copy.call(this,e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this},getWorldDirection:function(){var e=new r;return function(t){return void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new o),this.getWorldQuaternion(e),t.set(0,0,-1).applyQuaternion(e)}}(),updateMatrixWorld:function(e){b.prototype.updateMatrixWorld.call(this,e),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),x.prototype=Object.assign(Object.create(w.prototype),{constructor:x,isOrthographicCamera:!0,copy:function(e,t){return w.prototype.copy.call(this,e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this},setViewOffset:function(e,t,i,n,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,n=(this.top+this.bottom)/2,r=i-e;if(i+=e,e=n+t,t=n-t,null!==this.view&&this.view.enabled){i=this.zoom/(this.view.width/this.view.fullWidth),t=this.zoom/(this.view.height/this.view.fullHeight);var o=(this.right-this.left)/this.view.width;n=(this.top-this.bottom)/this.view.height,r+=this.view.offsetX/i*o,i=r+this.view.width/i*o,e-=this.view.offsetY/t*n,t=e-this.view.height/t*n}this.projectionMatrix.makeOrthographic(r,i,e,t,this.near,this.far)},toJSON:function(e){return e=b.prototype.toJSON.call(this,e),e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Object.assign(E.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.a=e.a,this.b=e.b,this.c=e.c,this.normal.copy(e.normal),this.color.copy(e.color),this.materialIndex=e.materialIndex;for(var t=0,i=e.vertexNormals.length;i>t;t++)this.vertexNormals[t]=e.vertexNormals[t].clone();for(t=0,i=e.vertexColors.length;i>t;t++)this.vertexColors[t]=e.vertexColors[t].clone();return this}});var na=0;S.prototype=Object.assign(Object.create(t.prototype),{constructor:S,isGeometry:!0,applyMatrix:function(e){for(var t=(new a).getNormalMatrix(e),i=0,n=this.vertices.length;n>i;i++)this.vertices[i].applyMatrix4(e);for(i=0,n=this.faces.length;n>i;i++){e=this.faces[i],e.normal.applyMatrix3(t).normalize();for(var r=0,o=e.vertexNormals.length;o>r;r++)e.vertexNormals[r].applyMatrix3(t).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.normalsNeedUpdate=this.verticesNeedUpdate=!0,this},rotateX:function(){var e=new n;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new n;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new n;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new n;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new n;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),fromBufferGeometry:function(e){function t(e,t,i,r){var o=void 0!==l?[p[e].clone(),p[t].clone(),p[i].clone()]:[],a=void 0!==u?[n.colors[e].clone(),n.colors[t].clone(),n.colors[i].clone()]:[];r=new E(e,t,i,o,a,r),n.faces.push(r),void 0!==c&&n.faceVertexUvs[0].push([d[e].clone(),d[t].clone(),d[i].clone()]),void 0!==h&&n.faceVertexUvs[1].push([f[e].clone(),f[t].clone(),f[i].clone()])}var n=this,r=null!==e.index?e.index.array:void 0,a=e.attributes,s=a.position.array,l=void 0!==a.normal?a.normal.array:void 0,u=void 0!==a.color?a.color.array:void 0,c=void 0!==a.uv?a.uv.array:void 0,h=void 0!==a.uv2?a.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var p=[],d=[],f=[],m=a=0;a<s.length;a+=3,m+=2)n.vertices.push(new o(s[a],s[a+1],s[a+2])),void 0!==l&&p.push(new o(l[a],l[a+1],l[a+2])),void 0!==u&&n.colors.push(new g(u[a],u[a+1],u[a+2])),void 0!==c&&d.push(new i(c[m],c[m+1])),void 0!==h&&f.push(new i(h[m],h[m+1]));var v=e.groups;if(0<v.length)for(a=0;a<v.length;a++){s=v[a];var y=s.start,_=s.count;for(m=y,y+=_;y>m;m+=3)void 0!==r?t(r[m],r[m+1],r[m+2],s.materialIndex):t(m,m+1,m+2,s.materialIndex)}else if(void 0!==r)for(a=0;a<r.length;a+=3)t(r[a],r[a+1],r[a+2]);else for(a=0;a<s.length/3;a+=3)t(a,a+1,a+2);return this.computeFaceNormals(),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this},center:function(){var e=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),normalize:function(){this.computeBoundingSphere();var e=this.boundingSphere.center,t=this.boundingSphere.radius;t=0===t?1:1/t;var i=new n;return i.set(t,0,0,-t*e.x,0,t,0,-t*e.y,0,0,t,-t*e.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var e=new o,t=new o,i=0,n=this.faces.length;n>i;i++){var r=this.faces[i],a=this.vertices[r.a],s=this.vertices[r.b];e.subVectors(this.vertices[r.c],s),t.subVectors(a,s),e.cross(t),e.normalize(),r.normal.copy(e)}},computeVertexNormals:function(e){void 0===e&&(e=!0);var t,i=Array(this.vertices.length),n=0;for(t=this.vertices.length;t>n;n++)i[n]=new o;if(e){var r=new o,a=new o;for(e=0,n=this.faces.length;n>e;e++){t=this.faces[e];var s=this.vertices[t.a],l=this.vertices[t.b],u=this.vertices[t.c];r.subVectors(u,l),a.subVectors(s,l),r.cross(a),i[t.a].add(r),i[t.b].add(r),i[t.c].add(r)}}else for(this.computeFaceNormals(),e=0,n=this.faces.length;n>e;e++)t=this.faces[e],i[t.a].add(t.normal),i[t.b].add(t.normal),i[t.c].add(t.normal);for(n=0,t=this.vertices.length;t>n;n++)i[n].normalize();for(e=0,n=this.faces.length;n>e;e++)t=this.faces[e],s=t.vertexNormals,3===s.length?(s[0].copy(i[t.a]),s[1].copy(i[t.b]),s[2].copy(i[t.c])):(s[0]=i[t.a].clone(),s[1]=i[t.b].clone(),s[2]=i[t.c].clone());0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var e;this.computeFaceNormals();var t=0;for(e=this.faces.length;e>t;t++){var i=this.faces[t],n=i.vertexNormals;3===n.length?(n[0].copy(i.normal),n[1].copy(i.normal),n[2].copy(i.normal)):(n[0]=i.normal.clone(),n[1]=i.normal.clone(),n[2]=i.normal.clone())}0<this.faces.length&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var e,t,i=0;for(t=this.faces.length;t>i;i++){var n=this.faces[i];n.__originalFaceNormal?n.__originalFaceNormal.copy(n.normal):n.__originalFaceNormal=n.normal.clone(),n.__originalVertexNormals||(n.__originalVertexNormals=[]);var r=0;for(e=n.vertexNormals.length;e>r;r++)n.__originalVertexNormals[r]?n.__originalVertexNormals[r].copy(n.vertexNormals[r]):n.__originalVertexNormals[r]=n.vertexNormals[r].clone()}var a=new S;for(a.faces=this.faces,r=0,e=this.morphTargets.length;e>r;r++){if(!this.morphNormals[r]){this.morphNormals[r]={},this.morphNormals[r].faceNormals=[],this.morphNormals[r].vertexNormals=[],n=this.morphNormals[r].faceNormals;var s=this.morphNormals[r].vertexNormals;for(i=0,t=this.faces.length;t>i;i++){var l=new o,u={a:new o,b:new o,c:new o};n.push(l),s.push(u)}}for(s=this.morphNormals[r],a.vertices=this.morphTargets[r].vertices,a.computeFaceNormals(),a.computeVertexNormals(),i=0,t=this.faces.length;t>i;i++)n=this.faces[i],l=s.faceNormals[i],u=s.vertexNormals[i],l.copy(n.normal),u.a.copy(n.vertexNormals[0]),u.b.copy(n.vertexNormals[1]),u.c.copy(n.vertexNormals[2])}for(i=0,t=this.faces.length;t>i;i++)n=this.faces[i],n.normal=n.__originalFaceNormal,n.vertexNormals=n.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new d),this.boundingSphere.setFromPoints(this.vertices)},merge:function(e,t,i){if(e&&e.isGeometry){var n,r=this.vertices.length,o=this.vertices,s=e.vertices,l=this.faces,u=e.faces,c=this.faceVertexUvs[0],h=e.faceVertexUvs[0],p=this.colors,d=e.colors;void 0===i&&(i=0),void 0!==t&&(n=(new a).getNormalMatrix(t)),e=0;for(var f=s.length;f>e;e++){var m=s[e].clone();void 0!==t&&m.applyMatrix4(t),o.push(m)}for(e=0,f=d.length;f>e;e++)p.push(d[e].clone());for(e=0,f=u.length;f>e;e++){s=u[e];var g=s.vertexNormals;for(d=s.vertexColors,p=new E(s.a+r,s.b+r,s.c+r),p.normal.copy(s.normal),void 0!==n&&p.normal.applyMatrix3(n).normalize(),t=0,o=g.length;o>t;t++)m=g[t].clone(),void 0!==n&&m.applyMatrix3(n).normalize(),p.vertexNormals.push(m);for(p.color.copy(s.color),t=0,o=d.length;o>t;t++)m=d[t],p.vertexColors.push(m.clone());p.materialIndex=s.materialIndex+i,l.push(p)}for(e=0,f=h.length;f>e;e++)if(i=h[e],n=[],void 0!==i){for(t=0,o=i.length;o>t;t++)n.push(i[t].clone());c.push(n)}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",e)},mergeMesh:function(e){e&&e.isMesh?(e.matrixAutoUpdate&&e.updateMatrix(),this.merge(e.geometry,e.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",e)},mergeVertices:function(){var e,t={},i=[],n=[],r=Math.pow(10,4),o=0;for(e=this.vertices.length;e>o;o++){var a=this.vertices[o];a=Math.round(a.x*r)+"_"+Math.round(a.y*r)+"_"+Math.round(a.z*r),void 0===t[a]?(t[a]=o,i.push(this.vertices[o]),n[o]=i.length-1):n[o]=n[t[a]]}for(t=[],o=0,e=this.faces.length;e>o;o++)for(r=this.faces[o],r.a=n[r.a],r.b=n[r.b],r.c=n[r.c],r=[r.a,r.b,r.c],a=0;3>a;a++)if(r[a]===r[(a+1)%3]){t.push(o);
break}for(o=t.length-1;o>=0;o--)for(r=t[o],this.faces.splice(r,1),n=0,e=this.faceVertexUvs.length;e>n;n++)this.faceVertexUvs[n].splice(r,1);return o=this.vertices.length-i.length,this.vertices=i,o},setFromPoints:function(e){this.vertices=[];for(var t=0,i=e.length;i>t;t++){var n=e[t];this.vertices.push(new o(n.x,n.y,n.z||0))}return this},sortFacesByMaterialIndex:function(){for(var e=this.faces,t=e.length,i=0;t>i;i++)e[i]._id=i;e.sort(function(e,t){return e.materialIndex-t.materialIndex});var n,r,o=this.faceVertexUvs[0],a=this.faceVertexUvs[1];for(o&&o.length===t&&(n=[]),a&&a.length===t&&(r=[]),i=0;t>i;i++){var s=e[i]._id;n&&n.push(o[s]),r&&r.push(a[s])}n&&(this.faceVertexUvs[0]=n),r&&(this.faceVertexUvs[1]=r)},toJSON:function(){function e(e,t,i){return i?e|1<<t:e&~(1<<t)}function t(e){var t=e.x.toString()+e.y.toString()+e.z.toString();return void 0!==u[t]?u[t]:(u[t]=l.length/3,l.push(e.x,e.y,e.z),u[t])}function i(e){var t=e.r.toString()+e.g.toString()+e.b.toString();return void 0!==h[t]?h[t]:(h[t]=c.length,c.push(e.getHex()),h[t])}function n(e){var t=e.x.toString()+e.y.toString();return void 0!==d[t]?d[t]:(d[t]=p.length/2,p.push(e.x,e.y),d[t])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o,a=this.parameters;for(o in a)void 0!==a[o]&&(r[o]=a[o]);return r}for(a=[],o=0;o<this.vertices.length;o++){var s=this.vertices[o];a.push(s.x,s.y,s.z)}s=[];var l=[],u={},c=[],h={},p=[],d={};for(o=0;o<this.faces.length;o++){var f=this.faces[o],m=void 0!==this.faceVertexUvs[0][o],g=0<f.normal.length(),v=0<f.vertexNormals.length,y=1!==f.color.r||1!==f.color.g||1!==f.color.b,_=0<f.vertexColors.length,b=0;b=e(b,0,0),b=e(b,1,!0),b=e(b,2,!1),b=e(b,3,m),b=e(b,4,g),b=e(b,5,v),b=e(b,6,y),b=e(b,7,_),s.push(b),s.push(f.a,f.b,f.c),s.push(f.materialIndex),m&&(m=this.faceVertexUvs[0][o],s.push(n(m[0]),n(m[1]),n(m[2]))),g&&s.push(t(f.normal)),v&&(g=f.vertexNormals,s.push(t(g[0]),t(g[1]),t(g[2]))),y&&s.push(i(f.color)),_&&(f=f.vertexColors,s.push(i(f[0]),i(f[1]),i(f[2])))}return r.data={},r.data.vertices=a,r.data.normals=l,0<c.length&&(r.data.colors=c),0<p.length&&(r.data.uvs=[p]),r.data.faces=s,r},clone:function(){return(new S).copy(this)},copy:function(e){var t,i,n;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var r=e.vertices,o=0;for(t=r.length;t>o;o++)this.vertices.push(r[o].clone());for(r=e.colors,o=0,t=r.length;t>o;o++)this.colors.push(r[o].clone());for(r=e.faces,o=0,t=r.length;t>o;o++)this.faces.push(r[o].clone());for(o=0,t=e.faceVertexUvs.length;t>o;o++){var a=e.faceVertexUvs[o];for(void 0===this.faceVertexUvs[o]&&(this.faceVertexUvs[o]=[]),r=0,i=a.length;i>r;r++){var s=a[r],l=[],u=0;for(n=s.length;n>u;u++)l.push(s[u].clone());this.faceVertexUvs[o].push(l)}}for(u=e.morphTargets,o=0,t=u.length;t>o;o++){if(n={},n.name=u[o].name,void 0!==u[o].vertices)for(n.vertices=[],r=0,i=u[o].vertices.length;i>r;r++)n.vertices.push(u[o].vertices[r].clone());if(void 0!==u[o].normals)for(n.normals=[],r=0,i=u[o].normals.length;i>r;r++)n.normals.push(u[o].normals[r].clone());this.morphTargets.push(n)}for(u=e.morphNormals,o=0,t=u.length;t>o;o++){if(n={},void 0!==u[o].vertexNormals)for(n.vertexNormals=[],r=0,i=u[o].vertexNormals.length;i>r;r++)a=u[o].vertexNormals[r],s={},s.a=a.a.clone(),s.b=a.b.clone(),s.c=a.c.clone(),n.vertexNormals.push(s);if(void 0!==u[o].faceNormals)for(n.faceNormals=[],r=0,i=u[o].faceNormals.length;i>r;r++)n.faceNormals.push(u[o].faceNormals[r].clone());this.morphNormals.push(n)}for(r=e.skinWeights,o=0,t=r.length;t>o;o++)this.skinWeights.push(r[o].clone());for(r=e.skinIndices,o=0,t=r.length;t>o;o++)this.skinIndices.push(r[o].clone());for(r=e.lineDistances,o=0,t=r.length;t>o;o++)this.lineDistances.push(r[o]);return o=e.boundingBox,null!==o&&(this.boundingBox=o.clone()),o=e.boundingSphere,null!==o&&(this.boundingSphere=o.clone()),this.elementsNeedUpdate=e.elementsNeedUpdate,this.verticesNeedUpdate=e.verticesNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.lineDistancesNeedUpdate=e.lineDistancesNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(T.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(T.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.itemSize:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.itemSize,i*=t.itemSize;for(var n=0,r=this.itemSize;r>n;n++)this.array[e+n]=t.array[i+n];return this},copyArray:function(e){return this.array.set(e),this},copyColorsArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;r>n;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",n),o=new g),t[i++]=o.r,t[i++]=o.g,t[i++]=o.b}return this},copyVector2sArray:function(e){for(var t=this.array,n=0,r=0,o=e.length;o>r;r++){var a=e[r];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",r),a=new i),t[n++]=a.x,t[n++]=a.y}return this},copyVector3sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;r>n;n++){var a=e[n];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",n),a=new o),t[i++]=a.x,t[i++]=a.y,t[i++]=a.z}return this},copyVector4sArray:function(e){for(var t=this.array,i=0,n=0,r=e.length;r>n;n++){var o=e[n];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",n),o=new l),t[i++]=o.x,t[i++]=o.y,t[i++]=o.z,t[i++]=o.w}return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},getX:function(e){return this.array[e*this.itemSize]},setX:function(e,t){return this.array[e*this.itemSize]=t,this},getY:function(e){return this.array[e*this.itemSize+1]},setY:function(e,t){return this.array[e*this.itemSize+1]=t,this},getZ:function(e){return this.array[e*this.itemSize+2]},setZ:function(e,t){return this.array[e*this.itemSize+2]=t,this},getW:function(e){return this.array[e*this.itemSize+3]},setW:function(e,t){return this.array[e*this.itemSize+3]=t,this},setXY:function(e,t,i){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e*=this.itemSize,this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=n,this.array[e+3]=r,this},onUpload:function(e){return this.onUploadCallback=e,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)}}),C.prototype=Object.create(T.prototype),C.prototype.constructor=C,M.prototype=Object.create(T.prototype),M.prototype.constructor=M,P.prototype=Object.create(T.prototype),P.prototype.constructor=P,I.prototype=Object.create(T.prototype),I.prototype.constructor=I,L.prototype=Object.create(T.prototype),L.prototype.constructor=L,R.prototype=Object.create(T.prototype),R.prototype.constructor=R,A.prototype=Object.create(T.prototype),A.prototype.constructor=A,O.prototype=Object.create(T.prototype),O.prototype.constructor=O,k.prototype=Object.create(T.prototype),k.prototype.constructor=k,Object.assign(D.prototype,{computeGroups:function(e){var t=[],i=void 0;e=e.faces;for(var n=0;n<e.length;n++){var r=e[n];if(r.materialIndex!==i){i=r.materialIndex,void 0!==o&&(o.count=3*n-o.start,t.push(o));var o={start:3*n,materialIndex:i}}}void 0!==o&&(o.count=3*n-o.start,t.push(o)),this.groups=t},fromGeometry:function(e){var t=e.faces,n=e.vertices,r=e.faceVertexUvs,o=r[0]&&0<r[0].length,a=r[1]&&0<r[1].length,s=e.morphTargets,l=s.length;if(l>0){for(var u=[],c=0;l>c;c++)u[c]=[];this.morphTargets.position=u}var h=e.morphNormals,p=h.length;if(p>0){var d=[];for(c=0;p>c;c++)d[c]=[];this.morphTargets.normal=d}var f=e.skinIndices,m=e.skinWeights,g=f.length===n.length,v=m.length===n.length;for(c=0;c<t.length;c++){var y=t[c];this.vertices.push(n[y.a],n[y.b],n[y.c]);var _=y.vertexNormals;for(3===_.length?this.normals.push(_[0],_[1],_[2]):(_=y.normal,this.normals.push(_,_,_)),_=y.vertexColors,3===_.length?this.colors.push(_[0],_[1],_[2]):(_=y.color,this.colors.push(_,_,_)),!0===o&&(_=r[0][c],void 0!==_?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new i,new i,new i))),!0===a&&(_=r[1][c],void 0!==_?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new i,new i,new i))),_=0;l>_;_++){var b=s[_].vertices;u[_].push(b[y.a],b[y.b],b[y.c])}for(_=0;p>_;_++)b=h[_].vertexNormals[c],d[_].push(b.a,b.b,b.c);g&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),v&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(e),this.verticesNeedUpdate=e.verticesNeedUpdate,this.normalsNeedUpdate=e.normalsNeedUpdate,this.colorsNeedUpdate=e.colorsNeedUpdate,this.uvsNeedUpdate=e.uvsNeedUpdate,this.groupsNeedUpdate=e.groupsNeedUpdate,this}});var ra=1;B.prototype=Object.assign(Object.create(t.prototype),{constructor:B,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(e){Array.isArray(e)?this.index=new(65535<N(e)?A:L)(e,1):this.index=e},addAttribute:function(e,t,i){if(t&&t.isBufferAttribute||t&&t.isInterleavedBufferAttribute){if("index"!==e)return this.attributes[e]=t,this;console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(t)}else console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(e,new T(t,i))},getAttribute:function(e){return this.attributes[e]},removeAttribute:function(e){return delete this.attributes[e],this},addGroup:function(e,t,i){this.groups.push({start:e,count:t,materialIndex:void 0!==i?i:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(e,t){this.drawRange.start=e,this.drawRange.count=t},applyMatrix:function(e){var t=this.attributes.position;return void 0!==t&&(e.applyToBufferAttribute(t),t.needsUpdate=!0),t=this.attributes.normal,void 0!==t&&((new a).getNormalMatrix(e).applyToBufferAttribute(t),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var e=new n;return function(t){return e.makeRotationX(t),this.applyMatrix(e),this}}(),rotateY:function(){var e=new n;return function(t){return e.makeRotationY(t),this.applyMatrix(e),this}}(),rotateZ:function(){var e=new n;return function(t){return e.makeRotationZ(t),this.applyMatrix(e),this}}(),translate:function(){var e=new n;return function(t,i,n){return e.makeTranslation(t,i,n),this.applyMatrix(e),this}}(),scale:function(){var e=new n;return function(t,i,n){return e.makeScale(t,i,n),this.applyMatrix(e),this}}(),lookAt:function(){var e=new b;return function(t){e.lookAt(t),e.updateMatrix(),this.applyMatrix(e.matrix)}}(),center:function(){var e=new o;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(e).negate(),this.translate(e.x,e.y,e.z),this}}(),setFromObject:function(e){var t=e.geometry;if(e.isPoints||e.isLine){e=new O(3*t.vertices.length,3);var i=new O(3*t.colors.length,3);this.addAttribute("position",e.copyVector3sArray(t.vertices)),this.addAttribute("color",i.copyColorsArray(t.colors)),t.lineDistances&&t.lineDistances.length===t.vertices.length&&(e=new O(t.lineDistances.length,1),this.addAttribute("lineDistance",e.copyArray(t.lineDistances))),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone())}else e.isMesh&&t&&t.isGeometry&&this.fromGeometry(t);return this},setFromPoints:function(e){for(var t=[],i=0,n=e.length;n>i;i++){var r=e[i];t.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new O(t,3)),this},updateFromObject:function(e){var t=e.geometry;if(e.isMesh){var i=t.__directGeometry;if(!0===t.elementsNeedUpdate&&(i=void 0,t.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(t);i.verticesNeedUpdate=t.verticesNeedUpdate,i.normalsNeedUpdate=t.normalsNeedUpdate,i.colorsNeedUpdate=t.colorsNeedUpdate,i.uvsNeedUpdate=t.uvsNeedUpdate,i.groupsNeedUpdate=t.groupsNeedUpdate,t.verticesNeedUpdate=!1,t.normalsNeedUpdate=!1,t.colorsNeedUpdate=!1,t.uvsNeedUpdate=!1,t.groupsNeedUpdate=!1,t=i}return!0===t.verticesNeedUpdate&&(i=this.attributes.position,void 0!==i&&(i.copyVector3sArray(t.vertices),i.needsUpdate=!0),t.verticesNeedUpdate=!1),!0===t.normalsNeedUpdate&&(i=this.attributes.normal,void 0!==i&&(i.copyVector3sArray(t.normals),i.needsUpdate=!0),t.normalsNeedUpdate=!1),!0===t.colorsNeedUpdate&&(i=this.attributes.color,void 0!==i&&(i.copyColorsArray(t.colors),i.needsUpdate=!0),t.colorsNeedUpdate=!1),t.uvsNeedUpdate&&(i=this.attributes.uv,void 0!==i&&(i.copyVector2sArray(t.uvs),i.needsUpdate=!0),t.uvsNeedUpdate=!1),t.lineDistancesNeedUpdate&&(i=this.attributes.lineDistance,void 0!==i&&(i.copyArray(t.lineDistances),i.needsUpdate=!0),t.lineDistancesNeedUpdate=!1),t.groupsNeedUpdate&&(t.computeGroups(e.geometry),this.groups=t.groups,t.groupsNeedUpdate=!1),this},fromGeometry:function(e){return e.__directGeometry=(new D).fromGeometry(e),this.fromDirectGeometry(e.__directGeometry)},fromDirectGeometry:function(e){var t=new Float32Array(3*e.vertices.length);this.addAttribute("position",new T(t,3).copyVector3sArray(e.vertices)),0<e.normals.length&&(t=new Float32Array(3*e.normals.length),this.addAttribute("normal",new T(t,3).copyVector3sArray(e.normals))),0<e.colors.length&&(t=new Float32Array(3*e.colors.length),this.addAttribute("color",new T(t,3).copyColorsArray(e.colors))),0<e.uvs.length&&(t=new Float32Array(2*e.uvs.length),this.addAttribute("uv",new T(t,2).copyVector2sArray(e.uvs))),0<e.uvs2.length&&(t=new Float32Array(2*e.uvs2.length),this.addAttribute("uv2",new T(t,2).copyVector2sArray(e.uvs2))),this.groups=e.groups;for(var i in e.morphTargets){t=[];for(var n=e.morphTargets[i],r=0,o=n.length;o>r;r++){var a=n[r],s=new O(3*a.length,3);t.push(s.copyVector3sArray(a))}this.morphAttributes[i]=t}return 0<e.skinIndices.length&&(i=new O(4*e.skinIndices.length,4),this.addAttribute("skinIndex",i.copyVector4sArray(e.skinIndices))),0<e.skinWeights.length&&(i=new O(4*e.skinWeights.length,4),this.addAttribute("skinWeight",i.copyVector4sArray(e.skinWeights))),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new p);var e=this.attributes.position;void 0!==e?this.boundingBox.setFromBufferAttribute(e):this.boundingBox.makeEmpty(),(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){var e=new p,t=new o;return function(){null===this.boundingSphere&&(this.boundingSphere=new d);var i=this.attributes.position;if(i){var n=this.boundingSphere.center;e.setFromBufferAttribute(i),e.getCenter(n);for(var r=0,o=0,a=i.count;a>o;o++)t.x=i.getX(o),t.y=i.getY(o),t.z=i.getZ(o),r=Math.max(r,n.distanceToSquared(t));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var e=this.index,t=this.attributes,i=this.groups;if(t.position){var n=t.position.array;if(void 0===t.normal)this.addAttribute("normal",new T(new Float32Array(n.length),3));else for(var r=t.normal.array,a=0,s=r.length;s>a;a++)r[a]=0;r=t.normal.array;var l=new o,u=new o,c=new o,h=new o,p=new o;if(e){e=e.array,0===i.length&&this.addGroup(0,e.length);for(var d=0,f=i.length;f>d;++d){a=i[d],s=a.start;var m=a.count;for(a=s,s+=m;s>a;a+=3){m=3*e[a+0];var g=3*e[a+1],v=3*e[a+2];l.fromArray(n,m),u.fromArray(n,g),c.fromArray(n,v),h.subVectors(c,u),p.subVectors(l,u),h.cross(p),r[m]+=h.x,r[m+1]+=h.y,r[m+2]+=h.z,r[g]+=h.x,r[g+1]+=h.y,r[g+2]+=h.z,r[v]+=h.x,r[v+1]+=h.y,r[v+2]+=h.z}}}else for(a=0,s=n.length;s>a;a+=9)l.fromArray(n,a),u.fromArray(n,a+3),c.fromArray(n,a+6),h.subVectors(c,u),p.subVectors(l,u),h.cross(p),r[a]=h.x,r[a+1]=h.y,r[a+2]=h.z,r[a+3]=h.x,r[a+4]=h.y,r[a+5]=h.z,r[a+6]=h.x,r[a+7]=h.y,r[a+8]=h.z;this.normalizeNormals(),t.normal.needsUpdate=!0}},merge:function(e,t){if(e&&e.isBufferGeometry){void 0===t&&(t=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var i,n=this.attributes;for(i in n)if(void 0!==e.attributes[i]){var r=n[i].array,o=e.attributes[i],a=o.array,s=0;for(o=o.itemSize*t;s<a.length;s++,o++)r[o]=a[s]}return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",e)},normalizeNormals:function(){var e=new o;return function(){for(var t=this.attributes.normal,i=0,n=t.count;n>i;i++)e.x=t.getX(i),e.y=t.getY(i),e.z=t.getZ(i),e.normalize(),t.setXYZ(i,e.x,e.y,e.z)}}(),toNonIndexed:function(){if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e,t=new B,i=this.index.array,n=this.attributes;for(e in n){var r=n[e],o=r.array,a=r.itemSize,s=new o.constructor(i.length*a),l=0;r=0;for(var u=i.length;u>r;r++)for(var c=i[r]*a,h=0;a>h;h++)s[l++]=o[c++];t.addAttribute(e,new T(s,a))}for(i=this.groups,r=0,u=i.length;u>r;r++)n=i[r],t.addGroup(n.start,n.count,n.materialIndex);return t},toJSON:function(){var e={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),void 0!==this.parameters){var t=this.parameters;for(r in t)void 0!==t[r]&&(e[r]=t[r]);return e}e.data={attributes:{}};var i=this.index;null!==i&&(t=Array.prototype.slice.call(i.array),e.data.index={type:i.array.constructor.name,array:t}),i=this.attributes;for(r in i){var n=i[r];t=Array.prototype.slice.call(n.array),e.data.attributes[r]={itemSize:n.itemSize,type:n.array.constructor.name,array:t,normalized:n.normalized}}var r=this.groups;return 0<r.length&&(e.data.groups=JSON.parse(JSON.stringify(r))),r=this.boundingSphere,null!==r&&(e.data.boundingSphere={center:r.center.toArray(),radius:r.radius}),e},clone:function(){return(new B).copy(this)},copy:function(e){var t;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingSphere=this.boundingBox=null,this.name=e.name;var i=e.index;null!==i&&this.setIndex(i.clone()),i=e.attributes;for(a in i)this.addAttribute(a,i[a].clone());var n=e.morphAttributes;for(a in n){var r=[],o=n[a];for(i=0,t=o.length;t>i;i++)r.push(o[i].clone());this.morphAttributes[a]=r}var a=e.groups;for(i=0,t=a.length;t>i;i++)n=a[i],this.addGroup(n.start,n.count,n.materialIndex);return a=e.boundingBox,null!==a&&(this.boundingBox=a.clone()),a=e.boundingSphere,null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(S.prototype),U.prototype.constructor=U,G.prototype=Object.create(B.prototype),G.prototype.constructor=G,F.prototype=Object.create(S.prototype),F.prototype.constructor=F,H.prototype=Object.create(B.prototype),H.prototype.constructor=H;var oa=0;j.prototype=Object.assign(Object.create(t.prototype),{constructor:j,isMaterial:!0,onBeforeCompile:function(){},setValues:function(e){if(void 0!==e)for(var t in e){var i=e[t];if(void 0===i)console.warn("THREE.Material: '"+t+"' parameter is undefined.");else if("shading"===t)console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===i?!0:!1;else{var n=this[t];void 0===n?console.warn("THREE."+this.type+": '"+t+"' is not a property of this material."):n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[t]="overdraw"===t?Number(i):i}}},toJSON:function(e){function t(e){var t,i=[];for(t in e){var n=e[t];delete n.metadata,i.push(n)}return i}var i=void 0===e||"string"==typeof e;i&&(e={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};return n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,n.reflectivity=this.reflectivity),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),1!==this.blending&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),0!==this.side&&(n.side=this.side),0!==this.vertexColors&&(n.vertexColors=this.vertexColors),1>this.opacity&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),0<this.alphaTest&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),1<this.wireframeLinewidth&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),i&&(i=t(e.textures),e=t(e.images),0<i.length&&(n.textures=i),0<e.length&&(n.images=e)),n},clone:function(){return(new this.constructor).copy(this)},copy:function(e){this.name=e.name,this.fog=e.fog,this.lights=e.lights,this.blending=e.blending,this.side=e.side,this.flatShading=e.flatShading,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.premultipliedAlpha=e.premultipliedAlpha,this.overdraw=e.overdraw,this.visible=e.visible,this.userData=JSON.parse(JSON.stringify(e.userData)),this.clipShadows=e.clipShadows,this.clipIntersection=e.clipIntersection;var t=e.clippingPlanes,i=null;if(null!==t){var n=t.length;i=Array(n);for(var r=0;r!==n;++r)i[r]=t[r].clone()}return this.clippingPlanes=i,this.shadowSide=e.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),z.prototype=Object.create(j.prototype),z.prototype.constructor=z,z.prototype.isMeshBasicMaterial=!0,z.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this},$.prototype=Object.create(j.prototype),$.prototype.constructor=$,$.prototype.isShaderMaterial=!0,$.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=Ko.clone(e.uniforms),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.lights=e.lights,this.clipping=e.clipping,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this.extensions=e.extensions,this},$.prototype.toJSON=function(e){return e=j.prototype.toJSON.call(this,e),e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e},Object.assign(V.prototype,{set:function(e,t){return this.origin.copy(e),this.direction.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this},at:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .at() target is now required"),t=new o),t.copy(this.direction).multiplyScalar(e).add(this.origin)},lookAt:function(e){return this.direction.copy(e).sub(this.origin).normalize(),this},recast:function(){var e=new o;return function(t){return this.origin.copy(this.at(t,e)),this}}(),closestPointToPoint:function(e,t){return void 0===t&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),t=new o),t.subVectors(e,this.origin),e=t.dot(this.direction),0>e?t.copy(this.origin):t.copy(this.direction).multiplyScalar(e).add(this.origin)},distanceToPoint:function(e){return Math.sqrt(this.distanceSqToPoint(e))},distanceSqToPoint:function(){var e=new o;return function(t){var i=e.subVectors(t,this.origin).dot(this.direction);return 0>i?this.origin.distanceToSquared(t):(e.copy(this.direction).multiplyScalar(i).add(this.origin),e.distanceToSquared(t))}}(),distanceSqToSegment:function(){var e=new o,t=new o,i=new o;return function(n,r,o,a){e.copy(n).add(r).multiplyScalar(.5),t.copy(r).sub(n).normalize(),i.copy(this.origin).sub(e);var s=.5*n.distanceTo(r),l=-this.direction.dot(t),u=i.dot(this.direction),c=-i.dot(t),h=i.lengthSq(),p=Math.abs(1-l*l);if(p>0){n=l*c-u,r=l*u-c;var d=s*p;n>=0?r>=-d?d>=r?(s=1/p,n*=s,r*=s,l=n*(n+l*r+2*u)+r*(l*n+r+2*c)+h):(r=s,n=Math.max(0,-(l*r+u)),l=-n*n+r*(r+2*c)+h):(r=-s,n=Math.max(0,-(l*r+u)),l=-n*n+r*(r+2*c)+h):-d>=r?(n=Math.max(0,-(-l*s+u)),r=n>0?-s:Math.min(Math.max(-s,-c),s),l=-n*n+r*(r+2*c)+h):d>=r?(n=0,r=Math.min(Math.max(-s,-c),s),l=r*(r+2*c)+h):(n=Math.max(0,-(l*s+u)),r=n>0?s:Math.min(Math.max(-s,-c),s),l=-n*n+r*(r+2*c)+h)}else r=l>0?-s:s,n=Math.max(0,-(l*r+u)),l=-n*n+r*(r+2*c)+h;return o&&o.copy(this.direction).multiplyScalar(n).add(this.origin),a&&a.copy(t).multiplyScalar(r).add(e),l}}(),intersectSphere:function(){var e=new o;return function(t,i){e.subVectors(t.center,this.origin);var n=e.dot(this.direction),r=e.dot(e)-n*n;return t=t.radius*t.radius,r>t?null:(t=Math.sqrt(t-r),r=n-t,n+=t,0>r&&0>n?null:0>r?this.at(n,i):this.at(r,i))}}(),intersectsSphere:function(e){return this.distanceToPoint(e.center)<=e.radius},distanceToPlane:function(e){var t=e.normal.dot(this.direction);return 0===t?0===e.distanceToPoint(this.origin)?0:null:(e=-(this.origin.dot(e.normal)+e.constant)/t,e>=0?e:null)},intersectPlane:function(e,t){return e=this.distanceToPlane(e),null===e?null:this.at(e,t)},intersectsPlane:function(e){var t=e.distanceToPoint(this.origin);return 0===t||0>e.normal.dot(this.direction)*t?!0:!1},intersectBox:function(e,t){var i=1/this.direction.x,n=1/this.direction.y,r=1/this.direction.z,o=this.origin;if(i>=0){var a=(e.min.x-o.x)*i;i*=e.max.x-o.x}else a=(e.max.x-o.x)*i,i*=e.min.x-o.x;if(n>=0){var s=(e.min.y-o.y)*n;n*=e.max.y-o.y}else s=(e.max.y-o.y)*n,n*=e.min.y-o.y;return a>n||s>i?null:((s>a||a!==a)&&(a=s),(i>n||i!==i)&&(i=n),r>=0?(s=(e.min.z-o.z)*r,e=(e.max.z-o.z)*r):(s=(e.max.z-o.z)*r,e=(e.min.z-o.z)*r),a>e||s>i?null:((s>a||a!==a)&&(a=s),(i>e||i!==i)&&(i=e),0>i?null:this.at(a>=0?a:i,t)))},intersectsBox:function(){var e=new o;return function(t){return null!==this.intersectBox(t,e)}}(),intersectTriangle:function(){var e=new o,t=new o,i=new o,n=new o;return function(r,o,a,s,l){if(t.subVectors(o,r),i.subVectors(a,r),n.crossVectors(t,i),o=this.direction.dot(n),o>0){if(s)return null;s=1}else{if(!(0>o))return null;s=-1,o=-o}return e.subVectors(this.origin,r),r=s*this.direction.dot(i.crossVectors(e,i)),0>r?null:(a=s*this.direction.dot(t.cross(e)),0>a||r+a>o?null:(r=-s*e.dot(n),0>r?null:this.at(r/o,l)))}}(),applyMatrix4:function(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this},equals:function(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}}),Object.assign(W.prototype,{set:function(e,t){return this.start.copy(e),this.end.copy(t),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.start.copy(e.start),this.end.copy(e.end),this},getCenter:function(e){return void 0===e&&(console.warn("THREE.Line3: .getCenter() target is now required"),e=new o),e.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(e){return void 0===e&&(console.warn("THREE.Line3: .delta() target is now required"),e=new o),e.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(e,t){return void 0===t&&(console.warn("THREE.Line3: .at() target is now required"),t=new o),this.delta(t).multiplyScalar(e).add(this.start)},closestPointToPointParameter:function(){var e=new o,t=new o;return function(i,n){return e.subVectors(i,this.start),t.subVectors(this.end,this.start),i=t.dot(t),i=t.dot(e)/i,n&&(i=qo.clamp(i,0,1)),i
}}(),closestPointToPoint:function(e,t,i){return e=this.closestPointToPointParameter(e,t),void 0===i&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),i=new o),this.delta(i).multiplyScalar(e).add(this.start)},applyMatrix4:function(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this},equals:function(e){return e.start.equals(this.start)&&e.end.equals(this.end)}}),Object.assign(X,{getNormal:function(){var e=new o;return function(t,i,n,r){return void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new o),r.subVectors(n,i),e.subVectors(t,i),r.cross(e),t=r.lengthSq(),t>0?r.multiplyScalar(1/Math.sqrt(t)):r.set(0,0,0)}}(),getBarycoord:function(){var e=new o,t=new o,i=new o;return function(n,r,a,s,l){e.subVectors(s,r),t.subVectors(a,r),i.subVectors(n,r),n=e.dot(e),r=e.dot(t),a=e.dot(i);var u=t.dot(t);s=t.dot(i);var c=n*u-r*r;return void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new o),0===c?l.set(-2,-1,-1):(c=1/c,u=(u*a-r*s)*c,n=(n*s-r*a)*c,l.set(1-u-n,n,u))}}(),containsPoint:function(){var e=new o;return function(t,i,n,r){return X.getBarycoord(t,i,n,r,e),0<=e.x&&0<=e.y&&1>=e.x+e.y}}()}),Object.assign(X.prototype,{set:function(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this},setFromPointsAndIndices:function(e,t,i,n){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[n]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this},getArea:function(){var e=new o,t=new o;return function(){return e.subVectors(this.c,this.b),t.subVectors(this.a,this.b),.5*e.cross(t).length()}}(),getMidpoint:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),e=new o),e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(e){return X.getNormal(this.a,this.b,this.c,e)},getPlane:function(e){return void 0===e&&(console.warn("THREE.Triangle: .getPlane() target is now required"),e=new o),e.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(e,t){return X.getBarycoord(e,this.a,this.b,this.c,t)},containsPoint:function(e){return X.containsPoint(e,this.a,this.b,this.c)},intersectsBox:function(e){return e.intersectsTriangle(this)},closestPointToPoint:function(){var e=new f,t=[new W,new W,new W],i=new o,n=new o;return function(r,a){void 0===a&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),a=new o);var s=1/0;if(e.setFromCoplanarPoints(this.a,this.b,this.c),e.projectPoint(r,i),!0===this.containsPoint(i))a.copy(i);else for(t[0].set(this.a,this.b),t[1].set(this.b,this.c),t[2].set(this.c,this.a),r=0;r<t.length;r++){t[r].closestPointToPoint(i,!0,n);var l=i.distanceToSquared(n);s>l&&(s=l,a.copy(n))}return a}}(),equals:function(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}),Y.prototype=Object.assign(Object.create(b.prototype),{constructor:Y,isMesh:!0,setDrawMode:function(e){this.drawMode=e},copy:function(e){return b.prototype.copy.call(this,e),this.drawMode=e.drawMode,void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this},updateMorphTargets:function(){var e=this.geometry;if(e.isBufferGeometry){e=e.morphAttributes;var t=Object.keys(e);if(0<t.length){var i=e[t[0]];if(void 0!==i)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;t>e;e++){var n=i[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}else if(i=e.morphTargets,void 0!==i&&0<i.length)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},e=0,t=i.length;t>e;e++)n=i[e].name||String(e),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e},raycast:function(){function e(e,t,i,n,r,o,a){return X.getBarycoord(e,t,i,n,_),r.multiplyScalar(_.x),o.multiplyScalar(_.y),a.multiplyScalar(_.z),r.add(o).add(a),r.clone()}function t(e,t,i,n,r,o,a,s){return null===(1===t.side?n.intersectTriangle(a,o,r,!0,s):n.intersectTriangle(r,o,a,2!==t.side,s))?null:(w.copy(s),w.applyMatrix4(e.matrixWorld),t=i.ray.origin.distanceTo(w),t<i.near||t>i.far?null:{distance:t,point:w.clone(),object:e})}function r(i,n,r,o,a,s,l,p){return u.fromBufferAttribute(o,s),c.fromBufferAttribute(o,l),h.fromBufferAttribute(o,p),(i=t(i,i.material,n,r,u,c,h,b))&&(a&&(g.fromBufferAttribute(a,s),v.fromBufferAttribute(a,l),y.fromBufferAttribute(a,p),i.uv=e(b,u,c,h,g,v,y)),a=new E(s,l,p),X.getNormal(u,c,h,a.normal),i.face=a,i.faceIndex=s),i}var a=new n,s=new V,l=new d,u=new o,c=new o,h=new o,p=new o,f=new o,m=new o,g=new i,v=new i,y=new i,_=new o,b=new o,w=new o;return function(i,n){var o=this.geometry,d=this.material,_=this.matrixWorld;if(void 0!==d&&(null===o.boundingSphere&&o.computeBoundingSphere(),l.copy(o.boundingSphere),l.applyMatrix4(_),!1!==i.ray.intersectsSphere(l)&&(a.getInverse(_),s.copy(i.ray).applyMatrix4(a),null===o.boundingBox||!1!==s.intersectsBox(o.boundingBox)))){var w;if(o.isBufferGeometry){d=o.index;var x=o.attributes.position;o=o.attributes.uv;var E;if(null!==d)for(_=0,E=d.count;E>_;_+=3){var S=d.getX(_),T=d.getX(_+1),C=d.getX(_+2);(w=r(this,i,s,x,o,S,T,C))&&(w.faceIndex=Math.floor(_/3),n.push(w))}else if(void 0!==x)for(_=0,E=x.count;E>_;_+=3)S=_,T=_+1,C=_+2,(w=r(this,i,s,x,o,S,T,C))&&n.push(w)}else if(o.isGeometry){_=Array.isArray(d),E=o.vertices,S=o.faces,T=o.faceVertexUvs[0],0<T.length&&(x=T);for(var M=0,P=S.length;P>M;M++){var I=S[M];if(w=_?d[I.materialIndex]:d,void 0!==w){T=E[I.a],C=E[I.b];var L=E[I.c];if(!0===w.morphTargets){var R=o.morphTargets,A=this.morphTargetInfluences;u.set(0,0,0),c.set(0,0,0),h.set(0,0,0);for(var O=0,k=R.length;k>O;O++){var D=A[O];if(0!==D){var N=R[O].vertices;u.addScaledVector(p.subVectors(N[I.a],T),D),c.addScaledVector(f.subVectors(N[I.b],C),D),h.addScaledVector(m.subVectors(N[I.c],L),D)}}u.add(T),c.add(C),h.add(L),T=u,C=c,L=h}(w=t(this,w,i,s,T,C,L,b))&&(x&&x[M]&&(R=x[M],g.copy(R[0]),v.copy(R[1]),y.copy(R[2]),w.uv=e(b,T,C,L,g,v,y)),w.face=I,w.faceIndex=M,n.push(w))}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),at.prototype=Object.create(s.prototype),at.prototype.constructor=at,at.prototype.isCubeTexture=!0,Object.defineProperty(at.prototype,"images",{get:function(){return this.image},set:function(e){this.image=e}});var aa=new s,sa=new at,la=[],ua=[],ca=new Float32Array(16),ha=new Float32Array(9);Nt.prototype.setValue=function(e,t){for(var i=this.seq,n=0,r=i.length;n!==r;++n){var o=i[n];o.setValue(e,t[o.id])}};var pa=/([\w\d_]+)(\])?(\[|\.)?/g;Bt.prototype.setValue=function(e,t,i){t=this.map[t],void 0!==t&&t.setValue(e,i,this.renderer)},Bt.prototype.setOptional=function(e,t,i){t=t[i],void 0!==t&&this.setValue(e,i,t)},Bt.upload=function(e,t,i,n){for(var r=0,o=t.length;r!==o;++r){var a=t[r],s=i[a.id];!1!==s.needsUpdate&&a.setValue(e,s.value,n)}},Bt.seqWithValue=function(e,t){for(var i=[],n=0,r=e.length;n!==r;++n){var o=e[n];o.id in t&&i.push(o)}return i};var da=0,fa=0;li.prototype=Object.create(j.prototype),li.prototype.constructor=li,li.prototype.isMeshDepthMaterial=!0,li.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.depthPacking=e.depthPacking,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this},ui.prototype=Object.create(j.prototype),ui.prototype.constructor=ui,ui.prototype.isMeshDistanceMaterial=!0,ui.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.referencePosition.copy(e.referencePosition),this.nearDistance=e.nearDistance,this.farDistance=e.farDistance,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this},hi.prototype=Object.create(s.prototype),hi.prototype.constructor=hi,gi.prototype=Object.assign(Object.create(w.prototype),{constructor:gi,isPerspectiveCamera:!0,copy:function(e,t){return w.prototype.copy.call(this,e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this},setFocalLength:function(e){e=.5*this.getFilmHeight()/e,this.fov=2*qo.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var e=Math.tan(.5*qo.DEG2RAD*this.fov);return.5*this.getFilmHeight()/e},getEffectiveFOV:function(){return 2*qo.RAD2DEG*Math.atan(Math.tan(.5*qo.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(e,t,i,n,r,o){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=n,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var e=this.near,t=e*Math.tan(.5*qo.DEG2RAD*this.fov)/this.zoom,i=2*t,n=this.aspect*i,r=-.5*n,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*n/a,t-=o.offsetY*i/s,n*=o.width/a,i*=o.height/s}o=this.filmOffset,0!==o&&(r+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+n,t,t-i,e,this.far)},toJSON:function(e){return e=b.prototype.toJSON.call(this,e),e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),vi.prototype=Object.assign(Object.create(gi.prototype),{constructor:vi,isArrayCamera:!0}),bi.prototype.isFogExp2=!0,bi.prototype.clone=function(){return new bi(this.color.getHex(),this.density)},bi.prototype.toJSON=function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}},wi.prototype.isFog=!0,wi.prototype.clone=function(){return new wi(this.color.getHex(),this.near,this.far)},wi.prototype.toJSON=function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}},xi.prototype=Object.assign(Object.create(b.prototype),{constructor:xi,copy:function(e,t){return b.prototype.copy.call(this,e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.fog&&(this.fog=e.fog.clone()),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.autoUpdate=e.autoUpdate,this.matrixAutoUpdate=e.matrixAutoUpdate,this},toJSON:function(e){var t=b.prototype.toJSON.call(this,e);return null!==this.background&&(t.object.background=this.background.toJSON(e)),null!==this.fog&&(t.object.fog=this.fog.toJSON()),t}}),Ei.prototype=Object.create(j.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isSpriteMaterial=!0,Ei.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.rotation=e.rotation,this},Si.prototype=Object.assign(Object.create(b.prototype),{constructor:Si,isSprite:!0,raycast:function(){var e=new o,t=new o,i=new o;return function(n,r){t.setFromMatrixPosition(this.matrixWorld),n.ray.closestPointToPoint(t,e),i.setFromMatrixScale(this.matrixWorld);var o=i.x*i.y/4;t.distanceToSquared(e)>o||(o=n.ray.origin.distanceTo(e),o<n.near||o>n.far||r.push({distance:o,point:e.clone(),face:null,object:this}))}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(e){return b.prototype.copy.call(this,e),void 0!==e.center&&this.center.copy(e.center),this}}),Ti.prototype=Object.assign(Object.create(b.prototype),{constructor:Ti,copy:function(e){b.prototype.copy.call(this,e,!1),e=e.levels;for(var t=0,i=e.length;i>t;t++){var n=e[t];this.addLevel(n.object.clone(),n.distance)}return this},addLevel:function(e,t){void 0===t&&(t=0),t=Math.abs(t);for(var i=this.levels,n=0;n<i.length&&!(t<i[n].distance);n++);i.splice(n,0,{distance:t,object:e}),this.add(e)},getObjectForDistance:function(e){for(var t=this.levels,i=1,n=t.length;n>i&&!(e<t[i].distance);i++);return t[i-1].object},raycast:function(){var e=new o;return function(t,i){e.setFromMatrixPosition(this.matrixWorld);var n=t.ray.origin.distanceTo(e);this.getObjectForDistance(n).raycast(t,i)}}(),update:function(){var e=new o,t=new o;return function(i){var n=this.levels;if(1<n.length){e.setFromMatrixPosition(i.matrixWorld),t.setFromMatrixPosition(this.matrixWorld),i=e.distanceTo(t),n[0].object.visible=!0;for(var r=1,o=n.length;o>r&&i>=n[r].distance;r++)n[r-1].object.visible=!1,n[r].object.visible=!0;for(;o>r;r++)n[r].object.visible=!1}}}(),toJSON:function(e){e=b.prototype.toJSON.call(this,e),e.object.levels=[];for(var t=this.levels,i=0,n=t.length;n>i;i++){var r=t[i];e.object.levels.push({object:r.object.uuid,distance:r.distance})}return e}}),Object.assign(Ci.prototype,{calculateInverses:function(){this.boneInverses=[];for(var e=0,t=this.bones.length;t>e;e++){var i=new n;this.bones[e]&&i.getInverse(this.bones[e].matrixWorld),this.boneInverses.push(i)}},pose:function(){var e,t,i=0;for(t=this.bones.length;t>i;i++)(e=this.bones[i])&&e.matrixWorld.getInverse(this.boneInverses[i]);for(i=0,t=this.bones.length;t>i;i++)(e=this.bones[i])&&(e.parent&&e.parent.isBone?(e.matrix.getInverse(e.parent.matrixWorld),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))},update:function(){var e=new n,t=new n;return function(){for(var i=this.bones,n=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=i.length;s>a;a++)e.multiplyMatrices(i[a]?i[a].matrixWorld:t,n[a]),e.toArray(r,16*a);void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new Ci(this.bones,this.boneInverses)},getBoneByName:function(e){for(var t=0,i=this.bones.length;i>t;t++){var n=this.bones[t];if(n.name===e)return n}}}),Mi.prototype=Object.assign(Object.create(b.prototype),{constructor:Mi,isBone:!0}),Pi.prototype=Object.assign(Object.create(Y.prototype),{constructor:Pi,isSkinnedMesh:!0,initBones:function(){var e,t=[];if(this.geometry&&void 0!==this.geometry.bones){var i=0;for(e=this.geometry.bones.length;e>i;i++){var n=this.geometry.bones[i],r=new Mi;t.push(r),r.name=n.name,r.position.fromArray(n.pos),r.quaternion.fromArray(n.rotq),void 0!==n.scl&&r.scale.fromArray(n.scl)}for(i=0,e=this.geometry.bones.length;e>i;i++)n=this.geometry.bones[i],-1!==n.parent&&null!==n.parent&&void 0!==t[n.parent]?t[n.parent].add(t[i]):this.add(t[i])}return this.updateMatrixWorld(!0),t},bind:function(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.getInverse(t)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){var e;if(this.geometry&&this.geometry.isGeometry)for(e=0;e<this.geometry.skinWeights.length;e++){var t=this.geometry.skinWeights[e],i=1/t.manhattanLength();1/0!==i?t.multiplyScalar(i):t.set(1,0,0,0)}else if(this.geometry&&this.geometry.isBufferGeometry){t=new l;var n=this.geometry.attributes.skinWeight;for(e=0;e<n.count;e++)t.x=n.getX(e),t.y=n.getY(e),t.z=n.getZ(e),t.w=n.getW(e),i=1/t.manhattanLength(),1/0!==i?t.multiplyScalar(i):t.set(1,0,0,0),n.setXYZW(e,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(e){Y.prototype.updateMatrixWorld.call(this,e),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ii.prototype=Object.create(j.prototype),Ii.prototype.constructor=Ii,Ii.prototype.isLineBasicMaterial=!0,Ii.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this},Li.prototype=Object.assign(Object.create(b.prototype),{constructor:Li,isLine:!0,computeLineDistances:function(){var e=new o,t=new o;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[0],o=1,a=n.count;a>o;o++)e.fromBufferAttribute(n,o-1),t.fromBufferAttribute(n,o),r[o]=r[o-1],r[o]+=e.distanceTo(t);i.addAttribute("lineDistance",new O(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,r=i.lineDistances,r[0]=0,o=1,a=n.length;a>o;o++)r[o]=r[o-1],r[o]+=n[o-1].distanceTo(n[o]);return this}}(),raycast:function(){var e=new n,t=new V,i=new d;return function(n,r){var a=n.linePrecision;a*=a;var s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),i.copy(s.boundingSphere),i.applyMatrix4(l),!1!==n.ray.intersectsSphere(i)){e.getInverse(l),t.copy(n.ray).applyMatrix4(e);var u=new o,c=new o;l=new o;var h=new o,p=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var d=s.index,f=s.attributes.position.array;if(null!==d){d=d.array,s=0;for(var m=d.length-1;m>s;s+=p){var g=d[s+1];u.fromArray(f,3*d[s]),c.fromArray(f,3*g),g=t.distanceSqToSegment(u,c,h,l),g>a||(h.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(h),g<n.near||g>n.far||r.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}else for(s=0,m=f.length/3-1;m>s;s+=p)u.fromArray(f,3*s),c.fromArray(f,3*s+3),g=t.distanceSqToSegment(u,c,h,l),g>a||(h.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(h),g<n.near||g>n.far||r.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}else if(s.isGeometry)for(u=s.vertices,c=u.length,s=0;c-1>s;s+=p)g=t.distanceSqToSegment(u[s],u[s+1],h,l),g>a||(h.applyMatrix4(this.matrixWorld),g=n.ray.origin.distanceTo(h),g<n.near||g>n.far||r.push({distance:g,point:l.clone().applyMatrix4(this.matrixWorld),index:s,face:null,faceIndex:null,object:this}))}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ri.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ri,isLineSegments:!0,computeLineDistances:function(){var e=new o,t=new o;return function(){var i=this.geometry;if(i.isBufferGeometry)if(null===i.index){for(var n=i.attributes.position,r=[],o=0,a=n.count;a>o;o+=2)e.fromBufferAttribute(n,o),t.fromBufferAttribute(n,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);i.addAttribute("lineDistance",new O(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(i.isGeometry)for(n=i.vertices,r=i.lineDistances,o=0,a=n.length;a>o;o+=2)e.copy(n[o]),t.copy(n[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+e.distanceTo(t);return this}}()}),Ai.prototype=Object.assign(Object.create(Li.prototype),{constructor:Ai,isLineLoop:!0}),Oi.prototype=Object.create(j.prototype),Oi.prototype.constructor=Oi,Oi.prototype.isPointsMaterial=!0,Oi.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this},ki.prototype=Object.assign(Object.create(b.prototype),{constructor:ki,isPoints:!0,raycast:function(){var e=new n,t=new V,i=new d;return function(n,r){function a(e,i){var o=t.distanceSqToPoint(e);h>o&&(t.closestPointToPoint(e,p),p.applyMatrix4(u),e=n.ray.origin.distanceTo(p),e<n.near||e>n.far||r.push({distance:e,distanceToRay:Math.sqrt(o),point:p.clone(),index:i,face:null,object:s}))}var s=this,l=this.geometry,u=this.matrixWorld,c=n.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),i.copy(l.boundingSphere),i.applyMatrix4(u),i.radius+=c,!1!==n.ray.intersectsSphere(i)){e.getInverse(u),t.copy(n.ray).applyMatrix4(e),c/=(this.scale.x+this.scale.y+this.scale.z)/3;var h=c*c;c=new o;var p=new o;if(l.isBufferGeometry){var d=l.index;if(l=l.attributes.position.array,null!==d){var f=d.array;d=0;for(var m=f.length;m>d;d++){var g=f[d];c.fromArray(l,3*g),a(c,g)}}else for(d=0,f=l.length/3;f>d;d++)c.fromArray(l,3*d),a(c,d)}else for(c=l.vertices,d=0,f=c.length;f>d;d++)a(c[d],d)}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Di.prototype=Object.assign(Object.create(b.prototype),{constructor:Di,isGroup:!0}),Ni.prototype=Object.assign(Object.create(s.prototype),{constructor:Ni,isVideoTexture:!0,update:function(){var e=this.image;e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Bi.prototype=Object.create(s.prototype),Bi.prototype.constructor=Bi,Bi.prototype.isCompressedTexture=!0,Ui.prototype=Object.create(s.prototype),Ui.prototype.constructor=Ui,Ui.prototype.isDepthTexture=!0,Gi.prototype=Object.create(B.prototype),Gi.prototype.constructor=Gi,Fi.prototype=Object.create(S.prototype),Fi.prototype.constructor=Fi,Hi.prototype=Object.create(B.prototype),Hi.prototype.constructor=Hi,ji.prototype=Object.create(S.prototype),ji.prototype.constructor=ji,zi.prototype=Object.create(B.prototype),zi.prototype.constructor=zi,$i.prototype=Object.create(S.prototype),$i.prototype.constructor=$i,Vi.prototype=Object.create(zi.prototype),Vi.prototype.constructor=Vi,Wi.prototype=Object.create(S.prototype),Wi.prototype.constructor=Wi,Xi.prototype=Object.create(zi.prototype),Xi.prototype.constructor=Xi,Yi.prototype=Object.create(S.prototype),Yi.prototype.constructor=Yi,qi.prototype=Object.create(zi.prototype),qi.prototype.constructor=qi,Ji.prototype=Object.create(S.prototype),Ji.prototype.constructor=Ji,Zi.prototype=Object.create(zi.prototype),Zi.prototype.constructor=Zi,Ki.prototype=Object.create(S.prototype),Ki.prototype.constructor=Ki,Qi.prototype=Object.create(B.prototype),Qi.prototype.constructor=Qi,en.prototype=Object.create(S.prototype),en.prototype.constructor=en,tn.prototype=Object.create(B.prototype),tn.prototype.constructor=tn,nn.prototype=Object.create(S.prototype),nn.prototype.constructor=nn,rn.prototype=Object.create(B.prototype),rn.prototype.constructor=rn;var ma={triangulate:function(e,t,i){i=i||2;var n=t&&t.length,r=n?t[0]*i:e.length,o=on(e,0,r,i,!0),a=[];if(!o)return a;var s;if(n){var l=i;n=[];var u,c=0;for(u=t.length;u>c;c++){var h=t[c]*l,p=u-1>c?t[c+1]*l:e.length;h=on(e,h,p,l,!1),h===h.next&&(h.steiner=!0),n.push(hn(h))}for(n.sort(ln),c=0;c<n.length;c++)t=n[c],l=o,(l=un(t,l))&&(t=vn(l,t),an(t,t.next)),o=an(o,o.next)}if(e.length>80*i){var d=s=e[0],f=n=e[1];for(l=i;r>l;l+=i)c=e[l],t=e[l+1],d>c&&(d=c),f>t&&(f=t),c>s&&(s=c),t>n&&(n=t);s=Math.max(s-d,n-f),s=0!==s?1/s:0}return sn(o,a,i,d,f,s),a}},ga={area:function(e){for(var t=e.length,i=0,n=t-1,r=0;t>r;n=r++)i+=e[n].x*e[r].y-e[r].x*e[n].y;return.5*i},isClockWise:function(e){return 0>ga.area(e)},triangulateShape:function(e,t){var i=[],n=[],r=[];wn(e),xn(i,e);var o=e.length;for(t.forEach(wn),e=0;e<t.length;e++)n.push(o),o+=t[e].length,xn(i,t[e]);for(t=ma.triangulate(i,n),e=0;e<t.length;e+=3)r.push(t.slice(e,e+3));return r}};En.prototype=Object.create(S.prototype),En.prototype.constructor=En,Sn.prototype=Object.create(B.prototype),Sn.prototype.constructor=Sn;var va={generateTopUV:function(e,t,n,r,o){e=t[3*r],r=t[3*r+1];var a=t[3*o];return o=t[3*o+1],[new i(t[3*n],t[3*n+1]),new i(e,r),new i(a,o)]},generateSideWallUV:function(e,t,n,r,o,a){e=t[3*n];var s=t[3*n+1];n=t[3*n+2];var l=t[3*r],u=t[3*r+1];r=t[3*r+2];var c=t[3*o],h=t[3*o+1];o=t[3*o+2];var p=t[3*a],d=t[3*a+1];return t=t[3*a+2],.01>Math.abs(s-u)?[new i(e,1-n),new i(l,1-r),new i(c,1-o),new i(p,1-t)]:[new i(s,1-n),new i(u,1-r),new i(h,1-o),new i(d,1-t)]}};Tn.prototype=Object.create(S.prototype),Tn.prototype.constructor=Tn,Cn.prototype=Object.create(Sn.prototype),Cn.prototype.constructor=Cn,Mn.prototype=Object.create(S.prototype),Mn.prototype.constructor=Mn,Pn.prototype=Object.create(B.prototype),Pn.prototype.constructor=Pn,In.prototype=Object.create(S.prototype),In.prototype.constructor=In,Ln.prototype=Object.create(B.prototype),Ln.prototype.constructor=Ln,Rn.prototype=Object.create(S.prototype),Rn.prototype.constructor=Rn,An.prototype=Object.create(B.prototype),An.prototype.constructor=An,On.prototype=Object.create(S.prototype),On.prototype.constructor=On,On.prototype.toJSON=function(){var e=S.prototype.toJSON.call(this);return Dn(this.parameters.shapes,e)},kn.prototype=Object.create(B.prototype),kn.prototype.constructor=kn,kn.prototype.toJSON=function(){var e=B.prototype.toJSON.call(this);return Dn(this.parameters.shapes,e)},Nn.prototype=Object.create(B.prototype),Nn.prototype.constructor=Nn,Bn.prototype=Object.create(S.prototype),Bn.prototype.constructor=Bn,Un.prototype=Object.create(B.prototype),Un.prototype.constructor=Un,Gn.prototype=Object.create(Bn.prototype),Gn.prototype.constructor=Gn,Fn.prototype=Object.create(Un.prototype),Fn.prototype.constructor=Fn,Hn.prototype=Object.create(S.prototype),Hn.prototype.constructor=Hn,jn.prototype=Object.create(B.prototype),jn.prototype.constructor=jn;var ya=Object.freeze({WireframeGeometry:Gi,ParametricGeometry:Fi,ParametricBufferGeometry:Hi,TetrahedronGeometry:$i,TetrahedronBufferGeometry:Vi,OctahedronGeometry:Wi,OctahedronBufferGeometry:Xi,IcosahedronGeometry:Yi,IcosahedronBufferGeometry:qi,DodecahedronGeometry:Ji,DodecahedronBufferGeometry:Zi,PolyhedronGeometry:ji,PolyhedronBufferGeometry:zi,TubeGeometry:Ki,TubeBufferGeometry:Qi,TorusKnotGeometry:en,TorusKnotBufferGeometry:tn,TorusGeometry:nn,TorusBufferGeometry:rn,TextGeometry:Tn,TextBufferGeometry:Cn,SphereGeometry:Mn,SphereBufferGeometry:Pn,RingGeometry:In,RingBufferGeometry:Ln,PlaneGeometry:F,PlaneBufferGeometry:H,LatheGeometry:Rn,LatheBufferGeometry:An,ShapeGeometry:On,ShapeBufferGeometry:kn,ExtrudeGeometry:En,ExtrudeBufferGeometry:Sn,EdgesGeometry:Nn,ConeGeometry:Gn,ConeBufferGeometry:Fn,CylinderGeometry:Bn,CylinderBufferGeometry:Un,CircleGeometry:Hn,CircleBufferGeometry:jn,BoxGeometry:U,BoxBufferGeometry:G});zn.prototype=Object.create(j.prototype),zn.prototype.constructor=zn,zn.prototype.isShadowMaterial=!0,zn.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this},$n.prototype=Object.create($.prototype),$n.prototype.constructor=$n,$n.prototype.isRawShaderMaterial=!0,Vn.prototype=Object.create(j.prototype),Vn.prototype.constructor=Vn,Vn.prototype.isMeshStandardMaterial=!0,Vn.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Wn.prototype=Object.create(Vn.prototype),Wn.prototype.constructor=Wn,Wn.prototype.isMeshPhysicalMaterial=!0,Wn.prototype.copy=function(e){return Vn.prototype.copy.call(this,e),this.defines={PHYSICAL:""},this.reflectivity=e.reflectivity,this.clearCoat=e.clearCoat,this.clearCoatRoughness=e.clearCoatRoughness,this},Xn.prototype=Object.create(j.prototype),Xn.prototype.constructor=Xn,Xn.prototype.isMeshPhongMaterial=!0,Xn.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Yn.prototype=Object.create(Xn.prototype),Yn.prototype.constructor=Yn,Yn.prototype.isMeshToonMaterial=!0,Yn.prototype.copy=function(e){return Xn.prototype.copy.call(this,e),this.gradientMap=e.gradientMap,this},qn.prototype=Object.create(j.prototype),qn.prototype.constructor=qn,qn.prototype.isMeshNormalMaterial=!0,qn.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Jn.prototype=Object.create(j.prototype),Jn.prototype.constructor=Jn,Jn.prototype.isMeshLambertMaterial=!0,Jn.prototype.copy=function(e){return j.prototype.copy.call(this,e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.skinning=e.skinning,this.morphTargets=e.morphTargets,this.morphNormals=e.morphNormals,this},Zn.prototype=Object.create(Ii.prototype),Zn.prototype.constructor=Zn,Zn.prototype.isLineDashedMaterial=!0,Zn.prototype.copy=function(e){return Ii.prototype.copy.call(this,e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this};var _a=Object.freeze({ShadowMaterial:zn,SpriteMaterial:Ei,RawShaderMaterial:$n,ShaderMaterial:$,PointsMaterial:Oi,MeshPhysicalMaterial:Wn,MeshStandardMaterial:Vn,MeshPhongMaterial:Xn,MeshToonMaterial:Yn,MeshNormalMaterial:qn,MeshLambertMaterial:Jn,MeshDepthMaterial:li,MeshDistanceMaterial:ui,MeshBasicMaterial:z,LineDashedMaterial:Zn,LineBasicMaterial:Ii,Material:j}),ba={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){return!1!==this.enabled?this.files[e]:void 0},remove:function(e){delete this.files[e]},clear:function(){this.files={}}},wa=new Kn,xa={};Object.assign(Qn.prototype,{load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);
var r=this,o=ba.get(e);if(void 0!==o)return r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o;if(void 0===xa[e]){var a=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(a){i=a[1];var s=!!a[2];a=a[3],a=window.decodeURIComponent(a),s&&(a=window.atob(a));try{var l=(this.responseType||"").toLowerCase();switch(l){case"arraybuffer":case"blob":var u=new Uint8Array(a.length);for(s=0;s<a.length;s++)u[s]=a.charCodeAt(s);var c="blob"===l?new Blob([u.buffer],{type:i}):u.buffer;break;case"document":c=(new DOMParser).parseFromString(a,i);break;case"json":c=JSON.parse(a);break;default:c=a}window.setTimeout(function(){t&&t(c),r.manager.itemEnd(e)},0)}catch(h){window.setTimeout(function(){n&&n(h),r.manager.itemEnd(e),r.manager.itemError(e)},0)}}else{xa[e]=[],xa[e].push({onLoad:t,onProgress:i,onError:n});var p=new XMLHttpRequest;p.open("GET",e,!0),p.addEventListener("load",function(t){var i=this.response;ba.add(e,i);var n=xa[e];if(delete xa[e],200===this.status){for(var o=0,a=n.length;a>o;o++){var s=n[o];s.onLoad&&s.onLoad(i)}r.manager.itemEnd(e)}else if(0===this.status){for(console.warn("THREE.FileLoader: HTTP Status 0 received."),o=0,a=n.length;a>o;o++)s=n[o],s.onLoad&&s.onLoad(i);r.manager.itemEnd(e)}else{for(o=0,a=n.length;a>o;o++)s=n[o],s.onError&&s.onError(t);r.manager.itemEnd(e),r.manager.itemError(e)}},!1),p.addEventListener("progress",function(t){for(var i=xa[e],n=0,r=i.length;r>n;n++){var o=i[n];o.onProgress&&o.onProgress(t)}},!1),p.addEventListener("error",function(t){var i=xa[e];delete xa[e];for(var n=0,o=i.length;o>n;n++){var a=i[n];a.onError&&a.onError(t)}r.manager.itemEnd(e),r.manager.itemError(e)},!1),void 0!==this.responseType&&(p.responseType=this.responseType),void 0!==this.withCredentials&&(p.withCredentials=this.withCredentials),p.overrideMimeType&&p.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(s in this.requestHeader)p.setRequestHeader(s,this.requestHeader[s]);p.send(null)}return r.manager.itemStart(e),p}xa[e].push({onLoad:t,onProgress:i,onError:n})},setPath:function(e){return this.path=e,this},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}}),Object.assign(er.prototype,{load:function(e,t,i,n){function r(r){l.load(e[r],function(e){e=o._parser(e,!0),a[r]={width:e.width,height:e.height,format:e.format,mipmaps:e.mipmaps},u+=1,6===u&&(1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,t&&t(s))},i,n)}var o=this,a=[],s=new Bi;s.image=a;var l=new Qn(this.manager);if(l.setPath(this.path),l.setResponseType("arraybuffer"),Array.isArray(e))for(var u=0,c=0,h=e.length;h>c;++c)r(c);else l.load(e,function(e){if(e=o._parser(e,!0),e.isCubemap)for(var i=e.mipmaps.length/e.mipmapCount,n=0;i>n;n++){a[n]={mipmaps:[]};for(var r=0;r<e.mipmapCount;r++)a[n].mipmaps.push(e.mipmaps[n*e.mipmapCount+r]),a[n].format=e.format,a[n].width=e.width,a[n].height=e.height}else s.image.width=e.width,s.image.height=e.height,s.mipmaps=e.mipmaps;1===e.mipmapCount&&(s.minFilter=1006),s.format=e.format,s.needsUpdate=!0,t&&t(s)},i,n);return s},setPath:function(e){return this.path=e,this}}),Object.assign(tr.prototype,{load:function(e,t,i,n){var r=this,o=new h,a=new Qn(this.manager);return a.setResponseType("arraybuffer"),a.load(e,function(e){(e=r._parser(e))&&(void 0!==e.image?o.image=e.image:void 0!==e.data&&(o.image.width=e.width,o.image.height=e.height,o.image.data=e.data),o.wrapS=void 0!==e.wrapS?e.wrapS:1001,o.wrapT=void 0!==e.wrapT?e.wrapT:1001,o.magFilter=void 0!==e.magFilter?e.magFilter:1006,o.minFilter=void 0!==e.minFilter?e.minFilter:1008,o.anisotropy=void 0!==e.anisotropy?e.anisotropy:1,void 0!==e.format&&(o.format=e.format),void 0!==e.type&&(o.type=e.type),void 0!==e.mipmaps&&(o.mipmaps=e.mipmaps),1===e.mipmapCount&&(o.minFilter=1006),o.needsUpdate=!0,t&&t(o,e))},i,n),o}}),Object.assign(ir.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var r=this,o=ba.get(e);return void 0!==o?(r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o):(i=document.createElementNS("http://www.w3.org/1999/xhtml","img"),i.addEventListener("load",function(){ba.add(e,this),t&&t(this),r.manager.itemEnd(e)},!1),i.addEventListener("error",function(t){n&&n(t),r.manager.itemEnd(e),r.manager.itemError(e)},!1),"data:"!==e.substr(0,5)&&void 0!==this.crossOrigin&&(i.crossOrigin=this.crossOrigin),r.manager.itemStart(e),i.src=e,i)},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(nr.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){function r(i){a.load(e[i],function(e){o.images[i]=e,s++,6===s&&(o.needsUpdate=!0,t&&t(o))},void 0,n)}var o=new at,a=new ir(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);var s=0;for(i=0;i<e.length;++i)r(i);return o},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(rr.prototype,{crossOrigin:"Anonymous",load:function(e,t,i,n){var r=new s,o=new ir(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(i){r.image=i,i=0<e.search(/\.(jpg|jpeg)$/)||0===e.search(/^data:image\/jpeg/),r.format=i?1022:1023,r.needsUpdate=!0,void 0!==t&&t(r)},i,n),r},setCrossOrigin:function(e){return this.crossOrigin=e,this},setPath:function(e){return this.path=e,this}}),Object.assign(or.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(e,t){return e=this.getUtoTmapping(e),this.getPoint(e,t)},getPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;e>=i;i++)t.push(this.getPoint(i/e));return t},getSpacedPoints:function(e){void 0===e&&(e=5);for(var t=[],i=0;e>=i;i++)t.push(this.getPointAt(i/e));return t},getLength:function(){var e=this.getLengths();return e[e.length-1]},getLengths:function(e){if(void 0===e&&(e=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var t,i=[],n=this.getPoint(0),r=0;for(i.push(0),t=1;e>=t;t++){var o=this.getPoint(t/e);r+=o.distanceTo(n),i.push(r),n=o}return this.cacheArcLengths=i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(e,t){var i=this.getLengths(),n=i.length;t=t?t:e*i[n-1];for(var r,o=0,a=n-1;a>=o;)if(e=Math.floor(o+(a-o)/2),r=i[e]-t,0>r)o=e+1;else{if(!(r>0)){a=e;break}a=e-1}return e=a,i[e]===t?e/(n-1):(o=i[e],(e+(t-o)/(i[e+1]-o))/(n-1))},getTangent:function(e){var t=e-1e-4;return e+=1e-4,0>t&&(t=0),e>1&&(e=1),t=this.getPoint(t),this.getPoint(e).clone().sub(t).normalize()},getTangentAt:function(e){return e=this.getUtoTmapping(e),this.getTangent(e)},computeFrenetFrames:function(e,t){var i,r=new o,a=[],s=[],l=[],u=new o,c=new n;for(i=0;e>=i;i++){var h=i/e;a[i]=this.getTangentAt(h),a[i].normalize()}s[0]=new o,l[0]=new o,i=Number.MAX_VALUE,h=Math.abs(a[0].x);var p=Math.abs(a[0].y),d=Math.abs(a[0].z);for(i>=h&&(i=h,r.set(1,0,0)),i>=p&&(i=p,r.set(0,1,0)),i>=d&&r.set(0,0,1),u.crossVectors(a[0],r).normalize(),s[0].crossVectors(a[0],u),l[0].crossVectors(a[0],s[0]),i=1;e>=i;i++)s[i]=s[i-1].clone(),l[i]=l[i-1].clone(),u.crossVectors(a[i-1],a[i]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(qo.clamp(a[i-1].dot(a[i]),-1,1)),s[i].applyMatrix4(c.makeRotationAxis(u,r))),l[i].crossVectors(a[i],s[i]);if(!0===t)for(r=Math.acos(qo.clamp(s[0].dot(s[e]),-1,1)),r/=e,0<a[0].dot(u.crossVectors(s[0],s[e]))&&(r=-r),i=1;e>=i;i++)s[i].applyMatrix4(c.makeRotationAxis(a[i],r*i)),l[i].crossVectors(a[i],s[i]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this},toJSON:function(){var e={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e},fromJSON:function(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}),ar.prototype=Object.create(or.prototype),ar.prototype.constructor=ar,ar.prototype.isEllipseCurve=!0,ar.prototype.getPoint=function(e,t){t=t||new i;for(var n=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;0>r;)r+=n;for(;r>n;)r-=n;r<Number.EPSILON&&(r=o?0:n),!0!==this.aClockwise||o||(r=r===n?-n:r-n),n=this.aStartAngle+e*r,e=this.aX+this.xRadius*Math.cos(n);var a=this.aY+this.yRadius*Math.sin(n);return 0!==this.aRotation&&(n=Math.cos(this.aRotation),r=Math.sin(this.aRotation),o=e-this.aX,a-=this.aY,e=o*n-a*r+this.aX,a=o*r+a*n+this.aY),t.set(e,a)},ar.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},ar.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e},ar.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this},sr.prototype=Object.create(ar.prototype),sr.prototype.constructor=sr,sr.prototype.isArcCurve=!0;var Ea=new o,Sa=new lr,Ta=new lr,Ca=new lr;ur.prototype=Object.create(or.prototype),ur.prototype.constructor=ur,ur.prototype.isCatmullRomCurve3=!0,ur.prototype.getPoint=function(e,t){t=t||new o;var i=this.points,n=i.length;e*=n-(this.closed?0:1);var r=Math.floor(e);if(e-=r,this.closed?r+=r>0?0:(Math.floor(Math.abs(r)/n)+1)*n:0===e&&r===n-1&&(r=n-2,e=1),this.closed||r>0)var a=i[(r-1)%n];else Ea.subVectors(i[0],i[1]).add(i[0]),a=Ea;var s=i[r%n],l=i[(r+1)%n];if(this.closed||n>r+2?i=i[(r+2)%n]:(Ea.subVectors(i[n-1],i[n-2]).add(i[n-1]),i=Ea),"centripetal"===this.curveType||"chordal"===this.curveType){var u="chordal"===this.curveType?.5:.25;n=Math.pow(a.distanceToSquared(s),u),r=Math.pow(s.distanceToSquared(l),u),u=Math.pow(l.distanceToSquared(i),u),1e-4>r&&(r=1),1e-4>n&&(n=r),1e-4>u&&(u=r),Sa.initNonuniformCatmullRom(a.x,s.x,l.x,i.x,n,r,u),Ta.initNonuniformCatmullRom(a.y,s.y,l.y,i.y,n,r,u),Ca.initNonuniformCatmullRom(a.z,s.z,l.z,i.z,n,r,u)}else"catmullrom"===this.curveType&&(Sa.initCatmullRom(a.x,s.x,l.x,i.x,this.tension),Ta.initCatmullRom(a.y,s.y,l.y,i.y,this.tension),Ca.initCatmullRom(a.z,s.z,l.z,i.z,this.tension));return t.set(Sa.calc(e),Ta.calc(e),Ca.calc(e)),t},ur.prototype.copy=function(e){or.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;i>t;t++)this.points.push(e.points[t].clone());return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},ur.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;i>t;t++)e.points.push(this.points[t].toArray());return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e},ur.prototype.fromJSON=function(e){or.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,i=e.points.length;i>t;t++){var n=e.points[t];this.points.push((new o).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this},dr.prototype=Object.create(or.prototype),dr.prototype.constructor=dr,dr.prototype.isCubicBezierCurve=!0,dr.prototype.getPoint=function(e,t){t=t||new i;var n=this.v0,r=this.v1,o=this.v2,a=this.v3;return t.set(pr(e,n.x,r.x,o.x,a.x),pr(e,n.y,r.y,o.y,a.y)),t},dr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},dr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},dr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},fr.prototype=Object.create(or.prototype),fr.prototype.constructor=fr,fr.prototype.isCubicBezierCurve3=!0,fr.prototype.getPoint=function(e,t){t=t||new o;var i=this.v0,n=this.v1,r=this.v2,a=this.v3;return t.set(pr(e,i.x,n.x,r.x,a.x),pr(e,i.y,n.y,r.y,a.y),pr(e,i.z,n.z,r.z,a.z)),t},fr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this},fr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e},fr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this},mr.prototype=Object.create(or.prototype),mr.prototype.constructor=mr,mr.prototype.isLineCurve=!0,mr.prototype.getPoint=function(e,t){return t=t||new i,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},mr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},mr.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},mr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},mr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},mr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},gr.prototype=Object.create(or.prototype),gr.prototype.constructor=gr,gr.prototype.isLineCurve3=!0,gr.prototype.getPoint=function(e,t){return t=t||new o,1===e?t.copy(this.v2):(t.copy(this.v2).sub(this.v1),t.multiplyScalar(e).add(this.v1)),t},gr.prototype.getPointAt=function(e,t){return this.getPoint(e,t)},gr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v1.copy(e.v1),this.v2.copy(e.v2),this},gr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},gr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},vr.prototype=Object.create(or.prototype),vr.prototype.constructor=vr,vr.prototype.isQuadraticBezierCurve=!0,vr.prototype.getPoint=function(e,t){t=t||new i;var n=this.v0,r=this.v1,o=this.v2;return t.set(hr(e,n.x,r.x,o.x),hr(e,n.y,r.y,o.y)),t},vr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},vr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},vr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},yr.prototype=Object.create(or.prototype),yr.prototype.constructor=yr,yr.prototype.isQuadraticBezierCurve3=!0,yr.prototype.getPoint=function(e,t){t=t||new o;var i=this.v0,n=this.v1,r=this.v2;return t.set(hr(e,i.x,n.x,r.x),hr(e,i.y,n.y,r.y),hr(e,i.z,n.z,r.z)),t},yr.prototype.copy=function(e){return or.prototype.copy.call(this,e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this},yr.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e},yr.prototype.fromJSON=function(e){return or.prototype.fromJSON.call(this,e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this},_r.prototype=Object.create(or.prototype),_r.prototype.constructor=_r,_r.prototype.isSplineCurve=!0,_r.prototype.getPoint=function(e,t){t=t||new i;var n=this.points,r=(n.length-1)*e;e=Math.floor(r),r-=e;var o=n[0===e?e:e-1],a=n[e],s=n[e>n.length-2?n.length-1:e+1];return n=n[e>n.length-3?n.length-1:e+2],t.set(cr(r,o.x,a.x,s.x,n.x),cr(r,o.y,a.y,s.y,n.y)),t},_r.prototype.copy=function(e){or.prototype.copy.call(this,e),this.points=[];for(var t=0,i=e.points.length;i>t;t++)this.points.push(e.points[t].clone());return this},_r.prototype.toJSON=function(){var e=or.prototype.toJSON.call(this);e.points=[];for(var t=0,i=this.points.length;i>t;t++)e.points.push(this.points[t].toArray());return e},_r.prototype.fromJSON=function(e){or.prototype.fromJSON.call(this,e),this.points=[];for(var t=0,n=e.points.length;n>t;t++){var r=e.points[t];this.points.push((new i).fromArray(r))}return this};var Ma=Object.freeze({ArcCurve:sr,CatmullRomCurve3:ur,CubicBezierCurve:dr,CubicBezierCurve3:fr,EllipseCurve:ar,LineCurve:mr,LineCurve3:gr,QuadraticBezierCurve:vr,QuadraticBezierCurve3:yr,SplineCurve:_r});br.prototype=Object.assign(Object.create(or.prototype),{constructor:br,add:function(e){this.curves.push(e)},closePath:function(){var e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new mr(t,e))},getPoint:function(e){var t=e*this.getLength(),i=this.getCurveLengths();for(e=0;e<i.length;){if(i[e]>=t)return t=i[e]-t,e=this.curves[e],i=e.getLength(),e.getPointAt(0===i?0:1-t/i);e++}return null},getLength:function(){var e=this.getCurveLengths();return e[e.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var e=[],t=0,i=0,n=this.curves.length;n>i;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e},getSpacedPoints:function(e){void 0===e&&(e=40);for(var t=[],i=0;e>=i;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t},getPoints:function(e){e=e||12;for(var t,i=[],n=0,r=this.curves;n<r.length;n++){var o=r[n];o=o.getPoints(o&&o.isEllipseCurve?2*e:o&&o.isLineCurve?1:o&&o.isSplineCurve?e*o.points.length:e);for(var a=0;a<o.length;a++){var s=o[a];t&&t.equals(s)||(i.push(s),t=s)}}return this.autoClose&&1<i.length&&!i[i.length-1].equals(i[0])&&i.push(i[0]),i},copy:function(e){or.prototype.copy.call(this,e),this.curves=[];for(var t=0,i=e.curves.length;i>t;t++)this.curves.push(e.curves[t].clone());return this.autoClose=e.autoClose,this},toJSON:function(){var e=or.prototype.toJSON.call(this);e.autoClose=this.autoClose,e.curves=[];for(var t=0,i=this.curves.length;i>t;t++)e.curves.push(this.curves[t].toJSON());return e},fromJSON:function(e){or.prototype.fromJSON.call(this,e),this.autoClose=e.autoClose,this.curves=[];for(var t=0,i=e.curves.length;i>t;t++){var n=e.curves[t];this.curves.push((new Ma[n.type]).fromJSON(n))}return this}}),wr.prototype=Object.assign(Object.create(br.prototype),{constructor:wr,setFromPoints:function(e){this.moveTo(e[0].x,e[0].y);for(var t=1,i=e.length;i>t;t++)this.lineTo(e[t].x,e[t].y)},moveTo:function(e,t){this.currentPoint.set(e,t)},lineTo:function(e,t){var n=new mr(this.currentPoint.clone(),new i(e,t));this.curves.push(n),this.currentPoint.set(e,t)},quadraticCurveTo:function(e,t,n,r){e=new vr(this.currentPoint.clone(),new i(e,t),new i(n,r)),this.curves.push(e),this.currentPoint.set(n,r)},bezierCurveTo:function(e,t,n,r,o,a){e=new dr(this.currentPoint.clone(),new i(e,t),new i(n,r),new i(o,a)),this.curves.push(e),this.currentPoint.set(o,a)},splineThru:function(e){var t=[this.currentPoint.clone()].concat(e);t=new _r(t),this.curves.push(t),this.currentPoint.copy(e[e.length-1])},arc:function(e,t,i,n,r,o){this.absarc(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,o)},absarc:function(e,t,i,n,r,o){this.absellipse(e,t,i,i,n,r,o)},ellipse:function(e,t,i,n,r,o,a,s){this.absellipse(e+this.currentPoint.x,t+this.currentPoint.y,i,n,r,o,a,s)},absellipse:function(e,t,i,n,r,o,a,s){e=new ar(e,t,i,n,r,o,a,s),0<this.curves.length&&(t=e.getPoint(0),t.equals(this.currentPoint)||this.lineTo(t.x,t.y)),this.curves.push(e),e=e.getPoint(1),this.currentPoint.copy(e)},copy:function(e){return br.prototype.copy.call(this,e),this.currentPoint.copy(e.currentPoint),this},toJSON:function(){var e=br.prototype.toJSON.call(this);return e.currentPoint=this.currentPoint.toArray(),e},fromJSON:function(e){return br.prototype.fromJSON.call(this,e),this.currentPoint.fromArray(e.currentPoint),this}}),xr.prototype=Object.assign(Object.create(wr.prototype),{constructor:xr,getPointsHoles:function(e){for(var t=[],i=0,n=this.holes.length;n>i;i++)t[i]=this.holes[i].getPoints(e);return t},extractPoints:function(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}},copy:function(e){wr.prototype.copy.call(this,e),this.holes=[];for(var t=0,i=e.holes.length;i>t;t++)this.holes.push(e.holes[t].clone());return this},toJSON:function(){var e=wr.prototype.toJSON.call(this);e.uuid=this.uuid,e.holes=[];for(var t=0,i=this.holes.length;i>t;t++)e.holes.push(this.holes[t].toJSON());return e},fromJSON:function(e){wr.prototype.fromJSON.call(this,e),this.uuid=e.uuid,this.holes=[];for(var t=0,i=e.holes.length;i>t;t++){var n=e.holes[t];this.holes.push((new wr).fromJSON(n))}return this}}),Er.prototype=Object.assign(Object.create(b.prototype),{constructor:Er,isLight:!0,copy:function(e){return b.prototype.copy.call(this,e),this.color.copy(e.color),this.intensity=e.intensity,this},toJSON:function(e){return e=b.prototype.toJSON.call(this,e),e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Sr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Sr,isHemisphereLight:!0,copy:function(e){return Er.prototype.copy.call(this,e),this.groundColor.copy(e.groundColor),this}}),Object.assign(Tr.prototype,{copy:function(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var e={};return 0!==this.bias&&(e.bias=this.bias),1!==this.radius&&(e.radius=this.radius),(512!==this.mapSize.x||512!==this.mapSize.y)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}),Cr.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Cr,isSpotLightShadow:!0,update:function(e){var t=this.camera,i=2*qo.RAD2DEG*e.angle,n=this.mapSize.width/this.mapSize.height;e=e.distance||t.far,(i!==t.fov||n!==t.aspect||e!==t.far)&&(t.fov=i,t.aspect=n,t.far=e,t.updateProjectionMatrix())}}),Mr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Mr,isSpotLight:!0,copy:function(e){return Er.prototype.copy.call(this,e),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Pr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Pr,isPointLight:!0,copy:function(e){return Er.prototype.copy.call(this,e),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}),Ir.prototype=Object.assign(Object.create(Tr.prototype),{constructor:Ir}),Lr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Lr,isDirectionalLight:!0,copy:function(e){return Er.prototype.copy.call(this,e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}),Rr.prototype=Object.assign(Object.create(Er.prototype),{constructor:Rr,isAmbientLight:!0}),Ar.prototype=Object.assign(Object.create(Er.prototype),{constructor:Ar,isRectAreaLight:!0,copy:function(e){return Er.prototype.copy.call(this,e),this.width=e.width,this.height=e.height,this},toJSON:function(e){return e=Er.prototype.toJSON.call(this,e),e.object.width=this.width,e.object.height=this.height,e}}),Or.prototype=Object.assign(Object.create(zr.prototype),{constructor:Or,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),kr.prototype=Object.assign(Object.create(zr.prototype),{constructor:kr,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Object.assign(Dr.prototype,{evaluate:function(e){var t=this.parameterPositions,i=this._cachedIndex,n=t[i],r=t[i-1];e:{t:{i:{n:if(!(n>e)){for(var o=i+2;;){if(void 0===n){if(r>e)break n;return this._cachedIndex=i=t.length,this.afterEnd_(i-1,e,r)}if(i===o)break;if(r=n,n=t[++i],n>e)break t}n=t.length;break i}if(e>=r)break e;for(o=t[1],o>e&&(i=2,r=o),o=i-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(i===o)break;if(n=r,r=t[--i-1],e>=r)break t}n=i,i=0}for(;n>i;)r=i+n>>>1,e<t[r]?n=r:i=r+1;if(n=t[i],r=t[i-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,e,n);if(void 0===n)return this._cachedIndex=i=t.length,this.afterEnd_(i-1,r,e)}this._cachedIndex=i,this.intervalChanged_(i,r,n)}return this.interpolate_(i,r,e,n)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(e){var t=this.resultBuffer,i=this.sampleValues,n=this.valueSize;e*=n;for(var r=0;r!==n;++r)t[r]=i[e+r];return t},interpolate_:function(){throw Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Dr.prototype,{beforeStart_:Dr.prototype.copySampleValue_,afterEnd_:Dr.prototype.copySampleValue_}),Nr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Nr,interpolate_:function(e,t,i,n){var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize;for(e*=s,t=(i-t)/(n-t),i=e+s;e!==i;e+=4)r.slerpFlat(o,0,a,e-s,a,e,t);return o}}),Br.prototype=Object.assign(Object.create(zr.prototype),{constructor:Br,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(e){return new Nr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:void 0}),Ur.prototype=Object.assign(Object.create(zr.prototype),{constructor:Ur,ValueTypeName:"color"}),Gr.prototype=Object.assign(Object.create(zr.prototype),{constructor:Gr,ValueTypeName:"number"}),Fr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Fr,DefaultSettings_:{endingStart:2400,endingEnd:2400},intervalChanged_:function(e,t,i){var n=this.parameterPositions,r=e-2,o=e+1,a=n[r],s=n[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=e,a=2*t-i;break;case 2402:r=n.length-2,a=t+n[r]-n[r+1];break;default:r=e,a=i}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=e,s=2*i-t;break;case 2402:o=1,s=i+n[1]-n[0];break;default:o=e-1,s=t}e=.5*(i-t),n=this.valueSize,this._weightPrev=e/(t-a),this._weightNext=e/(s-i),this._offsetPrev=r*n,this._offsetNext=o*n},interpolate_:function(e,t,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,h=this._weightNext,p=(i-t)/(n-t);for(i=p*p,n=i*p,t=-c*n+2*c*i-c*p,c=(1+c)*n+(-1.5-2*c)*i+(-.5+c)*p+1,p=(-1-h)*n+(1.5+h)*i+.5*p,h=h*n-h*i,i=0;i!==a;++i)r[i]=t*o[l+i]+c*o[s+i]+p*o[e+i]+h*o[u+i];return r}}),Hr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:Hr,interpolate_:function(e,t,i,n){var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize;e*=a;var s=e-a;for(t=(i-t)/(n-t),i=1-t,n=0;n!==a;++n)r[n]=o[s+n]*i+o[e+n]*t;return r}}),jr.prototype=Object.assign(Object.create(Dr.prototype),{constructor:jr,interpolate_:function(e){return this.copySampleValue_(e-1)}});var Pa={arraySlice:function(e,t,i){return Pa.isTypedArray(e)?new e.constructor(e.subarray(t,void 0!==i?i:e.length)):e.slice(t,i)},convertArray:function(e,t,i){return!e||!i&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)},isTypedArray:function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)},getKeyframeOrder:function(e){for(var t=e.length,i=Array(t),n=0;n!==t;++n)i[n]=n;return i.sort(function(t,i){return e[t]-e[i]}),i},sortedArray:function(e,t,i){for(var n=e.length,r=new e.constructor(n),o=0,a=0;a!==n;++o)for(var s=i[o]*t,l=0;l!==t;++l)r[a++]=e[s+l];return r},flattenJSON:function(e,t,i,n){for(var r=1,o=e[0];void 0!==o&&void 0===o[n];)o=e[r++];if(void 0!==o){var a=o[n];if(void 0!==a)if(Array.isArray(a)){do a=o[n],void 0!==a&&(t.push(o.time),i.push.apply(i,a)),o=e[r++];while(void 0!==o)}else if(void 0!==a.toArray){do a=o[n],void 0!==a&&(t.push(o.time),a.toArray(i,i.length)),o=e[r++];while(void 0!==o)}else do a=o[n],void 0!==a&&(t.push(o.time),i.push(a)),o=e[r++];while(void 0!==o)}}};Object.assign(zr,{parse:function(e){if(void 0===e.type)throw Error("THREE.KeyframeTrack: track type undefined, can not parse");var t=zr._getTrackTypeForValueTypeName(e.type);if(void 0===e.times){var i=[],n=[];Pa.flattenJSON(e.keys,i,n,"value"),e.times=i,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)},toJSON:function(e){var t=e.constructor;if(void 0!==t.toJSON)t=t.toJSON(e);else{t={name:e.name,times:Pa.convertArray(e.times,Array),values:Pa.convertArray(e.values,Array)};var i=e.getInterpolation();i!==e.DefaultInterpolation&&(t.interpolation=i)}return t.type=e.ValueTypeName,t},_getTrackTypeForValueTypeName:function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Gr;case"vector":case"vector2":case"vector3":case"vector4":return $r;case"color":return Ur;case"quaternion":return Br;case"bool":case"boolean":return kr;case"string":return Or}throw Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}}),Object.assign(zr.prototype,{constructor:zr,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(e){return new jr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodLinear:function(e){return new Hr(this.times,this.values,this.getValueSize(),e)},InterpolantFactoryMethodSmooth:function(e){return new Fr(this.times,this.values,this.getValueSize(),e)},setInterpolation:function(e){switch(e){case 2300:var t=this.InterpolantFactoryMethodDiscrete;break;case 2301:t=this.InterpolantFactoryMethodLinear;break;case 2302:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){if(t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name,void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw Error(t);this.setInterpolation(this.DefaultInterpolation)}console.warn("THREE.KeyframeTrack:",t)}else this.createInterpolant=t},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(e){if(0!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]+=e;return this},scale:function(e){if(1!==e)for(var t=this.times,i=0,n=t.length;i!==n;++i)t[i]*=e;return this},trim:function(e,t){for(var i=this.times,n=i.length,r=0,o=n-1;r!==n&&i[r]<e;)++r;for(;-1!==o&&i[o]>t;)--o;return++o,(0!==r||o!==n)&&(r>=o&&(o=Math.max(o,1),r=o-1),e=this.getValueSize(),this.times=Pa.arraySlice(i,r,o),this.values=Pa.arraySlice(this.values,r*e,o*e)),this},validate:function(){var e=!0,t=this.getValueSize();0!==t-Math.floor(t)&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);var i=this.times;t=this.values;var n=i.length;0===n&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);for(var r=null,o=0;o!==n;o++){var a=i[o];if("number"==typeof a&&isNaN(a)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,o,a),e=!1;
break}if(null!==r&&r>a){console.error("THREE.KeyframeTrack: Out of order keys.",this,o,a,r),e=!1;break}r=a}if(void 0!==t&&Pa.isTypedArray(t))for(o=0,i=t.length;o!==i;++o)if(n=t[o],isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,o,n),e=!1;break}return e},optimize:function(){for(var e=this.times,t=this.values,i=this.getValueSize(),n=2302===this.getInterpolation(),r=1,o=e.length-1,a=1;o>a;++a){var s=!1,l=e[a];if(l!==e[a+1]&&(1!==a||l!==l[0]))if(n)s=!0;else{var u=a*i,c=u-i,h=u+i;for(l=0;l!==i;++l){var p=t[u+l];if(p!==t[c+l]||p!==t[h+l]){s=!0;break}}}if(s){if(a!==r)for(e[r]=e[a],s=a*i,u=r*i,l=0;l!==i;++l)t[u+l]=t[s+l];++r}}if(o>0){for(e[r]=e[o],s=o*i,u=r*i,l=0;l!==i;++l)t[u+l]=t[s+l];++r}return r!==e.length&&(this.times=Pa.arraySlice(e,0,r),this.values=Pa.arraySlice(t,0,r*i)),this}}),$r.prototype=Object.assign(Object.create(zr.prototype),{constructor:$r,ValueTypeName:"vector"}),Object.assign(Vr,{parse:function(e){for(var t=[],i=e.tracks,n=1/(e.fps||1),r=0,o=i.length;r!==o;++r)t.push(zr.parse(i[r]).scale(n));return new Vr(e.name,e.duration,t)},toJSON:function(e){var t=[],i=e.tracks;e={name:e.name,duration:e.duration,tracks:t};for(var n=0,r=i.length;n!==r;++n)t.push(zr.toJSON(i[n]));return e},CreateFromMorphTargetSequence:function(e,t,i,n){for(var r=t.length,o=[],a=0;r>a;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var u=Pa.getKeyframeOrder(s);s=Pa.sortedArray(s,1,u),l=Pa.sortedArray(l,1,u),n||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new Gr(".morphTargetInfluences["+t[a].name+"]",s,l).scale(1/i))}return new Vr(e,-1,o)},findByName:function(e,t){var i=e;for(Array.isArray(e)||(i=e.geometry&&e.geometry.animations||e.animations),e=0;e<i.length;e++)if(i[e].name===t)return i[e];return null},CreateClipsFromMorphTargetSequences:function(e,t,i){for(var n={},r=/^([\w-]*?)([\d]+)$/,o=0,a=e.length;a>o;o++){var s=e[o],l=s.name.match(r);if(l&&1<l.length){var u=l[1];(l=n[u])||(n[u]=l=[]),l.push(s)}}e=[];for(u in n)e.push(Vr.CreateFromMorphTargetSequence(u,n[u],t,i));return e},parseAnimation:function(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;var i=function(e,t,i,n,r){if(0!==i.length){var o=[],a=[];Pa.flattenJSON(i,o,a,n),0!==o.length&&r.push(new e(t,o,a))}},n=[],r=e.name||"default",o=e.length||-1,a=e.fps||30;e=e.hierarchy||[];for(var s=0;s<e.length;s++){var l=e[s].keys;if(l&&0!==l.length)if(l[0].morphTargets){o={};for(var u=0;u<l.length;u++)if(l[u].morphTargets)for(var c=0;c<l[u].morphTargets.length;c++)o[l[u].morphTargets[c]]=-1;for(var h in o){var p=[],d=[];for(c=0;c!==l[u].morphTargets.length;++c){var f=l[u];p.push(f.time),d.push(f.morphTarget===h?1:0)}n.push(new Gr(".morphTargetInfluence["+h+"]",p,d))}o=o.length*(a||1)}else u=".bones["+t[s].name+"]",i($r,u+".position",l,"pos",n),i(Br,u+".quaternion",l,"rot",n),i($r,u+".scale",l,"scl",n)}return 0===n.length?null:new Vr(r,o,n)}}),Object.assign(Vr.prototype,{resetDuration:function(){for(var e=0,t=0,i=this.tracks.length;t!==i;++t){var n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}this.duration=e},trim:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this},optimize:function(){for(var e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}}),Object.assign(Wr.prototype,{load:function(e,t,i,n){var r=this;new Qn(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},setTextures:function(e){this.textures=e},parse:function(e){function t(e){return void 0===n[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),n[e]}var n=this.textures,r=new _a[e.type];if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&r.specular.setHex(e.specular),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearCoat&&(r.clearCoat=e.clearCoat),void 0!==e.clearCoatRoughness&&(r.clearCoatRoughness=e.clearCoatRoughness),void 0!==e.uniforms&&(r.uniforms=e.uniforms),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.vertexColors&&(r.vertexColors=e.vertexColors),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.side&&(r.side=e.side),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),1!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.skinning&&(r.skinning=e.skinning),void 0!==e.morphTargets&&(r.morphTargets=e.morphTargets),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.shading&&(r.flatShading=1===e.shading),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=t(e.map)),void 0!==e.alphaMap&&(r.alphaMap=t(e.alphaMap),r.transparent=!0),void 0!==e.bumpMap&&(r.bumpMap=t(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=t(e.normalMap)),void 0!==e.normalScale){var o=e.normalScale;!1===Array.isArray(o)&&(o=[o,o]),r.normalScale=(new i).fromArray(o)}return void 0!==e.displacementMap&&(r.displacementMap=t(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=t(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=t(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=t(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=t(e.specularMap)),void 0!==e.envMap&&(r.envMap=t(e.envMap)),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.lightMap&&(r.lightMap=t(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=t(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=t(e.gradientMap)),r}}),Object.assign(Xr.prototype,{load:function(e,t,i,n){var r=this;new Qn(r.manager).load(e,function(e){t(r.parse(JSON.parse(e)))},i,n)},parse:function(e){var t=new B,i=e.data.index;void 0!==i&&(i=new Ia[i.type](i.array),t.setIndex(new T(i,1)));var n=e.data.attributes;for(a in n){var r=n[a];i=new Ia[r.type](r.array),t.addAttribute(a,new T(i,r.itemSize,r.normalized))}var a=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==a)for(i=0,n=a.length;i!==n;++i)r=a[i],t.addGroup(r.start,r.count,r.materialIndex);return e=e.data.boundingSphere,void 0!==e&&(a=new o,void 0!==e.center&&a.fromArray(e.center),t.boundingSphere=new d(a,e.radius)),t}});var Ia={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Yr.Handlers={handlers:[],add:function(e,t){this.handlers.push(e,t)},get:function(e){for(var t=this.handlers,i=0,n=t.length;n>i;i+=2){var r=t[i+1];if(t[i].test(e))return r}return null}},Object.assign(Yr.prototype,{crossOrigin:void 0,onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(e,t,i){for(var n=[],r=0;r<e.length;++r)n[r]=this.createMaterial(e[r],t,i);return n},createMaterial:function(){var e={NoBlending:0,NormalBlending:1,AdditiveBlending:2,SubtractiveBlending:3,MultiplyBlending:4,CustomBlending:5},t=new g,i=new rr,n=new Wr;return function(r,o,a){function s(e,t,n,r,s){e=o+e;var l=Yr.Handlers.get(e);return null!==l?e=l.load(e):(i.setCrossOrigin(a),e=i.load(e)),void 0!==t&&(e.repeat.fromArray(t),1!==t[0]&&(e.wrapS=1e3),1!==t[1]&&(e.wrapT=1e3)),void 0!==n&&e.offset.fromArray(n),void 0!==r&&("repeat"===r[0]&&(e.wrapS=1e3),"mirror"===r[0]&&(e.wrapS=1002),"repeat"===r[1]&&(e.wrapT=1e3),"mirror"===r[1]&&(e.wrapT=1002)),void 0!==s&&(e.anisotropy=s),t=qo.generateUUID(),u[t]=e,t}var l,u={},c={uuid:qo.generateUUID(),type:"MeshLambertMaterial"};for(l in r){var h=r[l];switch(l){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=e[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",l,"is no longer supported.");break;case"colorDiffuse":c.color=t.fromArray(h).getHex();break;case"colorSpecular":c.specular=t.fromArray(h).getHex();break;case"colorEmissive":c.emissive=t.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=1;break;case"doubleSided":c.side=2;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[l]=h;break;case"vertexColors":!0===h&&(c.vertexColors=2),"face"===h&&(c.vertexColors=1);break;default:console.error("THREE.Loader.createMaterial: Unsupported",l,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,1>c.opacity&&(c.transparent=!0),n.setTextures(u),n.parse(c)}}()});var La={decodeText:function(e){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);for(var t="",i=0,n=e.length;n>i;i++)t+=String.fromCharCode(e[i]);return decodeURIComponent(escape(t))},extractUrlBase:function(e){var t=e.lastIndexOf("/");return-1===t?"./":e.substr(0,t+1)}};Object.assign(qr.prototype,{load:function(e,t,i,n){var r=this,o=this.texturePath&&"string"==typeof this.texturePath?this.texturePath:La.extractUrlBase(e),a=new Qn(this.manager);a.setWithCredentials(this.withCredentials),a.load(e,function(i){i=JSON.parse(i);var n=i.metadata;return void 0!==n&&(n=n.type,void 0!==n&&"object"===n.toLowerCase())?void console.error("THREE.JSONLoader: "+e+" should be loaded with THREE.ObjectLoader instead."):(i=r.parse(i,o),void t(i.geometry,i.materials))},i,n)},setTexturePath:function(e){this.texturePath=e},parse:function(){return function(e,t){void 0!==e.data&&(e=e.data),e.scale=void 0!==e.scale?1/e.scale:1;var n,r,a,s=new S,u=e,c=u.faces,h=u.vertices,p=u.normals,d=u.colors,f=u.scale,m=0;if(void 0!==u.uvs){for(n=0;n<u.uvs.length;n++)u.uvs[n].length&&m++;for(n=0;m>n;n++)s.faceVertexUvs[n]=[]}var v=0;for(a=h.length;a>v;)n=new o,n.x=h[v++]*f,n.y=h[v++]*f,n.z=h[v++]*f,s.vertices.push(n);for(v=0,a=c.length;a>v;){h=c[v++];var y=1&h,_=2&h;n=8&h;var b=16&h,w=32&h;if(f=64&h,h&=128,y){y=new E,y.a=c[v],y.b=c[v+1],y.c=c[v+3];var x=new E;if(x.a=c[v+1],x.b=c[v+2],x.c=c[v+3],v+=4,_&&(_=c[v++],y.materialIndex=_,x.materialIndex=_),_=s.faces.length,n)for(n=0;m>n;n++){var T=u.uvs[n];for(s.faceVertexUvs[n][_]=[],s.faceVertexUvs[n][_+1]=[],r=0;4>r;r++){var C=c[v++],M=T[2*C];C=T[2*C+1],M=new i(M,C),2!==r&&s.faceVertexUvs[n][_].push(M),0!==r&&s.faceVertexUvs[n][_+1].push(M)}}if(b&&(b=3*c[v++],y.normal.set(p[b++],p[b++],p[b]),x.normal.copy(y.normal)),w)for(n=0;4>n;n++)b=3*c[v++],w=new o(p[b++],p[b++],p[b]),2!==n&&y.vertexNormals.push(w),0!==n&&x.vertexNormals.push(w);if(f&&(f=c[v++],f=d[f],y.color.setHex(f),x.color.setHex(f)),h)for(n=0;4>n;n++)f=c[v++],f=d[f],2!==n&&y.vertexColors.push(new g(f)),0!==n&&x.vertexColors.push(new g(f));s.faces.push(y),s.faces.push(x)}else{if(y=new E,y.a=c[v++],y.b=c[v++],y.c=c[v++],_&&(_=c[v++],y.materialIndex=_),_=s.faces.length,n)for(n=0;m>n;n++)for(T=u.uvs[n],s.faceVertexUvs[n][_]=[],r=0;3>r;r++)C=c[v++],M=T[2*C],C=T[2*C+1],M=new i(M,C),s.faceVertexUvs[n][_].push(M);if(b&&(b=3*c[v++],y.normal.set(p[b++],p[b++],p[b])),w)for(n=0;3>n;n++)b=3*c[v++],w=new o(p[b++],p[b++],p[b]),y.vertexNormals.push(w);if(f&&(f=c[v++],y.color.setHex(d[f])),h)for(n=0;3>n;n++)f=c[v++],y.vertexColors.push(new g(d[f]));s.faces.push(y)}}if(u=e,v=void 0!==u.influencesPerVertex?u.influencesPerVertex:2,u.skinWeights)for(a=0,c=u.skinWeights.length;c>a;a+=v)s.skinWeights.push(new l(u.skinWeights[a],v>1?u.skinWeights[a+1]:0,v>2?u.skinWeights[a+2]:0,v>3?u.skinWeights[a+3]:0));if(u.skinIndices)for(a=0,c=u.skinIndices.length;c>a;a+=v)s.skinIndices.push(new l(u.skinIndices[a],v>1?u.skinIndices[a+1]:0,v>2?u.skinIndices[a+2]:0,v>3?u.skinIndices[a+3]:0));if(s.bones=u.bones,s.bones&&0<s.bones.length&&(s.skinWeights.length!==s.skinIndices.length||s.skinIndices.length!==s.vertices.length)&&console.warn("When skinning, number of vertices ("+s.vertices.length+"), skinIndices ("+s.skinIndices.length+"), and skinWeights ("+s.skinWeights.length+") should match."),a=e,c=a.scale,void 0!==a.morphTargets)for(u=0,v=a.morphTargets.length;v>u;u++)for(s.morphTargets[u]={},s.morphTargets[u].name=a.morphTargets[u].name,s.morphTargets[u].vertices=[],p=s.morphTargets[u].vertices,d=a.morphTargets[u].vertices,m=0,h=d.length;h>m;m+=3)f=new o,f.x=d[m]*c,f.y=d[m+1]*c,f.z=d[m+2]*c,p.push(f);if(void 0!==a.morphColors&&0<a.morphColors.length)for(console.warn('THREE.JSONLoader: "morphColors" no longer supported. Using them as face colors.'),c=s.faces,a=a.morphColors[0].colors,u=0,v=c.length;v>u;u++)c[u].color.fromArray(a,3*u);for(a=e,u=[],v=[],void 0!==a.animation&&v.push(a.animation),void 0!==a.animations&&(a.animations.length?v=v.concat(a.animations):v.push(a.animations)),a=0;a<v.length;a++)(c=Vr.parseAnimation(v[a],s.bones))&&u.push(c);return s.morphTargets&&(v=Vr.CreateClipsFromMorphTargetSequences(s.morphTargets,10),u=u.concat(v)),0<u.length&&(s.animations=u),s.computeFaceNormals(),s.computeBoundingSphere(),void 0===e.materials||0===e.materials.length?{geometry:s}:(e=Yr.prototype.initMaterials(e.materials,t,this.crossOrigin),{geometry:s,materials:e})}}()}),Object.assign(Jr.prototype,{load:function(e,t,i,n){""===this.texturePath&&(this.texturePath=e.substring(0,e.lastIndexOf("/")+1));var r=this;new Qn(r.manager).load(e,function(i){var o=null;try{o=JSON.parse(i)}catch(a){return void 0!==n&&n(a),void console.error("THREE:ObjectLoader: Can't parse "+e+".",a.message)}i=o.metadata,void 0===i||void 0===i.type||"geometry"===i.type.toLowerCase()?console.error("THREE.ObjectLoader: Can't load "+e+". Use THREE.JSONLoader instead."):r.parse(o,t)},i,n)},setTexturePath:function(e){this.texturePath=e},setCrossOrigin:function(e){this.crossOrigin=e},parse:function(e,t){var i=this.parseShape(e.shapes);i=this.parseGeometries(e.geometries,i);var n=this.parseImages(e.images,function(){void 0!==t&&t(r)});n=this.parseTextures(e.textures,n),n=this.parseMaterials(e.materials,n);var r=this.parseObject(e.object,i,n);return e.animations&&(r.animations=this.parseAnimations(e.animations)),void 0!==e.images&&0!==e.images.length||void 0===t||t(r),r},parseShape:function(e){var t={};if(void 0!==e)for(var i=0,n=e.length;n>i;i++){var r=(new xr).fromJSON(e[i]);t[r.uuid]=r}return t},parseGeometries:function(e,t){var i={};if(void 0!==e)for(var n=new qr,r=new Xr,o=0,a=e.length;a>o;o++){var s=e[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":var l=new ya[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":l=new ya[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":l=new ya[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":l=new ya[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":l=new ya[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":l=new ya[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":l=new ya[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":l=new ya[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":l=new ya[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":l=new ya[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"LatheGeometry":case"LatheBufferGeometry":l=new ya[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":l=new ya[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":l=[];for(var u=0,c=s.shapes.length;c>u;u++)l.push(t[s.shapes[u]]);l=new ya[s.type](l,s.curveSegments);break;case"BufferGeometry":l=r.parse(s);break;case"Geometry":l=n.parse(s,this.texturePath).geometry;break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}l.uuid=s.uuid,void 0!==s.name&&(l.name=s.name),i[s.uuid]=l}return i},parseMaterials:function(e,t){var i={};if(void 0!==e){var n=new Wr;n.setTextures(t),t=0;for(var r=e.length;r>t;t++){var o=e[t];if("MultiMaterial"===o.type){for(var a=[],s=0;s<o.materials.length;s++)a.push(n.parse(o.materials[s]));i[o.uuid]=a}else i[o.uuid]=n.parse(o)}}return i},parseAnimations:function(e){for(var t=[],i=0;i<e.length;i++){var n=Vr.parse(e[i]);t.push(n)}return t},parseImages:function(e,t){function i(e){return n.manager.itemStart(e),o.load(e,function(){n.manager.itemEnd(e)},void 0,function(){n.manager.itemEnd(e),n.manager.itemError(e)})}var n=this,r={};if(void 0!==e&&0<e.length){t=new Kn(t);var o=new ir(t);o.setCrossOrigin(this.crossOrigin),t=0;for(var a=e.length;a>t;t++){var s=e[t],l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(s.url)?s.url:n.texturePath+s.url;r[s.uuid]=i(l)}}return r},parseTextures:function(e,t){function i(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}var n={};if(void 0!==e)for(var r=0,o=e.length;o>r;r++){var a=e[r];void 0===a.image&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),void 0===t[a.image]&&console.warn("THREE.ObjectLoader: Undefined image",a.image);var l=new s(t[a.image]);l.needsUpdate=!0,l.uuid=a.uuid,void 0!==a.name&&(l.name=a.name),void 0!==a.mapping&&(l.mapping=i(a.mapping,Ra)),void 0!==a.offset&&l.offset.fromArray(a.offset),void 0!==a.repeat&&l.repeat.fromArray(a.repeat),void 0!==a.center&&l.center.fromArray(a.center),void 0!==a.rotation&&(l.rotation=a.rotation),void 0!==a.wrap&&(l.wrapS=i(a.wrap[0],Aa),l.wrapT=i(a.wrap[1],Aa)),void 0!==a.format&&(l.format=a.format),void 0!==a.minFilter&&(l.minFilter=i(a.minFilter,Oa)),void 0!==a.magFilter&&(l.magFilter=i(a.magFilter,Oa)),void 0!==a.anisotropy&&(l.anisotropy=a.anisotropy),void 0!==a.flipY&&(l.flipY=a.flipY),n[a.uuid]=l}return n},parseObject:function(e,t,i){function n(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function r(e){if(void 0!==e){if(Array.isArray(e)){for(var t=[],n=0,r=e.length;r>n;n++){var o=e[n];void 0===i[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),t.push(i[o])}return t}return void 0===i[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),i[e]}}switch(e.type){case"Scene":var o=new xi;void 0!==e.background&&Number.isInteger(e.background)&&(o.background=new g(e.background)),void 0!==e.fog&&("Fog"===e.fog.type?o.fog=new wi(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(o.fog=new bi(e.fog.color,e.fog.density)));break;case"PerspectiveCamera":o=new gi(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(o.focus=e.focus),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.filmGauge&&(o.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(o.filmOffset=e.filmOffset),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new x(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(o.zoom=e.zoom),void 0!==e.view&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Rr(e.color,e.intensity);break;case"DirectionalLight":o=new Lr(e.color,e.intensity);break;case"PointLight":o=new Pr(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Ar(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new Mr(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":o=new Sr(e.color,e.groundColor,e.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":o=n(e.geometry);var a=r(e.material);o=o.bones&&0<o.bones.length?new Pi(o,a):new Y(o,a);break;case"LOD":o=new Ti;break;case"Line":o=new Li(n(e.geometry),r(e.material),e.mode);break;case"LineLoop":o=new Ai(n(e.geometry),r(e.material));break;case"LineSegments":o=new Ri(n(e.geometry),r(e.material));break;case"PointCloud":case"Points":o=new ki(n(e.geometry),r(e.material));break;case"Sprite":o=new Si(r(e.material));break;case"Group":o=new Di;break;default:o=new b}if(o.uuid=e.uuid,void 0!==e.name&&(o.name=e.name),void 0!==e.matrix?(o.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==e.position&&o.position.fromArray(e.position),void 0!==e.rotation&&o.rotation.fromArray(e.rotation),void 0!==e.quaternion&&o.quaternion.fromArray(e.quaternion),void 0!==e.scale&&o.scale.fromArray(e.scale)),void 0!==e.castShadow&&(o.castShadow=e.castShadow),void 0!==e.receiveShadow&&(o.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(o.shadow.bias=e.shadow.bias),void 0!==e.shadow.radius&&(o.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&o.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(o.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(o.visible=e.visible),void 0!==e.frustumCulled&&(o.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(o.renderOrder=e.renderOrder),void 0!==e.userData&&(o.userData=e.userData),void 0!==e.children){a=e.children;for(var s=0;s<a.length;s++)o.add(this.parseObject(a[s],t,i))}if("LOD"===e.type)for(e=e.levels,a=0;a<e.length;a++){s=e[a];var l=o.getObjectByProperty("uuid",s.object);void 0!==l&&o.addLevel(l,s.distance)}return o}});var Ra={UVMapping:300,CubeReflectionMapping:301,CubeRefractionMapping:302,EquirectangularReflectionMapping:303,EquirectangularRefractionMapping:304,SphericalReflectionMapping:305,CubeUVReflectionMapping:306,CubeUVRefractionMapping:307},Aa={RepeatWrapping:1e3,ClampToEdgeWrapping:1001,MirroredRepeatWrapping:1002},Oa={NearestFilter:1003,NearestMipMapNearestFilter:1004,NearestMipMapLinearFilter:1005,LinearFilter:1006,LinearMipMapNearestFilter:1007,LinearMipMapLinearFilter:1008};Zr.prototype={constructor:Zr,setOptions:function(e){return this.options=e,this},load:function(e,t,i,n){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e);var r=this,o=ba.get(e);return void 0!==o?(r.manager.itemStart(e),setTimeout(function(){t&&t(o),r.manager.itemEnd(e)},0),o):void fetch(e).then(function(e){return e.blob()}).then(function(e){return createImageBitmap(e,r.options)}).then(function(i){ba.add(e,i),t&&t(i),r.manager.itemEnd(e)})["catch"](function(t){n&&n(t),r.manager.itemEnd(e),r.manager.itemError(e)})},setCrossOrigin:function(){return this},setPath:function(e){return this.path=e,this}},Object.assign(Kr.prototype,{moveTo:function(e,t){this.currentPath=new wr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t)},lineTo:function(e,t){this.currentPath.lineTo(e,t)},quadraticCurveTo:function(e,t,i,n){this.currentPath.quadraticCurveTo(e,t,i,n)},bezierCurveTo:function(e,t,i,n,r,o){this.currentPath.bezierCurveTo(e,t,i,n,r,o)},splineThru:function(e){this.currentPath.splineThru(e)},toShapes:function(e,t){function i(e){for(var t=[],i=0,n=e.length;n>i;i++){var r=e[i],o=new xr;o.curves=r.curves,t.push(o)}return t}function n(e,t){for(var i=t.length,n=!1,r=i-1,o=0;i>o;r=o++){var a=t[r],s=t[o],l=s.x-a.x,u=s.y-a.y;if(Math.abs(u)>Number.EPSILON){if(0>u&&(a=t[o],l=-l,s=t[r],u=-u),!(e.y<a.y||e.y>s.y))if(e.y===a.y){if(e.x===a.x)return!0}else{if(r=u*(e.x-a.x)-l*(e.y-a.y),0===r)return!0;0>r||(n=!n)}}else if(e.y===a.y&&(s.x<=e.x&&e.x<=a.x||a.x<=e.x&&e.x<=s.x))return!0}return n}var r=ga.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===t)return i(o);if(t=[],1===o.length){var a=o[0],s=new xr;return s.curves=a.curves,t.push(s),t}var l=!r(o[0].getPoints());l=e?!l:l,s=[];var u=[],c=[],h=0;u[h]=void 0,c[h]=[];for(var p=0,d=o.length;d>p;p++){a=o[p];var f=a.getPoints(),m=r(f);(m=e?!m:m)?(!l&&u[h]&&h++,u[h]={s:new xr,p:f},u[h].s.curves=a.curves,l&&h++,c[h]=[]):c[h].push({h:a,p:f[0]})}if(!u[0])return i(o);if(1<u.length){for(p=!1,e=[],r=0,o=u.length;o>r;r++)s[r]=[];for(r=0,o=u.length;o>r;r++)for(a=c[r],m=0;m<a.length;m++){for(l=a[m],h=!0,f=0;f<u.length;f++)n(l.p,u[f].p)&&(r!==f&&e.push({froms:r,tos:f,hole:m}),h?(h=!1,s[f].push(l)):p=!0);h&&s[r].push(l)}0<e.length&&(p||(c=s))}for(p=0,r=u.length;r>p;p++)for(s=u[p].s,t.push(s),e=c[p],o=0,a=e.length;a>o;o++)s.holes.push(e[o].h);return t}}),Object.assign(Qr.prototype,{isFont:!0,generateShapes:function(e,t,i){void 0===t&&(t=100),i=[];var n=t;t=this.data;var r=String(e).split("");n/=t.resolution;var o=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*n;e=[];for(var a=0,s=0,l=0;l<r.length;l++){var u=r[l];if("\n"===u)a=0,s-=o;else{var c=n,h=a,p=s;if(u=t.glyphs[u]||t.glyphs["?"]){var d=new Kr;if(u.o)for(var f=u._cachedOutline||(u._cachedOutline=u.o.split(" ")),m=0,g=f.length;g>m;)switch(f[m++]){case"m":var v=f[m++]*c+h,y=f[m++]*c+p;d.moveTo(v,y);break;case"l":v=f[m++]*c+h,y=f[m++]*c+p,d.lineTo(v,y);break;case"q":var _=f[m++]*c+h,b=f[m++]*c+p,w=f[m++]*c+h,x=f[m++]*c+p;d.quadraticCurveTo(w,x,_,b);break;case"b":_=f[m++]*c+h,b=f[m++]*c+p,w=f[m++]*c+h,x=f[m++]*c+p,v=f[m++]*c+h,y=f[m++]*c+p,d.bezierCurveTo(w,x,v,y,_,b)}c={offsetX:u.ha*c,path:d}}else c=void 0;a+=c.offsetX,e.push(c.path)}}for(t=0,r=e.length;r>t;t++)Array.prototype.push.apply(i,e[t].toShapes());return i}}),Object.assign(eo.prototype,{load:function(e,t,i,n){var r=this,o=new Qn(this.manager);o.setPath(this.path),o.load(e,function(e){try{var i=JSON.parse(e)}catch(n){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),i=JSON.parse(e.substring(65,e.length-2))}e=r.parse(i),t&&t(e)},i,n)},parse:function(e){return new Qr(e)},setPath:function(e){return this.path=e,this}});var ka,Da={getContext:function(){return void 0===ka&&(ka=new(window.AudioContext||window.webkitAudioContext)),ka},setContext:function(e){ka=e}};Object.assign(to.prototype,{load:function(e,t,i,n){var r=new Qn(this.manager);r.setResponseType("arraybuffer"),r.load(e,function(e){Da.getContext().decodeAudioData(e,function(e){t(e)})},i,n)}}),Object.assign(io.prototype,{update:function(){var e,t,i,r,o,a,s,l,u=new n,c=new n;return function(n){if(e!==this||t!==n.focus||i!==n.fov||r!==n.aspect*this.aspect||o!==n.near||a!==n.far||s!==n.zoom||l!==this.eyeSep){e=this,t=n.focus,i=n.fov,r=n.aspect*this.aspect,o=n.near,a=n.far,s=n.zoom;var h=n.projectionMatrix.clone();l=this.eyeSep/2;var p=l*o/t,d=o*Math.tan(qo.DEG2RAD*i*.5)/s;c.elements[12]=-l,u.elements[12]=l;var f=-d*r+p,m=d*r+p;h.elements[0]=2*o/(m-f),h.elements[8]=(m+f)/(m-f),this.cameraL.projectionMatrix.copy(h),f=-d*r-p,m=d*r-p,h.elements[0]=2*o/(m-f),h.elements[8]=(m+f)/(m-f),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(n.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(n.matrixWorld).multiply(u)}}()}),no.prototype=Object.create(b.prototype),no.prototype.constructor=no,ro.prototype=Object.assign(Object.create(b.prototype),{constructor:ro,getInput:function(){return this.gain},removeFilter:function(){null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null)},getFilter:function(){return this.filter},setFilter:function(e){null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination)},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(e){this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01)},updateMatrixWorld:function(){var e=new o,t=new r,i=new o,n=new o;return function(r){b.prototype.updateMatrixWorld.call(this,r),r=this.context.listener;
var o=this.up;this.matrixWorld.decompose(e,t,i),n.set(0,0,-1).applyQuaternion(t),r.positionX?(r.positionX.setValueAtTime(e.x,this.context.currentTime),r.positionY.setValueAtTime(e.y,this.context.currentTime),r.positionZ.setValueAtTime(e.z,this.context.currentTime),r.forwardX.setValueAtTime(n.x,this.context.currentTime),r.forwardY.setValueAtTime(n.y,this.context.currentTime),r.forwardZ.setValueAtTime(n.z,this.context.currentTime),r.upX.setValueAtTime(o.x,this.context.currentTime),r.upY.setValueAtTime(o.y,this.context.currentTime),r.upZ.setValueAtTime(o.z,this.context.currentTime)):(r.setPosition(e.x,e.y,e.z),r.setOrientation(n.x,n.y,n.z,o.x,o.y,o.z))}}()}),oo.prototype=Object.assign(Object.create(b.prototype),{constructor:oo,getOutput:function(){return this.gain},setNodeSource:function(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this},setBuffer:function(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0===this.isPlaying)console.warn("THREE.Audio: Audio is already playing.");else{if(!1!==this.hasPlaybackControl){var e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.onended=this.onEnded.bind(this),e.playbackRate.setValueAtTime(this.playbackRate,this.startTime),this.startTime=this.context.currentTime,e.start(this.startTime,this.offset),this.isPlaying=!0,this.source=e,this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}},pause:function(){return!1!==this.hasPlaybackControl?(!0===this.isPlaying&&(this.source.stop(),this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this):void console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){return!1!==this.hasPlaybackControl?(this.source.stop(),this.offset=0,this.isPlaying=!1,this):void console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(0<this.filters.length){this.source.connect(this.filters[0]);for(var e=1,t=this.filters.length;t>e;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(0<this.filters.length){this.source.disconnect(this.filters[0]);for(var e=1,t=this.filters.length;t>e;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(e){return e||(e=[]),!0===this.isPlaying?(this.disconnect(),this.filters=e,this.connect()):this.filters=e,this},getFilter:function(){return this.getFilters()[0]},setFilter:function(e){return this.setFilters(e?[e]:[])},setPlaybackRate:function(e){return!1!==this.hasPlaybackControl?(this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setValueAtTime(this.playbackRate,this.context.currentTime),this):void console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(e){return!1!==this.hasPlaybackControl?(this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this):void console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}),ao.prototype=Object.assign(Object.create(oo.prototype),{constructor:ao,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(e){this.panner.refDistance=e},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(e){this.panner.rolloffFactor=e},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(e){this.panner.distanceModel=e},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(e){this.panner.maxDistance=e},updateMatrixWorld:function(){var e=new o;return function(t){b.prototype.updateMatrixWorld.call(this,t),e.setFromMatrixPosition(this.matrixWorld),this.panner.setPosition(e.x,e.y,e.z)}}()}),Object.assign(so.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var e=0,t=this.getFrequencyData(),i=0;i<t.length;i++)e+=t[i];return e/t.length}}),Object.assign(lo.prototype,{accumulate:function(e,t){var i=this.buffer,n=this.valueSize;e=e*n+n;var r=this.cumulativeWeight;if(0===r){for(r=0;r!==n;++r)i[e+r]=i[r];r=t}else r+=t,this._mixBufferRegion(i,e,0,t/r,n);this.cumulativeWeight=r},apply:function(e){var t=this.valueSize,i=this.buffer;e=e*t+t;var n=this.cumulativeWeight,r=this.binding;this.cumulativeWeight=0,1>n&&this._mixBufferRegion(i,e,3*t,1-n,t),n=t;for(var o=t+t;n!==o;++n)if(i[n]!==i[n+t]){r.setValue(i,e);break}},saveOriginalState:function(){var e=this.buffer,t=this.valueSize,i=3*t;this.binding.getValue(e,i);for(var n=t;n!==i;++n)e[n]=e[i+n%t];this.cumulativeWeight=0},restoreOriginalState:function(){this.binding.setValue(this.buffer,3*this.valueSize)},_select:function(e,t,i,n,r){if(n>=.5)for(n=0;n!==r;++n)e[t+n]=e[i+n]},_slerp:function(e,t,i,n){r.slerpFlat(e,t,e,t,e,i,n)},_lerp:function(e,t,i,n,r){for(var o=1-n,a=0;a!==r;++a){var s=t+a;e[s]=e[s]*o+e[i+a]*n}}}),Object.assign(uo.prototype,{getValue:function(e,t){this.bind();var i=this._bindings[this._targetGroup.nCachedObjects_];void 0!==i&&i.getValue(e,t)},setValue:function(e,t){for(var i=this._bindings,n=this._targetGroup.nCachedObjects_,r=i.length;n!==r;++n)i[n].setValue(e,t)},bind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()},unbind:function(){for(var e=this._bindings,t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}),Object.assign(co,{Composite:uo,create:function(e,t,i){return e&&e.isAnimationObjectGroup?new co.Composite(e,t,i):new co(e,t,i)},sanitizeNodeName:function(){var e=/[\[\]\.:\/]/g;return function(t){return t.replace(/\s/g,"_").replace(e,"")}}(),parseTrackName:function(){var e="[^"+"\\[\\]\\.:\\/".replace("\\.","")+"]",t=/((?:WC+[\/:])*)/.source.replace("WC","[^\\[\\]\\.:\\/]");e=/(WCOD+)?/.source.replace("WCOD",e);var i=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC","[^\\[\\]\\.:\\/]"),n=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC","[^\\[\\]\\.:\\/]"),r=new RegExp("^"+t+e+i+n+"$"),o=["material","materials","bones"];return function(e){var t=r.exec(e);if(!t)throw Error("PropertyBinding: Cannot parse trackName: "+e);t={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]};var i=t.nodeName&&t.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var n=t.nodeName.substring(i+1);-1!==o.indexOf(n)&&(t.nodeName=t.nodeName.substring(0,i),t.objectName=n)}if(null===t.propertyName||0===t.propertyName.length)throw Error("PropertyBinding: can not parse propertyName from trackName: "+e);return t}}(),findNode:function(e,t){if(!t||""===t||"root"===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){var i=e.skeleton.getBoneByName(t);if(void 0!==i)return i}if(e.children){var n=function(e){for(var i=0;i<e.length;i++){var r=e[i];if(r.name===t||r.uuid===t||(r=n(r.children)))return r}return null};if(e=n(e.children))return e}return null}}),Object.assign(co.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(e,t){e[t]=this.node[this.propertyName]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)e[t++]=i[n]},function(e,t){e[t]=this.resolvedProperty[this.propertyIndex]},function(e,t){this.resolvedProperty.toArray(e,t)}],SetterByBindingTypeAndVersioning:[[function(e,t){this.targetObject[this.propertyName]=e[t]},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++]},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.needsUpdate=!0},function(e,t){for(var i=this.resolvedProperty,n=0,r=i.length;n!==r;++n)i[n]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty[this.propertyIndex]=e[t]},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(e,t){this.resolvedProperty.fromArray(e,t)},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0},function(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(e,t){this.bind(),this.getValue(e,t)},setValue:function(e,t){this.bind(),this.setValue(e,t)},bind:function(){var e=this.node,t=this.parsedPath,i=t.objectName,n=t.propertyName,r=t.propertyIndex;if(e||(this.node=e=co.findNode(this.rootNode,t.nodeName)||this.rootNode),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,e){if(i){var o=t.objectIndex;switch(i){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);for(e=e.skeleton.bones,i=0;i<e.length;i++)if(e[i].name===o){o=i;break}break;default:if(void 0===e[i])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[i]}if(void 0!==o){if(void 0===e[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[o]}}if(o=e[n],void 0===o)console.error("THREE.PropertyBinding: Trying to update property for track: "+t.nodeName+"."+n+" but it wasn't found.",e);else{if(t=this.Versioning.None,void 0!==e.needsUpdate?(t=this.Versioning.NeedsUpdate,this.targetObject=e):void 0!==e.matrixWorldNeedsUpdate&&(t=this.Versioning.MatrixWorldNeedsUpdate,this.targetObject=e),i=this.BindingType.Direct,void 0!==r){if("morphTargetInfluences"===n){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(e.geometry.isBufferGeometry){if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(i=0;i<this.node.geometry.morphAttributes.position.length;i++)if(e.geometry.morphAttributes.position[i].name===r){r=i;break}}else{if(!e.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(i=0;i<this.node.geometry.morphTargets.length;i++)if(e.geometry.morphTargets[i].name===r){r=i;break}}}i=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(i=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(i=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[i],this.setValue=this.SetterByBindingTypeAndVersioning[i][t]}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(co.prototype,{_getValue_unbound:co.prototype.getValue,_setValue_unbound:co.prototype.setValue}),Object.assign(ho.prototype,{isAnimationObjectGroup:!0,add:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,u=0,c=arguments.length;u!==c;++u){var h=arguments[u],p=h.uuid,d=n[p];if(void 0===d){d=t++,n[p]=d,e.push(h),p=0;for(var f=s;p!==f;++p)a[p].push(new co(h,r[p],o[p]))}else if(i>d){l=e[d];var m=--i;for(f=e[m],n[f.uuid]=d,e[d]=f,n[p]=m,e[m]=h,p=0,f=s;p!==f;++p){var g=a[p],v=g[d];g[d]=g[m],void 0===v&&(v=new co(h,r[p],o[p])),g[m]=v}}else e[d]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=i},remove:function(){for(var e=this._objects,t=this.nCachedObjects_,i=this._indicesByUUID,n=this._bindings,r=n.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,u=i[l];if(void 0!==u&&u>=t){var c=t++,h=e[c];for(i[h.uuid]=u,e[u]=h,i[l]=c,e[c]=s,s=0,l=r;s!==l;++s){h=n[s];var p=h[u];h[u]=h[c],h[c]=p}}}this.nCachedObjects_=t},uncache:function(){for(var e=this._objects,t=e.length,i=this.nCachedObjects_,n=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a].uuid,u=n[l];if(void 0!==u)if(delete n[l],i>u){l=--i;var c=e[l],h=--t,p=e[h];for(n[c.uuid]=u,e[u]=c,n[p.uuid]=l,e[l]=p,e.pop(),c=0,p=o;c!==p;++c){var d=r[c],f=d[h];d[u]=d[l],d[l]=f,d.pop()}}else for(h=--t,p=e[h],n[p.uuid]=u,e[u]=p,e.pop(),c=0,p=o;c!==p;++c)d=r[c],d[u]=d[h],d.pop()}this.nCachedObjects_=i},subscribe_:function(e,t){var i=this._bindingsIndicesByPath,n=i[e],r=this._bindings;if(void 0!==n)return r[n];var o=this._paths,a=this._parsedPaths,s=this._objects,l=this.nCachedObjects_,u=Array(s.length);for(n=r.length,i[e]=n,o.push(e),a.push(t),r.push(u),i=l,n=s.length;i!==n;++i)u[i]=new co(s[i],e,t);return u},unsubscribe_:function(e){var t=this._bindingsIndicesByPath,i=t[e];if(void 0!==i){var n=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];t[e[a]]=i,o[i]=s,o.pop(),r[i]=r[a],r.pop(),n[i]=n[a],n.pop()}}}),Object.assign(po.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(e){return this._startTime=e,this},setLoop:function(e,t){return this.loop=e,this.repetitions=t,this},setEffectiveWeight:function(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(e){return this._scheduleFading(e,0,1)},fadeOut:function(e){return this._scheduleFading(e,1,0)},crossFadeFrom:function(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){i=this._clip.duration;var n=e._clip.duration,r=i/n;e.warp(1,n/i,t),this.warp(r,1,t)}return this},crossFadeTo:function(e,t,i){return e.crossFadeFrom(this,t,i)},stopFading:function(){var e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},setEffectiveTimeScale:function(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(e){return this.timeScale=this._clip.duration/e,this.stopWarping()},syncWith:function(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()},halt:function(e){return this.warp(this._effectiveTimeScale,0,e)},warp:function(e,t,i){var n=this._mixer,r=n.time,o=this._timeScaleInterpolant,a=this.timeScale;return null===o&&(this._timeScaleInterpolant=o=n._lendControlInterpolant()),n=o.parameterPositions,o=o.sampleValues,n[0]=r,n[1]=r+i,o[0]=e/a,o[1]=t/a,this},stopWarping:function(){var e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(e,t,i,n){if(this.enabled){var r=this._startTime;if(null!==r){if(t=(e-r)*i,0>t||0===i)return;this._startTime=null,t*=i}if(t*=this._updateTimeScale(e),i=this._updateTime(t),e=this._updateWeight(e),e>0){t=this._interpolants,r=this._propertyBindings;for(var o=0,a=t.length;o!==a;++o)t[o].evaluate(i),r[o].accumulate(n,e)}}else this._updateWeight(e)},_updateWeight:function(e){var t=0;if(this.enabled){t=this.weight;var i=this._weightInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopFading(),0===n&&(this.enabled=!1))}}return this._effectiveWeight=t},_updateTimeScale:function(e){var t=0;if(!this.paused){t=this.timeScale;var i=this._timeScaleInterpolant;if(null!==i){var n=i.evaluate(e)[0];t*=n,e>i.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t},_updateTime:function(e){var t=this.time+e;if(0===e)return t;var i=this._clip.duration,n=this.loop,r=this._loopCount;if(2200===n)e:{if(-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1)),t>=i)t=i;else{if(!(0>t))break e;t=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this._mixer.dispatchEvent({type:"finished",action:this,direction:0>e?-1:1})}else{if(n=2202===n,-1===r&&(e>=0?(r=0,this._setEndings(!0,0===this.repetitions,n)):this._setEndings(0===this.repetitions,!0,n)),t>=i||0>t){var o=Math.floor(t/i);t-=i*o,r+=Math.abs(o);var a=this.repetitions-r;0>=a?(this.clampWhenFinished?this.paused=!0:this.enabled=!1,t=e>0?i:0,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1})):(1===a?(e=0>e,this._setEndings(e,!e,n)):this._setEndings(!1,!1,n),this._loopCount=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:o}))}if(n&&1===(1&r))return this.time=t,i-t}return this.time=t},_setEndings:function(e,t,i){var n=this._interpolantSettings;i?(n.endingStart=2401,n.endingEnd=2401):(n.endingStart=e?this.zeroSlopeAtStart?2401:2400:2402,n.endingEnd=t?this.zeroSlopeAtEnd?2401:2400:2402)},_scheduleFading:function(e,t,i){var n=this._mixer,r=n.time,o=this._weightInterpolant;return null===o&&(this._weightInterpolant=o=n._lendControlInterpolant()),n=o.parameterPositions,o=o.sampleValues,n[0]=r,o[0]=t,n[1]=r+e,o[1]=i,this}}),fo.prototype=Object.assign(Object.create(t.prototype),{constructor:fo,_bindAction:function(e,t){var i=e._localRoot||this._root,n=e._clip.tracks,r=n.length,o=e._propertyBindings;e=e._interpolants;var a=i.uuid,s=this._bindingsByRootAndName,l=s[a];for(void 0===l&&(l={},s[a]=l),s=0;s!==r;++s){var u=n[s],c=u.name,h=l[c];if(void 0===h){if(h=o[s],void 0!==h){null===h._cacheIndex&&(++h.referenceCount,this._addInactiveBinding(h,a,c));continue}h=new lo(co.create(i,c,t&&t._propertyBindings[s].binding.parsedPath),u.ValueTypeName,u.getValueSize()),++h.referenceCount,this._addInactiveBinding(h,a,c)}o[s]=h,e[s].resultBuffer=h.buffer}},_activateAction:function(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){var t=(e._localRoot||this._root).uuid,i=e._clip.uuid,n=this._actionsByClip[i];this._bindAction(e,n&&n.knownActions[0]),this._addInactiveAction(e,i,t)}for(t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0===r.useCount++&&(this._lendBinding(r),r.saveOriginalState())}this._lendAction(e)}},_deactivateAction:function(e){if(this._isActiveAction(e)){for(var t=e._propertyBindings,i=0,n=t.length;i!==n;++i){var r=t[i];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(e)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}},_isActiveAction:function(e){return e=e._cacheIndex,null!==e&&e<this._nActiveActions},_addInactiveAction:function(e,t,i){var n=this._actions,r=this._actionsByClip,o=r[t];void 0===o?(o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,r[t]=o):(t=o.knownActions,e._byClipCacheIndex=t.length,t.push(e)),e._cacheIndex=n.length,n.push(e),o.actionByRoot[i]=e},_removeInactiveAction:function(e){var t=this._actions,i=t[t.length-1],n=e._cacheIndex;i._cacheIndex=n,t[n]=i,t.pop(),e._cacheIndex=null,t=e._clip.uuid,i=this._actionsByClip,n=i[t];var r=n.knownActions,o=r[r.length-1],a=e._byClipCacheIndex;o._byClipCacheIndex=a,r[a]=o,r.pop(),e._byClipCacheIndex=null,delete n.actionByRoot[(e._localRoot||this._root).uuid],0===r.length&&delete i[t],this._removeInactiveBindingsForAction(e)},_removeInactiveBindingsForAction:function(e){e=e._propertyBindings;for(var t=0,i=e.length;t!==i;++t){var n=e[t];0===--n.referenceCount&&this._removeInactiveBinding(n)}},_lendAction:function(e){var t=this._actions,i=e._cacheIndex,n=this._nActiveActions++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackAction:function(e){var t=this._actions,i=e._cacheIndex,n=--this._nActiveActions,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_addInactiveBinding:function(e,t,i){var n=this._bindingsByRootAndName,r=n[t],o=this._bindings;void 0===r&&(r={},n[t]=r),r[i]=e,e._cacheIndex=o.length,o.push(e)},_removeInactiveBinding:function(e){var t=this._bindings,i=e.binding,n=i.rootNode.uuid;i=i.path;var r=this._bindingsByRootAndName,o=r[n],a=t[t.length-1];e=e._cacheIndex,a._cacheIndex=e,t[e]=a,t.pop(),delete o[i];e:{for(var s in o)break e;delete r[n]}},_lendBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=this._nActiveBindings++,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_takeBackBinding:function(e){var t=this._bindings,i=e._cacheIndex,n=--this._nActiveBindings,r=t[n];e._cacheIndex=n,t[n]=e,r._cacheIndex=i,t[i]=r},_lendControlInterpolant:function(){var e=this._controlInterpolants,t=this._nActiveControlInterpolants++,i=e[t];return void 0===i&&(i=new Hr(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),i.__cacheIndex=t,e[t]=i),i},_takeBackControlInterpolant:function(e){var t=this._controlInterpolants,i=e.__cacheIndex,n=--this._nActiveControlInterpolants,r=t[n];e.__cacheIndex=n,t[n]=e,r.__cacheIndex=i,t[i]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(e,t){var i=t||this._root,n=i.uuid;i="string"==typeof e?Vr.findByName(i,e):e,e=null!==i?i.uuid:e;var r=this._actionsByClip[e],o=null;if(void 0!==r){if(o=r.actionByRoot[n],void 0!==o)return o;o=r.knownActions[0],null===i&&(i=o._clip)}return null===i?null:(t=new po(this,i,t),this._bindAction(t,o),this._addInactiveAction(t,e,n),t)},existingAction:function(e,t){var i=t||this._root;return t=i.uuid,i="string"==typeof e?Vr.findByName(i,e):e,e=this._actionsByClip[i?i.uuid:e],void 0!==e?e.actionByRoot[t]||null:null},stopAllAction:function(){for(var e=this._actions,t=this._nActiveActions,i=this._bindings,n=this._nActiveBindings,r=this._nActiveBindings=this._nActiveActions=0;r!==t;++r)e[r].reset();for(r=0;r!==n;++r)i[r].useCount=0;return this},update:function(e){e*=this.timeScale;for(var t=this._actions,i=this._nActiveActions,n=this.time+=e,r=Math.sign(e),o=this._accuIndex^=1,a=0;a!==i;++a)t[a]._update(n,e,r,o);for(e=this._bindings,t=this._nActiveBindings,a=0;a!==t;++a)e[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(e){var t=this._actions;e=e.uuid;var i=this._actionsByClip,n=i[e];if(void 0!==n){n=n.knownActions;for(var r=0,o=n.length;r!==o;++r){var a=n[r];this._deactivateAction(a);var s=a._cacheIndex,l=t[t.length-1];a._cacheIndex=null,a._byClipCacheIndex=null,l._cacheIndex=s,t[s]=l,t.pop(),this._removeInactiveBindingsForAction(a)}delete i[e]}},uncacheRoot:function(e){e=e.uuid;var t=this._actionsByClip;for(n in t){var i=t[n].actionByRoot[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}var n=this._bindingsByRootAndName[e];if(void 0!==n)for(var r in n)e=n[r],e.restoreOriginalState(),this._removeInactiveBinding(e)},uncacheAction:function(e,t){e=this.existingAction(e,t),null!==e&&(this._deactivateAction(e),this._removeInactiveAction(e))}}),mo.prototype.clone=function(){return new mo(void 0===this.value.clone?this.value:this.value.clone())},go.prototype=Object.assign(Object.create(B.prototype),{constructor:go,isInstancedBufferGeometry:!0,copy:function(e){return B.prototype.copy.call(this,e),this.maxInstancedCount=e.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)}}),Object.defineProperties(vo.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(vo.prototype,{isInterleavedBufferAttribute:!0,setX:function(e,t){return this.data.array[e*this.data.stride+this.offset]=t,this},setY:function(e,t){return this.data.array[e*this.data.stride+this.offset+1]=t,this},setZ:function(e,t){return this.data.array[e*this.data.stride+this.offset+2]=t,this},setW:function(e,t){return this.data.array[e*this.data.stride+this.offset+3]=t,this},getX:function(e){return this.data.array[e*this.data.stride+this.offset]},getY:function(e){return this.data.array[e*this.data.stride+this.offset+1]},getZ:function(e){return this.data.array[e*this.data.stride+this.offset+2]},getW:function(e){return this.data.array[e*this.data.stride+this.offset+3]},setXY:function(e,t,i){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this},setXYZ:function(e,t,i,n){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this},setXYZW:function(e,t,i,n,r){return e=e*this.data.stride+this.offset,this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=n,this.data.array[e+3]=r,this}}),Object.defineProperty(yo.prototype,"needsUpdate",{set:function(e){!0===e&&this.version++}}),Object.assign(yo.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(e){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==e?e.length/this.stride:0,this.array=e,this},setDynamic:function(e){return this.dynamic=e,this},copy:function(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.dynamic=e.dynamic,this},copyAt:function(e,t,i){e*=this.stride,i*=t.stride;for(var n=0,r=this.stride;r>n;n++)this.array[e+n]=t.array[i+n];return this},set:function(e,t){return void 0===t&&(t=0),this.array.set(e,t),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(e){return this.onUploadCallback=e,this}}),_o.prototype=Object.assign(Object.create(yo.prototype),{constructor:_o,isInstancedInterleavedBuffer:!0,copy:function(e){return yo.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),bo.prototype=Object.assign(Object.create(T.prototype),{constructor:bo,isInstancedBufferAttribute:!0,copy:function(e){return T.prototype.copy.call(this,e),this.meshPerAttribute=e.meshPerAttribute,this}}),Object.assign(wo.prototype,{linePrecision:1,set:function(e,t){this.ray.set(e,t)},setFromCamera:function(e,t){t&&t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize()):t&&t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(e,t,i){return i=i||[],Eo(e,this,i,t),i.sort(xo),i},intersectObjects:function(e,t,i){if(i=i||[],!1===Array.isArray(e))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var n=0,r=e.length;r>n;n++)Eo(e[n],this,i,t);return i.sort(xo),i}}),Object.assign(So.prototype,{start:function(){this.oldTime=this.startTime=("undefined"==typeof performance?Date:performance).now(),this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.autoStart=this.running=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var t=("undefined"==typeof performance?Date:performance).now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}),Object.assign(To.prototype,{set:function(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(e){return this.radius=e.length(),0===this.radius?this.phi=this.theta=0:(this.theta=Math.atan2(e.x,e.z),this.phi=Math.acos(qo.clamp(e.y/this.radius,-1,1))),this}}),Object.assign(Co.prototype,{set:function(e,t,i){return this.radius=e,this.theta=t,this.y=i,this},clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this},setFromVector3:function(e){return this.radius=Math.sqrt(e.x*e.x+e.z*e.z),this.theta=Math.atan2(e.x,e.z),this.y=e.y,this}}),Object.assign(Mo.prototype,{set:function(e,t){return this.min.copy(e),this.max.copy(t),this},setFromPoints:function(e){this.makeEmpty();for(var t=0,i=e.length;i>t;t++)this.expandByPoint(e[t]);return this},setFromCenterAndSize:function(){var e=new i;return function(t,i){return i=e.copy(i).multiplyScalar(.5),this.min.copy(t).sub(i),this.max.copy(t).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(e){return this.min.copy(e.min),this.max.copy(e.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-(1/0),this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(e){return void 0===e&&(console.warn("THREE.Box2: .getCenter() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(e){return void 0===e&&(console.warn("THREE.Box2: .getSize() target is now required"),e=new i),this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)},expandByPoint:function(e){return this.min.min(e),this.max.max(e),this},expandByVector:function(e){return this.min.sub(e),this.max.add(e),this},expandByScalar:function(e){return this.min.addScalar(-e),this.max.addScalar(e),this},containsPoint:function(e){return e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y?!1:!0},containsBox:function(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y},getParameter:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .getParameter() target is now required"),t=new i),t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(e){return e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y?!1:!0},clampPoint:function(e,t){return void 0===t&&(console.warn("THREE.Box2: .clampPoint() target is now required"),t=new i),t.copy(e).clamp(this.min,this.max)},distanceToPoint:function(){var e=new i;
return function(t){return e.copy(t).clamp(this.min,this.max).sub(t).length()}}(),intersect:function(e){return this.min.max(e.min),this.max.min(e.max),this},union:function(e){return this.min.min(e.min),this.max.max(e.max),this},translate:function(e){return this.min.add(e),this.max.add(e),this},equals:function(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}),Po.prototype=Object.create(b.prototype),Po.prototype.constructor=Po,Po.prototype.isImmediateRenderObject=!0,Io.prototype=Object.create(Ri.prototype),Io.prototype.constructor=Io,Io.prototype.update=function(){var e=new o,t=new o,i=new a;return function(){var n=["a","b","c"];this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,u=a=0,c=l.length;c>u;u++)for(var h=l[u],p=0,d=h.vertexNormals.length;d>p;p++){var f=h.vertexNormals[p];e.copy(s[h[n[p]]]).applyMatrix4(r),t.copy(f).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1}else if(a&&a.isBufferGeometry)for(n=a.attributes.position,s=a.attributes.normal,p=a=0,d=n.count;d>p;p++)e.set(n.getX(p),n.getY(p),n.getZ(p)).applyMatrix4(r),t.set(s.getX(p),s.getY(p),s.getZ(p)),t.applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),o.setXYZ(a,e.x,e.y,e.z),a+=1,o.setXYZ(a,t.x,t.y,t.z),a+=1;o.needsUpdate=!0}}(),Lo.prototype=Object.create(b.prototype),Lo.prototype.constructor=Lo,Lo.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Lo.prototype.update=function(){var e=new o,t=new o;return function(){this.light.updateMatrixWorld();var i=this.light.distance?this.light.distance:1e3,n=i*Math.tan(this.light.angle);this.cone.scale.set(n,n,i),e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t.sub(e)),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),Ao.prototype=Object.create(Ri.prototype),Ao.prototype.constructor=Ao,Ao.prototype.updateMatrixWorld=function(){var e=new o,t=new n,i=new n;return function(n){var r=this.bones,o=this.geometry,a=o.getAttribute("position");i.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var u=r[s];u.parent&&u.parent.isBone&&(t.multiplyMatrices(i,u.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l,e.x,e.y,e.z),t.multiplyMatrices(i,u.parent.matrixWorld),e.setFromMatrixPosition(t),a.setXYZ(l+1,e.x,e.y,e.z),l+=2)}o.getAttribute("position").needsUpdate=!0,b.prototype.updateMatrixWorld.call(this,n)}}(),Oo.prototype=Object.create(Y.prototype),Oo.prototype.constructor=Oo,Oo.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Oo.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},ko.prototype=Object.create(b.prototype),ko.prototype.constructor=ko,ko.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},ko.prototype.update=function(){var e=.5*this.light.width,t=.5*this.light.height,i=this.line.geometry.attributes.position,n=i.array;n[0]=e,n[1]=-t,n[2]=0,n[3]=e,n[4]=t,n[5]=0,n[6]=-e,n[7]=t,n[8]=0,n[9]=-e,n[10]=-t,n[11]=0,n[12]=e,n[13]=-t,n[14]=0,i.needsUpdate=!0,void 0!==this.color?this.line.material.color.set(this.color):this.line.material.color.copy(this.light.color)},Do.prototype=Object.create(b.prototype),Do.prototype.constructor=Do,Do.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Do.prototype.update=function(){var e=new o,t=new g,i=new g;return function(){var n=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=n.geometry.getAttribute("color");t.copy(this.light.color),i.copy(this.light.groundColor);for(var o=0,a=r.count;a>o;o++){var s=a/2>o?t:i;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}n.lookAt(e.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),No.prototype=Object.create(Ri.prototype),No.prototype.constructor=No,Bo.prototype=Object.create(Ri.prototype),Bo.prototype.constructor=Bo,Uo.prototype=Object.create(Ri.prototype),Uo.prototype.constructor=Uo,Uo.prototype.update=function(){var e=new o,t=new o,i=new a;return function(){this.object.updateMatrixWorld(!0),i.getNormalMatrix(this.object.matrixWorld);var n=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices;o=o.faces;for(var s=0,l=0,u=o.length;u>l;l++){var c=o[l],h=c.normal;e.copy(a[c.a]).add(a[c.b]).add(a[c.c]).divideScalar(3).applyMatrix4(n),t.copy(h).applyMatrix3(i).normalize().multiplyScalar(this.size).add(e),r.setXYZ(s,e.x,e.y,e.z),s+=1,r.setXYZ(s,t.x,t.y,t.z),s+=1}r.needsUpdate=!0}}(),Go.prototype=Object.create(b.prototype),Go.prototype.constructor=Go,Go.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Go.prototype.update=function(){var e=new o,t=new o,i=new o;return function(){e.setFromMatrixPosition(this.light.matrixWorld),t.setFromMatrixPosition(this.light.target.matrixWorld),i.subVectors(t,e),this.lightPlane.lookAt(i),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(i),this.targetLine.scale.z=i.length()}}(),Fo.prototype=Object.create(Ri.prototype),Fo.prototype.constructor=Fo,Fo.prototype.update=function(){function e(e,o,a,s){if(n.set(o,a,s).unproject(r),e=i[e],void 0!==e)for(o=t.getAttribute("position"),a=0,s=e.length;s>a;a++)o.setXYZ(e[a],n.x,n.y,n.z)}var t,i,n=new o,r=new w;return function(){t=this.geometry,i=this.pointMap,r.projectionMatrix.copy(this.camera.projectionMatrix),e("c",0,0,-1),e("t",0,0,1),e("n1",-1,-1,-1),e("n2",1,-1,-1),e("n3",-1,1,-1),e("n4",1,1,-1),e("f1",-1,-1,1),e("f2",1,-1,1),e("f3",-1,1,1),e("f4",1,1,1),e("u1",.7,1.1,-1),e("u2",-.7,1.1,-1),e("u3",0,2,-1),e("cf1",-1,0,1),e("cf2",1,0,1),e("cf3",0,-1,1),e("cf4",0,1,1),e("cn1",-1,0,-1),e("cn2",1,0,-1),e("cn3",0,-1,-1),e("cn4",0,1,-1),t.getAttribute("position").needsUpdate=!0}}(),Ho.prototype=Object.create(Ri.prototype),Ho.prototype.constructor=Ho,Ho.prototype.update=function(){var e=new p;return function(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&e.setFromObject(this.object),!e.isEmpty()){t=e.min;var i=e.max,n=this.geometry.attributes.position,r=n.array;r[0]=i.x,r[1]=i.y,r[2]=i.z,r[3]=t.x,r[4]=i.y,r[5]=i.z,r[6]=t.x,r[7]=t.y,r[8]=i.z,r[9]=i.x,r[10]=t.y,r[11]=i.z,r[12]=i.x,r[13]=i.y,r[14]=t.z,r[15]=t.x,r[16]=i.y,r[17]=t.z,r[18]=t.x,r[19]=t.y,r[20]=t.z,r[21]=i.x,r[22]=t.y,r[23]=t.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Ho.prototype.setFromObject=function(e){return this.object=e,this.update(),this},jo.prototype=Object.create(Ri.prototype),jo.prototype.constructor=jo,jo.prototype.updateMatrixWorld=function(e){var t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),b.prototype.updateMatrixWorld.call(this,e))},zo.prototype=Object.create(Li.prototype),zo.prototype.constructor=zo,zo.prototype.updateMatrixWorld=function(e){var t=-this.plane.constant;1e-8>Math.abs(t)&&(t=1e-8),this.scale.set(.5*this.size,.5*this.size,t),this.lookAt(this.plane.normal),b.prototype.updateMatrixWorld.call(this,e)};var Na,Ba;$o.prototype=Object.create(b.prototype),$o.prototype.constructor=$o,$o.prototype.setDirection=function(){var e,t=new o;return function(i){.99999<i.y?this.quaternion.set(0,0,0,1):-.99999>i.y?this.quaternion.set(1,0,0,0):(t.set(i.z,0,-i.x).normalize(),e=Math.acos(i.y),this.quaternion.setFromAxisAngle(t,e))}}(),$o.prototype.setLength=function(e,t,i){void 0===t&&(t=.2*e),void 0===i&&(i=.2*t),this.line.scale.set(1,Math.max(0,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()},$o.prototype.setColor=function(e){this.line.material.color.copy(e),this.cone.material.color.copy(e)},Vo.prototype=Object.create(Ri.prototype),Vo.prototype.constructor=Vo,or.create=function(e,t){return console.log("THREE.Curve.create() has been deprecated"),e.prototype=Object.create(or.prototype),e.prototype.constructor=e,e.prototype.getPoint=t,e},Object.assign(br.prototype,{createPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getPoints(e),this.createGeometry(e)},createSpacedPointsGeometry:function(e){return console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead."),e=this.getSpacedPoints(e),this.createGeometry(e)},createGeometry:function(e){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var t=new S,i=0,n=e.length;n>i;i++){var r=e[i];t.vertices.push(new o(r.x,r.y,r.z||0))}return t}}),Object.assign(wr.prototype,{fromPoints:function(e){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(e)}}),Wo.prototype=Object.create(ur.prototype),Xo.prototype=Object.create(ur.prototype),Yo.prototype=Object.create(ur.prototype),Object.assign(Yo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),No.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Ao.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Yr.prototype,{extractUrlBase:function(e){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),La.extractUrlBase(e)}}),Object.assign(Mo.prototype,{center:function(e){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},size:function(e){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(e)}}),Object.assign(p.prototype,{center:function(e){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(e)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(e){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionSphere:function(e){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)},size:function(e){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(e)}}),W.prototype.center=function(e){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(e)},Object.assign(qo,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(e){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),qo.floorPowerOfTwo(e)},nextPowerOfTwo:function(e){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),qo.ceilPowerOfTwo(e)}}),Object.assign(a.prototype,{flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},multiplyVector3:function(e){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),e.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(n.prototype,{extractPosition:function(e){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(e)},flattenToArrayOffset:function(e,t){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(e,t)},getPosition:function(){var e;return function(){return void 0===e&&(e=new o),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),e.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(e){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(e)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(e){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector4:function(e){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(e){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),e.transformDirection(this)},crossVector:function(e){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),e.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(e){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(e)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(e,t,i,n,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(e,t,n,i,r,o)}}),f.prototype.isIntersectionLine=function(e){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(e)},r.prototype.multiplyVector3=function(e){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),e.applyQuaternion(this)},Object.assign(V.prototype,{isIntersectionBox:function(e){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(e)},isIntersectionPlane:function(e){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(e)},isIntersectionSphere:function(e){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(e)}}),Object.assign(X.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(e,t){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(e,t)},midpoint:function(e){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(e)},normal:function(e){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(e)},plane:function(e){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(e)}}),Object.assign(X,{barycoordFromPoint:function(e,t,i,n,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),X.getBarycoord(e,t,i,n,r)},normal:function(e,t,i,n){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),X.getNormal(e,t,i,n)}}),Object.assign(xr.prototype,{extractAllPoints:function(e){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(e)},extrude:function(e){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new En(this,e)},makeGeometry:function(e){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new On(this,e)}}),Object.assign(i.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(o.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(e){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(e)},getScaleFromMatrix:function(e){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(e)},getColumnFromMatrix:function(e,t){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(t,e)},applyProjection:function(e){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(e)},fromAttribute:function(e,t,i){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},distanceToManhattan:function(e){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(e)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(l.prototype,{fromAttribute:function(e,t,i){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(e,t,i)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(S.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(b.prototype,{getChildByName:function(e){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(e)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(e,t){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(t,e)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(b.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(e){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=e}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ti.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(Ci.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Object.defineProperty(or.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(e){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=e}}),gi.prototype.setLens=function(e,t){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==t&&(this.filmGauge=t),this.setFocalLength(e)},Object.defineProperties(Er.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(e){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=e}},shadowCameraLeft:{set:function(e){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=e}},shadowCameraRight:{set:function(e){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=e}},shadowCameraTop:{set:function(e){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=e}},shadowCameraBottom:{set:function(e){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=e}},shadowCameraNear:{set:function(e){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=e}},shadowCameraFar:{set:function(e){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=e}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(e){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=e}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(e){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=e}},shadowMapHeight:{set:function(e){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=e}}}),Object.defineProperties(T.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(B.prototype,{addIndex:function(e){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(e)},addDrawCall:function(e,t,i){void 0!==i&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(e,t)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(B.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(Sn.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(mo.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(j.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new g}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===e}}}),Object.defineProperties(Xn.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties($.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(e){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=e}}}),Object.assign(_i.prototype,{getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(e){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(e)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")}}),Object.defineProperties(_i.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=e}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(e){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=e}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(ci.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(u.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=e}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT
},set:function(e){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=e}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=e}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(e){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=e}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(e){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=e}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(e){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=e}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(e){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=e}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(e){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=e}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(e){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=e}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(e){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=e}}}),Object.defineProperties(yi.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}}}),oo.prototype.load=function(e){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var t=this;return(new to).load(e,function(e){t.setBuffer(e)}),this},so.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},no.prototype.updateCubeMap=function(e,t){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(e,t)},e.WebGLRenderTargetCube=c,e.WebGLRenderTarget=u,e.WebGLRenderer=_i,e.ShaderLib=ta,e.UniformsLib=ea,e.UniformsUtils=Ko,e.ShaderChunk=Zo,e.FogExp2=bi,e.Fog=wi,e.Scene=xi,e.Sprite=Si,e.LOD=Ti,e.SkinnedMesh=Pi,e.Skeleton=Ci,e.Bone=Mi,e.Mesh=Y,e.LineSegments=Ri,e.LineLoop=Ai,e.Line=Li,e.Points=ki,e.Group=Di,e.VideoTexture=Ni,e.DataTexture=h,e.CompressedTexture=Bi,e.CubeTexture=at,e.CanvasTexture=hi,e.DepthTexture=Ui,e.Texture=s,e.CompressedTextureLoader=er,e.DataTextureLoader=tr,e.CubeTextureLoader=nr,e.TextureLoader=rr,e.ObjectLoader=Jr,e.MaterialLoader=Wr,e.BufferGeometryLoader=Xr,e.DefaultLoadingManager=wa,e.LoadingManager=Kn,e.JSONLoader=qr,e.ImageLoader=ir,e.ImageBitmapLoader=Zr,e.FontLoader=eo,e.FileLoader=Qn,e.Loader=Yr,e.LoaderUtils=La,e.Cache=ba,e.AudioLoader=to,e.SpotLightShadow=Cr,e.SpotLight=Mr,e.PointLight=Pr,e.RectAreaLight=Ar,e.HemisphereLight=Sr,e.DirectionalLightShadow=Ir,e.DirectionalLight=Lr,e.AmbientLight=Rr,e.LightShadow=Tr,e.Light=Er,e.StereoCamera=io,e.PerspectiveCamera=gi,e.OrthographicCamera=x,e.CubeCamera=no,e.ArrayCamera=vi,e.Camera=w,e.AudioListener=ro,e.PositionalAudio=ao,e.AudioContext=Da,e.AudioAnalyser=so,e.Audio=oo,e.VectorKeyframeTrack=$r,e.StringKeyframeTrack=Or,e.QuaternionKeyframeTrack=Br,e.NumberKeyframeTrack=Gr,e.ColorKeyframeTrack=Ur,e.BooleanKeyframeTrack=kr,e.PropertyMixer=lo,e.PropertyBinding=co,e.KeyframeTrack=zr,e.AnimationUtils=Pa,e.AnimationObjectGroup=ho,e.AnimationMixer=fo,e.AnimationClip=Vr,e.Uniform=mo,e.InstancedBufferGeometry=go,e.BufferGeometry=B,e.Geometry=S,e.InterleavedBufferAttribute=vo,e.InstancedInterleavedBuffer=_o,e.InterleavedBuffer=yo,e.InstancedBufferAttribute=bo,e.Face3=E,e.Object3D=b,e.Raycaster=wo,e.Layers=_,e.EventDispatcher=t,e.Clock=So,e.QuaternionLinearInterpolant=Nr,e.LinearInterpolant=Hr,e.DiscreteInterpolant=jr,e.CubicInterpolant=Fr,e.Interpolant=Dr,e.Triangle=X,e.Math=qo,e.Spherical=To,e.Cylindrical=Co,e.Plane=f,e.Frustum=m,e.Sphere=d,e.Ray=V,e.Matrix4=n,e.Matrix3=a,e.Box3=p,e.Box2=Mo,e.Line3=W,e.Euler=y,e.Vector4=l,e.Vector3=o,e.Vector2=i,e.Quaternion=r,e.Color=g,e.ImmediateRenderObject=Po,e.VertexNormalsHelper=Io,e.SpotLightHelper=Lo,e.SkeletonHelper=Ao,e.PointLightHelper=Oo,e.RectAreaLightHelper=ko,e.HemisphereLightHelper=Do,e.GridHelper=No,e.PolarGridHelper=Bo,e.FaceNormalsHelper=Uo,e.DirectionalLightHelper=Go,e.CameraHelper=Fo,e.BoxHelper=Ho,e.Box3Helper=jo,e.PlaneHelper=zo,e.ArrowHelper=$o,e.AxesHelper=Vo,e.Shape=xr,e.Path=wr,e.ShapePath=Kr,e.Font=Qr,e.CurvePath=br,e.Curve=or,e.ShapeUtils=ga,e.WebGLUtils=mi,e.WireframeGeometry=Gi,e.ParametricGeometry=Fi,e.ParametricBufferGeometry=Hi,e.TetrahedronGeometry=$i,e.TetrahedronBufferGeometry=Vi,e.OctahedronGeometry=Wi,e.OctahedronBufferGeometry=Xi,e.IcosahedronGeometry=Yi,e.IcosahedronBufferGeometry=qi,e.DodecahedronGeometry=Ji,e.DodecahedronBufferGeometry=Zi,e.PolyhedronGeometry=ji,e.PolyhedronBufferGeometry=zi,e.TubeGeometry=Ki,e.TubeBufferGeometry=Qi,e.TorusKnotGeometry=en,e.TorusKnotBufferGeometry=tn,e.TorusGeometry=nn,e.TorusBufferGeometry=rn,e.TextGeometry=Tn,e.TextBufferGeometry=Cn,e.SphereGeometry=Mn,e.SphereBufferGeometry=Pn,e.RingGeometry=In,e.RingBufferGeometry=Ln,e.PlaneGeometry=F,e.PlaneBufferGeometry=H,e.LatheGeometry=Rn,e.LatheBufferGeometry=An,e.ShapeGeometry=On,e.ShapeBufferGeometry=kn,e.ExtrudeGeometry=En,e.ExtrudeBufferGeometry=Sn,e.EdgesGeometry=Nn,e.ConeGeometry=Gn,e.ConeBufferGeometry=Fn,e.CylinderGeometry=Bn,e.CylinderBufferGeometry=Un,e.CircleGeometry=Hn,e.CircleBufferGeometry=jn,e.BoxGeometry=U,e.BoxBufferGeometry=G,e.ShadowMaterial=zn,e.SpriteMaterial=Ei,e.RawShaderMaterial=$n,e.ShaderMaterial=$,e.PointsMaterial=Oi,e.MeshPhysicalMaterial=Wn,e.MeshStandardMaterial=Vn,e.MeshPhongMaterial=Xn,e.MeshToonMaterial=Yn,e.MeshNormalMaterial=qn,e.MeshLambertMaterial=Jn,e.MeshDepthMaterial=li,e.MeshDistanceMaterial=ui,e.MeshBasicMaterial=z,e.LineDashedMaterial=Zn,e.LineBasicMaterial=Ii,e.Material=j,e.Float64BufferAttribute=k,e.Float32BufferAttribute=O,e.Uint32BufferAttribute=A,e.Int32BufferAttribute=R,e.Uint16BufferAttribute=L,e.Int16BufferAttribute=I,e.Uint8ClampedBufferAttribute=P,e.Uint8BufferAttribute=M,e.Int8BufferAttribute=C,e.BufferAttribute=T,e.ArcCurve=sr,e.CatmullRomCurve3=ur,e.CubicBezierCurve=dr,e.CubicBezierCurve3=fr,e.EllipseCurve=ar,e.LineCurve=mr,e.LineCurve3=gr,e.QuadraticBezierCurve=vr,e.QuadraticBezierCurve3=yr,e.SplineCurve=_r,e.REVISION="92",e.MOUSE={LEFT:0,MIDDLE:1,RIGHT:2},e.CullFaceNone=0,e.CullFaceBack=1,e.CullFaceFront=2,e.CullFaceFrontBack=3,e.FrontFaceDirectionCW=0,e.FrontFaceDirectionCCW=1,e.BasicShadowMap=0,e.PCFShadowMap=1,e.PCFSoftShadowMap=2,e.FrontSide=0,e.BackSide=1,e.DoubleSide=2,e.FlatShading=1,e.SmoothShading=2,e.NoColors=0,e.FaceColors=1,e.VertexColors=2,e.NoBlending=0,e.NormalBlending=1,e.AdditiveBlending=2,e.SubtractiveBlending=3,e.MultiplyBlending=4,e.CustomBlending=5,e.AddEquation=100,e.SubtractEquation=101,e.ReverseSubtractEquation=102,e.MinEquation=103,e.MaxEquation=104,e.ZeroFactor=200,e.OneFactor=201,e.SrcColorFactor=202,e.OneMinusSrcColorFactor=203,e.SrcAlphaFactor=204,e.OneMinusSrcAlphaFactor=205,e.DstAlphaFactor=206,e.OneMinusDstAlphaFactor=207,e.DstColorFactor=208,e.OneMinusDstColorFactor=209,e.SrcAlphaSaturateFactor=210,e.NeverDepth=0,e.AlwaysDepth=1,e.LessDepth=2,e.LessEqualDepth=3,e.EqualDepth=4,e.GreaterEqualDepth=5,e.GreaterDepth=6,e.NotEqualDepth=7,e.MultiplyOperation=0,e.MixOperation=1,e.AddOperation=2,e.NoToneMapping=0,e.LinearToneMapping=1,e.ReinhardToneMapping=2,e.Uncharted2ToneMapping=3,e.CineonToneMapping=4,e.UVMapping=300,e.CubeReflectionMapping=301,e.CubeRefractionMapping=302,e.EquirectangularReflectionMapping=303,e.EquirectangularRefractionMapping=304,e.SphericalReflectionMapping=305,e.CubeUVReflectionMapping=306,e.CubeUVRefractionMapping=307,e.RepeatWrapping=1e3,e.ClampToEdgeWrapping=1001,e.MirroredRepeatWrapping=1002,e.NearestFilter=1003,e.NearestMipMapNearestFilter=1004,e.NearestMipMapLinearFilter=1005,e.LinearFilter=1006,e.LinearMipMapNearestFilter=1007,e.LinearMipMapLinearFilter=1008,e.UnsignedByteType=1009,e.ByteType=1010,e.ShortType=1011,e.UnsignedShortType=1012,e.IntType=1013,e.UnsignedIntType=1014,e.FloatType=1015,e.HalfFloatType=1016,e.UnsignedShort4444Type=1017,e.UnsignedShort5551Type=1018,e.UnsignedShort565Type=1019,e.UnsignedInt248Type=1020,e.AlphaFormat=1021,e.RGBFormat=1022,e.RGBAFormat=1023,e.LuminanceFormat=1024,e.LuminanceAlphaFormat=1025,e.RGBEFormat=1023,e.DepthFormat=1026,e.DepthStencilFormat=1027,e.RGB_S3TC_DXT1_Format=33776,e.RGBA_S3TC_DXT1_Format=33777,e.RGBA_S3TC_DXT3_Format=33778,e.RGBA_S3TC_DXT5_Format=33779,e.RGB_PVRTC_4BPPV1_Format=35840,e.RGB_PVRTC_2BPPV1_Format=35841,e.RGBA_PVRTC_4BPPV1_Format=35842,e.RGBA_PVRTC_2BPPV1_Format=35843,e.RGB_ETC1_Format=36196,e.RGBA_ASTC_4x4_Format=37808,e.RGBA_ASTC_5x4_Format=37809,e.RGBA_ASTC_5x5_Format=37810,e.RGBA_ASTC_6x5_Format=37811,e.RGBA_ASTC_6x6_Format=37812,e.RGBA_ASTC_8x5_Format=37813,e.RGBA_ASTC_8x6_Format=37814,e.RGBA_ASTC_8x8_Format=37815,e.RGBA_ASTC_10x5_Format=37816,e.RGBA_ASTC_10x6_Format=37817,e.RGBA_ASTC_10x8_Format=37818,e.RGBA_ASTC_10x10_Format=37819,e.RGBA_ASTC_12x10_Format=37820,e.RGBA_ASTC_12x12_Format=37821,e.LoopOnce=2200,e.LoopRepeat=2201,e.LoopPingPong=2202,e.InterpolateDiscrete=2300,e.InterpolateLinear=2301,e.InterpolateSmooth=2302,e.ZeroCurvatureEnding=2400,e.ZeroSlopeEnding=2401,e.WrapAroundEnding=2402,e.TrianglesDrawMode=0,e.TriangleStripDrawMode=1,e.TriangleFanDrawMode=2,e.LinearEncoding=3e3,e.sRGBEncoding=3001,e.GammaEncoding=3007,e.RGBEEncoding=3002,e.LogLuvEncoding=3003,e.RGBM7Encoding=3004,e.RGBM16Encoding=3005,e.RGBDEncoding=3006,e.BasicDepthPacking=3200,e.RGBADepthPacking=3201,e.CubeGeometry=U,e.Face4=function(e,t,i,n,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new E(e,t,i,r,o,a)},e.LineStrip=0,e.LinePieces=1,e.MeshFaceMaterial=function(e){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),e},e.MultiMaterial=function(e){return void 0===e&&(e=[]),console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),e.isMultiMaterial=!0,e.materials=e,e.clone=function(){return e.slice()},e},e.PointCloud=function(e,t){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new ki(e,t)},e.Particle=function(e){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Si(e)},e.ParticleSystem=function(e,t){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new ki(e,t)},e.PointCloudMaterial=function(e){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new Oi(e)},e.ParticleBasicMaterial=function(e){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new Oi(e)},e.ParticleSystemMaterial=function(e){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new Oi(e)},e.Vertex=function(e,t,i){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new o(e,t,i)},e.DynamicBufferAttribute=function(e,t){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setDynamic( true ) instead."),new T(e,t).setDynamic(!0)},e.Int8Attribute=function(e,t){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new C(e,t)},e.Uint8Attribute=function(e,t){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new M(e,t)},e.Uint8ClampedAttribute=function(e,t){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new P(e,t)},e.Int16Attribute=function(e,t){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new I(e,t)},e.Uint16Attribute=function(e,t){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new L(e,t)},e.Int32Attribute=function(e,t){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new R(e,t)},e.Uint32Attribute=function(e,t){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new A(e,t)},e.Float32Attribute=function(e,t){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new O(e,t)},e.Float64Attribute=function(e,t){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new k(e,t)},e.ClosedSplineCurve3=Wo,e.SplineCurve3=Xo,e.Spline=Yo,e.AxisHelper=function(e){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new Vo(e)},e.BoundingBoxHelper=function(e,t){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Ho(e,t)},e.EdgesHelper=function(e,t){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new Ri(new Nn(e.geometry),new Ii({color:void 0!==t?t:16777215}))},e.WireframeHelper=function(e,t){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new Ri(new Gi(e.geometry),new Ii({color:void 0!==t?t:16777215}))},e.XHRLoader=function(e){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new Qn(e)},e.BinaryTextureLoader=function(e){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new tr(e)},e.GeometryUtils={merge:function(e,t,i){if(console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),t.isMesh){t.matrixAutoUpdate&&t.updateMatrix();var n=t.matrix;t=t.geometry}e.merge(t,n,i)},center:function(e){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),e.center()}},e.ImageUtils={crossOrigin:void 0,loadTexture:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new rr;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},loadTextureCube:function(e,t,i,n){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new nr;return r.setCrossOrigin(this.crossOrigin),e=r.load(e,i,void 0,n),t&&(e.mapping=t),e},loadCompressedTexture:function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},loadCompressedTextureCube:function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},e.Projector=function(){console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."),this.projectVector=function(e,t){console.warn("THREE.Projector: .projectVector() is now vector.project()."),e.project(t)},this.unprojectVector=function(e,t){console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."),e.unproject(t)},this.pickingRay=function(){console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")}},e.CanvasRenderer=function(){console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"),this.domElement=document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),this.clear=function(){},this.render=function(){},this.setClearColor=function(){},this.setSize=function(){}},e.SceneUtils={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/js/utils/SceneUtils.js")}},e.LensFlare=function(){console.error("THREE.LensFlare has been moved to /examples/js/objects/Lensflare.js")},Object.defineProperty(e,"__esModule",{value:!0})}),THREE.FBXLoader=function(){function e(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager}function t(e){this.textureLoader=e}function i(){}function n(){}function r(){}function o(){}function a(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0!==t?t:!0}function s(){}function l(e){var t="Kaydara FBX Binary  \x00";return e.byteLength>=t.length&&t===g(e,0,t.length)}function u(e){function t(t){var i=e[t-1];return e=e.slice(n+t),n++,i}for(var i=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],n=0,r=0;r<i.length;++r){var o=t(1);if(o===i[r])return!1}return!0}function c(e){var t=/FBXVersion: (\d+)/,i=e.match(t);if(i){var n=parseInt(i[1]);return n}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function h(e){return e/46186158e3}function p(e,t,i,n){var r;switch(n.mappingType){case"ByPolygonVertex":r=e;break;case"ByPolygon":r=t;break;case"ByVertice":r=i;break;case"AllSame":r=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(r=n.indices[r]);var o=r*n.dataSize,a=o+n.dataSize;return y(E,n.buffer,o,a)}function d(e){var t=new THREE.Matrix4,i=new THREE.Matrix4,n=new THREE.Matrix4,r=new THREE.Matrix4,o=new THREE.Matrix4,a=new THREE.Matrix4,s=new THREE.Matrix4,l=new THREE.Matrix4,u=new THREE.Matrix4,c=new THREE.Matrix4,h=new THREE.Matrix4,p=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(T.fromArray(e.translation)),e.preRotation){var d=e.preRotation.map(THREE.Math.degToRad);d.push(e.eulerOrder),i.makeRotationFromEuler(S.fromArray(d))}if(e.rotation){var d=e.rotation.map(THREE.Math.degToRad);d.push(e.eulerOrder),n.makeRotationFromEuler(S.fromArray(d))}if(e.postRotation){var d=e.postRotation.map(THREE.Math.degToRad);d.push(e.eulerOrder),r.makeRotationFromEuler(S.fromArray(d))}e.scale&&o.scale(T.fromArray(e.scale)),e.scalingOffset&&s.setPosition(T.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(T.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(T.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(T.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(c=e.parentMatrixWorld);var f=i.multiply(n).multiply(r),m=new THREE.Matrix4;c.extractRotation(m);var g,v,y,_=new THREE.Matrix4;_.copyPosition(c),y=_.getInverse(_).multiply(c),v=m.getInverse(m).multiply(y),g=o;var b;if(0===p)b=m.multiply(f).multiply(v).multiply(g);else if(1===p)b=m.multiply(v).multiply(f).multiply(g);else{var w=(new THREE.Matrix4).copy(o),x=v.multiply(w.getInverse(w));b=m.multiply(f).multiply(x).multiply(g)}var E=t.multiply(l).multiply(u).multiply(i).multiply(n).multiply(r).multiply(u.getInverse(u)).multiply(s).multiply(a).multiply(o).multiply(a.getInverse(a)),C=(new THREE.Matrix4).copyPosition(E),M=c.multiply(C);return h.copyPosition(M),E=h.multiply(b)}function f(e){e=e||0;var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===e?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function m(e){var t=e.split(",").map(function(e){return parseFloat(e)});return t}function g(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=e.byteLength),THREE.LoaderUtils.decodeText(new Uint8Array(e,t,i))}function v(e,t){for(var i=0,n=e.length,r=t.length;r>i;i++,n++)e[n]=t[i]}function y(e,t,i,n){for(var r=i,o=0;n>r;r++,o++)e[o]=t[r];return e}function _(e,t,i){return e.slice(0,t).concat(i).concat(e.slice(t))}var b,w,x;e.prototype={constructor:e,crossOrigin:"anonymous",load:function(e,t,i,n){var r=this,o=void 0===r.path?THREE.LoaderUtils.extractUrlBase(e):r.path,a=new THREE.FileLoader(this.manager);a.setResponseType("arraybuffer"),a.load(e,function(i){try{t(r.parse(i,o))}catch(a){setTimeout(function(){n&&n(a),r.manager.itemError(e)},0)}},i,n)},setPath:function(e){return this.path=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setCrossOrigin:function(e){return this.crossOrigin=e,this},parse:function(e,i){if(l(e))b=(new o).parse(e);else{var n=g(e);if(!u(n))throw new Error("THREE.FBXLoader: Unknown format.");if(c(n)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+c(n));b=(new r).parse(n)}var a=new THREE.TextureLoader(this.manager).setPath(this.resourcePath||i).setCrossOrigin(this.crossOrigin);return new t(a).parse(b)}},t.prototype={constructor:t,parse:function(){w=this.parseConnections();var e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),o=(new i).parse(r);return this.parseScene(r,o,n),x},parseConnections:function(){var e=new Map;if("Connections"in b){var t=b.Connections.connections;t.forEach(function(t){var i=t[0],n=t[1],r=t[2];e.has(i)||e.set(i,{parents:[],children:[]});var o={ID:n,relationship:r};e.get(i).parents.push(o),e.has(n)||e.set(n,{parents:[],children:[]});var a={ID:i,relationship:r};e.get(n).children.push(a)})}return e},parseImages:function(){var e={},t={};if("Video"in b.Objects){var i=b.Objects.Video;for(var n in i){var r=i[n],o=parseInt(n);if(e[o]=r.RelativeFilename||r.Filename,"Content"in r){var a=r.Content instanceof ArrayBuffer&&r.Content.byteLength>0,s="string"==typeof r.Content&&""!==r.Content;if(a||s){var l=this.parseImage(i[n]);t[r.RelativeFilename||r.Filename]=l}}}}for(var o in e){var u=e[o];void 0!==t[u]?e[o]=t[u]:e[o]=e[o].split("\\").pop()}return e},parseImage:function(e){var t,i=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(r){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":if("function"!=typeof THREE.TGALoader)return void console.warn("FBXLoader: THREE.TGALoader is required to load TGA textures");if(null===THREE.Loader.Handlers.get(".tga")){var o=new THREE.TGALoader;o.setPath(this.textureLoader.path),THREE.Loader.Handlers.add(/\.tga$/i,o)}t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof i)return"data:"+t+";base64,"+i;var a=new Uint8Array(i);return window.URL.createObjectURL(new Blob([a],{type:t}))},parseTextures:function(e){var t=new Map;if("Texture"in b.Objects){var i=b.Objects.Texture;for(var n in i){var r=this.parseTexture(i[n],e);t.set(parseInt(n),r)}}return t},parseTexture:function(e,t){var i=this.loadTexture(e,t);i.ID=e.id,i.name=e.attrName;var n=e.WrapModeU,r=e.WrapModeV,o=void 0!==n?n.value:0,a=void 0!==r?r.value:0;if(i.wrapS=0===o?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,i.wrapT=0===a?THREE.RepeatWrapping:THREE.ClampToEdgeWrapping,"Scaling"in e){var s=e.Scaling.value;i.repeat.x=s[0],i.repeat.y=s[1]}return i},loadTexture:function(e,t){var i,n=this.textureLoader.path,r=w.get(e.id).children;void 0!==r&&r.length>0&&void 0!==t[r[0].ID]&&(i=t[r[0].ID],(0===i.indexOf("blob:")||0===i.indexOf("data:"))&&this.textureLoader.setPath(void 0));var o,a=e.FileName.slice(-3).toLowerCase();if("tga"===a){var s=THREE.Loader.Handlers.get(".tga");null===s?(console.warn("FBXLoader: TGALoader not found, creating empty placeholder texture for",i),o=new THREE.Texture):o=s.load(i)}else o="psd"===a?this.textureLoader.load("Paper_TieTu.png"):this.textureLoader.load(i);return this.textureLoader.setPath(n),o},parseMaterials:function(e){var t=new Map;if("Material"in b.Objects){var i=b.Objects.Material;for(var n in i){var r=this.parseMaterial(i[n],e);null!==r&&t.set(parseInt(n),r)}}return t},parseMaterial:function(e,t){var i=e.id,n=e.attrName,r=e.ShadingModel;if("object"==typeof r&&(r=r.value),!w.has(i))return null;var o,a=this.parseParameters(e,t,i);switch(r.toLowerCase()){case"phong":o=new THREE.MeshPhongMaterial;break;case"lambert":o=new THREE.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',r),o=new THREE.MeshPhongMaterial({color:3342591})}return o.setValues(a),o.name=n,o},parseParameters:function(e,t,i){var n={};e.BumpFactor&&(n.bumpScale=e.BumpFactor.value),e.Diffuse?n.color=(new THREE.Color).fromArray(e.Diffuse.value):e.DiffuseColor&&"Color"===e.DiffuseColor.type&&(n.color=(new THREE.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(n.displacementScale=e.DisplacementFactor.value),e.Emissive?n.emissive=(new THREE.Color).fromArray(e.Emissive.value):e.EmissiveColor&&"Color"===e.EmissiveColor.type&&(n.emissive=(new THREE.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(n.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(n.opacity=parseFloat(e.Opacity.value)),n.opacity<1&&(n.transparent=!0),e.ReflectionFactor&&(n.reflectivity=e.ReflectionFactor.value),e.Shininess&&(n.shininess=e.Shininess.value),e.Specular?n.specular=(new THREE.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(n.specular=(new THREE.Color).fromArray(e.SpecularColor.value));var r=this;return w.get(i).children.forEach(function(e){var i=e.relationship;switch(i){case"Bump":n.bumpMap=r.getTexture(t,e.ID);break;case"DiffuseColor":n.map=r.getTexture(t,e.ID);break;case"DisplacementColor":n.displacementMap=r.getTexture(t,e.ID);break;case"EmissiveColor":n.emissiveMap=r.getTexture(t,e.ID);break;case"NormalMap":n.normalMap=r.getTexture(t,e.ID);break;case"ReflectionColor":n.envMap=r.getTexture(t,e.ID),n.envMap.mapping=THREE.EquirectangularReflectionMapping;break;case"SpecularColor":n.specularMap=r.getTexture(t,e.ID);break;case"TransparentColor":n.alphaMap=r.getTexture(t,e.ID),n.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",i)}}),n},getTexture:function(e,t){return"LayeredTexture"in b.Objects&&t in b.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=w.get(t).children[0].ID),e.get(t)},parseDeformers:function(){var e={},t={};if("Deformer"in b.Objects){var i=b.Objects.Deformer;for(var n in i){var r=i[n],o=w.get(parseInt(n));if("Skin"===r.attrType){var a=this.parseSkeleton(o,i);a.ID=n,o.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),a.geometryID=o.parents[0].ID,e[n]=a}else if("BlendShape"===r.attrType){var s={id:n};s.rawTargets=this.parseMorphTargets(o,i),s.id=n,o.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[n]=s}}}return{skeletons:e,morphTargets:t}},parseSkeleton:function(e,t){var i=[];return e.children.forEach(function(e){var n=t[e.ID];if("Cluster"===n.attrType){var r={ID:e.ID,indices:[],weights:[],transformLink:(new THREE.Matrix4).fromArray(n.TransformLink.a)};"Indexes"in n&&(r.indices=n.Indexes.a,r.weights=n.Weights.a),i.push(r)}}),{rawBones:i,bones:[]}},parseMorphTargets:function(e,t){for(var i=[],n=0;n<e.children.length;n++){var r=e.children[n],o=t[r.ID],a={name:o.attrName,initialWeight:o.DeformPercent,id:o.id,fullWeights:o.FullWeights.a};if("BlendShapeChannel"!==o.attrType)return;a.geoID=w.get(parseInt(r.ID)).children.filter(function(e){return void 0===e.relationship})[0].ID,i.push(a)}return i},parseScene:function(e,t,i){x=new THREE.Group;var r=this.parseModels(e.skeletons,t,i),o=b.Objects.Model,a=this;r.forEach(function(e){var t=o[e.ID];a.setLookAtProperties(e,t);var i=w.get(e.ID).parents;i.forEach(function(t){var i=r.get(t.ID);void 0!==i&&i.add(e)}),null===e.parent&&x.add(e)}),this.bindSkeleton(e.skeletons,t,r),this.createAmbientLight(),this.setupMorphMaterials(),x.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=d(e.userData.transformData);e.applyMatrix(t)}});var s=(new n).parse();1===x.children.length&&x.children[0].isGroup&&(x.children[0].animations=s,x=x.children[0]),x.animations=s},parseModels:function(e,t,i){var n=new Map,r=b.Objects.Model;for(var o in r){var a=parseInt(o),s=r[o],l=w.get(a),u=this.buildSkeleton(l,e,a,s.attrName);if(!u){switch(s.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,i);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new THREE.Bone;break;case"Null":default:u=new THREE.Group}u.name=THREE.PropertyBinding.sanitizeNodeName(s.attrName),u.ID=a}this.getTransformData(u,s),n.set(a,u)}return n},buildSkeleton:function(e,t,i,n){var r=null;return e.parents.forEach(function(e){for(var o in t){var a=t[o];a.rawBones.forEach(function(t,o){if(t.ID===e.ID){var s=r;r=new THREE.Bone,r.matrixWorld.copy(t.transformLink),r.name=THREE.PropertyBinding.sanitizeNodeName(n),r.ID=i,a.bones[o]=r,null!==s&&r.add(s)}})}}),r},createCamera:function(e){var t,i;if(e.children.forEach(function(e){var t=b.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)}),void 0===i)t=new THREE.Object3D;else{var n=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(n=1);var r=1;void 0!==i.NearPlane&&(r=i.NearPlane.value/1e3);var o=1e3;void 0!==i.FarPlane&&(o=i.FarPlane.value/1e3);var a=window.innerWidth,s=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(a=i.AspectWidth.value,s=i.AspectHeight.value);var l=a/s,u=45;void 0!==i.FieldOfView&&(u=i.FieldOfView.value);var c=i.FocalLength?i.FocalLength.value:null;switch(n){case 0:t=new THREE.PerspectiveCamera(u,l,r,o),null!==c&&t.setFocalLength(c);break;case 1:t=new THREE.OrthographicCamera(-a/2,a/2,s/2,-s/2,r,o);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+n+"."),t=new THREE.Object3D}}return t},createLight:function(e){var t,i;if(e.children.forEach(function(e){var t=b.Objects.NodeAttribute[e.ID];void 0!==t&&(i=t)}),void 0===i)t=new THREE.Object3D;else{var n;n=void 0===i.LightType?0:i.LightType.value;var r=16777215;void 0!==i.Color&&(r=(new THREE.Color).fromArray(i.Color.value));var o=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(o=0);var a=0;void 0!==i.FarAttenuationEnd&&(a=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);var s=1;switch(n){case 0:t=new THREE.PointLight(r,o,a,s);break;case 1:t=new THREE.DirectionalLight(r,o);break;case 2:var l=Math.PI/3;void 0!==i.InnerAngle&&(l=THREE.Math.degToRad(i.InnerAngle.value));var u=0;void 0!==i.OuterAngle&&(u=THREE.Math.degToRad(i.OuterAngle.value),u=Math.max(u,1)),t=new THREE.SpotLight(r,o,a,l,u,s);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a THREE.PointLight."),t=new THREE.PointLight(r,o)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(t.castShadow=!0)}return t},createMesh:function(e,t,i){var n,r=null,o=null,a=[];return e.children.forEach(function(e){t.has(e.ID)&&(r=t.get(e.ID)),i.has(e.ID)&&a.push(i.get(e.ID))}),a.length>1?o=a:a.length>0?o=a[0]:(o=new THREE.MeshPhongMaterial({color:13421772}),a.push(o)),"color"in r.attributes&&a.forEach(function(e){e.vertexColors=THREE.VertexColors}),r.FBX_Deformer?(a.forEach(function(e){e.skinning=!0}),n=new THREE.SkinnedMesh(r,o)):n=new THREE.Mesh(r,o),n},createCurve:function(e,t){var i=e.children.reduce(function(e,i){return t.has(i.ID)&&(e=t.get(i.ID)),e
},null),n=new THREE.LineBasicMaterial({color:3342591,linewidth:1});return new THREE.Line(i,n)},getTransformData:function(e,t){var i={};"InheritType"in t&&(i.inheritType=parseInt(t.InheritType.value)),"RotationOrder"in t?i.eulerOrder=f(t.RotationOrder.value):i.eulerOrder="ZYX","Lcl_Translation"in t&&(i.translation=t.Lcl_Translation.value),"PreRotation"in t&&(i.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(i.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(i.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(i.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(i.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(i.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(i.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(i.rotationPivot=t.RotationPivot.value),e.userData.transformData=i},setLookAtProperties:function(e,t){if("LookAtProperty"in t){var i=w.get(e.ID).children;i.forEach(function(t){if("LookAtProperty"===t.relationship){var i=b.Objects.Model[t.ID];if("Lcl_Translation"in i){var n=i.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(n),x.add(e.target)):e.lookAt((new THREE.Vector3).fromArray(n))}}})}},bindSkeleton:function(e,t,i){var n=this.parsePoseNodes();for(var r in e){var o=e[r],a=w.get(parseInt(o.ID)).parents;a.forEach(function(e){if(t.has(e.ID)){var r=e.ID,a=w.get(r);a.parents.forEach(function(e){if(i.has(e.ID)){var t=i.get(e.ID);t.bind(new THREE.Skeleton(o.bones),n[e.ID])}})}})}},parsePoseNodes:function(){var e={};if("Pose"in b.Objects){var t=b.Objects.Pose;for(var i in t)if("BindPose"===t[i].attrType){var n=t[i].PoseNode;Array.isArray(n)?n.forEach(function(t){e[t.Node]=(new THREE.Matrix4).fromArray(t.Matrix.a)}):e[n.Node]=(new THREE.Matrix4).fromArray(n.Matrix.a)}}return e},createAmbientLight:function(){if("GlobalSettings"in b&&"AmbientColor"in b.GlobalSettings){var e=b.GlobalSettings.AmbientColor.value,t=e[0],i=e[1],n=e[2];if(0!==t||0!==i||0!==n){var r=new THREE.Color(t,i,n);x.add(new THREE.AmbientLight(r,1))}}},setupMorphMaterials:function(){var e=this;x.traverse(function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach(function(i,n){e.setupMorphMaterial(t,i,n)}):e.setupMorphMaterial(t,t.material))})},setupMorphMaterial:function(e,t,i){var n=e.uuid,r=t.uuid,o=!1;if(x.traverse(function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach(function(t){t.uuid===r&&e.uuid!==n&&(o=!0)}):e.material.uuid===r&&e.uuid!==n&&(o=!0))}),o===!0){var a=t.clone();a.morphTargets=!0,void 0===i?e.material=a:e.material[i]=a}else t.morphTargets=!0}},i.prototype={constructor:i,parse:function(e){var t=new Map;if("Geometry"in b.Objects){var i=b.Objects.Geometry;for(var n in i){var r=w.get(parseInt(n)),o=this.parseGeometry(r,i[n],e);t.set(parseInt(n),o)}}return t},parseGeometry:function(e,t,i){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,i);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(e,t,i){var n=i.skeletons,r=i.morphTargets,o=e.parents.map(function(e){return b.Objects.Model[e.ID]});if(0!==o.length){var a=e.children.reduce(function(e,t){return void 0!==n[t.ID]&&(e=n[t.ID]),e},null),s=e.children.reduce(function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e},null),l=o[0],u={};"RotationOrder"in l&&(u.eulerOrder=f(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var c=d(u);return this.genGeometry(t,a,s,c)}},genGeometry:function(e,t,i,n){var r=new THREE.BufferGeometry;e.attrName&&(r.name=e.attrName);var o=this.parseGeoNode(e,t),a=this.genBuffers(o),s=new THREE.Float32BufferAttribute(a.vertex,3);if(n.applyToBufferAttribute(s),r.addAttribute("position",s),a.colors.length>0&&r.addAttribute("color",new THREE.Float32BufferAttribute(a.colors,3)),t&&(r.addAttribute("skinIndex",new THREE.Uint16BufferAttribute(a.weightsIndices,4)),r.addAttribute("skinWeight",new THREE.Float32BufferAttribute(a.vertexWeights,4)),r.FBX_Deformer=t),a.normal.length>0){var l=new THREE.Float32BufferAttribute(a.normal,3),u=(new THREE.Matrix3).getNormalMatrix(n);u.applyToBufferAttribute(l),r.addAttribute("normal",l)}if(a.uvs.forEach(function(e,t){var i="uv"+(t+1).toString();0===t&&(i="uv"),r.addAttribute(i,new THREE.Float32BufferAttribute(a.uvs[t],2))}),o.material&&"AllSame"!==o.material.mappingType){var c=a.materialIndex[0],h=0;if(a.materialIndex.forEach(function(e,t){e!==c&&(r.addGroup(h,t-h,c),c=e,h=t)}),r.groups.length>0){var p=r.groups[r.groups.length-1],d=p.start+p.count;d!==a.materialIndex.length&&r.addGroup(d,a.materialIndex.length-d,c)}0===r.groups.length&&r.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(r,e,i,n),r},parseGeoNode:function(e,t){var i={};if(i.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],i.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(i.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(i.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(i.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){i.uv=[];for(var n=0;e.LayerElementUV[n];)i.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return i.weightTable={},null!==t&&(i.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(n,r){void 0===i.weightTable[n]&&(i.weightTable[n]=[]),i.weightTable[n].push({id:t,weight:e.weights[r]})})})),i},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},i=0,n=0,r=!1,o=[],a=[],s=[],l=[],u=[],c=[],h=this;return e.vertexIndices.forEach(function(d,f){var m=!1;0>d&&(d=-1^d,m=!0);var g=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var y=p(f,i,d,e.color);s.push(y[0],y[1],y[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(e){v.push(e.weight),g.push(e.id)}),v.length>4){r||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),r=!0);var _=[0,0,0,0],b=[0,0,0,0];v.forEach(function(e,t){var i=e,n=g[t];b.forEach(function(e,t,r){if(i>e){r[t]=i,i=e;var o=_[t];_[t]=n,n=o}})}),g=_,v=b}for(;v.length<4;)v.push(0),g.push(0);for(var w=0;4>w;++w)u.push(v[w]),c.push(g[w])}if(e.normal){var y=p(f,i,d,e.normal);a.push(y[0],y[1],y[2])}if(e.material&&"AllSame"!==e.material.mappingType)var x=p(f,i,d,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var n=p(f,i,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])}),n++,m&&(h.genFace(t,e,o,x,a,s,l,u,c,n),i++,n=0,o=[],a=[],s=[],l=[],u=[],c=[])}),t},genFace:function(e,t,i,n,r,o,a,s,l,u){for(var c=2;u>c;c++)e.vertex.push(t.vertexPositions[i[0]]),e.vertex.push(t.vertexPositions[i[1]]),e.vertex.push(t.vertexPositions[i[2]]),e.vertex.push(t.vertexPositions[i[3*(c-1)]]),e.vertex.push(t.vertexPositions[i[3*(c-1)+1]]),e.vertex.push(t.vertexPositions[i[3*(c-1)+2]]),e.vertex.push(t.vertexPositions[i[3*c]]),e.vertex.push(t.vertexPositions[i[3*c+1]]),e.vertex.push(t.vertexPositions[i[3*c+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(c-1)]),e.vertexWeights.push(s[4*(c-1)+1]),e.vertexWeights.push(s[4*(c-1)+2]),e.vertexWeights.push(s[4*(c-1)+3]),e.vertexWeights.push(s[4*c]),e.vertexWeights.push(s[4*c+1]),e.vertexWeights.push(s[4*c+2]),e.vertexWeights.push(s[4*c+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(c-1)]),e.weightsIndices.push(l[4*(c-1)+1]),e.weightsIndices.push(l[4*(c-1)+2]),e.weightsIndices.push(l[4*(c-1)+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(c-1)]),e.colors.push(o[3*(c-1)+1]),e.colors.push(o[3*(c-1)+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(r[0]),e.normal.push(r[1]),e.normal.push(r[2]),e.normal.push(r[3*(c-1)]),e.normal.push(r[3*(c-1)+1]),e.normal.push(r[3*(c-1)+2]),e.normal.push(r[3*c]),e.normal.push(r[3*c+1]),e.normal.push(r[3*c+2])),t.uv&&t.uv.forEach(function(t,i){void 0===e.uvs[i]&&(e.uvs[i]=[]),e.uvs[i].push(a[i][0]),e.uvs[i].push(a[i][1]),e.uvs[i].push(a[i][2*(c-1)]),e.uvs[i].push(a[i][2*(c-1)+1]),e.uvs[i].push(a[i][2*c]),e.uvs[i].push(a[i][2*c+1])})},addMorphTargets:function(e,t,i,n){if(null!==i){e.morphAttributes.position=[];var r=this;i.rawTargets.forEach(function(i){var o=b.Objects.Geometry[i.geoID];void 0!==o&&r.genMorphGeometry(e,t,o,n,i.name)})}},genMorphGeometry:function(e,t,i,n,r){var o=new THREE.BufferGeometry;i.attrName&&(o.name=i.attrName);for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==t.Vertices?t.Vertices.a.slice():[],l=void 0!==i.Vertices?i.Vertices.a:[],u=void 0!==i.Indexes?i.Indexes.a:[],c=0;c<u.length;c++){var h=3*u[c];s[h]+=l[3*c],s[h+1]+=l[3*c+1],s[h+2]+=l[3*c+2]}var p={vertexIndices:a,vertexPositions:s},d=this.genBuffers(p),f=new THREE.Float32BufferAttribute(d.vertex,3);f.name=r||i.attrName,n.applyToBufferAttribute(f),e.morphAttributes.position.push(f)},parseNormals:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Normals.a,r=[];return"IndexToDirect"===i&&("NormalIndex"in e?r=e.NormalIndex.a:"NormalsIndex"in e&&(r=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:r,mappingType:t,referenceType:i}},parseUVs:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.UV.a,r=[];return"IndexToDirect"===i&&(r=e.UVIndex.a),{dataSize:2,buffer:n,indices:r,mappingType:t,referenceType:i}},parseVertexColors:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType,n=e.Colors.a,r=[];return"IndexToDirect"===i&&(r=e.ColorIndex.a),{dataSize:4,buffer:n,indices:r,mappingType:t,referenceType:i}},parseMaterialIndices:function(e){var t=e.MappingInformationType,i=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:i};for(var n=e.Materials.a,r=[],o=0;o<n.length;++o)r.push(o);return{dataSize:1,buffer:n,indices:r,mappingType:t,referenceType:i}},parseNurbsGeometry:function(e){if(void 0===THREE.NURBSCurve)return console.error("THREE.FBXLoader: The loader relies on THREE.NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new THREE.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new THREE.BufferGeometry;for(var i=t-1,n=e.KnotVector.a,r=[],o=e.Points.a,a=0,s=o.length;s>a;a+=4)r.push((new THREE.Vector4).fromArray(o,a));var l,u;if("Closed"===e.Form)r.push(r[0]);else if("Periodic"===e.Form){l=i,u=n.length-1-l;for(var a=0;i>a;++a)r.push(r[a])}var c=new THREE.NURBSCurve(i,n,r,l,u),h=c.getPoints(7*r.length),p=new Float32Array(3*h.length);h.forEach(function(e,t){e.toArray(p,3*t)});var d=new THREE.BufferGeometry;return d.addAttribute("position",new THREE.BufferAttribute(p,3)),d}},n.prototype={constructor:n,parse:function(){var e=[],t=this.parseClips();if(void 0!==t){for(var i in t){var n=t[i],r=this.addClip(n);e.push(r)}return e}},parseClips:function(){if(void 0!==b.Objects.AnimationCurve){var e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);var t=this.parseAnimationLayers(e),i=this.parseAnimStacks(t);return i}},parseAnimationCurveNodes:function(){var e=b.Objects.AnimationCurveNode,t=new Map;for(var i in e){var n=e[i];if(null!==n.attrName.match(/S|R|T|DeformPercent/)){var r={id:n.id,attr:n.attrName,curves:{}};t.set(r.id,r)}}return t},parseAnimationCurves:function(e){var t=b.Objects.AnimationCurve;for(var i in t){var n={id:t[i].id,times:t[i].KeyTime.a.map(h),values:t[i].KeyValueFloat.a},r=w.get(n.id);if(void 0!==r){var o=r.parents[0].ID,a=r.parents[0].relationship;a.match(/X/)?e.get(o).curves.x=n:a.match(/Y/)?e.get(o).curves.y=n:a.match(/Z/)?e.get(o).curves.z=n:a.match(/d|DeformPercent/)&&e.has(o)&&(e.get(o).curves.morph=n)}}},parseAnimationLayers:function(e){var t=b.Objects.AnimationLayer,i=new Map;for(var n in t){var r=[],o=w.get(parseInt(n));if(void 0!==o){var a=o.children;a.forEach(function(t,i){if(e.has(t.ID)){var n=e.get(t.ID);if(void 0!==n.curves.x||void 0!==n.curves.y||void 0!==n.curves.z){if(void 0===r[i]){var o=w.get(t.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID;if(void 0!==o){var a=b.Objects.Model[o.toString()],s={modelName:THREE.PropertyBinding.sanitizeNodeName(a.attrName),ID:a.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};x.traverse(function(e){(e.ID=a.id)&&(s.transform=e.matrix,e.userData.transformData&&(s.eulerOrder=e.userData.transformData.eulerOrder))}),s.transform||(s.transform=new THREE.Matrix4),"PreRotation"in a&&(s.preRotation=a.PreRotation.value),"PostRotation"in a&&(s.postRotation=a.PostRotation.value),r[i]=s}}r[i]&&(r[i][n.attr]=n)}else if(void 0!==n.curves.morph){if(void 0===r[i]){var l=w.get(t.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID,u=w.get(l).parents[0].ID,c=w.get(u).parents[0].ID,o=w.get(c).parents[0].ID,a=b.Objects.Model[o],s={modelName:THREE.PropertyBinding.sanitizeNodeName(a.attrName),morphName:b.Objects.Deformer[l].attrName};r[i]=s}r[i][n.attr]=n}}}),i.set(parseInt(n),r)}}return i},parseAnimStacks:function(e){var t=b.Objects.AnimationStack,i={};for(var n in t){var r=w.get(parseInt(n)).children;r.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var o=e.get(r[0].ID);i[n]={name:t[n].attrName,layer:o}}return i},addClip:function(e){var t=[],i=this;return e.layer.forEach(function(e){t=t.concat(i.generateTracks(e))}),new THREE.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],i=new THREE.Vector3,n=new THREE.Quaternion,r=new THREE.Vector3;if(e.transform&&e.transform.decompose(i,n,r),i=i.toArray(),n=(new THREE.Euler).setFromQuaternion(n,e.eulerOrder).toArray(),r=r.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var o=this.generateVectorTrack(e.modelName,e.T.curves,i,"position");void 0!==o&&t.push(o)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var a=this.generateRotationTrack(e.modelName,e.R.curves,n,e.preRotation,e.postRotation,e.eulerOrder);void 0!==a&&t.push(a)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var s=this.generateVectorTrack(e.modelName,e.S.curves,r,"scale");void 0!==s&&t.push(s)}if(void 0!==e.DeformPercent){var l=this.generateMorphTrack(e);void 0!==l&&t.push(l)}return t},generateVectorTrack:function(e,t,i,n){var r=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(r,t,i);return new THREE.VectorKeyframeTrack(e+"."+n,r,o)},generateRotationTrack:function(e,t,i,n,r,o){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(THREE.Math.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(THREE.Math.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(THREE.Math.degToRad));var a=this.getTimesForAllAxes(t),s=this.getKeyframeTrackValues(a,t,i);void 0!==n&&(n=n.map(THREE.Math.degToRad),n.push(o),n=(new THREE.Euler).fromArray(n),n=(new THREE.Quaternion).setFromEuler(n)),void 0!==r&&(r=r.map(THREE.Math.degToRad),r.push(o),r=(new THREE.Euler).fromArray(r),r=(new THREE.Quaternion).setFromEuler(r).inverse());for(var l=new THREE.Quaternion,u=new THREE.Euler,c=[],h=0;h<s.length;h+=3)u.set(s[h],s[h+1],s[h+2],o),l.setFromEuler(u),void 0!==n&&l.premultiply(n),void 0!==r&&l.multiply(r),l.toArray(c,h/3*4);return new THREE.QuaternionKeyframeTrack(e+".quaternion",a,c)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map(function(e){return e/100}),n=x.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new THREE.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+n+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,i){return i.indexOf(e)==t})},getKeyframeTrackValues:function(e,t,i){var n=i,r=[],o=-1,a=-1,s=-1;return e.forEach(function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var i=t.x.values[o];r.push(i),n[0]=i}else r.push(n[0]);if(-1!==a){var l=t.y.values[a];r.push(l),n[1]=l}else r.push(n[1]);if(-1!==s){var u=t.z.values[s];r.push(u),n[2]=u}else r.push(n[2])}),r},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var i=e.values[t-1],n=e.values[t]-i,r=Math.abs(n);if(r>=180){for(var o=r/180,a=n/o,s=i+a,l=e.times[t-1],u=e.times[t]-l,c=u/o,h=l+c,p=[],d=[];h<e.times[t];)p.push(h),h+=c,d.push(s),s+=a;e.times=_(e.times,t,p),e.values=_(e.values,t,d)}}}},r.prototype={constructor:r,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new s,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,i=e.split(/[\r\n]+/);return i.forEach(function(e,n){var r=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!r&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,i[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var i=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),r={name:i},o=this.parseNodeAttr(n),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(i,r):i in a?("PoseNode"===i?a.PoseNode.push(r):void 0!==a[i].id&&(a[i]={},a[i][a[i].id]=a[i]),""!==o.id&&(a[i][o.id]=r)):"number"==typeof o.id?(a[i]={},a[i][o.id]=r):"Properties70"!==i&&("PoseNode"===i?a[i]=[r]:a[i]=r),"number"==typeof o.id&&(r.id=o.id),""!==o.name&&(r.attrName=o.name),""!==o.type&&(r.attrType=o.type),this.pushStack(r)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var i="",n="";return e.length>1&&(i=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:i,type:n}},parseNodeProperty:function(e,t,i){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),r=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===r&&(r=i.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode(),a=o.name;if("Properties70"===a)return void this.parseNodeSpecialProperty(e,n,r);if("C"===n){var s=r.split(",").slice(1),l=parseInt(s[0]),u=parseInt(s[1]),c=r.split(",").slice(3);c=c.map(function(e){return e.trim().replace(/^"/,"")}),n="connections",r=[l,u],v(r,c),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=r),n in o&&Array.isArray(o[n])?o[n].push(r):"a"!==n?o[n]=r:o.a=r,this.setCurrentProp(o,n),"a"===n&&","!==r.slice(-1)&&(o.a=m(r))},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=m(t.a))},parseNodeSpecialProperty:function(e,t,i){var n=i.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),r=n[0],o=n[1],a=n[2],s=n[3],l=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=m(l)}this.getPrevNode()[r]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),r)}},o.prototype={constructor:o,parse:function(e){var t=new a(e);t.skip(23);var i=t.getUint32();console.log("THREE.FBXLoader: FBX binary version: "+i);for(var n=new s;!this.endOfContent(t);){var r=this.parseNode(t,i);null!==r&&n.add(r.name,r)}return n},endOfContent:function(e){return e.size()%16===0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var i={},n=t>=7500?e.getUint64():e.getUint32(),r=t>=7500?e.getUint64():e.getUint32(),o=(t>=7500?e.getUint64():e.getUint32(),e.getUint8()),a=e.getString(o);if(0===n)return null;for(var s=[],l=0;r>l;l++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",c=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(i.singleProperty=1===r&&e.getOffset()===n?!0:!1;n>e.getOffset();){var p=this.parseNode(e,t);null!==p&&this.parseSubNode(a,i,p)}return i.propertyList=s,"number"==typeof u&&(i.id=u),""!==c&&(i.attrName=c),""!==h&&(i.attrType=h),""!==a&&(i.name=a),i},parseSubNode:function(e,t,i){if(i.singleProperty===!0){var n=i.propertyList[0];Array.isArray(n)?(t[i.name]=i,i.a=n):t[i.name]=n}else if("Connections"===e&&"C"===i.name){var r=[];i.propertyList.forEach(function(e,t){0!==t&&r.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(r)}else if("Properties70"===i.name){var o=Object.keys(i);o.forEach(function(e){t[e]=i[e]})}else if("Properties70"===e&&"P"===i.name){var a,s=i.propertyList[0],l=i.propertyList[1],u=i.propertyList[2],c=i.propertyList[3];0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),0===l.indexOf("Lcl ")&&(l=l.replace("Lcl ","Lcl_")),a="Color"===l||"ColorRGB"===l||"Vector"===l||"Vector3D"===l||0===l.indexOf("Lcl_")?[i.propertyList[4],i.propertyList[5],i.propertyList[6]]:i.propertyList[4],t[s]={type:l,type2:u,flag:c,value:a}}else void 0===t[i.name]?"number"==typeof i.id?(t[i.name]={},t[i.name][i.id]=i):t[i.name]=i:"PoseNode"===i.name?(Array.isArray(t[i.name])||(t[i.name]=[t[i.name]]),t[i.name].push(i)):void 0===t[i.name][i.id]&&(t[i.name][i.id]=i)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var i=e.getUint32();return e.getArrayBuffer(i);case"S":var i=e.getUint32();return e.getString(i);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),r=e.getUint32(),o=e.getUint32();if(0===r)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}"undefined"==typeof Zlib&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new Zlib.Inflate(new Uint8Array(e.getArrayBuffer(o))),l=new a(s.decompress().buffer);switch(t){case"b":case"c":return l.getBooleanArray(n);case"d":return l.getFloat64Array(n);case"f":return l.getFloat32Array(n);case"i":return l.getInt32Array(n);case"l":return l.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},a.prototype={constructor:a,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1===(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e},getInt64Array:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],i=0;e>i;i++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],i=0;e>i;i++)t[i]=this.getUint8();var n=t.indexOf(0);return n>=0&&(t=t.slice(0,n)),THREE.LoaderUtils.decodeText(new Uint8Array(t))}},s.prototype={constructor:s,add:function(e,t){this[e]=t}};var E=[],S=new THREE.Euler,T=new THREE.Vector3;return e}(),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.VConsole=t():e.VConsole=t()}(this,function(){return function(e){function t(n){if(i[n])return i[n].exports;var r=i[n]={exports:{},id:n,loaded:!1};return e[n].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),i(1);var r=i(2),o=n(r),a=i(18),s=n(a);o["default"].VConsolePlugin=s["default"],t["default"]=o["default"],e.exports=t["default"]},function(e,t){"use strict";if("undefined"==typeof Symbol){window.Symbol=function(){};var i="__symbol_iterator_key";window.Symbol.iterator=i,Array.prototype[i]=function(){var e=this,t=0;return{next:function(){return{done:e.length===t,value:e.length===t?void 0:e[t++]}}}}}},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=i(3),l=r(s),u=i(4),c=n(u),h=i(5),p=r(h);i(7);var d=i(11),f=r(d),m=i(12),g=r(m),v=i(13),y=r(v),_=i(14),b=r(_),w=i(15),x=r(w),E=i(16),S=r(E),T=i(24),C=r(T),M=i(26),P=r(M),I=i(30),L=r(I),R=i(37),A=r(R),O="#__vconsole",k=function(){function e(t){if(o(this,e),p["default"].one(O))return void console.debug("vConsole is already exists.");var i=this;if(this.version=l["default"].version,this.$dom=null,this.isInited=!1,this.option={defaultPlugins:["system","network","element","storage"]},this.activedTab="",this.tabList=[],this.pluginList={},this.switchPos={x:10,y:10,startX:0,startY:0,endX:0,endY:0},this.tool=c,this.$=p["default"],c.isObject(t))for(var n in t)this.option[n]=t[n];this._addBuiltInPlugins();var r=function(){i.isInited||(i._render(),i._mockTap(),i._bindEvent(),i._autoRun())};void 0!==document?"complete"==document.readyState?r():p["default"].bind(window,"load",r):!function(){var e=void 0,t=function i(){document&&"complete"==document.readyState?(e&&clearTimeout(e),r()):e=setTimeout(i,1)};e=setTimeout(t,1)}()}return a(e,[{key:"_addBuiltInPlugins",value:function(){this.addPlugin(new S["default"]("default","Log"));var e=this.option.defaultPlugins,t={system:{proto:C["default"],name:"System"},network:{proto:P["default"],name:"Network"},element:{proto:L["default"],name:"Element"},storage:{proto:A["default"],name:"Storage"}};if(e&&c.isArray(e))for(var i=0;i<e.length;i++){var n=t[e[i]];n?this.addPlugin(new n.proto(e[i],n.name)):console.debug("Unrecognized default plugin ID:",e[i])}}},{key:"_render",value:function(){if(!p["default"].one(O)){var e=document.createElement("div");e.innerHTML=f["default"],document.documentElement.insertAdjacentElement("beforeend",e.children[0])}this.$dom=p["default"].one(O);var t=p["default"].one(".vc-switch",this.$dom),i=1*c.getStorage("switch_x"),n=1*c.getStorage("switch_y");(i||n)&&(i+t.offsetWidth>document.documentElement.offsetWidth&&(i=document.documentElement.offsetWidth-t.offsetWidth),n+t.offsetHeight>document.documentElement.offsetHeight&&(n=document.documentElement.offsetHeight-t.offsetHeight),0>i&&(i=0),0>n&&(n=0),this.switchPos.x=i,this.switchPos.y=n,p["default"].one(".vc-switch").style.right=i+"px",p["default"].one(".vc-switch").style.bottom=n+"px");var r=window.devicePixelRatio||1,o=document.querySelector('[name="viewport"]');if(o&&o.content){var a=o.content.match(/initial\-scale\=\d+(\.\d+)?/),s=a?parseFloat(a[0].split("=")[1]):1;1>s&&(this.$dom.style.fontSize=13*r+"px")}p["default"].one(".vc-mask",this.$dom).style.display="none"}},{key:"_mockTap",value:function(){var e=700,t=10,i=void 0,n=void 0,r=void 0,o=!1,a=null;this.$dom.addEventListener("touchstart",function(e){if(void 0===i){var t=e.targetTouches[0];n=t.pageX,r=t.pageY,i=e.timeStamp,a=e.target.nodeType===Node.TEXT_NODE?e.target.parentNode:e.target}},!1),this.$dom.addEventListener("touchmove",function(e){var i=e.changedTouches[0];(Math.abs(i.pageX-n)>t||Math.abs(i.pageY-r)>t)&&(o=!0)}),this.$dom.addEventListener("touchend",function(t){if(o===!1&&t.timeStamp-i<e&&null!=a){var n=a.tagName.toLowerCase(),r=!1;switch(n){case"textarea":r=!0;break;case"input":switch(a.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":r=!1;break;default:r=!a.disabled&&!a.readOnly}}r?a.focus():t.preventDefault();var s=t.changedTouches[0],l=document.createEvent("MouseEvents");l.initMouseEvent("click",!0,!0,window,1,s.screenX,s.screenY,s.clientX,s.clientY,!1,!1,!1,!1,0,null),l.forwardedTouchEvent=!0,l.initEvent("click",!0,!0),a.dispatchEvent(l)}i=void 0,o=!1,a=null},!1)}},{key:"_bindEvent",value:function(){var e=this,t=p["default"].one(".vc-switch",e.$dom);p["default"].bind(t,"touchstart",function(t){e.switchPos.startX=t.touches[0].pageX,e.switchPos.startY=t.touches[0].pageY}),p["default"].bind(t,"touchend",function(t){e.switchPos.x=e.switchPos.endX,e.switchPos.y=e.switchPos.endY,e.switchPos.startX=0,e.switchPos.startY=0,e.switchPos.endX=0,e.switchPos.endY=0,c.setStorage("switch_x",e.switchPos.x),c.setStorage("switch_y",e.switchPos.y)}),p["default"].bind(t,"touchmove",function(i){if(i.touches.length>0){var n=i.touches[0].pageX-e.switchPos.startX,r=i.touches[0].pageY-e.switchPos.startY,o=e.switchPos.x-n,a=e.switchPos.y-r;o+t.offsetWidth>document.documentElement.offsetWidth&&(o=document.documentElement.offsetWidth-t.offsetWidth),a+t.offsetHeight>document.documentElement.offsetHeight&&(a=document.documentElement.offsetHeight-t.offsetHeight),0>o&&(o=0),0>a&&(a=0),t.style.right=o+"px",t.style.bottom=a+"px",e.switchPos.endX=o,e.switchPos.endY=a,i.preventDefault()}}),p["default"].bind(p["default"].one(".vc-switch",e.$dom),"click",function(){e.show()}),p["default"].bind(p["default"].one(".vc-hide",e.$dom),"click",function(){e.hide()}),p["default"].bind(p["default"].one(".vc-mask",e.$dom),"click",function(t){return t.target!=p["default"].one(".vc-mask")?!1:void e.hide()}),p["default"].delegate(p["default"].one(".vc-tabbar",e.$dom),"click",".vc-tab",function(t){var i=this.dataset.tab;
i!=e.activedTab&&e.showTab(i)}),p["default"].bind(p["default"].one(".vc-panel",e.$dom),"transitionend webkitTransitionEnd oTransitionEnd otransitionend",function(t){return t.target!=p["default"].one(".vc-panel")?!1:void(p["default"].hasClass(e.$dom,"vc-toggle")||(t.target.style.display="none"))});var i=p["default"].one(".vc-content",e.$dom),n=!1;p["default"].bind(i,"touchstart",function(e){var t=i.scrollTop,r=i.scrollHeight,o=t+i.offsetHeight;0===t?(i.scrollTop=1,0===i.scrollTop&&(p["default"].hasClass(e.target,"vc-cmd-input")||(n=!0))):o===r&&(i.scrollTop=t-1,i.scrollTop===t&&(p["default"].hasClass(e.target,"vc-cmd-input")||(n=!0)))}),p["default"].bind(i,"touchmove",function(e){n&&e.preventDefault()}),p["default"].bind(i,"touchend",function(e){n=!1})}},{key:"_autoRun",value:function(){this.isInited=!0;for(var e in this.pluginList)this._initPlugin(this.pluginList[e]);this.tabList.length>0&&this.showTab(this.tabList[0]),this.triggerEvent("ready")}},{key:"triggerEvent",value:function(e,t){e="on"+e.charAt(0).toUpperCase()+e.slice(1),c.isFunction(this.option[e])&&this.option[e].apply(this,t)}},{key:"_initPlugin",value:function(e){var t=this;e.vConsole=this,e.trigger("init"),e.trigger("renderTab",function(i){t.tabList.push(e.id);var n=p["default"].render(g["default"],{id:e.id,name:e.name});p["default"].one(".vc-tabbar",t.$dom).insertAdjacentElement("beforeend",n);var r=p["default"].render(y["default"],{id:e.id});i&&(c.isString(i)?r.innerHTML+=i:c.isFunction(i.appendTo)?i.appendTo(r):c.isElement(i)&&r.insertAdjacentElement("beforeend",i)),p["default"].one(".vc-content",t.$dom).insertAdjacentElement("beforeend",r)}),e.trigger("addTopBar",function(i){if(i)for(var n=p["default"].one(".vc-topbar",t.$dom),r=function(t){var r=i[t],o=p["default"].render(b["default"],{name:r.name||"Undefined",className:r.className||"",pluginID:e.id});if(r.data)for(var a in r.data)o.dataset[a]=r.data[a];c.isFunction(r.onClick)&&p["default"].bind(o,"click",function(t){var i=r.onClick.call(o);i===!1||(p["default"].removeClass(p["default"].all(".vc-topbar-"+e.id),"vc-actived"),p["default"].addClass(o,"vc-actived"))}),n.insertAdjacentElement("beforeend",o)},o=0;o<i.length;o++)r(o)}),e.trigger("addTool",function(i){if(i)for(var n=p["default"].one(".vc-tool-last",t.$dom),r=function(t){var r=i[t],o=p["default"].render(x["default"],{name:r.name||"Undefined",pluginID:e.id});1==r.global&&p["default"].addClass(o,"vc-global-tool"),c.isFunction(r.onClick)&&p["default"].bind(o,"click",function(e){r.onClick.call(o)}),n.parentNode.insertBefore(o,n)},o=0;o<i.length;o++)r(o)}),e.isReady=!0,e.trigger("ready")}},{key:"_triggerPluginsEvent",value:function(e){for(var t in this.pluginList)this.pluginList[t].isReady&&this.pluginList[t].trigger(e)}},{key:"_triggerPluginEvent",value:function(e,t){var i=this.pluginList[e];i&&i.isReady&&i.trigger(t)}},{key:"addPlugin",value:function(e){return void 0!==this.pluginList[e.id]?(console.debug("Plugin "+e.id+" has already been added."),!1):(this.pluginList[e.id]=e,this.isInited&&(this._initPlugin(e),1==this.tabList.length&&this.showTab(this.tabList[0])),!0)}},{key:"removePlugin",value:function(e){e=(e+"").toLowerCase();var t=this.pluginList[e];if(void 0===t)return console.debug("Plugin "+e+" does not exist."),!1;if(t.trigger("remove"),this.isInited){var i=p["default"].one("#__vc_tab_"+e);i&&i.parentNode.removeChild(i);for(var n=p["default"].all(".vc-topbar-"+e,this.$dom),r=0;r<n.length;r++)n[r].parentNode.removeChild(n[r]);var o=p["default"].one("#__vc_log_"+e);o&&o.parentNode.removeChild(o);for(var a=p["default"].all(".vc-tool-"+e,this.$dom),s=0;s<a.length;s++)a[s].parentNode.removeChild(a[s])}var l=this.tabList.indexOf(e);l>-1&&this.tabList.splice(l,1);try{delete this.pluginList[e]}catch(u){this.pluginList[e]=void 0}return this.activedTab==e&&this.tabList.length>0&&this.showTab(this.tabList[0]),!0}},{key:"show",value:function(){if(this.isInited){var e=this,t=p["default"].one(".vc-panel",this.$dom);t.style.display="block",setTimeout(function(){p["default"].addClass(e.$dom,"vc-toggle"),e._triggerPluginsEvent("showConsole");var t=p["default"].one(".vc-mask",e.$dom);t.style.display="block"},10)}}},{key:"hide",value:function(){if(this.isInited){p["default"].removeClass(this.$dom,"vc-toggle"),this._triggerPluginsEvent("hideConsole");var e=p["default"].one(".vc-mask",this.$dom),t=p["default"].one(".vc-panel",this.$dom);p["default"].bind(e,"transitionend",function(i){e.style.display="none",t.style.display="none"})}}},{key:"showSwitch",value:function(){if(this.isInited){var e=p["default"].one(".vc-switch",this.$dom);e.style.display="block"}}},{key:"hideSwitch",value:function(){if(this.isInited){var e=p["default"].one(".vc-switch",this.$dom);e.style.display="none"}}},{key:"showTab",value:function(e){if(this.isInited){var t=p["default"].one("#__vc_log_"+e);p["default"].removeClass(p["default"].all(".vc-tab",this.$dom),"vc-actived"),p["default"].addClass(p["default"].one("#__vc_tab_"+e),"vc-actived"),p["default"].removeClass(p["default"].all(".vc-logbox",this.$dom),"vc-actived"),p["default"].addClass(t,"vc-actived");var i=p["default"].all(".vc-topbar-"+e,this.$dom);p["default"].removeClass(p["default"].all(".vc-toptab",this.$dom),"vc-toggle"),p["default"].addClass(i,"vc-toggle"),i.length>0?p["default"].addClass(p["default"].one(".vc-content",this.$dom),"vc-has-topbar"):p["default"].removeClass(p["default"].one(".vc-content",this.$dom),"vc-has-topbar"),p["default"].removeClass(p["default"].all(".vc-tool",this.$dom),"vc-toggle"),p["default"].addClass(p["default"].all(".vc-tool-"+e,this.$dom),"vc-toggle"),this.activedTab&&this._triggerPluginEvent(this.activedTab,"hide"),this.activedTab=e,this._triggerPluginEvent(this.activedTab,"show")}}},{key:"setOption",value:function(e,t){if(c.isString(e))this.option[e]=t,this._triggerPluginsEvent("updateOption");else if(c.isObject(e)){for(var i in e)this.option[i]=e[i];this._triggerPluginsEvent("updateOption")}else console.debug("The first parameter of vConsole.setOption() must be a string or an object.")}},{key:"destroy",value:function(){if(this.isInited){for(var e=Object.keys(this.pluginList),t=e.length-1;t>=0;t--)this.removePlugin(e[t]);this.$dom.parentNode.removeChild(this.$dom)}}}]),e}();t["default"]=k,e.exports=t["default"]},function(e,t){e.exports={name:"vconsole",version:"3.2.0",description:"A lightweight, extendable front-end developer tool for mobile web page.",homepage:"https://github.com/Tencent/vConsole",main:"dist/vconsole.min.js",scripts:{test:"mocha",dist:"webpack"},keywords:["console","debug","mobile"],repository:{type:"git",url:"git+https://github.com/Tencent/vConsole.git"},dependencies:{},devDependencies:{"babel-core":"^6.7.7","babel-loader":"^6.2.4","babel-plugin-add-module-exports":"^0.1.4","babel-preset-es2015":"^6.6.0","babel-preset-stage-3":"^6.5.0",chai:"^3.5.0","css-loader":"^0.23.1","extract-text-webpack-plugin":"^1.0.1","html-loader":"^0.4.3",jsdom:"^9.2.1","json-loader":"^0.5.4",less:"^2.5.3","less-loader":"^2.2.3",mocha:"^2.5.3","style-loader":"^0.13.1",webpack:"~1.12.11"},author:"Tencent",license:"MIT"}},function(e,t){"use strict";function i(e){var t=e>0?new Date(e):new Date,i=t.getDate()<10?"0"+t.getDate():t.getDate(),n=t.getMonth()<9?"0"+(t.getMonth()+1):t.getMonth()+1,r=t.getFullYear(),o=t.getHours()<10?"0"+t.getHours():t.getHours(),a=t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes(),s=t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds(),l=t.getMilliseconds()<10?"0"+t.getMilliseconds():t.getMilliseconds();return 100>l&&(l="0"+l),{time:+t,year:r,month:n,day:i,hour:o,minute:a,second:s,millisecond:l}}function n(e){return"[object Number]"==Object.prototype.toString.call(e)}function r(e){return"[object String]"==Object.prototype.toString.call(e)}function o(e){return"[object Array]"==Object.prototype.toString.call(e)}function a(e){return"[object Boolean]"==Object.prototype.toString.call(e)}function s(e){return"[object Undefined]"==Object.prototype.toString.call(e)}function l(e){return"[object Null]"==Object.prototype.toString.call(e)}function u(e){return"[object Symbol]"==Object.prototype.toString.call(e)}function c(e){return!("[object Object]"!=Object.prototype.toString.call(e)&&(n(e)||r(e)||a(e)||o(e)||l(e)||h(e)||s(e)||u(e)))}function h(e){return"[object Function]"==Object.prototype.toString.call(e)}function p(e){return"object"===("undefined"==typeof HTMLElement?"undefined":w(HTMLElement))?e instanceof HTMLElement:e&&"object"===("undefined"==typeof e?"undefined":w(e))&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName}function d(e){var t=Object.prototype.toString.call(e);return"[object global]"==t||"[object Window]"==t||"[object DOMWindow]"==t}function f(e){var t=Object.prototype.hasOwnProperty;if(!e||"object"!==("undefined"==typeof e?"undefined":w(e))||e.nodeType||d(e))return!1;try{if(e.constructor&&!t.call(e,"constructor")&&!t.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(i){return!1}var n=void 0;for(n in e);return void 0===n||t.call(e,n)}function m(e){return document.createElement("a").appendChild(document.createTextNode(e)).parentNode.innerHTML}function g(e){var t=arguments.length<=1||void 0===arguments[1]?"	":arguments[1],i=arguments.length<=2||void 0===arguments[2]?"CIRCULAR_DEPENDECY_OBJECT":arguments[2],n=[],r=JSON.stringify(e,function(e,t){if("object"===("undefined"==typeof t?"undefined":w(t))&&null!==t){if(~n.indexOf(t))return i;n.push(t)}return t},t);return n=null,r}function v(e){if(!c(e)&&!o(e))return[];var t=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],i=[];for(var n in e)t.indexOf(n)<0&&i.push(n);return i=i.sort()}function y(e){return Object.prototype.toString.call(e).replace("[object ","").replace("]","")}function _(e,t){window.localStorage&&(e="vConsole_"+e,localStorage.setItem(e,t))}function b(e){return window.localStorage?(e="vConsole_"+e,localStorage.getItem(e)):void 0}Object.defineProperty(t,"__esModule",{value:!0});var w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};t.getDate=i,t.isNumber=n,t.isString=r,t.isArray=o,t.isBoolean=a,t.isUndefined=s,t.isNull=l,t.isSymbol=u,t.isObject=c,t.isFunction=h,t.isElement=p,t.isWindow=d,t.isPlainObject=f,t.htmlEncode=m,t.JSONStringify=g,t.getObjAllKeys=v,t.getObjName=y,t.setStorage=_,t.getStorage=b},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(4),o=i(6),a=n(o),s={};s.one=function(e,t){return t?t.querySelector(e):document.querySelector(e)},s.all=function(e,t){var i=void 0,n=[];return i=t?t.querySelectorAll(e):document.querySelectorAll(e),i&&i.length>0&&(n=Array.prototype.slice.call(i)),n},s.addClass=function(e,t){if(e){(0,r.isArray)(e)||(e=[e]);for(var i=0;i<e.length;i++){var n=e[i].className||"",o=n.split(" ");o.indexOf(t)>-1||(o.push(t),e[i].className=o.join(" "))}}},s.removeClass=function(e,t){if(e){(0,r.isArray)(e)||(e=[e]);for(var i=0;i<e.length;i++){for(var n=e[i].className.split(" "),o=0;o<n.length;o++)n[o]==t&&(n[o]="");e[i].className=n.join(" ").trim()}}},s.hasClass=function(e,t){if(!e)return!1;for(var i=e.className.split(" "),n=0;n<i.length;n++)if(i[n]==t)return!0;return!1},s.bind=function(e,t,i,n){if(e){void 0===n&&(n=!1),(0,r.isArray)(e)||(e=[e]);for(var o=0;o<e.length;o++)e[o].addEventListener(t,i,n)}},s.delegate=function(e,t,i,n){e&&e.addEventListener(t,function(t){var r=s.all(i,e);if(r)e:for(var o=0;o<r.length;o++)for(var a=t.target;a;){if(a==r[o]){n.call(a,t);break e}if(a=a.parentNode,a==e)break}},!1)},s.render=a["default"],t["default"]=s,e.exports=t["default"]},function(e,t){"use strict";function i(e,t,i){var n=/\{\{([^\}]+)\}\}/g,r="",o="",a=0,s=[],l=function(e,t){""!==e&&(r+=t?e.match(/^ ?else/g)?"} "+e+" {\n":e.match(/\/(if|for|switch)/g)?"}\n":e.match(/^ ?if|for|switch/g)?e+" {\n":e.match(/^ ?(break|continue) ?$/g)?e+";\n":e.match(/^ ?(case|default)/g)?e+":\n":"arr.push("+e+");\n":'arr.push("'+e.replace(/"/g,'\\"')+'");\n')};for(window.__mito_data=t,window.__mito_code="",window.__mito_result="",e=e.replace(/(\{\{ ?switch(.+?)\}\})[\r\n\t ]+\{\{/g,"$1{{"),e=e.replace(/^[\r\n]/,"").replace(/\n/g,"\\\n").replace(/\r/g,"\\\r"),o="(function(){\n",r="var arr = [];\n";s=n.exec(e);)l(e.slice(a,s.index),!1),l(s[1],!0),a=s.index+s[0].length;l(e.substr(a,e.length-a),!1),r+='__mito_result = arr.join("");',r="with (__mito_data) {\n"+r+"\n}",o+=r,o+="})();";var u=document.getElementsByTagName("script"),c="";u.length>0&&(c=u[0].getAttribute("nonce")||"");var h=document.createElement("SCRIPT");h.innerHTML=o,h.setAttribute("nonce",c),document.documentElement.appendChild(h);var p=__mito_result;if(document.documentElement.removeChild(h),!i){var d=document.createElement("DIV");d.innerHTML=p,p=d.children[0]}return p}Object.defineProperty(t,"__esModule",{value:!0}),t["default"]=i,e.exports=t["default"]},function(e,t,i){var n=i(8);"string"==typeof n&&(n=[[e.id,n,""]]),i(10)(n,{}),n.locals&&(e.exports=n.locals)},function(e,t,i){t=e.exports=i(9)(),t.push([e.id,'#__vconsole{color:#000;font-size:13px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}#__vconsole .vc-max-height{max-height:19.23076923em}#__vconsole .vc-max-height-line{max-height:3.38461538em}#__vconsole .vc-min-height{min-height:3.07692308em}#__vconsole dd,#__vconsole dl,#__vconsole pre{margin:0}#__vconsole .vc-switch{display:block;position:fixed;right:.76923077em;bottom:.76923077em;color:#fff;background-color:#04be02;line-height:1;font-size:1.07692308em;padding:.61538462em 1.23076923em;z-index:10000;border-radius:.30769231em;box-shadow:0 0 .61538462em rgba(0,0,0,.4)}#__vconsole .vc-mask{top:0;background:transparent;z-index:10001;transition:background .3s;-webkit-tap-highlight-color:transparent;overflow-y:scroll}#__vconsole .vc-mask,#__vconsole .vc-panel{display:none;position:fixed;left:0;right:0;bottom:0}#__vconsole .vc-panel{min-height:85%;z-index:10002;background-color:#efeff4;-webkit-transition:-webkit-transform .3s;transition:-webkit-transform .3s;transition:transform .3s;transition:transform .3s,-webkit-transform .3s;-webkit-transform:translateY(100%);transform:translateY(100%)}#__vconsole .vc-tabbar{border-bottom:1px solid #d9d9d9;overflow-x:auto;height:3em;width:auto;white-space:nowrap}#__vconsole .vc-tabbar .vc-tab{display:inline-block;line-height:3em;padding:0 1.15384615em;border-right:1px solid #d9d9d9;text-decoration:none;color:#000;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}#__vconsole .vc-tabbar .vc-tab:active{background-color:rgba(0,0,0,.15)}#__vconsole .vc-tabbar .vc-tab.vc-actived{background-color:#fff}#__vconsole .vc-content{background-color:#fff;overflow-x:hidden;overflow-y:auto;position:absolute;top:3.07692308em;left:0;right:0;bottom:3.07692308em;-webkit-overflow-scrolling:touch}#__vconsole .vc-content.vc-has-topbar{top:5.46153846em}#__vconsole .vc-topbar{background-color:#fbf9fe;display:flex;display:-webkit-box;flex-direction:row;flex-wrap:wrap;-webkit-box-direction:row;-webkit-flex-wrap:wrap;width:100%}#__vconsole .vc-topbar .vc-toptab{display:none;flex:1;-webkit-box-flex:1;line-height:2.30769231em;padding:0 1.15384615em;border-bottom:1px solid #d9d9d9;text-decoration:none;text-align:center;color:#000;-webkit-tap-highlight-color:transparent;-webkit-touch-callout:none}#__vconsole .vc-topbar .vc-toptab.vc-toggle{display:block}#__vconsole .vc-topbar .vc-toptab:active{background-color:rgba(0,0,0,.15)}#__vconsole .vc-topbar .vc-toptab.vc-actived{border-bottom:1px solid #3e82f7}#__vconsole .vc-logbox{display:none;position:relative;min-height:100%}#__vconsole .vc-logbox i{font-style:normal}#__vconsole .vc-logbox .vc-log{padding-bottom:3em;-webkit-tap-highlight-color:transparent}#__vconsole .vc-logbox .vc-log:empty:before{content:"Empty";color:#999;position:absolute;top:45%;left:0;right:0;bottom:0;font-size:1.15384615em;text-align:center}#__vconsole .vc-logbox .vc-item{margin:0;padding:.46153846em .61538462em;overflow:hidden;line-height:1.3;border-bottom:1px solid #eee;word-break:break-word}#__vconsole .vc-logbox .vc-item-info{color:#6a5acd}#__vconsole .vc-logbox .vc-item-debug{color:#daa520}#__vconsole .vc-logbox .vc-item-warn{color:orange;border-color:#ffb930;background-color:#fffacd}#__vconsole .vc-logbox .vc-item-error{color:#dc143c;border-color:#f4a0ab;background-color:#ffe4e1}#__vconsole .vc-logbox .vc-log.vc-log-partly .vc-item{display:none}#__vconsole .vc-logbox .vc-log.vc-log-partly-error .vc-item-error,#__vconsole .vc-logbox .vc-log.vc-log-partly-info .vc-item-info,#__vconsole .vc-logbox .vc-log.vc-log-partly-log .vc-item-log,#__vconsole .vc-logbox .vc-log.vc-log-partly-warn .vc-item-warn{display:block}#__vconsole .vc-logbox .vc-item .vc-item-content{margin-right:4.61538462em;display:block}#__vconsole .vc-logbox .vc-item .vc-item-meta{color:#888;float:right;width:4.61538462em;text-align:right}#__vconsole .vc-logbox .vc-item.vc-item-nometa .vc-item-content{margin-right:0}#__vconsole .vc-logbox .vc-item.vc-item-nometa .vc-item-meta{display:none}#__vconsole .vc-logbox .vc-item .vc-item-code{display:block;white-space:pre-wrap;overflow:auto;position:relative}#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-input,#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output{padding-left:.92307692em}#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-input:before,#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output:before{content:"\\203A";position:absolute;top:-.23076923em;left:0;font-size:1.23076923em;color:#6a5acd}#__vconsole .vc-logbox .vc-item .vc-item-code.vc-item-code-output:before{content:"\\2039"}#__vconsole .vc-logbox .vc-item .vc-fold{display:block;overflow:auto;-webkit-overflow-scrolling:touch}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer{display:block;font-style:italic;padding-left:.76923077em;position:relative}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer:active{background-color:#e6e6e6}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer:before{content:"";position:absolute;top:.30769231em;left:.15384615em;width:0;height:0;border:.30769231em solid transparent;border-left-color:#000}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer.vc-toggle:before{top:.46153846em;left:0;border-top-color:#000;border-left-color:transparent}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner{display:none;margin-left:.76923077em}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner.vc-toggle{display:block}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-inner .vc-code-key{margin-left:.76923077em}#__vconsole .vc-logbox .vc-item .vc-fold .vc-fold-outer .vc-code-key{margin-left:0}#__vconsole .vc-logbox .vc-code-key{color:#905}#__vconsole .vc-logbox .vc-code-private-key{color:#d391b5}#__vconsole .vc-logbox .vc-code-function{color:#905;font-style:italic}#__vconsole .vc-logbox .vc-code-boolean,#__vconsole .vc-logbox .vc-code-number{color:#0086b3}#__vconsole .vc-logbox .vc-code-string{color:#183691}#__vconsole .vc-logbox .vc-code-null,#__vconsole .vc-logbox .vc-code-undefined{color:#666}#__vconsole .vc-logbox .vc-cmd{position:absolute;height:3.07692308em;left:0;right:0;bottom:0;border-top:1px solid #d9d9d9;display:block!important}#__vconsole .vc-logbox .vc-cmd .vc-cmd-input-wrap{display:block;height:2.15384615em;margin-right:3.07692308em;padding:.46153846em .61538462em}#__vconsole .vc-logbox .vc-cmd .vc-cmd-input{width:100%;border:none;resize:none;outline:none;padding:0;font-size:.92307692em}#__vconsole .vc-logbox .vc-cmd .vc-cmd-input::-webkit-input-placeholder{line-height:2.15384615em}#__vconsole .vc-logbox .vc-cmd .vc-cmd-btn{position:absolute;top:0;right:0;bottom:0;width:3.07692308em;border:none;background-color:#efeff4;outline:none;-webkit-touch-callout:none;font-size:1em}#__vconsole .vc-logbox .vc-cmd .vc-cmd-btn:active{background-color:rgba(0,0,0,.15)}#__vconsole .vc-logbox .vc-group .vc-group-preview{-webkit-touch-callout:none}#__vconsole .vc-logbox .vc-group .vc-group-preview:active{background-color:#e6e6e6}#__vconsole .vc-logbox .vc-group .vc-group-detail{display:none;padding:0 0 .76923077em 1.53846154em;border-bottom:1px solid #eee}#__vconsole .vc-logbox .vc-group.vc-actived .vc-group-detail{display:block;background-color:#fbf9fe}#__vconsole .vc-logbox .vc-group.vc-actived .vc-table-row{background-color:#fff}#__vconsole .vc-logbox .vc-group.vc-actived .vc-group-preview{background-color:#fbf9fe}#__vconsole .vc-logbox .vc-table .vc-table-row{display:flex;display:-webkit-flex;flex-direction:row;flex-wrap:wrap;-webkit-box-direction:row;-webkit-flex-wrap:wrap;overflow:hidden;border-bottom:1px solid #eee}#__vconsole .vc-logbox .vc-table .vc-table-row.vc-left-border{border-left:1px solid #eee}#__vconsole .vc-logbox .vc-table .vc-table-col{flex:1;-webkit-box-flex:1;padding:.23076923em .30769231em;border-left:1px solid #eee;overflow:auto;white-space:pre-wrap;word-break:break-word;-webkit-overflow-scrolling:touch}#__vconsole .vc-logbox .vc-table .vc-table-col:first-child{border:none}#__vconsole .vc-logbox .vc-table .vc-small .vc-table-col{padding:0 .30769231em;font-size:.92307692em}#__vconsole .vc-logbox .vc-table .vc-table-col-2{flex:2;-webkit-box-flex:2}#__vconsole .vc-logbox .vc-table .vc-table-col-3{flex:3;-webkit-box-flex:3}#__vconsole .vc-logbox .vc-table .vc-table-col-4{flex:4;-webkit-box-flex:4}#__vconsole .vc-logbox .vc-table .vc-table-col-5{flex:5;-webkit-box-flex:5}#__vconsole .vc-logbox .vc-table .vc-table-col-6{flex:6;-webkit-box-flex:6}#__vconsole .vc-logbox .vc-table .vc-table-row-error{border-color:#f4a0ab;background-color:#ffe4e1}#__vconsole .vc-logbox .vc-table .vc-table-row-error .vc-table-col{color:#dc143c;border-color:#f4a0ab}#__vconsole .vc-logbox .vc-table .vc-table-col-title{font-weight:700}#__vconsole .vc-logbox.vc-actived{display:block}#__vconsole .vc-toolbar{border-top:1px solid #d9d9d9;line-height:3em;position:absolute;left:0;right:0;bottom:0;display:flex;display:-webkit-box;flex-direction:row;-webkit-box-direction:row}#__vconsole .vc-toolbar .vc-tool{display:none;text-decoration:none;color:#000;width:50%;flex:1;-webkit-box-flex:1;text-align:center;position:relative;-webkit-touch-callout:none}#__vconsole .vc-toolbar .vc-tool.vc-global-tool,#__vconsole .vc-toolbar .vc-tool.vc-toggle{display:block}#__vconsole .vc-toolbar .vc-tool:active{background-color:rgba(0,0,0,.15)}#__vconsole .vc-toolbar .vc-tool:after{content:" ";position:absolute;top:.53846154em;bottom:.53846154em;right:0;border-left:1px solid #d9d9d9}#__vconsole .vc-toolbar .vc-tool-last:after{border:none}#__vconsole.vc-toggle .vc-switch{display:none}#__vconsole.vc-toggle .vc-mask{background:rgba(0,0,0,.6);display:block}#__vconsole.vc-toggle .vc-panel{-webkit-transform:translate(0);transform:translate(0)}',""])},function(e,t){"use strict";e.exports=function(){var e=[];return e.toString=function(){for(var e=[],t=0;t<this.length;t++){var i=this[t];i[2]?e.push("@media "+i[2]+"{"+i[1]+"}"):e.push(i[1])}return e.join("")},e.i=function(t,i){"string"==typeof t&&(t=[[null,t,""]]);for(var n={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(n[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&n[a[0]]||(i&&!a[2]?a[2]=i:i&&(a[2]="("+a[2]+") and ("+i+")"),e.push(a))}},e}},function(e,t,i){function n(e,t){for(var i=0;i<e.length;i++){var n=e[i],r=d[n.id];if(r){r.refs++;for(var o=0;o<r.parts.length;o++)r.parts[o](n.parts[o]);for(;o<n.parts.length;o++)r.parts.push(u(n.parts[o],t))}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(u(n.parts[o],t));d[n.id]={id:n.id,refs:1,parts:a}}}}function r(e){for(var t=[],i={},n=0;n<e.length;n++){var r=e[n],o=r[0],a=r[1],s=r[2],l=r[3],u={css:a,media:s,sourceMap:l};i[o]?i[o].parts.push(u):t.push(i[o]={id:o,parts:[u]})}return t}function o(e,t){var i=g(),n=_[_.length-1];if("top"===e.insertAt)n?n.nextSibling?i.insertBefore(t,n.nextSibling):i.appendChild(t):i.insertBefore(t,i.firstChild),_.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");i.appendChild(t)}}function a(e){e.parentNode.removeChild(e);var t=_.indexOf(e);t>=0&&_.splice(t,1)}function s(e){var t=document.createElement("style");return t.type="text/css",o(e,t),t}function l(e){var t=document.createElement("link");return t.rel="stylesheet",o(e,t),t}function u(e,t){var i,n,r;if(t.singleton){var o=y++;i=v||(v=s(t)),n=c.bind(null,i,o,!1),r=c.bind(null,i,o,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(i=l(t),n=p.bind(null,i),r=function(){a(i),i.href&&URL.revokeObjectURL(i.href)}):(i=s(t),n=h.bind(null,i),r=function(){a(i)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else r()}}function c(e,t,i,n){var r=i?"":n.css;if(e.styleSheet)e.styleSheet.cssText=b(t,r);else{var o=document.createTextNode(r),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function h(e,t){var i=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=i;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(i))}}function p(e,t){var i=t.css,n=t.sourceMap;n&&(i+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n))))+" */");var r=new Blob([i],{type:"text/css"}),o=e.href;e.href=URL.createObjectURL(r),o&&URL.revokeObjectURL(o)}var d={},f=function(e){var t;return function(){return"undefined"==typeof t&&(t=e.apply(this,arguments)),t}},m=f(function(){return/msie [6-9]\b/.test(window.navigator.userAgent.toLowerCase())}),g=f(function(){return document.head||document.getElementsByTagName("head")[0]}),v=null,y=0,_=[];e.exports=function(e,t){t=t||{},"undefined"==typeof t.singleton&&(t.singleton=m()),"undefined"==typeof t.insertAt&&(t.insertAt="bottom");var i=r(e);return n(i,t),function(e){for(var o=[],a=0;a<i.length;a++){var s=i[a],l=d[s.id];l.refs--,o.push(l)}if(e){var u=r(e);n(u,t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var c=0;c<l.parts.length;c++)l.parts[c]();delete d[l.id]}}}};var b=function(){var e=[];return function(t,i){return e[t]=i,e.filter(Boolean).join("\n")}}()},function(e,t){e.exports='<div id="__vconsole" class="">\n  <div class="vc-switch">vConsole</div>\n  <div class="vc-mask">\n  </div>\n  <div class="vc-panel">\n    <div class="vc-tabbar">\n    </div>\n    <div class="vc-topbar">\n    </div>\n    <div class="vc-content">\n    </div>\n    <div class="vc-toolbar">\n      <a class="vc-tool vc-global-tool vc-tool-last vc-hide">Hide</a>\n    </div>\n  </div>\n</div>'},function(e,t){e.exports='<a class="vc-tab" data-tab="{{id}}" id="__vc_tab_{{id}}">{{name}}</a>'},function(e,t){e.exports='<div class="vc-logbox" id="__vc_log_{{id}}">\n  \n</div>'},function(e,t){e.exports='<a class="vc-toptab vc-topbar-{{pluginID}}{{if (className)}} {{className}}{{/if}}">{{name}}</a>'},function(e,t){e.exports='<a class="vc-tool vc-tool-{{pluginID}}">{{name}}</a>'},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function w(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:w(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0},c=i(5),h=r(c),p=i(4),d=n(p),f=i(17),m=r(f),g=i(22),v=r(g),y=i(23),_=r(y),b=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.tplTabbox=v["default"],s.windowOnError=null,s}return s(t,e),l(t,[{key:"onReady",value:function(){var e=this;u(Object.getPrototypeOf(t.prototype),"onReady",this).call(this),h["default"].bind(h["default"].one(".vc-cmd",this.$tabbox),"submit",function(t){t.preventDefault();var i=h["default"].one(".vc-cmd-input",t.target),n=i.value;i.value="",""!==n&&e.evalCommand(n)});var i="";i+="if (!!window) {",i+="window.__vConsole_cmd_result = undefined;",i+="window.__vConsole_cmd_error = false;",i+="}";var n=document.getElementsByTagName("script"),r="";n.length>0&&(r=n[0].getAttribute("nonce")||"");var o=document.createElement("SCRIPT");o.innerHTML=i,o.setAttribute("nonce",r),document.documentElement.appendChild(o),document.documentElement.removeChild(o)}},{key:"mockConsole",value:function(){u(Object.getPrototypeOf(t.prototype),"mockConsole",this).call(this);var e=this;d.isFunction(window.onerror)&&(this.windowOnError=window.onerror),window.onerror=function(t,i,n,r,o){var a=t;i&&(a+="\n"+i.replace(location.origin,"")),(n||r)&&(a+=":"+n+":"+r);var s=!!o&&!!o.stack,l=s&&o.stack.toString()||"";e.printLog({logType:"error",logs:[a,l],noOrigin:!0}),d.isFunction(e.windowOnError)&&e.windowOnError.call(window,t,i,n,r,o)}}},{key:"evalCommand",value:function(e){this.printLog({logType:"log",content:h["default"].render(_["default"],{content:e,type:"input"}),noMeta:!0,style:""});var t="";t+="try {\n",t+="window.__vConsole_cmd_result = (function() {\n",t+="return "+e+";\n",t+="})();\n",t+="window.__vConsole_cmd_error = false;\n",t+="} catch (e) {\n",t+="window.__vConsole_cmd_result = e.message;\n",t+="window.__vConsole_cmd_error = true;\n",t+="}";var i=document.getElementsByTagName("script"),n="";i.length>0&&(n=i[0].getAttribute("nonce")||"");var r=document.createElement("SCRIPT");r.innerHTML=t,r.setAttribute("nonce",n),document.documentElement.appendChild(r);var o=window.__vConsole_cmd_result,a=window.__vConsole_cmd_error;if(document.documentElement.removeChild(r),0==a){var s=void 0;d.isArray(o)||d.isObject(o)?s=this.getFoldedLine(o):(d.isNull(o)?o="null":d.isUndefined(o)?o="undefined":d.isFunction(o)?o="function()":d.isString(o)&&(o='"'+o+'"'),s=h["default"].render(_["default"],{content:o,type:"output"})),this.printLog({logType:"log",content:s,noMeta:!0,style:""})}else this.printLog({logType:"error",logs:[o],noMeta:!0,style:""})}}]),t}(m["default"]);t["default"]=b,e.exports=t["default"]},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e
}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(4),h=r(c),p=i(5),d=n(p),f=i(18),m=n(f),g=i(19),v=n(g),y=i(20),_=n(y),b=i(21),w=n(b),x=1e3,E=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.tplTabbox="",s.allowUnformattedLog=!0,s.isReady=!1,s.isShow=!1,s.$tabbox=null,s.console={},s.logList=[],s.isInBottom=!0,s.maxLogNumber=x,s.logNumber=0,s.mockConsole(),s}return s(t,e),u(t,[{key:"onInit",value:function(){this.$tabbox=d["default"].render(this.tplTabbox,{}),this.updateMaxLogNumber()}},{key:"onRenderTab",value:function(e){e(this.$tabbox)}},{key:"onAddTopBar",value:function(e){for(var t=this,i=["All","Log","Info","Warn","Error"],n=[],r=0;r<i.length;r++)n.push({name:i[r],data:{type:i[r].toLowerCase()},className:"",onClick:function(){return d["default"].hasClass(this,"vc-actived")?!1:void t.showLogType(this.dataset.type||"all")}});n[0].className="vc-actived",e(n)}},{key:"onAddTool",value:function(e){var t=this,i=[{name:"Clear",global:!1,onClick:function(){t.clearLog(),t.vConsole.triggerEvent("clearLog")}}];e(i)}},{key:"onReady",value:function(){var e=this;e.isReady=!0;var t=d["default"].all(".vc-subtab",e.$tabbox);d["default"].bind(t,"click",function(i){if(i.preventDefault(),d["default"].hasClass(this,"vc-actived"))return!1;d["default"].removeClass(t,"vc-actived"),d["default"].addClass(this,"vc-actived");var n=this.dataset.type,r=d["default"].one(".vc-log",e.$tabbox);d["default"].removeClass(r,"vc-log-partly-log"),d["default"].removeClass(r,"vc-log-partly-info"),d["default"].removeClass(r,"vc-log-partly-warn"),d["default"].removeClass(r,"vc-log-partly-error"),"all"==n?d["default"].removeClass(r,"vc-log-partly"):(d["default"].addClass(r,"vc-log-partly"),d["default"].addClass(r,"vc-log-partly-"+n))});var i=d["default"].one(".vc-content");d["default"].bind(i,"scroll",function(t){e.isShow&&(i.scrollTop+i.offsetHeight>=i.scrollHeight?e.isInBottom=!0:e.isInBottom=!1)});for(var n=0;n<e.logList.length;n++)e.printLog(e.logList[n]);e.logList=[]}},{key:"onRemove",value:function(){window.console.log=this.console.log,window.console.info=this.console.info,window.console.warn=this.console.warn,window.console.debug=this.console.debug,window.console.error=this.console.error,window.console.time=this.console.time,window.console.timeEnd=this.console.timeEnd,window.console.clear=this.console.clear,this.console={}}},{key:"onShow",value:function(){this.isShow=!0,1==this.isInBottom&&this.autoScrollToBottom()}},{key:"onHide",value:function(){this.isShow=!1}},{key:"onShowConsole",value:function(){1==this.isInBottom&&this.autoScrollToBottom()}},{key:"onUpdateOption",value:function(){this.vConsole.option.maxLogNumber!=this.maxLogNumber&&(this.updateMaxLogNumber(),this.limitMaxLogs())}},{key:"updateMaxLogNumber",value:function(){this.maxLogNumber=this.vConsole.option.maxLogNumber||x,this.maxLogNumber=Math.max(1,this.maxLogNumber)}},{key:"limitMaxLogs",value:function(){if(this.isReady)for(;this.logNumber>this.maxLogNumber;){var e=d["default"].one(".vc-item",this.$tabbox);if(!e)break;e.parentNode.removeChild(e),this.logNumber--}}},{key:"showLogType",value:function(e){var t=d["default"].one(".vc-log",this.$tabbox);d["default"].removeClass(t,"vc-log-partly-log"),d["default"].removeClass(t,"vc-log-partly-info"),d["default"].removeClass(t,"vc-log-partly-warn"),d["default"].removeClass(t,"vc-log-partly-error"),"all"==e?d["default"].removeClass(t,"vc-log-partly"):(d["default"].addClass(t,"vc-log-partly"),d["default"].addClass(t,"vc-log-partly-"+e))}},{key:"autoScrollToBottom",value:function(){this.vConsole.option.disableLogScrolling||this.scrollToBottom()}},{key:"scrollToBottom",value:function(){var e=d["default"].one(".vc-content");e&&(e.scrollTop=e.scrollHeight-e.offsetHeight)}},{key:"mockConsole",value:function(){var e=this,t=this,i=["log","info","warn","debug","error"];window.console?(i.map(function(e){t.console[e]=window.console[e]}),t.console.time=window.console.time,t.console.timeEnd=window.console.timeEnd,t.console.clear=window.console.clear):window.console={},i.map(function(t){window.console[t]=function(){for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];e.printLog({logType:t,logs:n})}});var n={};window.console.time=function(e){n[e]=Date.now()},window.console.timeEnd=function(e){var t=n[e];t?(console.log(e+":",Date.now()-t+"ms"),delete n[e]):console.log(e+": 0ms")},window.console.clear=function(){for(var e=arguments.length,i=Array(e),n=0;e>n;n++)i[n]=arguments[n];t.clearLog(),t.console.clear.apply(window.console,i)}}},{key:"clearLog",value:function(){d["default"].one(".vc-log",this.$tabbox).innerHTML=""}},{key:"printOriginLog",value:function(e){"function"==typeof this.console[e.logType]&&this.console[e.logType].apply(window.console,e.logs)}},{key:"printLog",value:function(e){var t=e.logs||[];if(t.length||e.content){t=[].slice.call(t||[]);var i=!0,n=/^\[(\w+)\]$/i,r="";if(h.isString(t[0])){var o=t[0].match(n);null!==o&&o.length>0&&(r=o[1].toLowerCase())}if(r?i=r==this.id:0==this.allowUnformattedLog&&(i=!1),!i)return void(e.noOrigin||this.printOriginLog(e));if(e.date||(e.date=+new Date),!this.isReady)return void this.logList.push(e);if(h.isString(t[0])&&(t[0]=t[0].replace(n,""),""===t[0]&&t.shift()),!e.meta){var a=h.getDate(e.date);e.meta=a.hour+":"+a.minute+":"+a.second}for(var s=d["default"].render(v["default"],{logType:e.logType,noMeta:!!e.noMeta,meta:e.meta,style:e.style||""}),u=d["default"].one(".vc-item-content",s),c=0;c<t.length;c++){var p=void 0;try{if(""===t[c])continue;p=h.isFunction(t[c])?"<span> "+t[c].toString()+"</span>":h.isObject(t[c])||h.isArray(t[c])?this.getFoldedLine(t[c]):"<span> "+h.htmlEncode(t[c]).replace(/\n/g,"<br/>")+"</span>"}catch(f){p="<span> ["+l(t[c])+"]</span>"}p&&("string"==typeof p?u.insertAdjacentHTML("beforeend",p):u.insertAdjacentElement("beforeend",p))}h.isObject(e.content)&&u.insertAdjacentElement("beforeend",e.content),d["default"].one(".vc-log",this.$tabbox).insertAdjacentElement("beforeend",s),this.logNumber++,this.limitMaxLogs(),this.isInBottom&&this.autoScrollToBottom(),e.noOrigin||this.printOriginLog(e)}}},{key:"getFoldedLine",value:function(e,t){var i=this;if(!t){var n=h.JSONStringify(e),r=n.substr(0,26);t=h.getObjName(e),n.length>26&&(r+="..."),t+=" "+r}var o=d["default"].render(_["default"],{outer:t,lineType:"obj"});return d["default"].bind(d["default"].one(".vc-fold-outer",o),"click",function(t){t.preventDefault(),t.stopPropagation(),d["default"].hasClass(o,"vc-toggle")?(d["default"].removeClass(o,"vc-toggle"),d["default"].removeClass(d["default"].one(".vc-fold-inner",o),"vc-toggle"),d["default"].removeClass(d["default"].one(".vc-fold-outer",o),"vc-toggle")):(d["default"].addClass(o,"vc-toggle"),d["default"].addClass(d["default"].one(".vc-fold-inner",o),"vc-toggle"),d["default"].addClass(d["default"].one(".vc-fold-outer",o),"vc-toggle"));var n=d["default"].one(".vc-fold-inner",o);if(0==n.children.length&&e){for(var r=h.getObjAllKeys(e),a=0;a<r.length;a++){var s=e[r[a]],l="undefined",u="";h.isString(s)?(l="string",s='"'+s+'"'):h.isNumber(s)?l="number":h.isBoolean(s)?l="boolean":h.isNull(s)?(l="null",s="null"):h.isUndefined(s)?(l="undefined",s="undefined"):h.isFunction(s)?(l="function",s="function()"):h.isSymbol(s)&&(l="symbol");var c=void 0;if(h.isArray(s)){var p=h.getObjName(s)+"["+s.length+"]";c=i.getFoldedLine(s,d["default"].render(w["default"],{key:r[a],keyType:u,value:p,valueType:"array"},!0))}else if(h.isObject(s)){var f=h.getObjName(s);c=i.getFoldedLine(s,d["default"].render(w["default"],{key:h.htmlEncode(r[a]),keyType:u,value:f,valueType:"object"},!0))}else{e.hasOwnProperty&&!e.hasOwnProperty(r[a])&&(u="private");var m={lineType:"kv",key:h.htmlEncode(r[a]),keyType:u,value:h.htmlEncode(s),valueType:l};c=d["default"].render(_["default"],m)}n.insertAdjacentElement("beforeend",c)}if(h.isObject(e)){var g=e.__proto__,v=void 0;v=h.isObject(g)?i.getFoldedLine(g,d["default"].render(w["default"],{key:"__proto__",keyType:"private",value:h.getObjName(g),valueType:"object"},!0)):d["default"].render(w["default"],{key:"__proto__",keyType:"private",value:"null",valueType:"null"}),n.insertAdjacentElement("beforeend",v)}}return!1}),o}}]),t}(m["default"]);t["default"]=E,e.exports=t["default"]},function(e,t){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),r=function(){function e(t){var n=arguments.length<=1||void 0===arguments[1]?"newPlugin":arguments[1];i(this,e),this.id=t,this.name=n,this.isReady=!1,this.eventList={}}return n(e,[{key:"on",value:function(e,t){return this.eventList[e]=t,this}},{key:"trigger",value:function(e,t){if("function"==typeof this.eventList[e])this.eventList[e].call(this,t);else{var i="on"+e.charAt(0).toUpperCase()+e.slice(1);"function"==typeof this[i]&&this[i].call(this,t)}return this}},{key:"id",get:function(){return this._id},set:function(e){if(!e)throw"Plugin ID cannot be empty";this._id=e.toLowerCase()}},{key:"name",get:function(){return this._name},set:function(e){if(!e)throw"Plugin name cannot be empty";this._name=e}},{key:"vConsole",get:function(){return this._vConsole||void 0},set:function(e){if(!e)throw"vConsole cannot be empty";this._vConsole=e}}]),e}();t["default"]=r,e.exports=t["default"]},function(e,t){e.exports='<div class="vc-item vc-item-{{logType}} {{if (!noMeta)}}vc-item-nometa{{/if}} {{style}}">\n	<span class="vc-item-meta">{{if (!noMeta)}}{{meta}}{{/if}}</span>\n	<div class="vc-item-content"></div>\n</div>'},function(e,t){e.exports='<div class="vc-fold">\n  {{if (lineType == \'obj\')}}\n    <i class="vc-fold-outer">{{outer}}</i>\n    <div class="vc-fold-inner"></div>\n  {{else if (lineType == \'value\')}}\n    <i class="vc-code-{{valueType}}">{{value}}</i>\n  {{else if (lineType == \'kv\')}}\n    <i class="vc-code-key{{if (keyType)}} vc-code-{{keyType}}-key{{/if}}">{{key}}</i>: <i class="vc-code-{{valueType}}">{{value}}</i>\n  {{/if}}\n</div>'},function(e,t){e.exports='<span>\n  <i class="vc-code-key{{if (keyType)}} vc-code-{{keyType}}-key{{/if}}">{{key}}</i>: <i class="vc-code-{{valueType}}">{{value}}</i>\n</span>'},function(e,t){e.exports='<div>\n  <div class="vc-log"></div>\n  <form class="vc-cmd">\n    <button class="vc-cmd-btn" type="submit">OK</button>\n    <div class="vc-cmd-input-wrap">\n      <textarea class="vc-cmd-input" placeholder="command..."></textarea>\n    </div>\n  </form>\n</div>'},function(e,t){e.exports='<pre class="vc-item-code vc-item-code-{{type}}">{{content}}</pre>'},function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=function g(e,t,i){null===e&&(e=Function.prototype);var n=Object.getOwnPropertyDescriptor(e,t);if(void 0===n){var r=Object.getPrototypeOf(e);return null===r?void 0:g(r,t,i)}if("value"in n)return n.value;var o=n.get;return void 0!==o?o.call(i):void 0},c=i(4),h=(r(c),i(17)),p=n(h),d=i(25),f=n(d),m=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.tplTabbox=f["default"],s.allowUnformattedLog=!1,s}return s(t,e),l(t,[{key:"onInit",value:function(){u(Object.getPrototypeOf(t.prototype),"onInit",this).call(this),this.printSystemInfo()}},{key:"printSystemInfo",value:function(){var e=navigator.userAgent,t="",i=e.match(/(ipod).*\s([\d_]+)/i),n=e.match(/(ipad).*\s([\d_]+)/i),r=e.match(/(iphone)\sos\s([\d_]+)/i),o=e.match(/(android)\s([\d\.]+)/i);t="Unknown",o?t="Android "+o[2]:r?t="iPhone, iOS "+r[2].replace(/_/g,"."):n?t="iPad, iOS "+n[2].replace(/_/g,"."):i&&(t="iPod, iOS "+i[2].replace(/_/g,"."));var a=t,s=e.match(/MicroMessenger\/([\d\.]+)/i);t="Unknown",s&&s[1]?(t=s[1],a+=", WeChat "+t,console.info("[system]","System:",a)):console.info("[system]","System:",a),t="Unknown",t="https:"==location.protocol?"HTTPS":"http:"==location.protocol?"HTTP":location.protocol.replace(":",""),a=t;var l=e.toLowerCase().match(/ nettype\/([^ ]+)/g);t="Unknown",l&&l[0]?(l=l[0].split("/"),t=l[1],a+=", "+t,console.info("[system]","Network:",a)):console.info("[system]","Protocol:",a),console.info("[system]","UA:",e),setTimeout(function(){var e=window.performance||window.msPerformance||window.webkitPerformance;if(e&&e.timing){var t=e.timing;t.navigationStart&&console.info("[system]","navigationStart:",t.navigationStart),t.navigationStart&&t.domainLookupStart&&console.info("[system]","navigation:",t.domainLookupStart-t.navigationStart+"ms"),t.domainLookupEnd&&t.domainLookupStart&&console.info("[system]","dns:",t.domainLookupEnd-t.domainLookupStart+"ms"),t.connectEnd&&t.connectStart&&(t.connectEnd&&t.secureConnectionStart?console.info("[system]","tcp (ssl):",t.connectEnd-t.connectStart+"ms ("+(t.connectEnd-t.secureConnectionStart)+"ms)"):console.info("[system]","tcp:",t.connectEnd-t.connectStart+"ms")),t.responseStart&&t.requestStart&&console.info("[system]","request:",t.responseStart-t.requestStart+"ms"),t.responseEnd&&t.responseStart&&console.info("[system]","response:",t.responseEnd-t.responseStart+"ms"),t.domComplete&&t.domLoading&&(t.domContentLoadedEventStart&&t.domLoading?console.info("[system]","domComplete (domLoaded):",t.domComplete-t.domLoading+"ms ("+(t.domContentLoadedEventStart-t.domLoading)+"ms)"):console.info("[system]","domComplete:",t.domComplete-t.domLoading+"ms")),t.loadEventEnd&&t.loadEventStart&&console.info("[system]","loadEvent:",t.loadEventEnd-t.loadEventStart+"ms"),t.navigationStart&&t.loadEventEnd&&console.info("[system]","total (DOM):",t.loadEventEnd-t.navigationStart+"ms ("+(t.domComplete-t.navigationStart)+"ms)")}},0)}}]),t}(p["default"]);t["default"]=m,e.exports=t["default"]},function(e,t){e.exports='<div>\n  <div class="vc-log"></div>\n</div>'},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(5),c=r(u),h=i(4),p=n(h),d=i(18),f=r(d),m=i(27),g=r(m),v=i(28),y=r(v),_=i(29),b=r(_),w=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.$tabbox=c["default"].render(g["default"],{}),s.$header=null,s.reqList={},s.domList={},s.isReady=!1,s.isShow=!1,s.isInBottom=!0,s._open=void 0,s._send=void 0,s.mockAjax(),s}return s(t,e),l(t,[{key:"onRenderTab",value:function(e){e(this.$tabbox)}},{key:"onAddTool",value:function(e){var t=this,i=[{name:"Clear",global:!1,onClick:function(e){t.clearLog()}}];e(i)}},{key:"onReady",value:function(){var e=this;e.isReady=!0,this.renderHeader(),c["default"].delegate(c["default"].one(".vc-log",this.$tabbox),"click",".vc-group-preview",function(t){var i=this.dataset.reqid,n=this.parentNode;c["default"].hasClass(n,"vc-actived")?(c["default"].removeClass(n,"vc-actived"),e.updateRequest(i,{actived:!1})):(c["default"].addClass(n,"vc-actived"),e.updateRequest(i,{actived:!0})),t.preventDefault()});var t=c["default"].one(".vc-content");c["default"].bind(t,"scroll",function(i){e.isShow&&(t.scrollTop+t.offsetHeight>=t.scrollHeight?e.isInBottom=!0:e.isInBottom=!1)});for(var i in e.reqList)e.updateRequest(i,{})}},{key:"onRemove",value:function(){window.XMLHttpRequest&&(window.XMLHttpRequest.prototype.open=this._open,window.XMLHttpRequest.prototype.send=this._send,this._open=void 0,this._send=void 0)}},{key:"onShow",value:function(){this.isShow=!0,1==this.isInBottom&&this.scrollToBottom()}},{key:"onHide",value:function(){this.isShow=!1}},{key:"onShowConsole",value:function(){1==this.isInBottom&&this.scrollToBottom()}},{key:"scrollToBottom",value:function(){var e=c["default"].one(".vc-content");e.scrollTop=e.scrollHeight-e.offsetHeight}},{key:"clearLog",value:function(){this.reqList={};for(var e in this.domList)this.domList[e].remove(),this.domList[e]=void 0;this.domList={},this.renderHeader()}},{key:"renderHeader",value:function(){var e=Object.keys(this.reqList).length,t=c["default"].render(y["default"],{count:e}),i=c["default"].one(".vc-log",this.$tabbox);this.$header?this.$header.parentNode.replaceChild(t,this.$header):i.parentNode.insertBefore(t,i),this.$header=t}},{key:"updateRequest",value:function(e,t){var i=Object.keys(this.reqList).length,n=this.reqList[e]||{};for(var r in t)n[r]=t[r];if(this.reqList[e]=n,this.isReady){var o={id:e,url:n.url,status:n.status,method:n.method||"-",costTime:n.costTime>0?n.costTime+"ms":"-",header:n.header||null,getData:n.getData||null,postData:n.postData||null,response:null,actived:!!n.actived};switch(n.responseType){case"":case"text":if(p.isString(n.response))try{o.response=JSON.parse(n.response),o.response=JSON.stringify(o.response,null,1),o.response=p.htmlEncode(o.response)}catch(a){o.response=p.htmlEncode(n.response)}else"undefined"!=typeof n.response&&(o.response=Object.prototype.toString.call(n.response));break;case"json":"undefined"!=typeof n.response&&(o.response=JSON.stringify(n.response,null,1));break;case"blob":case"document":case"arraybuffer":default:"undefined"!=typeof n.response&&(o.response=Object.prototype.toString.call(n.response))}0==n.readyState||1==n.readyState?o.status="Pending":2==n.readyState||3==n.readyState?o.status="Loading":4==n.readyState||(o.status="Unknown");var s=c["default"].render(b["default"],o),l=this.domList[e];n.status>=400&&c["default"].addClass(c["default"].one(".vc-group-preview",s),"vc-table-row-error"),l?l.parentNode.replaceChild(s,l):c["default"].one(".vc-log",this.$tabbox).insertAdjacentElement("beforeend",s),this.domList[e]=s;var u=Object.keys(this.reqList).length;u!=i&&this.renderHeader(),this.isInBottom&&this.scrollToBottom()}}},{key:"mockAjax",value:function(){var e=window.XMLHttpRequest;if(e){var t=this,i=window.XMLHttpRequest.prototype.open,n=window.XMLHttpRequest.prototype.send;t._open=i,t._send=n,window.XMLHttpRequest.prototype.open=function(){var e=this,n=[].slice.call(arguments),r=n[0],o=n[1],a=t.getUniqueID(),s=null;e._requestID=a,e._method=r,e._url=o;var l=e.onreadystatechange||function(){},u=function(){var i=t.reqList[a]||{};if(i.readyState=e.readyState,i.status=0,e.readyState>1&&(i.status=e.status),i.responseType=e.responseType,0==e.readyState)i.startTime||(i.startTime=+new Date);else if(1==e.readyState)i.startTime||(i.startTime=+new Date);else if(2==e.readyState){i.header={};for(var n=e.getAllResponseHeaders()||"",r=n.split("\n"),o=0;o<r.length;o++){var u=r[o];if(u){var c=u.split(": "),h=c[0],p=c.slice(1).join(": ");i.header[h]=p}}}else 3==e.readyState||(4==e.readyState?(clearInterval(s),i.endTime=+new Date,i.costTime=i.endTime-(i.startTime||i.endTime),i.response=e.response):clearInterval(s));return e._noVConsole||t.updateRequest(a,i),l.apply(e,arguments)};e.onreadystatechange=u;var c=-1;return s=setInterval(function(){c!=e.readyState&&(c=e.readyState,u.call(e))},10),i.apply(e,n)},window.XMLHttpRequest.prototype.send=function(){var e=this,i=[].slice.call(arguments),r=i[0],o=t.reqList[e._requestID]||{};o.method=e._method.toUpperCase();var a=e._url.split("?");if(o.url=a.shift(),a.length>0){o.getData={},a=a.join("?"),a=a.split("&");var s=!0,l=!1,u=void 0;try{for(var c,h=a[Symbol.iterator]();!(s=(c=h.next()).done);s=!0){var d=c.value;d=d.split("="),o.getData[d[0]]=d[1]}}catch(f){l=!0,u=f}finally{try{!s&&h["return"]&&h["return"]()}finally{if(l)throw u}}}if("POST"==o.method)if(p.isString(r)){var m=r.split("&");o.postData={};var g=!0,v=!1,y=void 0;try{for(var _,b=m[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var w=_.value;w=w.split("="),o.postData[w[0]]=w[1]}}catch(f){v=!0,y=f}finally{try{!g&&b["return"]&&b["return"]()}finally{if(v)throw y}}}else p.isPlainObject(r)&&(o.postData=r);return e._noVConsole||t.updateRequest(e._requestID,o),n.apply(e,i)}}}},{key:"getUniqueID",value:function(){var e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,i="x"==e?t:3&t|8;return i.toString(16)});return e}}]),t}(f["default"]);t["default"]=w,e.exports=t["default"]},function(e,t){e.exports='<div class="vc-table">\n  <div class="vc-log"></div>\n</div>'},function(e,t){e.exports='<dl class="vc-table-row">\n  <dd class="vc-table-col vc-table-col-4">Name {{if (count > 0)}}({{count}}){{/if}}</dd>\n  <dd class="vc-table-col">Method</dd>\n  <dd class="vc-table-col">Status</dd>\n  <dd class="vc-table-col">Time</dd>\n</dl>'},function(e,t){e.exports='<div class="vc-group {{actived ? \'vc-actived\' : \'\'}}">\n  <dl class="vc-table-row vc-group-preview" data-reqid="{{id}}">\n    <dd class="vc-table-col vc-table-col-4">{{url}}</dd>\n    <dd class="vc-table-col">{{method}}</dd>\n    <dd class="vc-table-col">{{status}}</dd>\n    <dd class="vc-table-col">{{costTime}}</dd>\n  </dl>\n  <div class="vc-group-detail">\n    {{if (header !== null)}}\n    <div>\n      <dl class="vc-table-row vc-left-border">\n        <dt class="vc-table-col vc-table-col-title">Headers</dt>\n      </dl>\n      {{for (var key in header)}}\n      <div class="vc-table-row vc-left-border vc-small">\n        <div class="vc-table-col vc-table-col-2">{{key}}</div>\n        <div class="vc-table-col vc-table-col-4 vc-max-height-line">{{header[key]}}</div>\n      </div>\n      {{/for}}\n    </div>\n    {{/if}}\n    {{if (getData !== null)}}\n    <div>\n      <dl class="vc-table-row vc-left-border">\n        <dt class="vc-table-col vc-table-col-title">Query String Parameters</dt>\n      </dl>\n      {{for (var key in getData)}}\n      <div class="vc-table-row vc-left-border vc-small">\n        <div class="vc-table-col vc-table-col-2">{{key}}</div>\n        <div class="vc-table-col vc-table-col-4 vc-max-height-line">{{getData[key]}}</div>\n      </div>\n      {{/for}}\n    </div>\n    {{/if}}\n    {{if (postData !== null)}}\n    <div>\n      <dl class="vc-table-row vc-left-border">\n        <dt class="vc-table-col vc-table-col-title">Form Data</dt>\n      </dl>\n      {{for (var key in postData)}}\n      <div class="vc-table-row vc-left-border vc-small">\n        <div class="vc-table-col vc-table-col-2">{{key}}</div>\n        <div class="vc-table-col vc-table-col-4 vc-max-height-line">{{postData[key]}}</div>\n      </div>\n      {{/for}}\n    </div>\n    {{/if}}\n    <div>\n      <dl class="vc-table-row vc-left-border">\n        <dt class="vc-table-col vc-table-col-title">Response</dt>\n      </dl>\n      <div class="vc-table-row vc-left-border vc-small">\n        <pre class="vc-table-col vc-max-height vc-min-height">{{response || \'\'}}</pre>\n      </div>\n    </div>\n  </div>\n</div>'},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}();i(31);var u=i(18),c=r(u),h=i(33),p=r(h),d=i(34),f=r(d),m=i(4),g=(n(m),i(5)),v=r(g),y=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n))),l=s;l.isInited=!1,l.node={},l.$tabbox=v["default"].render(p["default"],{}),l.nodes=[],l.activedElem={};var u=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return l.observer=new u(function(e){for(var t=0;t<e.length;t++){var i=e[t];l._isInVConsole(i.target)||l.onMutation(i)}}),s}return s(t,e),l(t,[{key:"onRenderTab",value:function(e){e(this.$tabbox)}},{key:"onAddTool",value:function(e){var t=this,i=[{name:"Expend",global:!1,onClick:function(e){if(t.activedElem)if(v["default"].hasClass(t.activedElem,"vc-toggle"))for(var i=0;i<t.activedElem.childNodes.length;i++){var n=t.activedElem.childNodes[i];if(v["default"].hasClass(n,"vcelm-l")&&!v["default"].hasClass(n,"vcelm-noc")&&!v["default"].hasClass(n,"vc-toggle")){v["default"].one(".vcelm-node",n).click();break}}else v["default"].one(".vcelm-node",t.activedElem).click()}},{name:"Collapse",global:!1,onClick:function(e){t.activedElem&&(v["default"].hasClass(t.activedElem,"vc-toggle")?v["default"].one(".vcelm-node",t.activedElem).click():t.activedElem.parentNode&&v["default"].hasClass(t.activedElem.parentNode,"vcelm-l")&&v["default"].one(".vcelm-node",t.activedElem.parentNode).click())}}];e(i)}},{key:"onShow",value:function(){if(!this.isInited){this.isInited=!0,this.node=this.getNode(document.documentElement);var e=this.renderView(this.node,v["default"].one(".vc-log",this.$tabbox)),t=v["default"].one(".vcelm-node",e);t&&t.click();var i={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(document.documentElement,i)}}},{key:"onRemove",value:function(){this.observer.disconnect()}},{key:"onMutation",value:function(e){switch(e.type){case"childList":e.removedNodes.length>0&&this.onChildRemove(e),e.addedNodes.length>0&&this.onChildAdd(e);break;case"attributes":this.onAttributesChange(e);break;case"characterData":this.onCharacterDataChange(e)}}},{key:"onChildRemove",value:function(e){var t=e.target,i=t.__vconsole_node;if(i){for(var n=0;n<e.removedNodes.length;n++){var r=e.removedNodes[n],o=r.__vconsole_node;o&&o.view&&o.view.parentNode.removeChild(o.view)}this.getNode(t)}}},{key:"onChildAdd",value:function(e){var t=e.target,i=t.__vconsole_node;if(i){this.getNode(t),i.view&&v["default"].removeClass(i.view,"vcelm-noc");for(var n=0;n<e.addedNodes.length;n++){var r=e.addedNodes[n],o=r.__vconsole_node;if(o)if(null!==e.nextSibling){var a=e.nextSibling.__vconsole_node;a.view&&this.renderView(o,a.view,"insertBefore")}else i.view&&(i.view.lastChild?this.renderView(o,i.view.lastChild,"insertBefore"):this.renderView(o,i.view))}}}},{key:"onAttributesChange",value:function(e){var t=e.target.__vconsole_node;t&&(t=this.getNode(e.target),t.view&&this.renderView(t,t.view,!0))}},{key:"onCharacterDataChange",value:function(e){var t=e.target.__vconsole_node;t&&(t=this.getNode(e.target),t.view&&this.renderView(t,t.view,!0))}},{key:"renderView",value:function(e,t,i){var n=this,r=new f["default"](e).get();switch(e.view=r,v["default"].delegate(r,"click",".vcelm-node",function(t){t.stopPropagation();var i=this.parentNode;if(!v["default"].hasClass(i,"vcelm-noc")){n.activedElem=i,v["default"].hasClass(i,"vc-toggle")?v["default"].removeClass(i,"vc-toggle"):v["default"].addClass(i,"vc-toggle");for(var r=-1,o=0;o<i.children.length;o++){var a=i.children[o];v["default"].hasClass(a,"vcelm-l")&&(r++,a.children.length>0||(e.childNodes[r]?n.renderView(e.childNodes[r],a,"replace"):a.style.display="none"))}}}),i){case"replace":t.parentNode.replaceChild(r,t);break;case"insertBefore":t.parentNode.insertBefore(r,t);break;default:t.appendChild(r)}return r}},{key:"getNode",value:function(e){if(!this._isIgnoredElement(e)){var t=e.__vconsole_node||{};if(t.nodeType=e.nodeType,t.nodeName=e.nodeName,t.tagName=e.tagName||"",t.textContent="",t.nodeType!=e.TEXT_NODE&&t.nodeType!=e.DOCUMENT_TYPE_NODE||(t.textContent=e.textContent),t.id=e.id||"",t.className=e.className||"",t.attributes=[],e.hasAttributes&&e.hasAttributes())for(var i=0;i<e.attributes.length;i++)t.attributes.push({name:e.attributes[i].name,value:e.attributes[i].value||""});if(t.childNodes=[],e.childNodes.length>0)for(var n=0;n<e.childNodes.length;n++){var r=this.getNode(e.childNodes[n]);r&&t.childNodes.push(r)}return e.__vconsole_node=t,t}}},{key:"_isIgnoredElement",value:function(e){return e.nodeType==e.TEXT_NODE&&""==e.textContent.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$|\n+/g,"")}},{key:"_isInVConsole",value:function(e){for(var t=e;void 0!=t;){if("__vconsole"==t.id)return!0;t=t.parentNode||void 0}return!1}}]),t}(c["default"]);t["default"]=y,e.exports=t["default"]},function(e,t,i){var n=i(32);"string"==typeof n&&(n=[[e.id,n,""]]),i(10)(n,{}),n.locals&&(e.exports=n.locals)},function(e,t,i){t=e.exports=i(9)(),t.push([e.id,'.vcelm-node{color:#183691}.vcelm-k{color:#0086b3}.vcelm-v{color:#905}.vcelm-l{padding-left:8px;position:relative;word-wrap:break-word;line-height:1}.vcelm-l.vc-toggle>.vcelm-node{display:block}.vcelm-l .vcelm-node:active{background-color:rgba(0,0,0,.15)}.vcelm-l.vcelm-noc .vcelm-node:active{background-color:transparent}.vcelm-t{white-space:pre-wrap;word-wrap:break-word}.vcelm-l .vcelm-l{display:none}.vcelm-l.vc-toggle>.vcelm-l{margin-left:4px;display:block}.vcelm-l:before{content:"";display:block;position:absolute;top:6px;left:3px;width:0;height:0;border:3px solid transparent;border-left-color:#000}.vcelm-l.vc-toggle:before{display:block;top:6px;left:0;border-top-color:#000;border-left-color:transparent}.vcelm-l.vcelm-noc:before{display:none}',""])},function(e,t){e.exports='<div>\n  <div class="vc-log"></div>\n</div>'},function(e,t,i){"use strict";
function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e){var t=["br","hr","img","input","link","meta"];return e=e?e.toLowerCase():"",t.indexOf(e)>-1}function s(e){return document.createTextNode(e)}function l(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),c=i(35),h=r(c),p=i(36),d=r(p),f=i(4),m=(n(f),i(5)),g=r(m),v=function(){function e(t){o(this,e),this.node=t,this.view=this._create(this.node)}return u(e,[{key:"get",value:function(){return this.view}},{key:"_create",value:function(e,t){var i=document.createElement("DIV");switch(g["default"].addClass(i,"vcelm-l"),e.nodeType){case i.ELEMENT_NODE:this._createElementNode(e,i);break;case i.TEXT_NODE:this._createTextNode(e,i);break;case i.COMMENT_NODE:case i.DOCUMENT_NODE:case i.DOCUMENT_TYPE_NODE:case i.DOCUMENT_FRAGMENT_NODE:}return i}},{key:"_createTextNode",value:function(e,t){g["default"].addClass(t,"vcelm-t vcelm-noc"),e.textContent&&t.appendChild(s(l(e.textContent)))}},{key:"_createElementNode",value:function(e,t){var i=a(e.tagName),n=i;0==e.childNodes.length&&(n=!0);var r=g["default"].render(h["default"],{node:e}),o=g["default"].render(d["default"],{node:e});if(n)g["default"].addClass(t,"vcelm-noc"),t.appendChild(r),i||t.appendChild(o);else{t.appendChild(r);for(var s=0;s<e.childNodes.length;s++){var l=document.createElement("DIV");g["default"].addClass(l,"vcelm-l"),t.appendChild(l)}i||t.appendChild(o)}}}]),e}();t["default"]=v,e.exports=t["default"]},function(e,t){e.exports='<span class="vcelm-node">&lt;{{node.tagName.toLowerCase()}}{{if (node.className || node.attributes.length)}}\n  <i class="vcelm-k">\n    {{for (var i = 0; i < node.attributes.length; i++)}}\n      {{if (node.attributes[i].value !== \'\')}}\n        {{node.attributes[i].name}}="<i class="vcelm-v">{{node.attributes[i].value}}</i>"{{else}}\n        {{node.attributes[i].name}}{{/if}}{{/for}}</i>{{/if}}&gt;</span>'},function(e,t){e.exports='<span class="vcelm-node">&lt;/{{node.tagName.toLowerCase()}}&gt;</span>'},function(e,t,i){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t["default"]=e,t}function r(e){return e&&e.__esModule?e:{"default":e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),u=i(18),c=r(u),h=i(38),p=r(h),d=i(39),f=r(d),m=i(4),g=n(m),v=i(5),y=r(v),_=function(e){function t(){var e;o(this,t);for(var i=arguments.length,n=Array(i),r=0;i>r;r++)n[r]=arguments[r];var s=a(this,(e=Object.getPrototypeOf(t)).call.apply(e,[this].concat(n)));return s.$tabbox=y["default"].render(p["default"],{}),s.currentType="",s.typeNameMap={cookies:"Cookies",localstorage:"LocalStorage"},s}return s(t,e),l(t,[{key:"onRenderTab",value:function(e){e(this.$tabbox)}},{key:"onAddTopBar",value:function(e){for(var t=this,i=["Cookies","LocalStorage"],n=[],r=0;r<i.length;r++)n.push({name:i[r],data:{type:i[r].toLowerCase()},className:"",onClick:function(){return y["default"].hasClass(this,"vc-actived")?!1:(t.currentType=this.dataset.type,void t.renderStorage())}});n[0].className="vc-actived",e(n)}},{key:"onAddTool",value:function(e){var t=this,i=[{name:"Refresh",global:!1,onClick:function(e){t.renderStorage()}},{name:"Clear",global:!1,onClick:function(e){t.clearLog()}}];e(i)}},{key:"onReady",value:function(){}},{key:"onShow",value:function(){""==this.currentType&&(this.currentType="cookies",this.renderStorage())}},{key:"clearLog",value:function(){if(this.currentType&&window.confirm){var e=window.confirm("Remove all "+this.typeNameMap[this.currentType]+"?");if(!e)return!1}switch(this.currentType){case"cookies":this.clearCookieList();break;case"localstorage":this.clearLocalStorageList();break;default:return!1}this.renderStorage()}},{key:"renderStorage",value:function(){var e=[];switch(this.currentType){case"cookies":e=this.getCookieList();break;case"localstorage":e=this.getLocalStorageList();break;default:return!1}var t=y["default"].one(".vc-log",this.$tabbox);if(0==e.length)t.innerHTML="";else{for(var i=0;i<e.length;i++)e[i].name=g.htmlEncode(e[i].name),e[i].value=g.htmlEncode(e[i].value);t.innerHTML=y["default"].render(f["default"],{list:e},!0)}}},{key:"getCookieList",value:function(){if(!document.cookie||!navigator.cookieEnabled)return[];for(var e=[],t=document.cookie.split(";"),i=0;i<t.length;i++){var n=t[i].split("="),r=n.shift().replace(/^ /,""),o=n.join("=");e.push({name:decodeURIComponent(r),value:decodeURIComponent(o)})}return e}},{key:"getLocalStorageList",value:function(){if(!window.localStorage)return[];try{for(var e=[],t=0;t<localStorage.length;t++){var i=localStorage.key(t),n=localStorage.getItem(i);e.push({name:i,value:n})}return e}catch(r){return[]}}},{key:"clearCookieList",value:function(){if(document.cookie&&navigator.cookieEnabled){for(var e=this.getCookieList(),t=0;t<e.length;t++)document.cookie=e[t].name+"=;expires=Thu, 01 Jan 1970 00:00:00 GMT";this.renderStorage()}}},{key:"clearLocalStorageList",value:function(){if(window.localStorage)try{localStorage.clear(),this.renderStorage()}catch(e){alert("localStorage.clear() fail.")}}}]),t}(c["default"]);t["default"]=_,e.exports=t["default"]},function(e,t){e.exports='<div class="vc-table">\n  <div class="vc-log"></div>\n</div>'},function(e,t){e.exports='<div>\n  <dl class="vc-table-row">\n    <dd class="vc-table-col">Name</dd>\n    <dd class="vc-table-col vc-table-col-2">Value</dd>\n  </dl>\n  {{for (var i = 0; i < list.length; i++)}}\n  <dl class="vc-table-row">\n    <dd class="vc-table-col">{{list[i].name}}</dd>\n    <dd class="vc-table-col vc-table-col-2">{{list[i].value}}</dd>\n  </dl>\n  {{/for}}\n</div>'}])}),window.skins={},window.generateEUI={},generateEUI.paths={},generateEUI.styles=void 0,generateEUI.skins={"eui.Button":"resource/eui_skins/ButtonSkin.exml","eui.CheckBox":"resource/eui_skins/CheckBoxSkin.exml","eui.HScrollBar":"resource/eui_skins/HScrollBarSkin.exml","eui.HSlider":"resource/eui_skins/HSliderSkin.exml","eui.Panel":"resource/eui_skins/PanelSkin.exml","eui.TextInput":"resource/eui_skins/TextInputSkin.exml","eui.ProgressBar":"resource/eui_skins/ProgressBarSkin.exml","eui.RadioButton":"resource/eui_skins/RadioButtonSkin.exml","eui.Scroller":"resource/eui_skins/ScrollerSkin.exml","eui.ToggleSwitch":"resource/eui_skins/ToggleSwitchSkin.exml","eui.VScrollBar":"resource/eui_skins/VScrollBarSkin.exml","eui.VSlider":"resource/eui_skins/VSliderSkin.exml","eui.ItemRenderer":"resource/eui_skins/ItemRendererSkin.exml",Toast:"resource/eui_skins/Toast.exml",HomeView:"resource/eui_skins/HomeView.exml",GameView:"resource/eui_skins/GameView.exml",RankView:"resource/eui_skins/RankView.exml",RankItemRender:"resource/eui_skins/RankItemRender.exml",WorldRankItemRender:"resource/eui_skins/WorldRankItemRender.exml",FriendRankItemRender:"resource/eui_skins/FriendRankItemRender.exml",ReviveView:"resource/eui_skins/ReviveView.exml",SkinView:"resource/eui_skins/SkinView.exml",SkinItemRender:"resource/eui_skins/SkinItemRender.exml",PageIndicatorItemRender:"resource/eui_skins/PageIndicatorItemRender.exml",EndView:"resource/eui_skins/EndView.exml",MatchView:"resource/eui_skins/MatchView.exml",MatchItemRender:"resource/eui_skins/MatchItemRender.exml",InviteView:"resource/eui_skins/InviteView.exml",InviteSkinItemRender:"resource/eui_skins/InviteSkinItemRender.exml",InvitePortraitItemRender:"resource/eui_skins/InvitePortraitItemRender.exml",ChallengeShareUI:"resource/eui_skins/ChallengeShareUI.exml",CommonShareUI:"resource/eui_skins/CommonShareUI.exml",SkinShareUI:"resource/eui_skins/SkinShareUI.exml",LoadingView:"resource/eui_skins/LoadingView.exml",BeforeEndView:"resource/eui_skins/BeforeEndView.exml",FriendItemRender:"resource/eui_skins/FriendItemRender.exml"},generateEUI.paths["resource/eui_skins/BeforeEndView.exml"]=window.BeforeEndViewSkin=function(e){function t(){e.call(this),this.skinParts=["btn_close","btn_invite"],this.elementsContent=[this._Group1_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="end-icon-close.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["iconDisplay"],this.elementsContent=[this._Image1_i(),this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","end-btn-green-down.png"),new eui.SetProperty("_Group1","y",4)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.scaleX=.8,e.scaleY=.8,e.source="end-btn-green.png",e},i._Group1_i=function(){var e=new eui.Group;return this._Group1=e,e.anchorOffsetY=0,e.height=86,e.horizontalCenter=0,e.y=0,e.layout=this._BasicLayout1_i(),e.elementsContent=[this.iconDisplay_i()],e},i._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.scaleX=1,e.scaleY=1,e.source="end-icon-pk.png",e.verticalCenter=0,e.y=74,e},t}(eui.Skin),r=t.prototype;return r._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.elementsContent=[this._Image1_i(),this.btn_close_i(),this._Label1_i(),this._Label2_i(),this.btn_invite_i()],e},r._Image1_i=function(){var e=new eui.Image;return e.horizontalCenter=0,e.source="end-pop-bg.png",e},r.btn_close_i=function(){var e=new eui.Button;return this.btn_close=e,e.label="",e.right=24,e.top=24,e.skinName=i,e},r._Label1_i=function(){var e=new eui.Label;return e.horizontalCenter=0,e.size=44,e.text="Invite friends to",e.textColor=6146292,e.y=135,e},r._Label2_i=function(){var e=new eui.Label;return e.horizontalCenter=0,e.size=44,e.text="complete ?",e.textColor=6146292,e.y=205,e},r.btn_invite_i=function(){var e=new eui.Button;return this.btn_invite=e,e.horizontalCenter=0,e.icon="end-icon-pk.png",e.label="",e.scaleX=1,e.scaleY=1,e.y=300,e.skinName=n,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ButtonSkin.exml"]=window.skins.ButtonSkin=function(e){function t(){e.call(this),this.skinParts=["labelDisplay","iconDisplay"],this.minHeight=50,this.minWidth=100,this.elementsContent=[this._Image1_i(),this.labelDisplay_i(),this.iconDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.source="",e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.size=54,e.text="Button",e.textColor=6733298,e.y=0,e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.horizontalCenter=0,e.source="",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ButtonSkinWhite.exml"]=window.skins.ButtonSkinWhite=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.currentState="up",this.minHeight=50,this.minWidth=100,this.elementsContent=[this._Image1_i(),this._Group2_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","btn1-down.png"),new eui.SetProperty("labelDisplay","verticalCenter",4),new eui.SetProperty("_Group2","y",5)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.source="btn1-up.png",e},i._Group2_i=function(){var e=new eui.Group;return this._Group2=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=100,e.percentWidth=100,e.elementsContent=[this._Group1_i()],e},i._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=0,e.layout=this._BasicLayout1_i(),e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},i._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.source="icon-single.png",e.x=0,e.y=0,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.size=39,e.text="PLAY SINGLE",e.textColor=16227898,e.verticalAlign="middle",e.verticalCenter=4,e.x=80,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ButtonSkinYellow.exml"]=window.skins.ButtonSkinYellow=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.currentState="up",this.minHeight=50,this.minWidth=100,this.elementsContent=[this._Image1_i(),this._Group2_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","btn2-down.png"),new eui.SetProperty("labelDisplay","verticalCenter",4),new eui.SetProperty("_Group2","y",5)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.source="btn2-up.png",e},i._Group2_i=function(){var e=new eui.Group;return this._Group2=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=100,e.percentWidth=100,e.elementsContent=[this._Group1_i()],e},i._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=0,e.layout=this._BasicLayout1_i(),e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},i._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.source="icon-multi.png",e.x=0,e.y=0,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.size=39,e.text="PLAY SINGLE",e.textColor=16777215,e.verticalAlign="middle",e.verticalCenter=4,e.x=80,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/CheckBoxSkin.exml"]=window.skins.CheckBoxSkin=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","alpha",.7)]),new eui.State("disabled",[new eui.SetProperty("_Image1","alpha",.5)]),new eui.State("upAndSelected",[new eui.SetProperty("_Image1","source","checkbox_select_up_png")]),new eui.State("downAndSelected",[new eui.SetProperty("_Image1","source","checkbox_select_down_png")]),new eui.State("disabledAndSelected",[new eui.SetProperty("_Image1","source","checkbox_select_disabled_png")])]}__extends(t,e);var i=t.prototype;return i._Group1_i=function(){var e=new eui.Group;return e.percentHeight=100,e.percentWidth=100,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this._Image1_i(),this.labelDisplay_i()],e},i._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.verticalAlign="middle",e},i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.alpha=1,e.fillMode="scale",e.source="checkbox_unselect_png",e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.fontFamily="Tahoma",e.size=20,e.textAlign="center",e.textColor=7368816,e.verticalAlign="middle",e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/CommonShareUI.exml"]=window.CommonShareUISkin=function(e){function t(){e.call(this),this.skinParts=["img_bg","img_mask","img_head"],this.height=315,this.width=600,this.elementsContent=[this.img_bg_i(),this._Group1_i()]}__extends(t,e);var i=t.prototype;return i.img_bg_i=function(){var e=new eui.Image;return this.img_bg=e,e.horizontalCenter=0,e.source="",e.verticalCenter=0,e},i._Group1_i=function(){var e=new eui.Group;return e.x=35,e.y=35,e.elementsContent=[this._Image1_i(),this.img_mask_i(),this.img_head_i(),this._Image2_i()],e},i._Image1_i=function(){var e=new eui.Image;return e.source="share-common-head-bg.png",e.x=0,e.y=0,e},i.img_mask_i=function(){var e=new eui.Image;return this.img_mask=e,e.horizontalCenter=0,e.source="share-common-head.png",e.verticalCenter=0,e},i.img_head_i=function(){var e=new eui.Image;return this.img_head=e,e.height=114,e.horizontalCenter=0,e.source="share-common-head.png",e.verticalCenter=0,e.width=114,e},i._Image2_i=function(){var e=new eui.Image;return e.source="share-common-point.png",e.x=82,e.y=2,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/EndView.exml"]=window.EndViewSkin=function(e){function t(){e.call(this),this.skinParts=["btn_home_end","btn_friendly_end","btn_skin_end","dg_friends","sc_friends","gp_friends","txt_star_amount","gp_star_amount","img_crown","img_podium","img_rank1_mask","img_rank1","gp_rank1_portrait","txt_rank1","img_rank2_mask","img_rank2","gp_rank2_portrait","txt_rank2","img_rank3_mask","img_rank3","gp_rank3_portrait","txt_rank3","txt_rank","gp_rank","btn_play","btn_rank","btn_skin","txt_notify_skin","gp_notify_skin","btn_rare","txt_notify_invite","gp_notify_invite","gp_btns","image","image0","image1","image2","image3","image4","image5","image6","image7","gp_star_animation","txt_star_plus","gp_star","lb_scores_end"],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i(),this.btn_home_end_i(),this.btn_friendly_end_i(),this.btn_skin_end_i(),this.gp_friends_i(),this.gp_star_amount_i(),this._Group4_i(),this.gp_rank_i(),this.btn_play_i(),this.gp_btns_i(),this.gp_star_animation_i(),this.gp_star_i(),this._Label1_i(),this.lb_scores_end_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","return_main_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="return_main.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_begin2_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_begin2.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e.visible=!1,e},t}(eui.Skin),r=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-skin-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-skin.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),o=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_begin2_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_begin2.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),a=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-rank-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-rank.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),s=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-skin-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-skin.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),l=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Image1_i(),this.iconDisplay_i(),this.labelDisplay_i(),this._Image2_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-rare-down.png"),new eui.SetProperty("iconDisplay","y",18),new eui.SetProperty("_Image2","y",35)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-rare.png",e.percentWidth=100,e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.horizontalCenter=0,e.scaleX=.8,e.scaleY=.8,e.source="default_ball.png",e.y=15,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},i._Image2_i=function(){var e=new eui.Image;return this._Image2=e,e.right=0,e.source="home-icon-rare.png",e.y=32,e},t}(eui.Skin),u=t.prototype;return u._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="example_end.jpg",e.visible=!1,e.percentWidth=100,e.x=0,e.y=0,e},u.btn_home_end_i=function(){var e=new eui.Button;return this.btn_home_end=e,e.height=80,e.label="",e.width=100,e.x=0,e.y=0,e.skinName=i,e},u.btn_friendly_end_i=function(){var e=new eui.Button;return this.btn_friendly_end=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=110,e.horizontalCenter=-55,e.icon="icon-play-yellow.png",e.label="",e.scaleX=1,e.scaleY=1,e.width=470,e.y=970,e.skinName=n,e},u.btn_skin_end_i=function(){var e=new eui.Button;return this.btn_skin_end=e,e.height=115,e.horizontalCenter=240,e.label="",e.width=130,e.y=966.8,e.skinName=r,e},u.gp_friends_i=function(){var e=new eui.Group;return this.gp_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=630,e.horizontalCenter=0,e.percentWidth=100,e.y=300,e.elementsContent=[this.sc_friends_i()],e},u.sc_friends_i=function(){var e=new eui.Scroller;return this.sc_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.horizontalCenter=0,e.rotation=0,e.percentWidth=100,e.viewport=this.dg_friends_i(),e},u.dg_friends_i=function(){var e=new eui.DataGroup;return this.dg_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=172.97,e.itemRenderer=FriendRankItemRender,e.width=607.82,e.x=-.03,e.y=3.03,e.layout=this._VerticalLayout1_i(),e.dataProvider=this._ArrayCollection1_i(),e},u._VerticalLayout1_i=function(){var e=new eui.VerticalLayout;return e.horizontalAlign="center",e},u._ArrayCollection1_i=function(){var e=new eui.ArrayCollection;return e.source=[],e},u.gp_star_amount_i=function(){var e=new eui.Group;return this.gp_star_amount=e,e.right=0,e.visible=!1,e.y=105,e.elementsContent=[this._Image2_i(),this._Image3_i(),this.txt_star_amount_i()],e},u._Image2_i=function(){var e=new eui.Image;return e.scaleX=-1,e.source="end-star-bg.png",e.x=158,e},u._Image3_i=function(){var e=new eui.Image;return e.source="home-star.png",e.verticalCenter=0,e.x=18,e},u.txt_star_amount_i=function(){var e=new eui.Label;return this.txt_star_amount=e,e.height=34,e.right=10,e.size=34,e.text="0",e.textAlign="center",e.verticalCenter=2,e.width=80,e},u._Group4_i=function(){var e=new eui.Group;return e.height=459,e.horizontalCenter=0,e.visible=!1,e.width=448,e.y=192,e.elementsContent=[this.img_crown_i(),this.img_podium_i(),this._Group1_i(),this._Group2_i(),this._Group3_i()],e},u.img_crown_i=function(){var e=new eui.Image;return this.img_crown=e,e.alpha=0,e.anchorOffsetY=80,e.horizontalCenter=0,e.scaleX=1,e.scaleY=1,e.source="end-crown.png",e},u.img_podium_i=function(){var e=new eui.Image;return this.img_podium=e,e.anchorOffsetX=224,e.anchorOffsetY=134.5,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.source="end-podium.png",e.x=112,e.y=324.5,e},u._Group1_i=function(){var e=new eui.Group;return e.height=162,e.horizontalCenter=0,e.width=118,e.y=0,e.elementsContent=[this.gp_rank1_portrait_i(),this.txt_rank1_i()],e},u.gp_rank1_portrait_i=function(){var e=new eui.Group;return this.gp_rank1_portrait=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=59,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.y=59,e.elementsContent=[this._Image4_i(),this.img_rank1_mask_i(),this.img_rank1_i()],e},u._Image4_i=function(){var e=new eui.Image;return e.source="end-portrait.png",e.x=0,e.y=0,e},u.img_rank1_mask_i=function(){var e=new eui.Image;return this.img_rank1_mask=e,e.source="end-portrait-mask.png",e.x=0,e.y=0,e},u.img_rank1_i=function(){var e=new eui.Image;return this.img_rank1=e,e.height=118,e.source="default_portrait.png",e.width=118,e.x=0,e.y=0,e},u.txt_rank1_i=function(){var e=new eui.Label;return this.txt_rank1=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=14.5,e.height=29,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.size=29,e.text="Si Xingg",e.textAlign="center",e.width=118,e.y=147.5,e},u._Group2_i=function(){var e=new eui.Group;return e.height=162,e.width=118,e.x=22,e.y=80,e.elementsContent=[this.gp_rank2_portrait_i(),this.txt_rank2_i()],e},u.gp_rank2_portrait_i=function(){var e=new eui.Group;return this.gp_rank2_portrait=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=59,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.y=59,e.elementsContent=[this._Image5_i(),this.img_rank2_mask_i(),this.img_rank2_i()],e},u._Image5_i=function(){var e=new eui.Image;return e.source="end-portrait.png",e.x=0,e.y=0,e},u.img_rank2_mask_i=function(){var e=new eui.Image;return this.img_rank2_mask=e,e.source="end-portrait-mask.png",e.x=0,e.y=0,e},u.img_rank2_i=function(){var e=new eui.Image;return this.img_rank2=e,e.height=118,e.source="default_portrait.png",e.width=118,e.x=0,e.y=0,e},u.txt_rank2_i=function(){var e=new eui.Label;return this.txt_rank2=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=14.5,e.height=29,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.size=29,e.text="Si Xingg",e.textAlign="center",e.width=118,e.y=147.5,e},u._Group3_i=function(){var e=new eui.Group;return e.height=162,e.width=118,e.x=320,e.y=120,e.elementsContent=[this.gp_rank3_portrait_i(),this.txt_rank3_i()],e},u.gp_rank3_portrait_i=function(){var e=new eui.Group;return this.gp_rank3_portrait=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=59,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.y=59,e.elementsContent=[this._Image6_i(),this.img_rank3_mask_i(),this.img_rank3_i()],e},u._Image6_i=function(){var e=new eui.Image;return e.source="end-portrait.png",e.x=0,e.y=0,e},u.img_rank3_mask_i=function(){var e=new eui.Image;return this.img_rank3_mask=e,e.source="end-portrait-mask.png",e.x=0,e.y=0,e},u.img_rank3_i=function(){var e=new eui.Image;return this.img_rank3=e,e.height=118,e.source="default_portrait.png",e.width=118,e.x=0,e.y=0,e},u.txt_rank3_i=function(){var e=new eui.Label;return this.txt_rank3=e,e.alpha=0,e.anchorOffsetX=59,e.anchorOffsetY=14.5,e.height=29,e.horizontalCenter=0,e.scaleX=.1,e.scaleY=.1,e.size=29,e.text="Si Xingg",e.textAlign="center",e.width=118,e.y=147.5,e},u.gp_rank_i=function(){var e=new eui.Group;return this.gp_rank=e,e.alpha=0,e.horizontalCenter=0,e.visible=!1,e.y=662,e.elementsContent=[this.txt_rank_i()],e},u.txt_rank_i=function(){var e=new eui.Label;return this.txt_rank=e,e.size=61,e.text="12 th",e.verticalCenter=0,e.x=0,e},u.btn_play_i=function(){var e=new eui.Button;return this.btn_play=e,e.alpha=0,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=110,e.label="",e.scaleX=1,e.scaleY=1,e.visible=!1,e.width=450,e.x=30,e.y=968.8,e.skinName=o,e},u.gp_btns_i=function(){var e=new eui.Group;return this.gp_btns=e,e.horizontalCenter=0,e.visible=!1,e.percentWidth=100,e.y=927,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this._Group5_i(),this._Group6_i(),this._Group7_i()],e},u._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=45,e.horizontalAlign="center",e.verticalAlign="middle",e},u._Group5_i=function(){var e=new eui.Group;return e.height=117,e.width=105,e.x=150,e.y=0,e.elementsContent=[this.btn_rank_i()],e},u.btn_rank_i=function(){var e=new eui.Button;return this.btn_rank=e,e.alpha=0,e.height=117,e.horizontalCenter=0,e.label="",e.scaleX=.1,e.scaleY=.1,e.verticalCenter=0,e.width=105,e.skinName=a,e},u._Group6_i=function(){var e=new eui.Group;return e.height=117,e.width=105,e.x=268,e.y=0,e.elementsContent=[this.btn_skin_i(),this.gp_notify_skin_i()],e},u.btn_skin_i=function(){var e=new eui.Button;return this.btn_skin=e,e.alpha=0,e.horizontalCenter=0,e.label="",e.scaleX=.1,e.scaleY=.1,e.verticalCenter=0,e.skinName=s,e},u.gp_notify_skin_i=function(){var e=new eui.Group;return this.gp_notify_skin=e,e.right=-15,e.top=-15,e.visible=!1,e.elementsContent=[this._Image7_i(),this.txt_notify_skin_i()],e},u._Image7_i=function(){var e=new eui.Image;return e.height=50,e.source="notify.png",e.width=50,e},u.txt_notify_skin_i=function(){var e=new eui.Label;return this.txt_notify_skin=e,e.horizontalCenter=0,e.text="1",e.verticalCenter=0,e},u._Group7_i=function(){var e=new eui.Group;return e.height=117,e.width=105,e.x=450,e.y=0,e.elementsContent=[this.btn_rare_i(),this.gp_notify_invite_i()],e},u.btn_rare_i=function(){var e=new eui.Button;return this.btn_rare=e,e.alpha=0,e.horizontalCenter=0,e.icon="",e.label="",e.scaleX=.1,e.scaleY=.1,e.verticalCenter=0,e.skinName=l,e},u.gp_notify_invite_i=function(){var e=new eui.Group;return this.gp_notify_invite=e,e.right=-15,e.top=-15,e.visible=!1,e.elementsContent=[this._Image8_i(),this.txt_notify_invite_i()],e},u._Image8_i=function(){var e=new eui.Image;return e.height=50,e.source="notify.png",e.width=50,e},u.txt_notify_invite_i=function(){var e=new eui.Label;return this.txt_notify_invite=e,e.horizontalCenter=0,e.text="1",e.verticalCenter=0,e},u.gp_star_animation_i=function(){var e=new eui.Group;return this.gp_star_animation=e,e.alpha=0,e.height=39,e.visible=!1,e.width=41,e.x=300,e.y=580,e.elementsContent=[this.image_i(),this.image0_i(),this.image1_i(),this.image2_i(),this.image3_i(),this.image4_i(),this.image5_i(),this.image6_i(),this.image7_i()],e
},u.image_i=function(){var e=new eui.Image;return this.image=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image0_i=function(){var e=new eui.Image;return this.image0=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image1_i=function(){var e=new eui.Image;return this.image1=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image2_i=function(){var e=new eui.Image;return this.image2=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image3_i=function(){var e=new eui.Image;return this.image3=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image4_i=function(){var e=new eui.Image;return this.image4=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image5_i=function(){var e=new eui.Image;return this.image5=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image6_i=function(){var e=new eui.Image;return this.image6=e,e.source="home-star.png",e.x=0,e.y=0,e},u.image7_i=function(){var e=new eui.Image;return this.image7=e,e.source="home-star.png",e.x=0,e.y=0,e},u.gp_star_i=function(){var e=new eui.Group;return this.gp_star=e,e.alpha=0,e.anchorOffsetX=62.5,e.anchorOffsetY=25,e.horizontalCenter=0,e.scaleX=.75,e.scaleY=.75,e.visible=!1,e.width=125,e.y=600,e.elementsContent=[this._Image9_i(),this.txt_star_plus_i()],e},u._Image9_i=function(){var e=new eui.Image;return e.source="home-star.png",e.verticalCenter=0,e},u.txt_star_plus_i=function(){var e=new eui.Label;return this.txt_star_plus=e,e.size=44,e.text="+20",e.verticalCenter=3,e.x=50,e},u._Label1_i=function(){var e=new eui.Label;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.fontFamily="Helvetica",e.height=70,e.horizontalCenter=0,e.italic=!0,e.size=70,e.text="SCORE",e.textAlign="center",e.verticalAlign="middle",e.width=300,e.y=70,e},u.lb_scores_end_i=function(){var e=new eui.Label;return this.lb_scores_end=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.height=100,e.horizontalCenter=0,e.italic=!0,e.size=100,e.text="180000",e.textAlign="center",e.verticalAlign="middle",e.width=500,e.y=169.88,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/FriendItemRender.exml"]=window.FriendItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["txt_name","node_head","btn_play"],this.height=330,this.minHeight=50,this.minWidth=100,this.width=185,this.elementsContent=[this._Group2_i()],this.node_head_i(),this.states=[new eui.State("friend",[new eui.AddItems("node_head","_Group2",2,"btn_play"),new eui.SetProperty("txt_name","percentWidth",100),new eui.SetProperty("txt_name","text","hello world"),new eui.SetProperty("btn_play","visible",!1),new eui.SetProperty("_Group2","anchorOffsetX",0),new eui.SetProperty("_Group2","width",187),new eui.SetProperty("_Group2","anchorOffsetY",0),new eui.SetProperty("_Group2","height",225),new eui.SetProperty("","width",186),new eui.SetProperty("","height",225)])]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.bold=!0,e.horizontalCenter=0,e.size=34,e.verticalCenter=0,e},t}(eui.Skin),n=t.prototype;return n._Group2_i=function(){var e=new eui.Group;return this._Group2=e,e.height=330,e.width=185,e.x=0,e.elementsContent=[this._Group1_i(),this.btn_play_i()],e},n._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.top=28,e.width=137,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this.txt_name_i()],e},n._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.horizontalAlign="center",e.verticalAlign="middle",e},n.txt_name_i=function(){var e=new eui.Label;return this.txt_name=e,e.bold=!0,e.horizontalCenter=0,e.multiline=!0,e.scaleX=1,e.scaleY=1,e.size=23,e.text="",e.textAlign="center",e.textColor=16777215,e.verticalAlign="top",e.wordWrap=!0,e.x=0,e.y=0,e},n.node_head_i=function(){var e=new eui.Image;return this.node_head=e,e.height=100,e.horizontalCenter=0,e.source="default_portrait.png",e.width=100,e.y=85,e},n.btn_play_i=function(){var e=new eui.Button;return this.btn_play=e,e.bottom=30,e.horizontalCenter=0,e.label="Play",e.skinName=i,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/FriendRankItemRender.exml"]=window.FriendRankItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_bar","lb_name","img_skin","gp_skin","lb_score","btn_play","btn_share","lb_rank","img_head","img_headmerge"],this.minHeight=50,this.minWidth=100,this.elementsContent=[this.img_bar_i(),this._Group2_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","rank_btn_play_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="rank_btn_play.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","rank_btn_share_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="rank_btn_share.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),r=t.prototype;return r.img_bar_i=function(){var e=new eui.Image;return this.img_bar=e,e.height=100,e.horizontalCenter=0,e.scale9Grid=new egret.Rectangle(72,0,302,74),e.source="rank_bg_4.png",e.percentWidth=100,e},r._Group2_i=function(){var e=new eui.Group;return e.anchorOffsetY=0,e.height=100,e.horizontalCenter=0,e.left=0,e.minWidth=500,e.right=0,e.elementsContent=[this.lb_name_i(),this.gp_skin_i(),this.lb_score_i(),this.btn_play_i(),this.btn_share_i(),this.lb_rank_i(),this._Group1_i()],e},r.lb_name_i=function(){var e=new eui.Label;return this.lb_name=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.fontFamily="Arial",e.percentHeight=100,e.italic=!0,e.size=30,e.text="34",e.textAlign="center",e.textColor=16777215,e.verticalAlign="middle",e.width=120,e.x=150,e.y=0,e},r.gp_skin_i=function(){var e=new eui.Group;return this.gp_skin=e,e.x=284,e.y=27,e.elementsContent=[this.img_skin_i()],e},r.img_skin_i=function(){var e=new eui.Image;return this.img_skin=e,e.height=46,e.source="default_ball.png",e.width=46,e.x=0,e.y=0,e},r.lb_score_i=function(){var e=new eui.Label;return this.lb_score=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.fontFamily="Arial",e.height=40,e.italic=!0,e.size=40,e.stroke=0,e.strokeColor=16777215,e.text="0",e.textAlign="center",e.textColor=16777215,e.verticalAlign="justify",e.width=150,e.x=336,e.y=30,e},r.btn_play_i=function(){var e=new eui.Button;return this.btn_play=e,e.label="",e.right=4,e.verticalCenter=2.5,e.skinName=i,e},r.btn_share_i=function(){var e=new eui.Button;return this.btn_share=e,e.label="",e.right=15,e.verticalCenter=3,e.visible=!1,e.skinName=n,e},r.lb_rank_i=function(){var e=new eui.Label;return this.lb_rank=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.fontFamily="Arial",e.height=75.34,e.size=40,e.text="2",e.textAlign="center",e.verticalAlign="middle",e.width=51.33,e.x=0,e.y=10,e},r._Group1_i=function(){var e=new eui.Group;return e.height=70,e.verticalCenter=0,e.width=70,e.x=80,e.elementsContent=[this.img_head_i(),this.img_headmerge_i()],e},r.img_head_i=function(){var e=new eui.Image;return this.img_head=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=70,e.scaleX=1,e.scaleY=1,e.width=70,e.x=0,e.y=0,e},r.img_headmerge_i=function(){var e=new eui.Image;return this.img_headmerge=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=70,e.scaleX=1,e.scaleY=1,e.source="rank_hmerge_4.png",e.width=70,e.x=0,e.y=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/GameView.exml"]=window.GameViewSkin=function(e){function t(){e.call(this),this.skinParts=["txt_ranking","img_progressbar_black","img_progressbar_yellow","img_wheel","group_progressbar","img_finger","group_swipe","btn_gameover","txt_current_level","gp_dev_tools","label_distance","dieRot","img_notice","now_surpassPlayer_head","lb_friendDis"],this.height=1136,this.width=640,this.elementsContent=[this.txt_ranking_i(),this.group_progressbar_i(),this.group_swipe_i(),this.gp_dev_tools_i(),this.label_distance_i(),this.dieRot_i(),this.img_notice_i(),this._Group2_i(),this.now_surpassPlayer_head_i(),this.lb_friendDis_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="home-star-bg.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=t.prototype;return n.txt_ranking_i=function(){var e=new eui.Label;return this.txt_ranking=e,e.horizontalCenter=0,e.size=43,e.text="",e.visible=!1,e.y=70,e},n.group_progressbar_i=function(){var e=new eui.Group;return this.group_progressbar=e,e.height=23,e.horizontalCenter=0,e.visible=!1,e.width=441,e.y=128,e.elementsContent=[this._Image1_i(),this.img_progressbar_black_i(),this.img_progressbar_yellow_i(),this.img_wheel_i()],e},n._Image1_i=function(){var e=new eui.Image;return e.right=3,e.source="game-flag.png",e.y=-34,e},n.img_progressbar_black_i=function(){var e=new eui.Image;return this.img_progressbar_black=e,e.source="game-progressbar-black.png",e},n.img_progressbar_yellow_i=function(){var e=new eui.Image;return this.img_progressbar_yellow=e,e.source="game-progressbar-yellow.png",e},n.img_wheel_i=function(){var e=new eui.Image;return this.img_wheel=e,e.anchorOffsetX=13,e.anchorOffsetY=12.5,e.source="game-wheel.png",e.x=0,e.y=2.5,e},n.group_swipe_i=function(){var e=new eui.Group;return this.group_swipe=e,e.horizontalCenter=0,e.y=940,e.elementsContent=[this._Image2_i(),this.img_finger_i()],e},n._Image2_i=function(){var e=new eui.Image;return e.source="game-swipe-bar.png",e},n.img_finger_i=function(){var e=new eui.Image;return this.img_finger=e,e.source="game-finger.png",e.y=0,e},n.gp_dev_tools_i=function(){var e=new eui.Group;return this.gp_dev_tools=e,e.left=0,e.visible=!1,e.y=522,e.layout=this._VerticalLayout1_i(),e.elementsContent=[this.btn_gameover_i(),this._Group1_i()],e},n._VerticalLayout1_i=function(){var e=new eui.VerticalLayout;return e},n.btn_gameover_i=function(){var e=new eui.Button;return this.btn_gameover=e,e.height=50,e.label="Gameover",e.left=0,e.width=150,e.skinName=i,e},n._Group1_i=function(){var e=new eui.Group;return e.y=120,e.elementsContent=[this._Image3_i(),this.txt_current_level_i()],e},n._Image3_i=function(){var e=new eui.Image;return e.height=50,e.scale9Grid=new egret.Rectangle(38,0,85,50),e.source="home-star-bg.png",e.percentWidth=100,e},n.txt_current_level_i=function(){var e=new eui.Label;return this.txt_current_level=e,e.left=0,e.text="CurrentLevel:11",e.verticalCenter=0,e},n.label_distance_i=function(){var e=new eui.Label;return this.label_distance=e,e.horizontalCenter=0,e.size=40,e.text="0",e.y=127,e},n.dieRot_i=function(){var e=new eui.Button;return this.dieRot=e,e.label="dieRot",e.visible=!1,e.x=284,e.y=584,e},n.img_notice_i=function(){var e=new eui.Image;return this.img_notice=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=264,e.source="game_notice.png",e.percentWidth=100,e.x=0,e.y=600,e},n._Group2_i=function(){var e=new eui.Group;return e.height=150,e.visible=!1,e.width=150,e.x=433,e.y=54,e.elementsContent=[this._Image4_i(),this._Image5_i()],e},n._Image4_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="game_headbg.png",e.percentWidth=100,e.x=0,e.y=0,e},n._Image5_i=function(){var e=new eui.Image;return e.height=20,e.width=20,e.x=89,e.y=68,e},n.now_surpassPlayer_head_i=function(){var e=new eui.Image;return this.now_surpassPlayer_head=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=120,e.width=120,e.x=520,e.y=320,e},n.lb_friendDis_i=function(){var e=new eui.Label;return this.lb_friendDis=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.height=70,e.italic=!0,e.size=40,e.text="40",e.textAlign="center",e.verticalAlign="middle",e.visible=!1,e.width=120,e.x=527.45,e.y=210,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/HomeView.exml"]=window.HomeViewSkin=function(e){function t(){e.call(this),this.skinParts=["img_logo","vconsole_switcher","btn_audio","txt_star_amount","btn_single","btn_friendly","btn_rank","btn_skin","txt_notify_skin","gp_notify_skin","btn_rare","txt_notify_invite","gp_notify_invite","gp_btns","bestGrade","dg_friends","sc_friends","gp_friends","btn_clear","txt_level","txt_go","gp_dev_tools"],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i(),this._Image2_i(),this.img_logo_i(),this.vconsole_switcher_i(),this.btn_audio_i(),this._Group1_i(),this.btn_single_i(),this.btn_friendly_i(),this.gp_btns_i(),this.bestGrade_i(),this.gp_friends_i(),this.gp_dev_tools_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="home-btn-audio-on.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_begin1_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_begin1.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e.visible=!1,e},t}(eui.Skin),r=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_begin2_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_begin2.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e.visible=!1,e},t}(eui.Skin),o=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-rank-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-rank.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),a=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-skin-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-skin.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),s=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Image1_i(),this.iconDisplay_i(),this.labelDisplay_i(),this._Image2_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","home-btn-rare-down.png"),new eui.SetProperty("iconDisplay","y",18),new eui.SetProperty("_Image2","y",35)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="home-btn-rare.png",e.percentWidth=100,e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.horizontalCenter=0,e.scaleX=.8,e.scaleY=.8,e.source="default_ball.png",e.visible=!1,e.y=15,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},i._Image2_i=function(){var e=new eui.Image;return this._Image2=e,e.right=0,e.source="home-icon-rare.png",e.visible=!1,e.y=32,e},t}(eui.Skin),l=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="home-star-bg.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),u=t.prototype;return u._Image1_i=function(){var e=new eui.Image;return e.anchorOffsetX=-1389.72,e.anchorOffsetY=-1150.57,e.fillMode="scale",e.height=1130.73,e.source="home_backgroundtem.jpg",e.visible=!1,e.width=640,e.x=-1389.72,e.y=-1148.57,e},u._Image2_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.fillMode="scale",e.percentHeight=100,e.horizontalCenter=1,e.source="home_bg.png",e.visible=!1,e.percentWidth=100,e},u.img_logo_i=function(){var e=new eui.Image;return this.img_logo=e,e.horizontalCenter=-2.5,e.source="home_logo.png",e.y=122.12,e},u.vconsole_switcher_i=function(){var e=new eui.Rect;return this.vconsole_switcher=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.fillAlpha=0,e.height=124,e.horizontalCenter=0,e.strokeAlpha=0,e.top=0,e.visible=!1,e.width=136,e},u.btn_audio_i=function(){var e=new eui.Button;return this.btn_audio=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=35,e.label="",e.scaleX=1,e.scaleY=1,e.width=35,e.x=25,e.y=25,e.skinName=i,e},u._Group1_i=function(){var e=new eui.Group;return e.visible=!1,e.x=20,e.y=30,e.elementsContent=[this._Image3_i(),this._Image4_i(),this.txt_star_amount_i()],e},u._Image3_i=function(){var e=new eui.Image;return e.anchorOffsetY=0,e.height=71.21,e.source="home-star-bg.png",e},u._Image4_i=function(){var e=new eui.Image;return e.source="home-star.png",e.verticalCenter=0,e.x=18,e},u.txt_star_amount_i=function(){var e=new eui.Label;return this.txt_star_amount=e,e.anchorOffsetX=0,e.right=15,e.size=34,e.text="0",e.textAlign="center",e.verticalCenter=2,e.width=90,e},u.btn_single_i=function(){var e=new eui.Button;return this.btn_single=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=95,e.horizontalCenter=222.5,e.icon="icon-play-white.png",e.label="PLAY FRIENDLY",e.scaleX=1,e.scaleY=1,e.width=125,e.y=771.47,e.skinName=n,e},u.btn_friendly_i=function(){var e=new eui.Button;return this.btn_friendly=e,e.anchorOffsetX=472,e.anchorOffsetY=96,e.height=100,e.horizontalCenter=-70,e.icon="icon-play-yellow.png",e.label="",e.scaleX=1,e.scaleY=1,e.width=470,e.y=859.88,e.skinName=r,e},u.gp_btns_i=function(){var e=new eui.Group;return this.gp_btns=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=129.12,e.horizontalCenter=-10,e.width=640,e.y=957.88,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this.btn_rank_i(),this._Group2_i(),this._Group3_i()],e},u._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=36,e.horizontalAlign="center",e},u.btn_rank_i=function(){var e=new eui.Button;return this.btn_rank=e,e.anchorOffsetX=-7,e.height=115,e.horizontalCenter=-202,e.label="",e.verticalCenter=-7.060000000000002,e.width=130,e.x=188,e.y=0,e.skinName=o,e},u._Group2_i=function(){var e=new eui.Group;return e.x=268,e.y=0,e.elementsContent=[this.btn_skin_i(),this.gp_notify_skin_i()],e},u.btn_skin_i=function(){var e=new eui.Button;return this.btn_skin=e,e.height=115,e.label="",e.width=130,e.x=5.87,e.y=-3.97,e.skinName=a,e},u.gp_notify_skin_i=function(){var e=new eui.Group;return this.gp_notify_skin=e,e.right=-15,e.top=-15,e.visible=!1,e.elementsContent=[this._Image5_i(),this.txt_notify_skin_i()],e},u._Image5_i=function(){var e=new eui.Image;return e.height=50,e.source="notify.png",e.width=50,e},u.txt_notify_skin_i=function(){var e=new eui.Label;return this.txt_notify_skin=e,e.horizontalCenter=0,e.text="1",e.verticalCenter=0,e},u._Group3_i=function(){var e=new eui.Group;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=111.03,e.width=137.73,e.x=436.27,e.y=0,e.elementsContent=[this.btn_rare_i(),this.gp_notify_invite_i()],e},u.btn_rare_i=function(){var e=new eui.Button;return this.btn_rare=e,e.height=115,e.icon="thumb_gouqiu.png",e.label="",e.width=130,e.x=15.5,e.y=0,e.skinName=s,e},u.gp_notify_invite_i=function(){var e=new eui.Group;return this.gp_notify_invite=e,e.right=-15,e.top=-15,e.visible=!1,e.elementsContent=[this._Image6_i(),this.txt_notify_invite_i()],e},u._Image6_i=function(){var e=new eui.Image;return e.height=50,e.source="notify.png",e.width=50,e},u.txt_notify_invite_i=function(){var e=new eui.Label;return this.txt_notify_invite=e,e.horizontalCenter=0,e.text="1",e.verticalCenter=0,e},u.bestGrade_i=function(){var e=new eui.Label;return this.bestGrade=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.fontFamily="Georgia",e.height=112,e.horizontalCenter=30.5,e.size=50,e.text="BEST",e.width=174.6,e.y=298,e},u.gp_friends_i=function(){var e=new eui.Group;return this.gp_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=246,e.horizontalCenter=-2,e.percentWidth=100,e.y=426,e.elementsContent=[this._Image7_i(),this.sc_friends_i()],e},u._Image7_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=240,e.source="head_bg.png",e.percentWidth=100,e.x=0,e},u.sc_friends_i=function(){var e=new eui.Scroller;return this.sc_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=240,e.percentWidth=100,e.x=0,e.viewport=this.dg_friends_i(),e},u.dg_friends_i=function(){var e=new eui.DataGroup;return this.dg_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=240,e.itemRenderer=FriendItemRender,e.percentWidth=100,e.x=-2.5,e.y=57.47,e.layout=this._HorizontalLayout2_i(),e.dataProvider=this._ArrayCollection1_i(),e},u._HorizontalLayout2_i=function(){var e=new eui.HorizontalLayout;return e.horizontalAlign="center",e},u._ArrayCollection1_i=function(){var e=new eui.ArrayCollection;return e.source=[this._Object1_i(),this._Object2_i()],e},u._Object1_i=function(){var e={};return e.ss="null",e},u._Object2_i=function(){var e={};return e.ss="null",e},u.gp_dev_tools_i=function(){var e=new eui.Group;return this.gp_dev_tools=e,e.left=5,e.y=304,e.layout=this._VerticalLayout1_i(),e.elementsContent=[this.btn_clear_i(),this._Group5_i()],e},u._VerticalLayout1_i=function(){var e=new eui.VerticalLayout;return e},u.btn_clear_i=function(){var e=new eui.Button;return this.btn_clear=e,e.enabled=!0,e.height=50,e.label="ClearData",e.left=0,e.width=150,e.skinName=l,e},u._Group5_i=function(){var e=new eui.Group;return e.y=120,e.elementsContent=[this._Image8_i(),this._Label1_i(),this._Group4_i(),this.txt_go_i()],e},u._Image8_i=function(){var e=new eui.Image;return e.height=50,e.source="home-star-bg.png",e.width=200,e},u._Label1_i=function(){var e=new eui.Label;return e.left=0,e.text="Level",e.verticalCenter=0,e},u._Group4_i=function(){var e=new eui.Group;return e.verticalCenter=0,e.x=75,e.elementsContent=[this._Rect1_i(),this.txt_level_i()],e},u._Rect1_i=function(){var e=new eui.Rect;return e.fillColor=16777215,e.percentHeight=100,e.percentWidth=100,e},u.txt_level_i=function(){var e=new eui.EditableText;return this.txt_level=e,e.horizontalCenter="1.5",e.rotation=354.28,e.text="",e.textColor=0,e.verticalCenter="-3",e.width=60,e},u.txt_go_i=function(){var e=new eui.Label;return this.txt_go=e,e.text="Go",e.verticalCenter=0,e.x=140,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/HScrollBarSkin.exml"]=window.skins.HScrollBarSkin=function(e){function t(){e.call(this),this.skinParts=[],this.minHeight=8,this.minWidth=20}__extends(t,e);t.prototype;return t}(eui.Skin),generateEUI.paths["resource/eui_skins/HSliderSkin.exml"]=window.skins.HSliderSkin=function(e){function t(){e.call(this),this.skinParts=["track","thumb"],this.minHeight=8,this.minWidth=20,this.elementsContent=[this.track_i(),this.thumb_i()]}__extends(t,e);var i=t.prototype;return i.track_i=function(){var e=new eui.Image;return this.track=e,e.height=6,e.scale9Grid=new egret.Rectangle(1,1,4,4),e.source="track_sb_png",e.verticalCenter=0,e.percentWidth=100,e},i.thumb_i=function(){var e=new eui.Image;return this.thumb=e,e.source="thumb_png",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/IconButtonSkin.exml"]=window.skins.IconButtonSkin=function(e){function t(){e.call(this),this.skinParts=["iconDisplay"],this.minHeight=50,this.minWidth=50,this.elementsContent=[this.iconDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("iconDisplay","scaleX",.9),new eui.SetProperty("iconDisplay","scaleY",.9)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.anchorOffsetX=56.5,e.anchorOffsetY=58.5,e.horizontalCenter=0,e.source="home-btn-audio1.png",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/InvitePortraitItemRender.exml"]=window.InvitePortraitItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_portrait_mask","img_portrait"],this.elementsContent=[this._Image1_i(),this.img_portrait_mask_i(),this.img_portrait_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.source="invite-portrait.png",e},i.img_portrait_mask_i=function(){var e=new eui.Image;return this.img_portrait_mask=e,e.source="invite-portrait-mask.png",e.visible=!1,e},i.img_portrait_i=function(){var e=new eui.Image;return this.img_portrait=e,e.anchorOffsetY=0,e.height=113,e.source="",e.width=113,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/InviteSkinItemRender.exml"]=window.InviteSkinItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=[],this.elementsContent=[this._Image1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.horizontalCenter=0,e.source="default_ball.png",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/InviteView.exml"]=window.InviteViewSkin=function(e){function t(){e.call(this),this.skinParts=["btn_home","txt_refer","gp_skin","sc_skins","btn_invite","btn_play","list_invite","gp_portrait","sc_portrait"],this.height=1136,this.width=640,this.elementsContent=[this.btn_home_i(),this.txt_refer_i(),this._Label1_i(),this._Image1_i(),this.sc_skins_i(),this.btn_invite_i(),this.btn_play_i(),this._Label2_i(),this.sc_portrait_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","end-btn-home-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="end-btn-home.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Image1_i(),this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","invite-btn-down.png"),new eui.SetProperty("_Group1","y",3)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="invite-btn.png",e.percentWidth=100,e},i._Group1_i=function(){var e=new eui.Group;return this._Group1=e,e.anchorOffsetY=0,e.height=95,e.horizontalCenter=0,e.y=0,e.layout=this._BasicLayout1_i(),e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},i._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.scaleX=1,e.scaleY=1,e.source="invite-icon-friend.png",e.verticalCenter=0,e.y=74,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.scaleX=1,e.scaleY=1,e.size=50,e.text="1/3",e.textColor=16777215,e.verticalCenter=2,e.x=70,e.y=73.00000000000001,e},t}(eui.Skin),r=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","skin-btn-play-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="skin-btn-play.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),o=t.prototype;return o.btn_home_i=function(){var e=new eui.Button;return this.btn_home=e,e.label="",e.x=20,e.y=20,e.skinName=i,e},o.txt_refer_i=function(){var e=new eui.Label;return this.txt_refer=e,e.horizontalCenter=0,e.size=58,e.text="Refer 3 Friends",e.textColor=5019903,e.y=160,e},o._Label1_i=function(){var e=new eui.Label;return e.horizontalCenter=0,e.lineSpacing=10,e.size=32,e.text="Only New Player Login Could You Get It",e.textAlign="center",e.textColor=13092807,e.wordWrap=!0,e.y=245,e},o._Image1_i=function(){var e=new eui.Image;return e.horizontalCenter=0,e.source="invite-skin-bg.png",e.y=271.5,e},o.sc_skins_i=function(){var e=new eui.Scroller;return this.sc_skins=e,e.height=253,e.horizontalCenter=0,e.percentWidth=100,e.y=320,e.viewport=this.gp_skin_i(),e},o.gp_skin_i=function(){var e=new eui.Group;return this.gp_skin=e,e.layout=this._HorizontalLayout1_i(),e},o._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=0,e.paddingRight=0,e.verticalAlign="middle",e},o.btn_invite_i=function(){var e=new eui.Button;return this.btn_invite=e,e.horizontalCenter=0,e.icon="invite-icon-friend.png",e.label="0/1",e.scaleX=1,e.scaleY=1,e.y=627,e.skinName=n,e},o.btn_play_i=function(){var e=new eui.Button;return this.btn_play=e,e.horizontalCenter=0,e.icon="invite-icon-friend.png",e.label="",e.scaleX=1,e.scaleY=1,e.visible=!1,e.y=627,e.skinName=r,e},o._Label2_i=function(){var e=new eui.Label;return e.horizontalCenter=0,e.size=36,e.text="Friends Invited:",e.textAlign="center",e.textColor=13092807,e.wordWrap=!0,e.y=800,e},o.sc_portrait_i=function(){var e=new eui.Scroller;
return this.sc_portrait=e,e.percentWidth=100,e.y=877,e.viewport=this.gp_portrait_i(),e},o.gp_portrait_i=function(){var e=new eui.Group;return this.gp_portrait=e,e.layout=this._HorizontalLayout3_i(),e.elementsContent=[this.list_invite_i()],e},o._HorizontalLayout3_i=function(){var e=new eui.HorizontalLayout;return e.horizontalAlign="left",e},o.list_invite_i=function(){var e=new eui.List;return this.list_invite=e,e.itemRenderer=InvitePortraitItemRender,e.itemRendererSkinName=InvitePortraitItemRenderSkin,e.scaleX=1,e.scaleY=1,e.layout=this._HorizontalLayout2_i(),e},o._HorizontalLayout2_i=function(){var e=new eui.HorizontalLayout;return e.gap=45,e.paddingLeft=20,e.paddingRight=20,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ItemRendererSkin.exml"]=window.skins.ItemRendererSkin1=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.minHeight=50,this.minWidth=100,this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","")]),new eui.State("disabled",[new eui.SetProperty("_Image1","alpha",.5)])],eui.Binding.$bindProperties(this,["hostComponent.data.label"],[0],this.labelDisplay,"text")}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.scale9Grid=new egret.Rectangle(9,9,140,49),e.source="",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.bottom=8,e.fontFamily="Tahoma",e.left=8,e.right=8,e.size=30,e.textAlign="center",e.textColor=4893627,e.top=8,e.verticalAlign="middle",e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/LoadingView.exml"]=window.LoadingViewSkin=function(e){function t(){e.call(this),this.skinParts=[],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i()]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.source="bg-loading.jpg",e.percentWidth=100,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/MatchItemRender.exml"]=window.MatchItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_portrait_mask","img_portrait","img_loading"],this.height=92,this.width=87,this.elementsContent=[this._Image1_i(),this.img_portrait_mask_i(),this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.source="match-portrait-bg.png",e},i.img_portrait_mask_i=function(){var e=new eui.Image;return this.img_portrait_mask=e,e.source="match-portrait-mask.png",e},i._Group1_i=function(){var e=new eui.Group;return e.height=87,e.width=87,e.x=0,e.y=0,e.elementsContent=[this.img_portrait_i(),this.img_loading_i()],e},i.img_portrait_i=function(){var e=new eui.Image;return this.img_portrait=e,e.height=87,e.source="default_portrait.png",e.width=87,e.x=0,e.y=0,e},i.img_loading_i=function(){var e=new eui.Image;return this.img_loading=e,e.anchorOffsetX=33,e.anchorOffsetY=33.5,e.horizontalCenter=0,e.source="loading_indicator.png",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/MatchView.exml"]=window.MatchViewSkin=function(e){function t(){e.call(this),this.skinParts=["txt_progress","img_progressbar_black","img_progressbar_yellow","rect_mask","group_progressbar","gp"],this.height=1136,this.width=640,this.elementsContent=[this._Rect1_i(),this.txt_progress_i(),this._Group1_i()]}__extends(t,e);var i=t.prototype;return i._Rect1_i=function(){var e=new eui.Rect;return e.fillAlpha=.6,e.percentHeight=100,e.percentWidth=100,e},i.txt_progress_i=function(){var e=new eui.Label;return this.txt_progress=e,e.horizontalCenter=0,e.size=42,e.text="Matching  0/12",e.y=308,e},i._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.y=362,e.elementsContent=[this._Image1_i(),this.group_progressbar_i(),this.gp_i()],e},i._Image1_i=function(){var e=new eui.Image;return e.source="match-bg.png",e.x=0,e.y=0,e},i.group_progressbar_i=function(){var e=new eui.Group;return this.group_progressbar=e,e.height=55,e.horizontalCenter=0,e.width=520,e.y=8,e.elementsContent=[this.img_progressbar_black_i(),this.img_progressbar_yellow_i(),this.rect_mask_i()],e},i.img_progressbar_black_i=function(){var e=new eui.Image;return this.img_progressbar_black=e,e.source="match-progressbar_black.png",e.x=0,e.y=0,e},i.img_progressbar_yellow_i=function(){var e=new eui.Image;return this.img_progressbar_yellow=e,e.source="match-progressbar_yellow.png",e.x=0,e.y=0,e},i.rect_mask_i=function(){var e=new eui.Rect;return this.rect_mask=e,e.percentHeight=100,e.scaleX=0,e.width=520,e},i.gp_i=function(){var e=new eui.Group;return this.gp=e,e.anchorOffsetY=0,e.horizontalCenter=0,e.y=74,e.layout=this._TileLayout1_i(),e},i._TileLayout1_i=function(){var e=new eui.TileLayout;return e.horizontalGap=30,e.requestedColumnCount=4,e.requestedRowCount=3,e.verticalGap=10,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/PageIndicatorItemRender.exml"]=window.PageIndicatorItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_black","img_white"],this.elementsContent=[this.img_black_i()],this.img_white_i(),this.states=[new eui.State("up",[new eui.SetProperty("img_black","alpha",1),new eui.SetProperty("img_white","alpha",.5)]),new eui.State("down",[new eui.AddItems("img_white","",1,"")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i.img_black_i=function(){var e=new eui.Image;return this.img_black=e,e.source="nextpage2.png",e},i.img_white_i=function(){var e=new eui.Image;return this.img_white=e,e.source="nextpage1.png",e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/PanelSkin.exml"]=window.skins.PanelSkin=function(e){function t(){e.call(this),this.skinParts=["titleDisplay","moveArea","closeButton"],this.minHeight=230,this.minWidth=450,this.elementsContent=[this._Image1_i(),this.moveArea_i(),this.closeButton_i()]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.bottom=0,e.left=0,e.right=0,e.scale9Grid=new egret.Rectangle(2,2,12,12),e.source="border_png",e.top=0,e},i.moveArea_i=function(){var e=new eui.Group;return this.moveArea=e,e.height=45,e.left=0,e.right=0,e.top=0,e.elementsContent=[this._Image2_i(),this.titleDisplay_i()],e},i._Image2_i=function(){var e=new eui.Image;return e.bottom=0,e.left=0,e.right=0,e.source="header_png",e.top=0,e},i.titleDisplay_i=function(){var e=new eui.Label;return this.titleDisplay=e,e.fontFamily="Tahoma",e.left=15,e.right=5,e.size=20,e.textColor=16777215,e.verticalCenter=0,e.wordWrap=!1,e},i.closeButton_i=function(){var e=new eui.Button;return this.closeButton=e,e.bottom=5,e.horizontalCenter=0,e.label="close",e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ProgressBarSkin.exml"]=window.skins.ProgressBarSkin=function(e){function t(){e.call(this),this.skinParts=["thumb","labelDisplay"],this.minHeight=18,this.minWidth=30,this.elementsContent=[this._Image1_i(),this.thumb_i(),this.labelDisplay_i()]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.scale9Grid=new egret.Rectangle(1,1,4,4),e.source="best-score-bar-bottom_png",e.verticalCenter=0,e.percentWidth=100,e},i.thumb_i=function(){var e=new eui.Image;return this.thumb=e,e.anchorOffsetX=0,e.percentHeight=100,e.scale9Grid=new egret.Rectangle(28,5,172,31),e.source="best-score-bar_png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.bold=!0,e.horizontalCenter=0,e.size=30,e.textAlign="center",e.textColor=10178324,e.verticalAlign="middle",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/RadioButtonSkin.exml"]=window.skins.RadioButtonSkin=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","alpha",.7)]),new eui.State("disabled",[new eui.SetProperty("_Image1","alpha",.5)]),new eui.State("upAndSelected",[new eui.SetProperty("_Image1","source","radiobutton_select_up_png")]),new eui.State("downAndSelected",[new eui.SetProperty("_Image1","source","radiobutton_select_down_png")]),new eui.State("disabledAndSelected",[new eui.SetProperty("_Image1","source","radiobutton_select_disabled_png")])]}__extends(t,e);var i=t.prototype;return i._Group1_i=function(){var e=new eui.Group;return e.percentHeight=100,e.percentWidth=100,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this._Image1_i(),this.labelDisplay_i()],e},i._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.verticalAlign="middle",e},i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.alpha=1,e.fillMode="scale",e.source="radiobutton_unselect_png",e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.fontFamily="Tahoma",e.size=20,e.textAlign="center",e.textColor=7368816,e.verticalAlign="middle",e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/RankItemRender.exml"]=window.RankItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_portrait_mask","img_portrait","gp_portrait","txt_rank","txt_name","img_skin","gp_skin","txt_score"],this.minHeight=50,this.minWidth=100,this.elementsContent=[this._Image1_i(),this._Group5_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.scale9Grid=new egret.Rectangle(72,0,302,74),e.source="rank-bar-unnamed.png",e},i._Group5_i=function(){var e=new eui.Group;return e.anchorOffsetY=0,e.height=70,e.percentWidth=100,e.elementsContent=[this._Group3_i(),this.txt_name_i(),this.gp_skin_i(),this._Group4_i()],e},i._Group3_i=function(){var e=new eui.Group;return e.verticalCenter=0,e.x=8,e.elementsContent=[this.gp_portrait_i(),this._Group2_i()],e},i.gp_portrait_i=function(){var e=new eui.Group;return this.gp_portrait=e,e.elementsContent=[this._Image2_i(),this.img_portrait_mask_i(),this.img_portrait_i()],e},i._Image2_i=function(){var e=new eui.Image;return e.source="rank-portrait-rankn.png",e},i.img_portrait_mask_i=function(){var e=new eui.Image;return this.img_portrait_mask=e,e.horizontalCenter=0,e.source="rank-mask-portrait.png",e.verticalCenter=0,e},i.img_portrait_i=function(){var e=new eui.Image;return this.img_portrait=e,e.height=63,e.horizontalCenter=0,e.source="home-btn-audio2.png",e.verticalCenter=0,e.width=64,e},i._Group2_i=function(){var e=new eui.Group;return e.bottom=0,e.left=54,e.elementsContent=[this._Image3_i(),this._Group1_i()],e},i._Image3_i=function(){var e=new eui.Image;return e.scale9Grid=new egret.Rectangle(7,7,16,16),e.source="rank-rankn.png",e.percentWidth=100,e},i._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=0,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this.txt_rank_i()],e},i._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=0,e.paddingLeft=6,e.paddingRight=6,e},i.txt_rank_i=function(){var e=new eui.Label;return this.txt_rank=e,e.size=20,e.text="88",e.x=0,e.y=0,e},i.txt_name_i=function(){var e=new eui.Label;return this.txt_name=e,e.height=27,e.size=27,e.text="NANANAN OUTHHHH",e.textColor=7960961,e.verticalCenter=0,e.width=200,e.x=105,e},i.gp_skin_i=function(){var e=new eui.Group;return this.gp_skin=e,e.right=169,e.verticalCenter=0,e.elementsContent=[this.img_skin_i()],e},i.img_skin_i=function(){var e=new eui.Image;return this.img_skin=e,e.height=20,e.width=20,e.x=0,e.y=0,e},i._Group4_i=function(){var e=new eui.Group;return e.right=10,e.y=22,e.elementsContent=[this.txt_score_i()],e},i.txt_score_i=function(){var e=new eui.Label;return this.txt_score=e,e.height=27,e.size=27,e.text="2312",e.textAlign="center",e.textColor=7960961,e.width=80,e.x=0,e.y=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/RankView.exml"]=window.RankViewSkin=function(e){function t(){e.call(this),this.skinParts=["btn_home","dg_friends","sc_friends","gp_friends","img_portrait_champion_mask","img_portrait_champion","gp_champion","img_tab_world","img_tab_friend","btn_world","btn_friend","gp_tab_bar","rect_white_bar","list_world","node_world","gp_world","list_friend","btn_share","node_friend","gp_friend","view_stack"],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i(),this.btn_home_i(),this.gp_friends_i(),this.gp_champion_i(),this.gp_tab_bar_i(),this.rect_white_bar_i(),this.view_stack_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","return_main_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="return_main.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["iconDisplay","labelDisplay"],this.elementsContent=[this._Image1_i(),this._Group1_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","btn3-down.png"),new eui.SetProperty("_Group1","y",5)]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="btn3-up.png",e.percentWidth=100,e},i._Group1_i=function(){var e=new eui.Group;return this._Group1=e,e.anchorOffsetY=0,e.height=95,e.horizontalCenter=0,e.y=0,e.layout=this._BasicLayout1_i(),e.elementsContent=[this.iconDisplay_i(),this.labelDisplay_i()],e},i._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},i.iconDisplay_i=function(){var e=new eui.Image;return this.iconDisplay=e,e.scaleX=1,e.scaleY=1,e.source="rank-icon-invite.png",e.verticalCenter=0,e.y=74,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.scaleX=1,e.scaleY=1,e.size=35,e.text="INVITE",e.textColor=16227898,e.verticalCenter=2,e.x=50,e.y=73.00000000000001,e},t}(eui.Skin),r=t.prototype;return r._Image1_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.source="rank_example.jpg",e.visible=!1,e.percentWidth=100,e.x=0,e.y=0,e},r.btn_home_i=function(){var e=new eui.Button;return this.btn_home=e,e.enabled=!0,e.label="",e.x=0,e.y=0,e.skinName=i,e},r.gp_friends_i=function(){var e=new eui.Group;return this.gp_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=811,e.horizontalCenter=0,e.percentWidth=100,e.y=336,e.elementsContent=[this.sc_friends_i()],e},r.sc_friends_i=function(){var e=new eui.Scroller;return this.sc_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.horizontalCenter=0,e.rotation=0,e.percentWidth=100,e.viewport=this.dg_friends_i(),e},r.dg_friends_i=function(){var e=new eui.DataGroup;return this.dg_friends=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=100,e.itemRenderer=FriendRankItemRender,e.percentWidth=100,e.x=-.03,e.y=3.03,e.layout=this._VerticalLayout1_i(),e},r._VerticalLayout1_i=function(){var e=new eui.VerticalLayout;return e.gap=8,e.horizontalAlign="center",e},r.gp_champion_i=function(){var e=new eui.Group;return this.gp_champion=e,e.horizontalCenter=0,e.y=32,e.elementsContent=[this._Image2_i(),this._Group1_i(),this._Group2_i()],e},r._Image2_i=function(){var e=new eui.Image;return e.source="rank_champion_head.png",e},r._Group1_i=function(){var e=new eui.Group;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=70,e.horizontalCenter=0,e.width=300,e.y=178,e.elementsContent=[this._Image3_i(),this._Label1_i()],e},r._Image3_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.scaleX=1,e.scaleY=1,e.source="rank_champion_bar.png",e.percentWidth=100,e.x=0,e.y=0,e},r._Label1_i=function(){var e=new eui.Label;return e.bold=!0,e.percentHeight=100,e.horizontalCenter=0,e.size=40,e.text="xxx",e.textAlign="center",e.verticalAlign="middle",e.percentWidth=100,e.y=-8,e},r._Group2_i=function(){var e=new eui.Group;return e.height=152,e.width=151,e.x=114,e.y=36,e.elementsContent=[this.img_portrait_champion_mask_i(),this.img_portrait_champion_i()],e},r.img_portrait_champion_mask_i=function(){var e=new eui.Image;return this.img_portrait_champion_mask=e,e.percentHeight=100,e.horizontalCenter=0,e.source="rank-mask-champion.png",e.verticalCenter=0,e.percentWidth=100,e},r.img_portrait_champion_i=function(){var e=new eui.Image;return this.img_portrait_champion=e,e.height=132,e.horizontalCenter=0,e.source="",e.verticalCenter=0,e.width=139,e},r.gp_tab_bar_i=function(){var e=new eui.Group;return this.gp_tab_bar=e,e.horizontalCenter=0,e.visible=!1,e.y=276,e.elementsContent=[this.img_tab_world_i(),this.img_tab_friend_i(),this.btn_world_i(),this.btn_friend_i()],e},r.img_tab_world_i=function(){var e=new eui.Image;return this.img_tab_world=e,e.source="rank-tab-world.png",e},r.img_tab_friend_i=function(){var e=new eui.Image;return this.img_tab_friend=e,e.source="rank-tab-friend.png",e.visible=!1,e.x=0,e.y=0,e},r.btn_world_i=function(){var e=new eui.Group;return this.btn_world=e,e.height=60,e.left=0,e.width=189,e},r.btn_friend_i=function(){var e=new eui.Group;return this.btn_friend=e,e.height=60,e.right=0,e.width=189,e},r.rect_white_bar_i=function(){var e=new eui.Rect;return this.rect_white_bar=e,e.fillColor=16777215,e.height=3,e.horizontalCenter=0,e.visible=!1,e.width=617,e.y=345,e},r.view_stack_i=function(){var e=new eui.ViewStack;return this.view_stack=e,e.horizontalCenter=0,e.selectedIndex=0,e.visible=!1,e.y=372,e.elementsContent=[this.gp_world_i(),this.gp_friend_i()],e},r.gp_world_i=function(){var e=new eui.Group;return this.gp_world=e,e.percentHeight=100,e.name="视图",e.percentWidth=100,e.elementsContent=[this._Scroller1_i(),this.node_world_i()],e},r._Scroller1_i=function(){var e=new eui.Scroller;return e.height=578,e.horizontalCenter=0,e.scaleX=1,e.scaleY=1,e.viewport=this._Group3_i(),e},r._Group3_i=function(){var e=new eui.Group;return e.elementsContent=[this.list_world_i()],e},r.list_world_i=function(){var e=new eui.List;return this.list_world=e,e.horizontalCenter=0,e.itemRenderer=WorldRankItemRender,e.itemRendererSkinName=WorldRankItemRenderSkin,e.scaleX=1,e.scaleY=1,e.layout=this._VerticalLayout2_i(),e},r._VerticalLayout2_i=function(){var e=new eui.VerticalLayout;return e.gap=10,e},r.node_world_i=function(){var e=new WorldRankItemRender;return this.node_world=e,e.height=74,e.top=611,e},r.gp_friend_i=function(){var e=new eui.Group;return this.gp_friend=e,e.percentHeight=100,e.name="视图",e.scaleX=1,e.scaleY=1,e.percentWidth=100,e.elementsContent=[this._Scroller2_i(),this.btn_share_i(),this.node_friend_i()],e},r._Scroller2_i=function(){var e=new eui.Scroller;return e.height=494,e.horizontalCenter=0,e.scaleX=1,e.scaleY=1,e.viewport=this._Group4_i(),e},r._Group4_i=function(){var e=new eui.Group;return e.elementsContent=[this.list_friend_i()],e},r.list_friend_i=function(){var e=new eui.List;return this.list_friend=e,e.horizontalCenter=0,e.itemRenderer=FriendRankItemRender,e.itemRendererSkinName=FriendRankItemRenderSkin,e.layout=this._VerticalLayout3_i(),e},r._VerticalLayout3_i=function(){var e=new eui.VerticalLayout;return e.gap=10,e},r.btn_share_i=function(){var e=new eui.Button;return this.btn_share=e,e.horizontalCenter=0,e.icon="rank-icon-invite.png",e.label="I N V I T E",e.scaleX=1,e.scaleY=1,e.y=626,e.skinName=n,e},r.node_friend_i=function(){var e=new FriendRankItemRender;return this.node_friend=e,e.height=74,e.top=520,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ResultShareUI.exml"]=window.ResultShareUISkin=function(e){function t(){e.call(this),this.skinParts=["img_bg","img_mask","img_head","lbl_rank"],this.height=315,this.width=600,this.elementsContent=[this.img_bg_i(),this._Image1_i(),this._Group1_i(),this.lbl_rank_i()]}__extends(t,e);var i=t.prototype;return i.img_bg_i=function(){var e=new eui.Image;return this.img_bg=e,e.horizontalCenter=0,e.source="result-share.jpg",e.verticalCenter=0,e},i._Image1_i=function(){var e=new eui.Image;return e.source="result-name-bg.png",e.x=-6,e.y=203,e},i._Group1_i=function(){var e=new eui.Group;return e.x=46,e.y=60,e.elementsContent=[this._Image2_i(),this.img_mask_i(),this.img_head_i(),this._Image3_i()],e},i._Image2_i=function(){var e=new eui.Image;return e.source="result-head.png",e.x=0,e.y=0,e},i.img_mask_i=function(){var e=new eui.Image;return this.img_mask=e,e.horizontalCenter=0,e.source="result-head-mask.png",e.verticalCenter=0,e},i.img_head_i=function(){var e=new eui.Image;return this.img_head=e,e.height=123,e.horizontalCenter=0,e.source="result-head-mask.png",e.verticalCenter=0,e.width=123,e},i._Image3_i=function(){var e=new eui.Image;return e.scaleX=1.1,e.scaleY=1.1,e.source="share-common-point.png",e.x=97,e.y=5,e},i.lbl_rank_i=function(){var e=new eui.Label;return this.lbl_rank=e,e.horizontalCenter=-179,e.size=55,e.text="Label",e.y=207,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ReviveView.exml"]=window.ReviveViewSkin=function(e){function t(){e.call(this),this.skinParts=["txt_ranking","img_progressbar_black","img_progressbar_yellow","img_wheel","group_progressbar","txt_percent","img_greenbg","img_revive","group_revive","btn_continue","group_nothanks"],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i(),this.txt_ranking_i(),this.group_progressbar_i(),this._Group1_i(),this.group_revive_i(),this.btn_continue_i(),this.group_nothanks_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_btn_continue_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_btn_continue.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","game_btn_no_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="game_btn_no.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),r=t.prototype;return r._Image1_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.source="relife_example.jpg",e.visible=!1,e.percentWidth=100,e},r.txt_ranking_i=function(){var e=new eui.Label;return this.txt_ranking=e,e.horizontalCenter=0,e.size=60,e.text="1 nd",e.visible=!1,e.y=140,e},r.group_progressbar_i=function(){var e=new eui.Group;return this.group_progressbar=e,e.height=26,e.horizontalCenter=0,e.visible=!1,e.width=499,e.y=224,e.elementsContent=[this._Image2_i(),this.img_progressbar_black_i(),this.img_progressbar_yellow_i(),this.img_wheel_i()],e},r._Image2_i=function(){var e=new eui.Image;return e.right=3,e.scaleX=1.13,e.scaleY=1.13,e.source="game-flag.png",e.y=-37,e},r.img_progressbar_black_i=function(){var e=new eui.Image;return this.img_progressbar_black=e,e.scaleX=1.13,e.scaleY=1.13,e.source="game-progressbar-black.png",e},r.img_progressbar_yellow_i=function(){var e=new eui.Image;return this.img_progressbar_yellow=e,e.scaleX=1.13,e.scaleY=1.13,e.source="game-progressbar-yellow.png",e},r.img_wheel_i=function(){var e=new eui.Image;return this.img_wheel=e,e.anchorOffsetX=13,e.anchorOffsetY=12.5,e.scaleX=1.13,e.scaleY=1.13,e.source="game-wheel.png",e.x=0,e.y=2.5,e},r._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.visible=!1,e.y=268,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this.txt_percent_i(),this._Label1_i()],e},r._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=24,e},r.txt_percent_i=function(){var e=new eui.Label;return this.txt_percent=e,e.size=48,e.text="45%",e.textColor=52479,e.x=0,e.y=0,e},r._Label1_i=function(){var e=new eui.Label;return e.size=48,e.text="COMPLETED",e.x=0,e.y=0,e},r.group_revive_i=function(){var e=new eui.Group;return this.group_revive=e,e.height=308,e.horizontalCenter=-19.5,e.width=301,e.y=280,e.layout=this._BasicLayout1_i(),e.elementsContent=[this._Image3_i(),this.img_greenbg_i(),this.img_revive_i()],e},r._BasicLayout1_i=function(){var e=new eui.BasicLayout;return e},r._Image3_i=function(){var e=new eui.Image;return e.height=343,e.horizontalCenter=21,e.source="revive-icon-black.png",e.width=343,e},r.img_greenbg_i=function(){var e=new eui.Image;return this.img_greenbg=e,e.horizontalCenter=21,e.source="revive-icon-green.png",e},r.img_revive_i=function(){var e=new eui.Image;return this.img_revive=e,e.horizontalCenter=20.5,e.source="revive-icon-revive.png",e.verticalCenter=18,e},r.btn_continue_i=function(){var e=new eui.Button;return this.btn_continue=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=100,e.horizontalCenter=0,e.icon="revive-icon-ad.png",e.label="",e.scaleX=1,e.scaleY=1,e.width=450,e.y=694,e.skinName=i,e},r.group_nothanks_i=function(){var e=new eui.Button;return this.group_nothanks=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=44,e.horizontalCenter=-17.5,e.icon="revive-icon-ad.png",e.label="",e.scaleX=1,e.scaleY=1,e.width=249,e.y=838,e.skinName=n,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ScrollerSkin.exml"]=window.skins.ScrollerSkin=function(e){function t(){e.call(this),this.skinParts=["horizontalScrollBar","verticalScrollBar"],this.minHeight=20,this.minWidth=20,this.elementsContent=[this.horizontalScrollBar_i(),this.verticalScrollBar_i()]}__extends(t,e);var i=t.prototype;return i.horizontalScrollBar_i=function(){var e=new eui.HScrollBar;return this.horizontalScrollBar=e,e.autoVisibility=!1,e.bottom=0,e.visible=!1,e.percentWidth=100,e},i.verticalScrollBar_i=function(){var e=new eui.VScrollBar;return this.verticalScrollBar=e,e.autoVisibility=!1,e.percentHeight=100,e.right=0,e.visible=!1,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/SkinItemRender.exml"]=window.SkinItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["mask_rect","img_skin_icon","unhave_mask","img_selected"],this.currentState="up",this.height=156,this.minHeight=50,this.minWidth=100,this.width=155,this.elementsContent=[this._Image1_i(),this.mask_rect_i(),this.img_skin_icon_i(),this.unhave_mask_i()],this.img_selected_i(),this.states=[new eui.State("up",[]),new eui.State("upAndSelected",[new eui.AddItems("img_selected","",1,"")])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.horizontalCenter=1,e.source="skin-bg.png",e.y=5,e},i.mask_rect_i=function(){var e=new eui.Rect;return this.mask_rect=e,e.anchorOffsetY=0,e.bottom=6,e.fillAlpha=1,e.fillColor=6120564,e.height=145,e.visible=!1,e.width=144,e.x=6,e},i.img_skin_icon_i=function(){var e=new eui.Image;return this.img_skin_icon=e,e.horizontalCenter=0,e.source="",e.verticalCenter=0,e},i.unhave_mask_i=function(){var e=new eui.Image;return this.unhave_mask=e,e.bottom=0,e.source="skin-bg-unlocked.png",e.x=6,e},i.img_selected_i=function(){var e=new eui.Image;return this.img_selected=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.source="skin-selected.png",e.x=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/SkinView.exml"]=window.SkinViewSkin=function(e){function t(){e.call(this),this.skinParts=["btn_home","img_tab_video","img_tab_star","btn_video","btn_star","gp_tab_bar","rect_white_bar","gp_skin","sc_skins","list_page_indicator","btn_ad","btn_play","btn_friends","img_exbg","btn_star_count","img_exmerage","lb_ex","show_ex","nowimg","nowimg_notice"],this.height=1136,this.width=640,this.elementsContent=[this._Image1_i(),this.btn_home_i(),this._Label1_i(),this.gp_tab_bar_i(),this.rect_white_bar_i(),this._Image2_i(),this.sc_skins_i(),this.list_page_indicator_i(),this.btn_ad_i(),this.btn_play_i(),this.btn_friends_i(),this.show_ex_i(),this.nowimg_i(),this.nowimg_notice_i()]}__extends(t,e);var i=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","return_main_down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="return_main.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),n=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","skin_btn_movie.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="skin_btn_movie.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),r=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","skin-btn-play-down.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="skin-btn-play.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),o=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","skin_btn_invite.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="skin_btn_invite.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),a=function(e){function t(){e.call(this),this.skinParts=["labelDisplay"],this.elementsContent=[this._Image1_i(),this.labelDisplay_i()],this.states=[new eui.State("up",[]),new eui.State("down",[new eui.SetProperty("_Image1","source","skin_btn_invite.png")]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.percentHeight=100,e.source="skin_btn_invite.png",e.percentWidth=100,e},i.labelDisplay_i=function(){var e=new eui.Label;return this.labelDisplay=e,e.horizontalCenter=0,e.verticalCenter=0,e},t}(eui.Skin),s=t.prototype;return s._Image1_i=function(){var e=new eui.Image;return e.anchorOffsetX=0,e.anchorOffsetY=0,e.percentHeight=100,e.source="skin_example.jpg",e.visible=!1,e.percentWidth=100,e.x=0,e.y=6,e},s.btn_home_i=function(){var e=new eui.Button;return this.btn_home=e,e.enabled=!0,e.label="",e.x=0,e.y=0,e.skinName=i,e},s._Label1_i=function(){var e=new eui.Label;return e.horizontalCenter=0,e.size=56,e.text="S K I N S",e.visible=!1,e.y=74,e},s.gp_tab_bar_i=function(){var e=new eui.Group;
return this.gp_tab_bar=e,e.horizontalCenter=0,e.visible=!1,e.y=150,e.elementsContent=[this.img_tab_video_i(),this.img_tab_star_i(),this.btn_video_i(),this.btn_star_i()],e},s.img_tab_video_i=function(){var e=new eui.Image;return this.img_tab_video=e,e.source="skin-tab-video.png",e},s.img_tab_star_i=function(){var e=new eui.Image;return this.img_tab_star=e,e.source="skin-tab-star.png",e.visible=!1,e.x=0,e.y=0,e},s.btn_video_i=function(){var e=new eui.Group;return this.btn_video=e,e.height=60,e.left=0,e.width=189,e},s.btn_star_i=function(){var e=new eui.Group;return this.btn_star=e,e.height=60,e.right=0,e.width=189,e},s.rect_white_bar_i=function(){var e=new eui.Rect;return this.rect_white_bar=e,e.fillColor=16777215,e.height=3,e.horizontalCenter=0,e.visible=!1,e.width=617,e.y=220,e},s._Image2_i=function(){var e=new eui.Image;return e.height=680,e.horizontalCenter=0,e.scaleX=1,e.scaleY=1,e.source="skin_bg2.png",e.percentWidth=90,e.y=250,e},s.sc_skins_i=function(){var e=new eui.Scroller;return this.sc_skins=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=600,e.horizontalCenter=0,e.percentWidth=90,e.y=316,e.viewport=this.gp_skin_i(),e},s.gp_skin_i=function(){var e=new eui.Group;return this.gp_skin=e,e.height=576,e.width=576,e.layout=this._HorizontalLayout1_i(),e},s._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=0,e},s.list_page_indicator_i=function(){var e=new eui.List;return this.list_page_indicator=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=1,e.horizontalCenter=0,e.itemRendererSkinName=PageIndicatorItemRenderSkin,e.width=200,e.y=941,e.layout=this._HorizontalLayout2_i(),e},s._HorizontalLayout2_i=function(){var e=new eui.HorizontalLayout;return e.gap=16,e},s.btn_ad_i=function(){var e=new eui.Button;return this.btn_ad=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.height=110,e.horizontalCenter=0,e.icon="skin-icon-ad.png",e.label="0/1",e.scaleX=1,e.scaleY=1,e.visible=!1,e.width=360,e.y=980,e.skinName=n,e},s.btn_play_i=function(){var e=new eui.Button;return this.btn_play=e,e.horizontalCenter=0,e.label="",e.visible=!1,e.width=360,e.y=980,e.skinName=r,e},s.btn_friends_i=function(){var e=new eui.Button;return this.btn_friends=e,e.height=120,e.horizontalCenter=0,e.icon="skin-icon-star.png",e.label="0/500",e.scaleX=1,e.scaleY=1,e.visible=!1,e.width=360,e.y=980,e.skinName=o,e},s.show_ex_i=function(){var e=new eui.Group;return this.show_ex=e,e.height=120,e.width=360,e.x=140,e.y=980,e.elementsContent=[this.img_exbg_i(),this.btn_star_count_i(),this.img_exmerage_i(),this.lb_ex_i()],e},s.img_exbg_i=function(){var e=new eui.Image;return this.img_exbg=e,e.percentHeight=100,e.scaleX=1,e.scaleY=1,e.source="skin_exbg.png",e.percentWidth=100,e.x=0,e.y=0,e},s.btn_star_count_i=function(){var e=new eui.Button;return this.btn_star_count=e,e.height=120,e.horizontalCenter=0,e.icon="skin-icon-star.png",e.label="0/500",e.scaleX=1,e.scaleY=1,e.width=360,e.y=980,e.skinName=a,e},s.img_exmerage_i=function(){var e=new eui.Image;return this.img_exmerage=e,e.percentHeight=100,e.source="skin_exmerage.png",e.percentWidth=100,e.x=0,e.y=0,e},s.lb_ex_i=function(){var e=new eui.Label;return this.lb_ex=e,e.bold=!0,e.fontFamily="Arial",e.percentHeight=100,e.size=40,e.text="43445",e.textAlign="center",e.verticalAlign="middle",e.percentWidth=100,e.x=0,e.y=0,e},s.nowimg_i=function(){var e=new eui.Image;return this.nowimg=e,e.height=120,e.horizontalCenter=0,e.width=120,e.y=66,e},s.nowimg_notice_i=function(){var e=new eui.Label;return this.nowimg_notice=e,e.anchorOffsetX=0,e.anchorOffsetY=0,e.bold=!0,e.height=40,e.horizontalCenter=0,e.text="",e.textAlign="center",e.verticalAlign="middle",e.width=450,e.y=196.36,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/TextInputSkin.exml"]=window.skins.TextInputSkin=function(e){function t(){e.call(this),this.skinParts=["textDisplay","promptDisplay"],this.minHeight=40,this.minWidth=300,this.elementsContent=[this._Image1_i(),this._Rect1_i(),this.textDisplay_i()],this.promptDisplay_i(),this.states=[new eui.State("normal",[]),new eui.State("disabled",[new eui.SetProperty("textDisplay","textColor",16711680)]),new eui.State("normalWithPrompt",[new eui.AddItems("promptDisplay","",1,"")]),new eui.State("disabledWithPrompt",[new eui.AddItems("promptDisplay","",1,"")])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.percentHeight=100,e.scale9Grid=new egret.Rectangle(1,3,8,8),e.source="button_up_png",e.percentWidth=100,e},i._Rect1_i=function(){var e=new eui.Rect;return e.fillColor=16777215,e.percentHeight=100,e.percentWidth=100,e},i.textDisplay_i=function(){var e=new eui.EditableText;return this.textDisplay=e,e.height=24,e.left="10",e.right="10",e.size=20,e.textColor=0,e.verticalCenter="0",e.percentWidth=100,e},i.promptDisplay_i=function(){var e=new eui.Label;return this.promptDisplay=e,e.height=24,e.left=10,e.right=10,e.size=20,e.textColor=11119017,e.touchEnabled=!1,e.verticalCenter=0,e.percentWidth=100,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/Toast.exml"]=window.ToastSkin=function(e){function t(){e.call(this),this.skinParts=["text_node"],this.height=58,this.width=597,this.elementsContent=[this._Image1_i(),this.text_node_i()]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return e.left=0,e.right=0,e.source="toast_bg.png",e},i.text_node_i=function(){var e=new eui.Label;return this.text_node=e,e.horizontalCenter=0,e.size=33,e.text="Label",e.textColor=1838091,e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/ToggleSwitchSkin.exml"]=window.skins.ToggleSwitchSkin=function(e){function t(){e.call(this),this.skinParts=[],this.elementsContent=[this._Image1_i(),this._Image2_i()],this.states=[new eui.State("up",[new eui.SetProperty("_Image1","source","off_png")]),new eui.State("down",[new eui.SetProperty("_Image1","source","off_png")]),new eui.State("disabled",[new eui.SetProperty("_Image1","source","off_png")]),new eui.State("upAndSelected",[new eui.SetProperty("_Image2","horizontalCenter",18)]),new eui.State("downAndSelected",[new eui.SetProperty("_Image2","horizontalCenter",18)]),new eui.State("disabledAndSelected",[new eui.SetProperty("_Image2","horizontalCenter",18)])]}__extends(t,e);var i=t.prototype;return i._Image1_i=function(){var e=new eui.Image;return this._Image1=e,e.source="on_png",e},i._Image2_i=function(){var e=new eui.Image;return this._Image2=e,e.horizontalCenter=-18,e.source="handle_png",e.verticalCenter=0,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/VScrollBarSkin.exml"]=window.skins.VScrollBarSkin=function(e){function t(){e.call(this),this.skinParts=[],this.minHeight=20,this.minWidth=8}__extends(t,e);t.prototype;return t}(eui.Skin),generateEUI.paths["resource/eui_skins/VSliderSkin.exml"]=window.skins.VSliderSkin=function(e){function t(){e.call(this),this.skinParts=["track","thumb"],this.minHeight=30,this.minWidth=25,this.elementsContent=[this.track_i(),this.thumb_i()]}__extends(t,e);var i=t.prototype;return i.track_i=function(){var e=new eui.Image;return this.track=e,e.percentHeight=100,e.horizontalCenter=0,e.scale9Grid=new egret.Rectangle(1,1,4,4),e.source="track_png",e.visible=!1,e.width=7,e},i.thumb_i=function(){var e=new eui.Image;return this.thumb=e,e.horizontalCenter=0,e.source="thumb_png",e.visible=!1,e},t}(eui.Skin),generateEUI.paths["resource/eui_skins/WorldRankItemRender.exml"]=window.WorldRankItemRenderSkin=function(e){function t(){e.call(this),this.skinParts=["img_bar","img_portrait_bg","img_portrait_mask","img_portrait","gp_portrait","img_rank_bg","txt_rank","txt_name","img_skin","gp_skin","txt_score"],this.minHeight=50,this.minWidth=100,this.elementsContent=[this.img_bar_i(),this._Group4_i()],this.states=[new eui.State("up",[]),new eui.State("down",[]),new eui.State("disabled",[])]}__extends(t,e);var i=t.prototype;return i.img_bar_i=function(){var e=new eui.Image;return this.img_bar=e,e.scale9Grid=new egret.Rectangle(72,0,302,74),e.source="rank-bar-unnamed.png",e},i._Group4_i=function(){var e=new eui.Group;return e.anchorOffsetY=0,e.height=69,e.percentWidth=100,e.elementsContent=[this._Group3_i(),this.txt_name_i(),this.gp_skin_i(),this.txt_score_i()],e},i._Group3_i=function(){var e=new eui.Group;return e.verticalCenter=0,e.x=8,e.elementsContent=[this.gp_portrait_i(),this._Group2_i()],e},i.gp_portrait_i=function(){var e=new eui.Group;return this.gp_portrait=e,e.elementsContent=[this.img_portrait_bg_i(),this.img_portrait_mask_i(),this.img_portrait_i()],e},i.img_portrait_bg_i=function(){var e=new eui.Image;return this.img_portrait_bg=e,e.source="rank-portrait-rankn.png",e},i.img_portrait_mask_i=function(){var e=new eui.Image;return this.img_portrait_mask=e,e.horizontalCenter=0,e.source="rank-mask-portrait.png",e.verticalCenter=0,e},i.img_portrait_i=function(){var e=new eui.Image;return this.img_portrait=e,e.height=63,e.horizontalCenter=0,e.source="default_portrait.png",e.verticalCenter=0,e.width=64,e},i._Group2_i=function(){var e=new eui.Group;return e.bottom=0,e.left=54,e.elementsContent=[this.img_rank_bg_i(),this._Group1_i()],e},i.img_rank_bg_i=function(){var e=new eui.Image;return this.img_rank_bg=e,e.scale9Grid=new egret.Rectangle(7,7,15,15),e.source="rank-rankn.png",e.percentWidth=100,e},i._Group1_i=function(){var e=new eui.Group;return e.horizontalCenter=0,e.verticalCenter=0,e.layout=this._HorizontalLayout1_i(),e.elementsContent=[this.txt_rank_i()],e},i._HorizontalLayout1_i=function(){var e=new eui.HorizontalLayout;return e.gap=0,e.paddingLeft=6,e.paddingRight=6,e},i.txt_rank_i=function(){var e=new eui.Label;return this.txt_rank=e,e.size=20,e.text="1",e.x=0,e.y=0,e},i.txt_name_i=function(){var e=new eui.Label;return this.txt_name=e,e.height=27,e.left=105,e.size=27,e.text="",e.textColor=7960961,e.verticalCenter=2,e.width=150,e},i.gp_skin_i=function(){var e=new eui.Group;return this.gp_skin=e,e.right=169,e.verticalCenter=0,e.elementsContent=[this.img_skin_i()],e},i.img_skin_i=function(){var e=new eui.Image;return this.img_skin=e,e.height=46,e.source="default_ball.png",e.verticalCenter=0,e.width=46,e.x=0,e},i.txt_score_i=function(){var e=new eui.Label;return this.txt_score=e,e.height=27,e.right=10,e.size=27,e.stroke=2,e.strokeColor=1788103,e.text="0",e.textAlign="center",e.textColor=16777215,e.verticalCenter=2,e.width=80,e},t}(eui.Skin);var __reflect=this&&this.__reflect||function(e,t,i){e.__class__=t,i?i.push(t):i=[t],e.__types__=e.__types__?i.concat(e.__types__):i},__extends=this&&this.__extends||function(e,t){function i(){this.constructor=e}for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);i.prototype=t.prototype,e.prototype=new i},__awaiter=this&&this.__awaiter||function(e,t,i,n){return new(i||(i=Promise))(function(r,o){function a(e){try{l(n.next(e))}catch(t){o(t)}}function s(e){try{l(n["throw"](e))}catch(t){o(t)}}function l(e){e.done?r(e.value):new i(function(t){t(e.value)}).then(a,s)}l((n=n.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function i(e){return function(t){return n([e,t])}}function n(i){if(r)throw new TypeError("Generator is already executing.");for(;l;)try{if(r=1,o&&(a=o[2&i[0]?"return":i[0]?"throw":"next"])&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[0,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,o=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(a=l.trys,!(a=a.length>0&&a[a.length-1])&&(6===i[0]||2===i[0])){l=0;continue}if(3===i[0]&&(!a||i[1]>a[0]&&i[1]<a[3])){l.label=i[1];break}if(6===i[0]&&l.label<a[1]){l.label=a[1],a=i;break}if(a&&l.label<a[2]){l.label=a[2],l.ops.push(i);break}a[2]&&l.ops.pop(),l.trys.pop();continue}i=t.call(e,l)}catch(n){i=[6,n],o=0}finally{r=a=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}var r,o,a,s,l={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:i(0),"throw":i(1),"return":i(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s},BaseUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){app.registResponser(this)},t.prototype.onExit=function(){app.unregistResponser(this)},t.prototype.onReady=function(){},t.prototype.listResponse=function(){return[]},t.prototype.doResponse=function(e,t){},t}(eui.Component);__reflect(BaseUI.prototype,"BaseUI",["eui.UIComponent","egret.DisplayObject","IResponder"]),Object.defineProperty(egret.TextField.prototype,"htmlText",{get:function(){return this._htmlText},set:function(e){if(this.__htmlText!=e){this._htmlText=e;try{this.textFlow=(new egret.HtmlTextParser).parse(e)}catch(t){this.text=e}}},enumerable:!0,configurable:!0}),Float32Array.prototype.forEach=Float32Array.prototype.forEach||function(e){for(var t=0;t<this.length;++t)e(this[t],t,this)},egret.DisplayObject.prototype.removeFromParent=function(){this.parent&&this.parent.removeChild(this)},Object.defineProperty(egret.DisplayObject.prototype,"scale",{get:function(){return this.scaleX},set:function(e){this.scaleX=this.scaleY=e},enumerable:!0,configurable:!0}),egret.EventDispatcher.prototype.removeAllEventListeners=function(){var e=this.$EventDispatcher,t=[e[2],e[1]];t.forEach(function(e){for(var t in e){var i=e[t];i&&(e[t]=null)}})},egret.EventDispatcher.prototype.removeEventListenerOfType=function(e){var t=this.$EventDispatcher,i=[t[2],t[1]];i.forEach(function(t){delete t[e]})},Object.defineProperty(eui.BasicLayout.prototype,"useVirtualLayout",{get:function(){return this.$useVirtualLayout},set:function(e){this.$useVirtualLayout=!1},enumerable:!0,configurable:!0}),"function"!=typeof Object.assign&&(Object.assign=function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(e),n=1;n<arguments.length;n++){var r=arguments[n];if(null!=r)for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(i[o]=r[o])}return i}),Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e},Date.prototype.formatUTC=function(e){var t={"M+":this.getUTCMonth()+1,"d+":this.getUTCDate(),"h+":this.getUTCHours(),"m+":this.getUTCMinutes(),"s+":this.getUTCSeconds(),"q+":Math.floor((this.getUTCMonth()+3)/3),S:this.getUTCMilliseconds()};/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getUTCFullYear()+"").substr(4-RegExp.$1.length)));for(var i in t)new RegExp("("+i+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[i]:("00"+t[i]).substr((""+t[i]).length)));return e};var _isNaN=isNaN;window.isNaN=function(e){return null===e||_isNaN(e)},String.prototype.substitute=function(e){return this.replace(/\{(.+?)\}/gi,function(t,i){return e[i]})},Date.week=function(e){void 0===e&&(e=2521);var t=-252e5,i=~~((Date.now()+t+864e5)/6048e5)-e-1;return i},Date.days=function(e){void 0===e&&(e=0);var t=-252e5,i=~~((Date.now()+t+864e5)/864e5)-e-1;return i},Array.prototype.random=function(e){if(void 0===e&&(e=!1),0==this.length)return null;var t=Math.floor(this.length*Math.random()),i=this[t];return e&&this.splice(t,1),i},Array.prototype.choice=function(e){if(0==this.length)return null;void 0==e&&(e=function(e){return e});for(var t=this.reduce(function(t,i){return t+e(i)},0)*Math.random(),i=this.length,n=0;i>n;n++){var r=e(this[n]);if(r>t)return this[n];t-=r}return this[i-1]},Array.prototype.unique=function(){for(var e=[],t=0;t<this.length;){this[t];e.indexOf(this[t])>=0?this.splice(t,1):e.push(this[t++])}return this},Array.prototype.sorton=function(e,t){return void 0===t&&(t=!0),this.sort(function(i,n){var r=i[e]||0,o=n[e]||0,a=r>o?1:o>r?-1:0;return t||(a*=-1),a})},Array.prototype.shuffle=function(){for(var e=this.length-1;e>0;e--){var t=Math.floor(Math.random()*e);i=[this[t],this[e]],this[e]=i[0],this[t]=i[1]}return this;var i},Array.prototype.rm=function(e){for(var t="function"==typeof e?e:function(t){return t==e},i=0;i<this.length;){var n=this[i];if(t(n))return this.splice(i,1),!0;i++}return!1},Array.prototype.next=function(){return(void 0==this._iter_index||this._iter_index>=this.length)&&(this._iter_index=0),this[this._iter_index++]};var Emiter=function(){function e(){this.maps={},this.uid=0,this._duringEmit=!1}return e.prototype.add=function(e,t,i,n,r){i=i||null,n=n||0;var o=this.uid++,a=this.maps[e]||[];return a.push([o,t,i,n,r]),this.maps[e]=a,a.sort(function(e,t){return e[3]<t[3]}),o},e.prototype.on=function(e,t,i,n){return this.add(e,t,i,n,!1)},e.prototype.once=function(e,t,i,n){return this.add(e,t,i,n,!0)},e.prototype.race=function(e,t,i,n){for(var r=this,o=[],a=!1,s=function(e){for(var n=[],s=1;s<arguments.length;s++)n[s-1]=arguments[s];a=!0,o.forEach(function(e){return r.rm(e[0],e[1])}),t.apply(i,[e].concat(n))},l=0,u=e;l<u.length;l++){var c=u[l];if(a)break;o.push([this.once(c,Utils.closure(s,c),i,n),c])}},e.prototype.rm=function(e,t){for(var i=t?[t]:Object.keys(this.maps),n=0,r=i;n<r.length;n++){var o=r[n],a=this.maps[o];if(a){this._duringEmit&&(this.maps[o]=a=a.concat());for(var s=0;s<a.length;){var l=a[s],u=l[0];l[1],l[2],l[3],l[4];if(u==e)return a.splice(s,1),!0;s++}}}return!1},e.prototype.rmall=function(e){void 0==e?this.maps={}:delete this.maps[e]},e.prototype.emit=function(t,i){var n=this.maps[t];if(n&&n.length>0){for(var r=0;r<n.length;){var o=n[r],a=(o[0],o[1]),s=o[2],l=(o[3],o[4]);l?n.splice(r,1):r++,this._duringEmit=!0;var u=a.call(s,i);if(this._duringEmit=!1,u==e.CONST["break"])break}return!0}return!1},e.CONST={"break":{}},e}();__reflect(Emiter.prototype,"Emiter");var Facade=function(){function e(){this._responders=[],this._commands={},e.inst=this,this.emiter=new Emiter}return e.prototype.registResponser=function(e){if(this._responders.some(function(t){return t.res==e}))throw"this responser has been registed already!";for(var t=e.listResponse(),i=[],n=function(t){var n=r.emiter.on(t,function(i){e.doResponse(t,i)});i.push({name:t,id:n})},r=this,o=0,a=t;o<a.length;o++){var s=a[o];n(s)}this._responders.push({res:e,ids:i})},e.prototype.unregistResponser=function(e){for(var t=0,i=this._responders;t<i.length;t++){var n=i[t];if(n.res==e){for(var r=n.ids,o=0,a=r;o<a.length;o++){var s=a[o];this.emiter.rm(s.id,s.name)}this._responders.splice(this._responders.indexOf(n),1);break}}},e.prototype.registCommand=function(e,t){if(this._commands[e])throw"cmd has been registed already!!!";var i=this.emiter.on(e,function(i){console.log("cmd",e),(new t).excute(i,e)});this._commands[e]=i},e.prototype.unregistCommand=function(e){var t=this._commands[e];t&&this.emiter.rm(t,e)},e.prototype.notify=function(e,t){return this.emiter.emit(e,t)},e.prototype.dispose=function(){this.emiter.rmall(),this._responders.length=0},e}();__reflect(Facade.prototype,"Facade");var BasePopup=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.autoClose=!1,t.modal=!0,t.modalAlpha=.6,t.animateIn=!0,t.fullscreen=!0,t.center=!0,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btn_close&&this.btn_close.addEventListener(egret.TouchEvent.TOUCH_TAP,this.close,this)},t.prototype.fadeIn=function(){return this.alpha=0,egret.Tween.get(this).to({alpha:1},400,egret.Ease.quadOut)},t.prototype.close=function(){this.dispatchEventWith(egret.Event.CLOSE)},t}(BaseUI);__reflect(BasePopup.prototype,"BasePopup");var PlayerBase=function(){function e(){this.oldFBXs=["3","5","6"],this._invincible=!1,this.BoostFXInterval=.15,this.boostFXInterval=0,this.BoostTime=1.5,this.boostTime=0,this.boost=0,this.boostLevel=0,this._slowdown=!1,this._jumpUpTime=0,this._speedY=0,this._jumping=!1,this.dead=!1;var t=Res3DManager.getMeshFromFBX("ball_1","ball.fbx"),i=t.geometry,n=new tr.MeshPhongMaterial({map:Res3DManager.createTexture("ball.jpg")});this.ball=new tr.Mesh(i,n),this.ball.scale.setScalar(GameConstant.FBXScale),this.group=new tr.Group,Game.inst.scene.add(this.group),this.group2=new tr.Group,this.group.add(this.group2),this.group2.add(this.ball),this.trail=new Trail,this.trail.mesh.position.y=-GameConstant.BallR+.05,this.trail.mesh.position.z=-.3,this.group2.add(this.trail.mesh),!e.shadowGeo&&(e.shadowGeo=new tr.PlaneGeometry(1,1)),!e.shadowMtl&&(e.shadowMtl=new tr.MeshBasicMaterial({transparent:!0,map:Res3DManager.createTexture("shadow.png")}));var r=new tr.Mesh(e.shadowGeo,e.shadowMtl);r.position.y=-GameConstant.BallR+.1,r.rotation.x=.5*-Math.PI,this.group.add(r),this.reset()}return e.prototype.setSkin=function(e,t){var i=this;void 0===t&&(t=!0);var n=DB_skin.get(e),r=Res3DManager.getMeshFromFBX("ball_"+n.fbx,"ball.fbx");this.ball.geometry=r.geometry,this.ball.scale.setScalar(this.oldFBXs.includes(n.fbx)?5.5*GameConstant.FBXScale/8:GameConstant.FBXScale),this.ball.rotation.y=0,Res3DManager.getImage(n.tex)||Res3DManager.preload(null,"skin/"+n.tex),Res3DManager.createTextureAsync(n.tex).then(function(e){i.ball.material.map=e,t&&Game.inst.world.render()})},e.prototype.reset=function(){this.ball.rotation.x=-.5*Math.PI,this.group2.position.y=0,this.group.position.set(0,0,0),this.trail.reset(),this._obsPage=1/0,this._obsCrt=void 0,this.boost=0,this.dead=!1,this._invincible=!1,this._speed=GameConstant.BaseSpeed,this._slowdown=!1,this.group.visible=!0},e.prototype.onBoostChange=function(){this.boost>1&&(this.boost=1),this.boostTime=this.boost>0?this.BoostTime:0},e.prototype.onHitBoost=function(){},e.prototype.updateBoost=function(e){if(this.boost>0&&(this.boostFXInterval-=e)<=0){this.boostFXInterval=this.BoostFXInterval;var t=ObjectPool.inst.get(PlayerBoostSprite);t.reset(),this.group.add(t.sprite)}this.boostLevel>this.boost&&(this.boostLevel-=e),this.boostLevel<this.boost&&(this.boostLevel=this.boost),this.boost>0&&this.boostTime>0&&(this.boostTime-=e)<=0&&(this.boost--,this.onBoostChange())},e.prototype.slowDown=function(){this._slowdown=!0},e.prototype.update=function(e){this.updateZ(e),this.updateBoost(e),this.checkCollision(),this.updateJump(e),this.trail.update()},e.prototype.updateZ=function(e){var t=e*this.currentSpeed;this._slowdown&&this._speed>0&&(this._speed-=30*e,this._speed<0&&(this._speed=0)),this.group.position.z-=t,this.ball.rotation.x-=.5*t},Object.defineProperty(e.prototype,"currentSpeed",{get:function(){return this._speed+this.boostLevel*GameConstant.PlayerBoostLevelSpeed},enumerable:!0,configurable:!0}),e.prototype.jump=function(){var e=this.currentSpeed;this._jumpUpTime=2/e,this._speedY=e/2,this._jumping=!0},e.prototype.updateJump=function(e){this._jumping&&(this._jumpUpTime>0?this._jumpUpTime-=e:this._speedY-=300*e,this.group2.position.y+=this._speedY*e,this.group2.position.y<0&&(this.group2.position.y=0,this._speedY*=-.6,this._speedY<10&&(this._speedY=0,this._jumping=!1)))},e.prototype.die=function(e){return void 0===e&&(e=!1),this.dead?!1:(this.dead=!0,this._jumping=!1,this.group.visible=!1,this.boost=this.boostLevel=0,e||this._obsCrt&&ObjectPool.inst.get(PlayerDieFx).reset(this.group.position.x,this._obsCrt.position.z+1.1),!0)},e.prototype.checkCollision=function(){var e=this.group.position,t=Game.inst.obstacleCtr.getObstaclePage(e.z);if(this._obsPage>t&&(this._obsCrt&&this.hitTestX(),this._obsCrt=Game.inst.obstacleCtr.getObstacleByPage(t),this._obsPage=t),this._obsCrt){var i=Math.abs(this._obsCrt.position.z-e.z);if(i>GameConstant.BallR+.5*GameConstant.ObsSize+.5)return;this.hitTestX(),this._obsCrt=null}this.dead&&(this._obsCrt=null,this._obsPage+=2)},e.prototype.hitTestX=function(){var e=this.getCollisionXRange(this._obsCrt.collisions);if(this._obsCrt instanceof Booster){var t=this.group.position.x,i=e.some(function(e){return t>e.min&&t<e.max});i&&(this.boost++,this.onBoostChange(),this.onHitBoost())}else{var n=this.group.position.x-GameConstant.BallR,r=this.group.position.x+GameConstant.BallR;this._obsCrt.moving&&(e=[{min:this._obsCrt.position.x-1,max:this._obsCrt.position.x+1}]);var i=e.some(function(e){return n>e.min&&n<e.max||r>e.min&&r<e.max});i?this._invincible||this.die():this._obsCrt.slope&&this.jump()}},e.prototype.getCollisionXRange=function(e){var t=[];return e.forEach(function(e){var i=1/0,n=-(1/0);e.forEach(function(e){var t=2*e-1,r=2*e+1;i>t&&(i=t),r>n&&(n=r)}),t.push({min:i,max:n})}),t},e}();__reflect(PlayerBase.prototype,"PlayerBase");var ObjectPool=function(){function e(){this.dictObj_={},this.dictInfo_=new Map}return e.init=function(){this.inst||(this.inst=new e)},e.prototype.register=function(e,t){for(var i=[],n=0;t>n;++n)i.push(new e);var r=i[0].name();this.dictInfo_.set(e,r),this.dictObj_[r]&&console.log("ObjectPool name dumplicate:",r),this.dictObj_[r]=i},e.prototype.get=function(e){var t,i=this.dictInfo_.get(e),n=this.dictObj_[i];return t=0===n.length?new e:n.pop()},e.prototype._collect=function(e){this.dictObj_[e.name()].push(e)},e}();__reflect(ObjectPool.prototype,"ObjectPool");var PoolObject=function(){function e(){}return e.prototype.dispose=function(){ObjectPool.inst._collect(this)},e}();__reflect(PoolObject.prototype,"PoolObject");var Tree=function(){function e(t){this.side=t,this.mesh=new tr.Mesh(e.geos[0],e.mtl),this.mesh.rotation.x=Math.PI*-.5}return e.prototype.reset=function(t){var i="shamo"!=GameConstant.Map;Game.inst.scene.add(this.mesh);var n=i?Utils.randomRange(4,6):Utils.randomRange(.5,1.5);this.mesh.geometry=Utils.randomInArr(e.geos),this.mesh.scale.setScalar(GameConstant.FBXScale*n),this.mesh.rotation.z=Math.random()<.5?Math.PI:0,this.mesh.position.y=i?-14+n*Utils.randomRange(-5,0):-GameConstant.BallR,this.mesh.position.z=t,i?this.mesh.position.x=Utils.randomRange(-4,4)+("l"==this.side?-1:1)*(10+1.2*n):this.mesh.position.x=Utils.randomRange(-2,2)+("l"==this.side?-12:12)},e.prototype.dispose=function(){Game.inst.scene.remove(this.mesh)},e.init=function(){var e=this;this.mtl=this.mtl||new tr.MeshPhongMaterial,this.geos.length=0;var t=!1,i=Res3DManager.getFBX(GameConstant.Map+".fbx").children;i.forEach(function(i){var n=i;0==i.name.indexOf("baijian_")&&(e.geos.push(n.geometry),!t&&(t=!0,e.mtl.map=n.material.map))})},e.geos=[],e}();__reflect(Tree.prototype,"Tree");var StartupCmd=function(){function e(){}return e.prototype.excute=function(e,t){egret.log("enter StartupCmd"),app.registCommand(AppConstant.Notify.game_ready,GameReadyCmd),app.registCommand(AppConstant.Notify.enter_game,EnterGameCmd)},e}();__reflect(StartupCmd.prototype,"StartupCmd",["ICommand"]);var DB_avatar=function(){function e(){}return e.get=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(n=e.getDB()).get.apply(n,t);var n},e.getall=function(){return e.getDB().getall()},e.getDB=function(){if(e._db)return e._db;var t=["id","name","pic","nation"],i={1:[1,"陳泓志","12873807677283737495.jpg","TW"],2:[2,"陳佳妤","12873808403677021326.jpg","TW"],3:[3,"陳泇均","12873808830617101718.jpg","TW"],4:[4,"侯東旻","12873807806326929395.jpg","TW"],5:[5,"Ab","1287380778390732511.jpg",""],6:[6,"Abdallah","12873807648877863745.jpg",""],7:[7,"Abdul","1287380849170386659.jpg",""],8:[8,"Abeer","12873808856763612727.jpg",""],9:[9,"Abid Hasan","1287380778538688847.jpg",""],10:[10,"Achraf","12873808918418401880.jpg",""],11:[11,"Adam","12873808641757049386.jpg",""],12:[12,"Agnieszka","12873808400804311646.jpg",""],13:[13,"Aiyanna Brielle","12873808006743628910.jpg",""],14:[14,"Ajizah","12873808526453141502.jpg",""],15:[15,"Alan","12873808936280551275.jpg",""],16:[16,"Alberto","128738072408598095.jpg",""],17:[17,"Aldjia","12873807708559382464.jpg",""],18:[18,"Alex","12873807738513456451.jpg",""],19:[19,"Alfredo","12873808970804848224.jpg",""],20:[20,"Alison","12873808168596984550.jpg",""],21:[21,"Alvaro Jose","12873807901319199959.jpg",""],22:[22,"Ami","1287380778385021886.jpg",""],23:[23,"Amila","12873808912836431803.jpg",""],24:[24,"Amira","12873807901337286342.jpg",""],25:[25,"Anca","12873808293378070847.jpg",""],26:[26,"Andrea","12873808062241766114.jpg",""],27:[27,"Anis","12873807944723442509.jpg",""],28:[28,"Aphen","12873807239768114429.jpg",""],29:[29,"Arlyn","12873808266085333926.jpg",""],30:[30,"Ashok","1287380811197376289.jpg",""],31:[31,"Asma","12873807713388486784.jpg",""],32:[32,"Audrey","12873808010540941287.jpg",""],33:[33,"Aunchalee","12873808567616854383.jpg",""],34:[34,"Avish","12873808799317010630.jpg",""],35:[35,"Aya","12873808085185925959.jpg",""],36:[36,"Aysegul","12873807244186767951.jpg",""],37:[37,"B-Claire","12873808618607758654.jpg",""],38:[38,"Bagus","12873808084401624209.jpg",""],39:[39,"Barbara","12873808104514807179.jpg",""],40:[40,"Bartek","12873807666510277310.jpg",""],41:[41,"Beto","1287380803142411231.jpg",""],42:[42,"Bình","12873807928538209986.jpg","VN"],43:[43,"Biser","1287380860313853428.jpg",""],44:[44,"Brandy","1287380769126249911.jpg",""],45:[45,"Carlos","12873807955510905985.jpg",""],46:[46,"Carmen","12873808881333077683.jpg",""],47:[47,"Cemal","12873808386552077131.jpg",""],48:[48,"Chí Tài","12873808200990569686.jpg","VN"],49:[49,"Chi Thái","1287380890918380839.jpg","VN"],50:[50,"Chiara","12873808171554091603.jpg",""],51:[51,"Chính","12873808852150773333.jpg","VN"],52:[52,"Christiane","12873807640375008459.jpg",""],53:[53,"Christiane","12873808515430713234.jpg",""],54:[54,"Con Trai","1287380802275841926.jpg",""],55:[55,"Cristian","12873807696194582191.jpg",""],56:[56,"Đại","1287380866017010876.jpg","VN"],57:[57,"Daiga","12873808542478828339.jpg",""],58:[58,"Daniel Horacio","12873808346103254106.jpg",""],59:[59,"Däniel","12873808346740708106.jpg","DE"],60:[60,"Daroesh","12873808869273837177.jpg",""],61:[61,"David","1287380762309281870.jpg",""],62:[62,"David","12873808016203612259.jpg",""],63:[63,"David","12873808633950204779.jpg",""],64:[64,"Day","12873807812583527703.jpg",""],65:[65,"Dayis","12873808312587832701.jpg",""],66:[66,"Derick","12873807835132844885.jpg",""],67:[67,"Diana","12873808130802458833.jpg",""],68:[68,"Diana","12873808322533846770.jpg",""],69:[69,"Diaz","12873808114630688329.jpg",""],70:[70,"Digna","12873808542507979881.jpg",""],71:[71,"Dimas Sidik","12873807811732595392.jpg",""],72:[72,"Dora Maria","12873808885131896834.jpg",""],73:[73,"Dulce","12873807971471896325.jpg",""],74:[74,"Dung","12873807661674639787.jpg",""],75:[75,"Dung","12873808092314217345.jpg",""],76:[76,"ED","12873807671375975599.jpg",""],77:[77,"Eliaz","12873807635614673166.jpg",""],78:[78,"Endang","12873808701405826263.jpg",""],79:[79,"Ermz","12873808201257220837.jpg",""],80:[80,"Estiiven","12873807981464085422.jpg",""],81:[81,"Ethan Wrightsman","12873808066682812198.jpg",""],82:[82,"Eugene Anne","1287380830774220420.jpg",""],83:[83,"Euro","12873808571523587125.jpg",""],84:[84,"Farwa","12873808132933192612.jpg",""],85:[85,"Federico","128738086101438231000.jpg",""],86:[86,"Feona","12873808004370785580.jpg",""],87:[87,"Fer","12873808065144734102.jpg",""],88:[88,"Feronika Ika","12873808860619504356.jpg",""],89:[89,"Fitraharemba","12873807665405843247.jpg",""],90:[90,"France Nicole","12873808201053987779.jpg",""],91:[91,"Franklin","12873807966654441267.jpg",""],92:[92,"Fresia","12873807726211179828.jpg",""],93:[93,"Fuchay","12873808957446817979.jpg",""],94:[94,"Gà","12873807630516661489.jpg","VN"],95:[95,"Gael","12873808426409903329.jpg",""],96:[96,"Gelo","12873807843213211849.jpg",""],97:[97,"Gina Faye","12873808083148812684.jpg",""],98:[98,"Guka","12873807763999842615.jpg",""],99:[99,"Hà","12873808250987123243.jpg","VN"],100:[100,"Hadeel","12873808614642310678.jpg",""],101:[101,"Hakkı","12873807995640323281.jpg",""],102:[102,"Halee","12873808404429866577.jpg",""],103:[103,"Hân","1287380822885539079.jpg","VN"],104:[104,"Hazem","12873808129408177234.jpg",""],105:[105,"Heba","12873808854896220825.jpg",""],106:[106,"Hoshyar","12873807791154570388.jpg",""],107:[107,"Huda","1287380796590622514.jpg",""],108:[108,"Ian","12873808824206267166.jpg",""],109:[109,"Ibeth","12873808282481740534.jpg",""],110:[110,"Idayu","12873808037412007177.jpg",""],111:[111,"Igor","12873807943996558346.jpg",""],112:[112,"Irazema","12873807745337378751.jpg",""],113:[113,"Isabel","12873807637813317215.jpg",""],114:[114,"Ivan","1287380886169405692.jpg",""],115:[115,"Ivette","12873808669330876994.jpg",""],116:[116,"Jaime","12873808279741072943.jpg",""],117:[117,"JamesIvan","1287380805835361782.jpg",""],118:[118,"Jamie","12873808291651969400.jpg",""],119:[119,"Janeide","12873808912099707876.jpg",""],120:[120,"Jerry","1287380776349996151.jpg",""],121:[121,"Jesse","12873808555595253396.jpg",""],122:[122,"Jesus","12873807901285522150.jpg",""],123:[123,"Jesus","12873808057902227579.jpg",""],124:[124,"Jinky","12873807240435423481.jpg",""],125:[125,"Johandry","12873807831271634422.jpg",""],126:[126,"Jomar","12873808066547751863.jpg",""],127:[127,"Jonah","12873808326096281802.jpg",""],128:[128,"Jose","12873807901433363353.jpg",""],129:[129,"José","12873808833084298934.jpg","VN"],130:[130,"Josue","12873807720309413382.jpg",""],131:[131,"JP","12873808491714485256.jpg",""],132:[132,"Julienne","12873808907196419853.jpg",""],133:[133,"Julio","12873808698418208712.jpg",""],134:[134,"Kacper","12873808942602798921.jpg",""],135:[135,"Kai","12873807772727564467.jpg",""],136:[136,"Karthikeya","1287380849183776068.jpg",""],137:[137,"Kcehj","12873808878262280598.jpg",""],138:[138,"Kcha","1287380876854967741.jpg",""],139:[139,"Kem","1287380882292231225.jpg",""],140:[140,"Kerem","12873807796529074518.jpg",""],141:[141,"Kétia","1287380820133179413.jpg","VN"],142:[142,"Keyner","12873808137806201538.jpg",""],143:[143,"KeziaCyril","12873808057678697634.jpg",""],144:[144,"Khadija","1287380763830957071.jpg",""],145:[145,"Khaila","12873807823916943371.jpg",""],146:[146,"Khin","12873807810450779784.jpg",""],147:[147,"Khizar","12873807673192445406.jpg",""],148:[148,"Kim","12873807753363133131.jpg",""],149:[149,"Kitisak","12873807942249465432.jpg",""],150:[150,"Kostis","12873807968365019458.jpg",""],151:[151,"Koushik","12873807928430500565.jpg",""],152:[152,"Kyaw","1287380777193049950.jpg",""],153:[153,"Lalu","12873807680319636729.jpg",""],154:[154,"Lasti","1287380772905559689.jpg",""],155:[155,"Laure","12873808253130965488.jpg",""],156:[156,"Ĺëæ","12873807857151225410.jpg","DE"],157:[157,"Leciram","12873808058473336255.jpg",""],158:[158,"Leo","12873808799612617260.jpg",""],159:[159,"Lili","12873808586555394165.jpg",""],160:[160,"Liliana","12873808586586189822.jpg",""],161:[161,"Linh","1287380810819857159.jpg",""],162:[162,"Linh","12873807760171350779.jpg",""],163:[163,"Lonie May Arriola","12873807786902885203.jpg",""],164:[164,"Lorena","12873808160465548127.jpg",""],165:[165,"Lou","12873808559067031864.jpg",""],166:[166,"Luis Andrei","12873807769030182540.jpg",""],167:[167,"Luis","1287380805894650269.jpg",""],168:[168,"Łukasz","1287380888575844563.jpg","VN"],169:[169,"Lusi","12873807809320310599.jpg",""],170:[170,"Madhankumar","1287380768823424091.jpg",""],171:[171,"Madhusoodanan","12873807848387102599.jpg",""],172:[172,"Madison","12873808833814912428.jpg",""],173:[173,"Maeluthe","12873808320258328716.jpg",""],174:[174,"Mani","12873808264669220290.jpg",""],175:[175,"Marcin","12873808318854920175.jpg",""],176:[176,"Marco","1287380829718955955.jpg",""],177:[177,"Maria Elena","12873808312292835852.jpg",""],178:[178,"Maria Jesus","12873808669098127761.jpg",""],179:[179,"Marin","12873807640988008530.jpg",""],180:[180,"Marina Stojanco","12873808565429292580.jpg",""],181:[181,"Mario","12873807757118511503.jpg",""],182:[182,"Marleny","12873807629610990460.jpg",""],183:[183,"Marwin","12873808300081312545.jpg",""],184:[184,"Mary","12873808028806843331.jpg",""],185:[185,"Maryna","12873808424975844551.jpg",""],186:[186,"Mauricio","12873808799939117765.jpg",""],187:[187,"Maycom","12873808130845012896.jpg",""],188:[188,"Mega","128738087994496972.jpg",""],189:[189,"Melisa","12873808132953043842.jpg",""],190:[190,"Memet","12873808111026838317.jpg",""],191:[191,"Merlin","12873808343586118158.jpg",""],192:[192,"Mervin","12873808201477568184.jpg",""],193:[193,"Mhmad Wasim","12873807930027004791.jpg",""],194:[194,"Michael Jeffrey","12873807928656038666.jpg",""],195:[195,"Michał","12873807683953360369.jpg","PL"],196:[196,"Michealangelo","12873808147983393234.jpg",""],197:[197,"Minh Nguyet","1287380877005510111.jpg",""],198:[198,"Mitica","12873808882039435872.jpg",""],199:[199,"Möh","12873808462795487442.jpg","DE"],200:[200,"Mohamed","12873807746098185290.jpg",""],201:[201,"Morela","12873807715931590820.jpg",""],202:[202,"Mrsela","12873807994673687259.jpg",""],203:[203,"Muhammad","12873808239108342631.jpg",""],204:[204,"Muhib","12873807671196531287.jpg",""],205:[205,"MUhummet","12873808083414156809.jpg",""],206:[206,"Myliyn","12873807673745136762.jpg",""],207:[207,"Nadeem","12873807822934102730.jpg",""],208:[208,"Nam Quân","1287380825310223650.jpg","VN"],209:[209,"Natalia","12873807709363232214.jpg",""],210:[210,"Natalia","12873808373527248719.jpg",""],211:[211,"Natalia","12873808903324045450.jpg",""],212:[212,"Nataniel","1287380833136671934.jpg",""],213:[213,"Natthakon","1287380879953755763.jpg",""],214:[214,"Neamat","12873808424242033357.jpg",""],215:[215,"Neth","12873808770055098836.jpg",""],216:[216,"Ngọc","1287380841558893649.jpg","VN"],217:[217,"NGuyễn","12873807240930551659.jpg","VN"],218:[218,"Nhàt","1287380849224300131.jpg","VN"],219:[219,"Nikola","12873808406499982301.jpg",""],220:[220,"Niranjan","12873808961905390103.jpg",""],221:[221,"Onzeycontando","12873808338420947340.jpg",""],222:[222,"Oo","12873808029810109191.jpg",""],223:[223,"Özlem","12873808799651857449.jpg","DE"],224:[224,"Pamela","12873808143389393622.jpg",""],225:[225,"Pan","12873807902323985877.jpg",""],226:[226,"Patrycja","12873808492288334309.jpg",""],227:[227,"Patyy","12873808491678634825.jpg",""],228:[228,"Pau","12873808929709808209.jpg",""],229:[229,"PE","12873808566603310256.jpg",""],230:[230,"Petr","12873807950601825212.jpg",""],231:[231,"Phuc","12873807817788965843.jpg",""],232:[232,"Quenteena","12873808582112493574.jpg",""],233:[233,"Rafał","1287380851652332143.jpg","PL"],234:[234,"Raimundo","12873807625836802593.jpg",""],235:[235,"Raja","128738089675296439.jpg",""],236:[236,"Ramona","12873808428266454187.jpg",""],237:[237,"Rana","12873807902128599521.jpg",""],238:[238,"Ratna","1287380891909050925.jpg",""],239:[239,"Ratnakar","1287380790185934210.jpg",""],240:[240,"Reem","12873808567680174628.jpg",""],241:[241,"Rhoctine","1287380896600784417.jpg",""],242:[242,"Rhoda","12873807821896125388.jpg",""],243:[243,"Rifaat","12873808084722415818.jpg",""],244:[244,"Rocio","12873808835272715193.jpg",""],245:[245,"Roda","12873808870355916866.jpg",""],246:[246,"Rojen","12873807797349963332.jpg",""],247:[247,"Rupen","12873808232033319818.jpg",""],248:[248,"Saida","12873808491714431540.jpg",""],249:[249,"Sakshi","12873807729887415318.jpg",""],250:[250,"Sam","12873807717718809859.jpg",""],251:[251,"Sandra","12873808058000350469.jpg",""],252:[252,"Sandra","12873808634663729939.jpg",""],253:[253,"Sarath","12873807954162459761.jpg",""],254:[254,"Saru","12873808039972897415.jpg",""],255:[255,"Saul Tenoch","12873807695514329969.jpg",""],256:[256,"Sebastian","12873808082987259875.jpg",""],257:[257,"Septia","12873808935319090548.jpg",""],258:[258,"Sergio","12873808621415384608.jpg",""],259:[259,"Sharon","1287380811145688944.jpg",""],260:[260,"Shei","12873808256020121503.jpg",""],261:[261,"Sherwin","12873807992419328737.jpg",""],262:[262,"Sitty","12873807765486291412.jpg",""],263:[263,"Sói'S","12873808225758434957.jpg","VN"],264:[264,"Sonam","12873807701929107102.jpg",""],265:[265,"Srey","12873808857482558298.jpg",""],266:[266,"Stefani Martins","12873808017524465636.jpg",""],267:[267,"Sugiyono","12873808304266442773.jpg",""],268:[268,"Sunita","12873807793986735936.jpg",""],269:[269,"Sutris","12873807836953712979.jpg",""],270:[270,"Syafiq","12873808524312810609.jpg",""],271:[271,"Tahsin","12873808670620063711.jpg",""],272:[272,"Tâmara","12873808591275452601.jpg","PT"],273:[273,"Tatia","12873807901259010928.jpg",""],274:[274,"Thanh Hoàng","1287380893868905347.jpg",""],275:[275,"Thảo","12873807941625197781.jpg","VN"],276:[276,"Thiên","12873807821550702847.jpg","PT"],277:[277,"Thuong","1287380862774692043.jpg",""],278:[278,"Thuỳ Linh","12873807977146108855.jpg","VN"],279:[279,"Tibisay","12873808259014510980.jpg",""],280:[280,"Tien","12873807954643726720.jpg",""],281:[281,"Toàn","1287380770152956792.jpg","VN"],282:[282,"Tomek","12873808008320295297.jpg",""],283:[283,"Trang","1287380849191929825.jpg",""],284:[284,"Tribi","12873808344242876641.jpg",""],285:[285,"Tùng","12873807977711485787.jpg","VN"],286:[286,"Valentina","128738085849177584.jpg",""],287:[287,"Vanesa Sara","1287380800115760248.jpg",""],288:[288,"Walter","12873807979520237930.jpg",""],289:[289,"Waqas","1287380843107702148.jpg",""],290:[290,"Wassim","12873808823854020137.jpg",""],291:[291,"Wiktor","12873808019778294890.jpg",""],292:[292,"Wiktoria","12873807959512924672.jpg",""],293:[293,"Wiktoria","12873808002138025180.jpg",""],294:[294,"Wiola","12873808287443278119.jpg",""],295:[295,"Woravit","12873808139012302892.jpg",""],296:[296,"Xander","12873808943494787569.jpg",""],297:[297,"Yamileth","12873808275325719812.jpg",""],298:[298,"Yasemin","12873808637892092156.jpg",""],299:[299,"Yenny","1287380820165243074.jpg",""],300:[300,"Yohan","12873807240861801108.jpg",""],301:[301,"Yohann","12873807754158449510.jpg",""],302:[302,"Yong","12873808348868475418.jpg",""],303:[303,"Yousef","12873808089780655152.jpg",""],304:[304,"Yun Lu","12873808140200267302.jpg",""],305:[305,"Yunus","12873808117652910436.jpg",""],306:[306,"Yuyun","12873808677212514809.jpg",""],307:[307,"Zendy","12873808861206734353.jpg",""],308:[308,"Zineb","12873808389897313575.jpg",""],309:[309,"Zuh","12873808611270486201.jpg",""],310:[310,"Αθανασία","12873807818352929488.jpg","GR"],311:[311,"Ангел","12873807901539010631.jpg","RU"],312:[312,"Моника","12873807823479991477.jpg","RU"],313:[313,"Спарш","12873808136346033839.jpg","RU"],314:[314,"ელენე","12873808799961487892.jpg","GE"],315:[315,"จีระเดช","12873807244503005986.jpg","TH"],316:[316,"เดะ ยูว","12873808260952016669.jpg","TH"],317:[317,"เด๊ะ ลี","12873807793050163526.jpg","TH"],318:[318,"ลูก","12873807901664586660.jpg","TH"],319:[319,"วรภพ","12873808059388386520.jpg","TH"],320:[320,"วุฒิชัย","12873808328960611285.jpg","TH"],321:[321,"ဇင္ေလး","12873807240776763352.jpg",""],322:[322,"កំលោះ","12873807756687574144.jpg","KH"],323:[323,"លី","12873807733147262225.jpg","KH"]};
return e._db=new DB(t,i),e._db},e}();__reflect(DB_avatar.prototype,"DB_avatar");var DB_skin=function(){function e(){}return e.get=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return(n=e.getDB()).get.apply(n,t);var n},e.getall=function(){return e.getDB().getall()},e.getDB=function(){if(e._db)return e._db;var t=["id","order","fbx","tex","thumb","price","weight"],i={1:[1,1,"1","ball.jpg","thumb_baiqiu.png","0:0",0],9:[9,2,"4","tietu_maoqiu_4.jpg","thumb_maoqiu.png","2:1",80],13:[13,3,"4","tietu_gouqiu_4.jpg","thumb_gouqiu.png","2:2",80],6:[6,4,"4","tietu_xiaojiqiu_4.jpg","thumb_xiaojiqiu.png","2:3",60],2:[2,5,"4","tietu_zhuqiu_4.jpg","thumb_zhuqiu.png","2:5",90],8:[8,6,"4","tietu_qieqiu_4.jpg","thumb_qieqiu.png","2:8",70],12:[12,7,"4","tietu_hetunqiu_4.jpg","thumb_hetunqiu.png","2:12",30],3:[3,8,"1","tietu_zhangyuqiu_1.jpg","thumb_zhangyuqiu.png","1:1",70],4:[4,9,"1","tietu_yuanquanqiu_1.jpg","thumb_yuanquanqiu.png","1:1",80],5:[5,10,"1","tietu_xiaolianqiu_1.jpg","thumb_xiaolianqiu.png","1:2",80],7:[7,11,"2","tietu_xianqiu_2.jpg","thumb_xianqiu.png","1:2",50],10:[10,12,"1","tietu_langxianqiu_1.jpg","thumb_langxianqiu.png","1:2",80],11:[11,13,"1","tietu_huabanqiu_1.jpg","thumb_huabanqiu.png","1:2",80],15:[15,14,"1","ball_jinqiaqiu_1.jpg","thumb_jinqiaqiu.png","1:3",5],33:[33,15,"2","tietu_shandianqiu_2.jpg","thumb_shandianqiu.png","1:3",5],22:[22,16,"3","tietu_dituqiu_3.jpg","thumb_dituqiu.png","1:2",5],23:[23,17,"7","tietu_jinglingqiu_7.jpg","thumb_jinglingqiu.png","1:2",5],26:[26,18,"7","tietu_fenhuaqiu_7.jpg","thumb_fenhuaqiu.png","1:2",5],28:[28,19,"7","tietu_caihuaqiu_7.jpg","thumb_caihuaqiu.png","1:2",5],29:[29,20,"7","tietu_tiaowenqiu_7.jpg","thumb_tiaowenqiu.png","1:2",5],30:[30,21,"7","tietu_faguoqiu_7.jpg","thumb_faguoqiu.png","1:2",5],31:[31,22,"7","tietu_yingguoqiu_7.jpg","thumb_yingguoqiu.png","1:2",5],32:[32,23,"6","tietu_guoqijiheqiu_6.jpg","thumb_guoqijiheqiu.png","1:2",5],21:[21,24,"7","tietu_xiguaqiu_7.jpg","thumb_xiguaqiu.png","1:2",5],14:[14,25,"2","tietu_gaoerfuqiu_2.jpg","thumb_gaoerfuqiu.png","3:100",10],16:[16,26,"6","tietu_zuqiu_6.jpg","thumb_zuqiu.png","3:300",5],24:[24,27,"7","tietu_lv6_7.jpg","thumb_lv6.png","3:500",5],17:[17,28,"7","tietu_lanqiu_7.jpg","thumb_lanqiu.png","3:800",5],27:[27,29,"7","tietu_hei8qiu_7.jpg","thumb_hei8qiu.png","3:1100",5],18:[18,30,"7","tietu_bangqiu_7.jpg","thumb_bangqiu.png","3:1500",5],25:[25,31,"7","tietu_zi12qiu_7.jpg","thumb_zi12qiu.png","3:2000",5],19:[19,32,"7","tietu_wangqiu_7.jpg","thumb_wangqiu.png","3:2500",5],20:[20,33,"5","tietu_paiqiu_5.jpg","thumb_paiqiu.png","3:3000",5]};return e._db=new DB(t,i),e._db},e}();__reflect(DB_skin.prototype,"DB_skin");var App=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.init=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n;return __generator(this,function(r){switch(r.label){case 0:return this.platform=PlatformFactory.create(),this.storager=new Storager,this.http=new HttpService,this.ui=new Director(Context.stage),this.ad=ADFactory.create(),this.ad.on("iad_showed",function(e){}),this.ad.on("rad_showed",function(e){}),AudioPlayer.init(),this.pp=new PlayerPersistent,e=skinDB2SkinData(),t=null,i=null,n=null,this.status={playerType:null,localRobotData:null,friendList:t,friendRankList:i,worldRankList:n,skinItemData:e,lastPlayADTime:Date.now(),lastPlayRADTime:Date.now(),playTimes:0,finishTimes:0},[4,this.pp.pullData()];case 1:return r.sent(),this.pp.lastPlayTimestamp=Date.now(),this.pp.pushData(),[2]}})})},t.startup=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(i){switch(i.label){case 0:return e=new t,Object.defineProperty(window,"app",{get:function(){return e},configurable:!0}),[4,e.init()];case 1:return i.sent(),e.registCommand(AppConstant.Notify.startup,StartupCmd),e.notify(AppConstant.Notify.startup),[2,e]}})})},t.onGameReady=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o,a;return __generator(this,function(s){switch(s.label){case 0:return e=new VConsole,window.vconsole=e,"show"===app.storager.get("vconsole")||(e.hideSwitch(),Utils.removeLog()),[4,Utils.wait(200)];case 1:return s.sent(),(new Game).resetLevel(app.pp.currentLevel),t=Context.isFB,t?[4,FBInstant.startGameAsync()]:[3,3];case 2:t=s.sent(),s.label=3;case 3:return[4,app.platform.checkBotSubscribe()];case 4:return s.sent(),[4,app.platform.tryCreateShortcut()];case 5:return s.sent(),this.setupAudio(),app.platform.getContextID()?(app.ui.addPopup(new GameView),LocalRobotData.getRobotsInfo().then(function(e){app.status.localRobotData=e,Game.inst.start()})):app.ui.addPopup(new HomeView),app.platform.logEvent(Log.EventType.LoadDetail,{type:"ready"}),RES.loadGroup("audio"),RES.loadGroup("rank"),RES.loadGroup("skin"),RES.loadGroup("invite"),RES.loadGroup("share"),[4,app.platform.updateScore(0,JSON.stringify({skin:app.pp.currentSkinID}))];case 6:return s.sent(),egret.log("Load leaderboard."),i=app.status,[4,app.platform.getFriendRankList()];case 7:return i.friendRankList=s.sent(),n=app.status,[4,app.platform.getWorldRankList()];case 8:return n.worldRankList=s.sent(),egret.log("Leaderboard loaded success."),app.platform instanceof PlatformFB&&(r=app.pp.currentLevel,o={nickname:app.platform.name(),playerInfo:{head:app.platform.photo(),score:r}},app.platform.setSessionData(o),a=[],app.platform.getConnectedFriendList().then(function(e){e.length&&(e.forEach(function(e){return a.push(e.getID())}),Http.post("https://fb-bot.capjoy.com/api/v0/upload_61",{data:JSON.stringify({action:"friends",playerId:app.platform.id(),payload:a})}))})),[2]}})})},t.setupAudio=function(){Context.stage.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){e.target instanceof eui.Button&&AudioPlayer.playSound("click.mp3")},null)},t}(Facade);__reflect(App.prototype,"App");var DB=function(){function e(e,t){"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t)),this.keys=e,this.data=t,this.key_index_map={};for(var i in this.keys){var n=this.keys[i];this.key_index_map[n]=i}this.cache={}}return e.prototype.get=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e.join("_"),n=this.cache[i];if(n)return n;if(!this.data[i])return null;n={_data:this.data[i]};for(var r=this,o=function(e){var t=a.keys[e];Object.defineProperty(n,t,{get:function(){var e=r.key_index_map[t];return n._data[e]}})},a=this,s=0;s<this.keys.length;s++)o(s);return this.cache[i]=n,n},e.prototype.getall=function(){return this.data},e}();__reflect(DB.prototype,"DB");var Director=function(){function e(e){var t=this;this._popUpCache={},this._busyCount=0,this._busy_timer=0,this.noticeLayer=new egret.Sprite,this.popupLayer=new eui.UILayer,e.addChild(this.popupLayer),e.addChild(this.noticeLayer),this.stage=e,this.popupLayer.touchThrough=!0,this.modelMask_=new egret.Sprite,this.modelMask_.visible=!1,this.modelMask_.touchEnabled=!0,this.modelMask_.addEventListener(egret.TouchEvent.TOUCH_TAP,function(e){for(var i=t.popupLayer.numChildren-1;i>=0;--i){var n=t.popupLayer.getChildAt(i);if(n instanceof BasePopup&&n.autoClose){t.rmPopup(n);break}}},null),this.onResize(),this.popupLayer.addChild(this.modelMask_)}return e.prototype.onResize=function(){this.modelMask_.graphics.clear(),this.modelMask_.graphics.beginFill(0,1),this.modelMask_.graphics.drawRect(0,0,this.stage.stageWidth,this.stage.stageHeight),this.modelMask_.alpha=.7},e.prototype.updateModal=function(){var e=!1;this.modelMask_.removeFromParent();for(var t=this.popupLayer.numChildren-1;t>=0;--t){var i=this.popupLayer.getChildAt(t);if(i.modal){this.modelMask_.alpha=i.modalAlpha,this.popupLayer.addChildAt(this.modelMask_,t),e=!0;break}}this.modelMask_.visible=e},e.prototype.addPopup=function(e){var t=this;if(!this._popUpCache[e.hashCode])return this._popUpCache[e.hashCode]=e,e.fullscreen&&(e.height=this.stage.stageHeight,e.width=this.stage.stageWidth),this.popupLayer.addChild(e),e.modal&&this.updateModal(),e.center&&this.centerPopup(e),e.once(egret.Event.CLOSE,function(i){delete t._popUpCache[e.hashCode],e.removeAllEventListeners(),e.removeFromParent(),e.onExit(),e.modal&&t.updateModal()},this),e.onEnter(),e.animateIn?(e.visible=!1,egret.setTimeout(function(){e.visible=!0,e.fadeIn().call(function(){e.onReady()})},this,0)):e.onReady(),e},e.prototype.rmPopup=function(e){e.close()},e.prototype.rmAllPopup=function(){for(var e=Object.keys(this._popUpCache);e.length>0;){var t=this._popUpCache[e.pop()];this.rmPopup(t)}},e.prototype.getPopup=function(e){for(var t in this._popUpCache){var i=this._popUpCache[t];if(i instanceof e)return i}return null},e.prototype.centerPopup=function(e){var t=.5*(this.stage.stageWidth-e.width),i=.5*(this.stage.stageHeight-e.height);e.x=t-e.anchorOffsetX,e.y=i-e.anchorOffsetY},e.prototype.busy=function(){egret.clearTimeout(this._busy_timer),egret.setTimeout(this.busyTimerOut,this,2e4),0==this._busyCount++&&(this._busyInst=new BusyIndicator,this.addPopup(this._busyInst))},e.prototype.rmBusy=function(){--this._busyCount<=0&&this._busyInst&&(this.rmPopup(this._busyInst),this._busyInst=null)},e.prototype.busyTimerOut=function(){this._busyCount=0,this._busyInst&&(this.rmPopup(this._busyInst),this._busyInst=null)},e.prototype.toast=function(e,t,i){void 0===t&&(t=1e3),void 0===i&&(i=200);var n=new Toast(e);Context.stage.addChild(n),n.x=Context.stage.stageWidth-n.width>>1,n.y=Context.stage.stageHeight-n.height>>1,egret.Tween.get(n).to({y:n.y-i/2,alpha:1},t>>1,egret.Ease.quadOut).to({alpha:0,y:n.y-i},t>>1,egret.Ease.quadIn).call(function(){return n.removeFromParent()})},e}();__reflect(Director.prototype,"Director");var AppConstant;!function(e){e.APP_ID="312887595914462",e.APP_NAME="Balls Rush 3D";var t;!function(e){e[e.startup=0]="startup",e[e.game_ready=1]="game_ready",e[e.game_over=2]="game_over",e[e.enter_game=3]="enter_game",e[e.refresh_invite_count=4]="refresh_invite_count"}(t=e.Notify||(e.Notify={})),e.ContextTemplate={result:"result"},e.ONE_DAY=864e5,e.AD_INTERVAL_TIME=6e4,e.RAD_INTERVAL_TIME=12e4}(AppConstant||(AppConstant={}));var Log;!function(e){e.EventType={HomeClick:"HomeClick",ChangeGame:"ChangeGame",RankClick:"RankClick",ReviveClick:"ReviveClick",SettlementClick:"SettlementClick",AD:"AD",InviteGetSkin:"InviteGetSkin",PlayTimes:"PlayTimes",LevelOverTimes:"LevelOverTimes",GameOver:"GameOver",LevelRank:"LevelRank",LoadDetail:"LoadDetail",SaveDetail:"SaveDetail",BotDetail:"BotDetail"}}(Log||(Log={}));var GameModel=function(){function e(){this.invite_skin_data=null,this.lastContextualScore=0,this.score=0,this.opponent_info=null,this.isSuper=!1,this.skinInviteInfo={}}return e.prototype.pullSkinInviteCount=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return app.http.getSkinShareCount()["catch"](function(e){}),[2]})})},e}();__reflect(GameModel.prototype,"GameModel");var HttpService=function(){function e(){this.game_id=61,this.host="https://fb-api.capjoy.com",this._server=new HttpServer}return Object.defineProperty(e.prototype,"server",{get:function(){return this._server},enumerable:!0,configurable:!0}),e.prototype.checkSuper=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r;return __generator(this,function(o){switch(o.label){case 0:e=this.host+"/fbapi/v0/testCase_"+this.game_id,o.label=1;case 1:return o.trys.push([1,3,,4]),n=(i=JSON).parse,[4,this._server.post(e,{nickname:app.platform.name(),locale:app.platform instanceof PlatformFB?FBInstant.getLocale():"en_US",timezoneOffset:(new Date).getTimezoneOffset(),playerId:app.platform.id(),appId:"274629043216304"})];case 2:return t=n.apply(i,[o.sent()]),0==t.error&&(Context.gameModel.isSuper=1==+t.data),[3,4];case 3:return r=o.sent(),console.log("check super failed"),[3,4];case 4:return[2]}})})},e.prototype.reportIfFromSkinShare=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return Context.gameModel.invite_skin_data&&"new_player"===app.status.playerType?(e=this.host+"/api/game/v0/shareUpdate_"+this.game_id,[4,this._server.post(e,{v:$T_GAME_VERSION,playerId:app.platform.id(),sharePlayerId:Context.gameModel.invite_skin_data.playerId,type:"share"})["catch"](function(e){return console.log(e)})]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},e.prototype.getSkinShareCount=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:e=0,t=[],a.label=1;case 1:return a.trys.push([1,3,,4]),i=this.host+"/api/game/v0/shareGet_"+this.game_id,[4,this._server.post(i,{v:$T_GAME_VERSION,playerId:app.platform.id(),type:"share"})];case 2:return n=a.sent(),r=JSON.parse(n),e=+r.data.count||0,t=r.data.pids||[],[3,4];case 3:return o=a.sent(),console.log(o),[3,4];case 4:return t.forEach(function(e){app.pp.invitedGuys.indexOf(e)<0&&app.pp.invitedGuys.push(e)}),app.pp.pushData(),[2]}})})},e.prototype.getSkinShareInfo=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o,a,s;return __generator(this,function(l){switch(l.label){case 0:e=0,t=app.status.friendList.map(function(e){return e.getID()}),i=[],n={},l.label=1;case 1:return l.trys.push([1,3,,4]),r=this.host+"/api/game/v0/shareGetInfo_"+this.game_id,[4,this._server.post(r,{v:$T_GAME_VERSION,playerId:app.platform.id(),type:"share",friends:t})];case 2:return o=l.sent(),a=JSON.parse(o),i=a.data.pids||[],n=a.data.infos||{},[3,4];case 3:return s=l.sent(),egret.log(s),[3,4];case 4:return i.forEach(function(e){app.pp.invitedGuys.indexOf(e)<0&&app.pp.invitedGuys.push(e)}),app.pp.invitedGuys=app.pp.invitedGuys,app.pp.pushData(),Context.gameModel.skinInviteInfo=n,app.notify(AppConstant.Notify.refresh_invite_count),egret.log("IDs",i),egret.log("infos",n),[2]}})})},e}();__reflect(HttpService.prototype,"HttpService");var Http;!function(e){function t(e,t){return t instanceof Array?i(e,t):encodeURIComponent(e)+"="+encodeURIComponent(t)}function i(e,t){return t.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&")}function n(e){if(!e)return"";var i=[];for(var n in e)i.push(t(n,e[n]));return i.join("&")}function r(e,t,i,r){return void 0===r&&(r=10),new Promise(function(o,a){var s=n(t),l=new XMLHttpRequest;l.onreadystatechange=function(){4==l.readyState&&200==l.status&&o(l.responseText)};var u=e;"GET"==i&&(u=e+"?"+s);var c=null;l.open(i,u,!0),"POST"==i&&(l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),c=s),l.timeout=1e3*r,l.ontimeout=a,l.onerror=a,l.send(c)})}function o(e,t,i){return void 0===i&&(i=10),r(e,t,"POST",i)}function a(e,t,i){return void 0===i&&(i=10),r(e,t,"POST",i)}e.request=r,e.post=o,e.get=a}(Http||(Http={}));var HttpServer=function(){function e(){}return e.prototype.encodeValue=function(e,t){return t instanceof Array?this.encodeArray(e,t):encodeURIComponent(e)+"="+encodeURIComponent(t)},e.prototype.encodeArray=function(e,t){return e?0==t.length?encodeURIComponent(e)+"=":t.map(function(t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}).join("&"):""},e.prototype.toString=function(e){if(!e)return"";var t=[];for(var i in e)t.push(this.encodeValue(i,e[i]));return t.join("&")},e.prototype.request=function(e){var t=new XMLHttpRequest;t.responseType="arraybuffer"!==e.responseType?"text":"arraybuffer",t.timeout=e.timeout||0,t.onerror=function(i){console.log("[http]["+e.method+"][error] ["+t.status+":"+t.statusText+"] "+e.url),e.onerror&&e.onerror(i)},t.onabort=function(t){console.log("[http]["+e.method+"][abort] "+e.url),e.onabort&&e.onabort()},t.onprogress=function(t){t&&t.lengthComputable&&e.onprogress&&e.onprogress(t.loaded/t.total)},t.onload=function(i){var n=void 0!==t.status?t.status:200;if(200===n||204===n||0===n){var r=t.response||t.responseText;console.log("[http]["+e.method+"][loaded] "+e.url+":"+r),e.onload(r)}else console.log("[http]["+e.method+"][error] ["+t.status+":"+t.statusText+"] "+e.url),e.onerror&&e.onerror(i)};var i=this.toString(e.data),n=e.url;if("GET"==e.method&&i&&(n=e.url+"?"+i,i=null),t.open(e.method,n,!0),"POST"==e.method&&(e.rawData?(t.setRequestHeader("Content-Type","application/json"),i=JSON.stringify(e.rawData)):t.setRequestHeader("Content-Type","application/x-www-form-urlencoded")),e.headers)for(var r=0;r<e.headers.length;r++)t.setRequestHeader(e.headers[r++],e.headers[r]);return t.send(i),console.log("[http]["+e.method+"] "+e.url+":"+JSON.stringify(e.data)),t},e.prototype.post=function(e,t){var i=this;return new Promise(function(n,r){i.request({url:e,data:t,method:"POST",onload:n,onerror:r,ontimeout:r})})},e.prototype.get=function(e,t){var i=this;return new Promise(function(n,r){i.request({url:e,data:t,method:"GET",onload:n,onerror:r,ontimeout:r})})},e}();__reflect(HttpServer.prototype,"HttpServer");var PlayerPersistent=function(){function e(){this.Data={v:0,newInviteSkinAmount:0,newStarSkinAmount:0,startCount:0,currentLevel:1,currentSkinID:1,havingSkinIDs:[1],invitedGuys:[],recievedLoveGuys:[],skinProgressData:{},lastPlayTimestamp:0,continuousPlayDays:0,shortcutRefused:0,shortcutClaimed:!1},this.Keys=["v","newInviteSkinAmount","newStarSkinAmount","startCount","currentLevel","currentSkinID","havingSkinIDs","invitedGuys","recievedLoveGuys","skinProgressData","lastPlayTimestamp","continuousPlayDays","shortcutRefused","shortcutClaimed"],this.dirtyKeys_=[],this.DataO=Utils.deepClone(this.Data)}return Object.defineProperty(e.prototype,"newInviteSkinAmount",{get:function(){return this.get("newInviteSkinAmount")},set:function(e){this.set("newInviteSkinAmount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"newStarSkinAmount",{get:function(){return this.get("newStarSkinAmount")},set:function(e){this.set("newStarSkinAmount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"starCount",{get:function(){return this.get("startCount")},set:function(e){this.set("startCount",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentLevel",{get:function(){return this.get("currentLevel")},set:function(e){this.set("currentLevel",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentSkinID",{get:function(){return this.get("currentSkinID")},set:function(e){this.set("currentSkinID",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"havingSkinIDs",{get:function(){return this.get("havingSkinIDs")},set:function(e){this.set("havingSkinIDs",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skinProgressData",{get:function(){return this.get("skinProgressData")},set:function(e){this.set("skinProgressData",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"invitedGuys",{get:function(){return this.get("invitedGuys")},set:function(e){this.set("invitedGuys",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lastPlayTimestamp",{get:function(){return this.get("lastPlayTimestamp")},set:function(e){this.set("lastPlayTimestamp",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"continuousPlayDays",{get:function(){return this.get("continuousPlayDays")},set:function(e){this.set("continuousPlayDays",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortcutRefused",{get:function(){return this.get("shortcutRefused")},set:function(e){this.set("shortcutRefused",e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shortcutClaimed",{get:function(){return this.get("shortcutClaimed")},set:function(e){this.set("shortcutClaimed",e)},enumerable:!0,configurable:!0}),e.prototype.get=function(e){return this.Data[e]},e.prototype.set=function(e,t){this.Data[e]=t,this.dirtyKeys_.push(e),this.Data.v=Date.now()},Object.defineProperty(e.prototype,"dirty",{get:function(){return this.dirtyKeys_.length>0},enumerable:!0,configurable:!0}),e.prototype.getDirtyData=function(){var e=this,t={};return this.dirtyKeys_.push("v"),this.dirtyKeys_.forEach(function(i){t[i]=e.Data[i]}),this.dirtyKeys_.splice(0),t},e.prototype.pullData=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:if(!(app.platform instanceof PlatformFB))return[3,5];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,app.platform.getPlayerData(this.Keys)];case 2:return e=a.sent(),[3,4];case 3:return t=a.sent(),e={},[3,4];case 4:return[3,6];case 5:e={},a.label=6;case 6:i=JSON.parse(localStorage.getItem("pData"+app.platform.id()))||{},n=e.v,r=i.v,!n&&r||n&&r&&r>n?(egret.log("pData:LOCAL",r,n),e=i,app.platform instanceof PlatformFB&&app.platform.setPlayerData(this.Data)):egret.log("pData:REMOTE");for(o in e)this.Data[o]=e[o];return this.lastPlayTimestamp?app.status.playerType="old_player":app.status.playerType="new_player",this.pushData(),[2]}})})},e.prototype.pushData=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return this.dirty?(localStorage.setItem("pData"+app.platform.id(),JSON.stringify(this.Data)),[4,app.platform.setPlayerData(this.getDirtyData())]):[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})},e.prototype.cleanData=function(){var e=this;app.ui.toast("local clear"),localStorage.removeItem("pData"+app.platform.id()),app.pp.starCount=0,app.platform instanceof PlatformFB&&app.platform.setPlayerData(this.DataO).then(function(){e.pushData()})["catch"](function(){app.ui.toast("remote clear failed")})},e.prototype.tryBuySkin=function(e){this.skinProgressData[e]||(this.skinProgressData[e]=0),this.skinProgressData[e]++,this.skinProgressData=this.skinProgressData;var t=this.skinProgressData[e];return t>=app.status.skinItemData[e-1].price.num?(!this.havingSkinIDs.includes(e)&&this.havingSkinIDs.push(e),this.havingSkinIDs=this.havingSkinIDs,this.pushData(),Game.inst.player.setSkin(e),!0):(this.pushData(),!1)},e.prototype.checkNewSkin=function(){var e=this,t=app.status.skinItemData.filter(function(e){return 3===e.price.type}).sort(function(e,t){return e.order-t.order}).map(function(e){return e.id});return t.forEach(function(t){var i=app.pp.starCount;if(i>=app.status.skinItemData[t-1].price.num){if(app.pp.havingSkinIDs.includes(t))return;e.newStarSkinAmount++,app.pp.havingSkinIDs.push(t),app.pp.havingSkinIDs=app.pp.havingSkinIDs,app.pp.pushData()}}),!!this.newStarSkinAmount},e.prototype.checkNewInviteSkin=function(){var e=this,t=app.status.skinItemData.filter(function(e){return 2===e.price.type}).sort(function(e,t){return e.order-t.order}).map(function(e){return e.id});return t.forEach(function(t){var i=app.pp.invitedGuys.length;if(i>=app.status.skinItemData[t-1].price.num){if(app.pp.havingSkinIDs.includes(t))return;e.newInviteSkinAmount++,app.pp.havingSkinIDs.push(t),app.pp.havingSkinIDs=app.pp.havingSkinIDs,app.pp.pushData()}}),egret.log("this.newInviteSkinAmount",this.newInviteSkinAmount),!!this.newInviteSkinAmount},e}();__reflect(PlayerPersistent.prototype,"PlayerPersistent");var Storager=function(){function e(e){void 0===e&&(e="g"),this.id=e}return e.prototype.set=function(e,t){"object"==typeof t&&(t=JSON.stringify(t)),egret.localStorage.setItem(this.id+"_"+e,t)},e.prototype.get=function(e,t){return egret.localStorage.getItem(this.id+"_"+e)||t},e.prototype.rm=function(e){egret.localStorage.removeItem(this.id+"_"+e)},e.prototype.json=function(e,t){void 0===t&&(t=null);var i,n=egret.localStorage.getItem(this.id+"_"+e);try{i=JSON.parse(n)}catch(r){}return i||t},e.clear=function(){egret.localStorage.clear()},e}();__reflect(Storager.prototype,"Storager");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return e.prototype.createChildren.call(this),egret.ImageLoader.crossOrigin="anonymous",egret.TextField.default_fontFamily="GameFont",RES.setMaxLoadingThread(5),RES.setMaxRetryTimes(3),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause(),AudioPlayer.pauseMusic()},egret.lifecycle.onResume=function(){egret.ticker.resume(),AudioPlayer.resumeMusic()},t=new AssetAdapter,egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),Context.stage=this.stage,Context.gameModel=new GameModel,Constant.FullWidthScale=Utils.clamp(this.stage.stageWidth/640,.5,1),[4,App.startup()];case 1:return i.sent(),app.pp.checkNewSkin(),this.runGame(),[2]}})})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.loadResource()];case 1:return e.sent(),[4,App.onGameReady()];case 2:return e.sent(),app.notify(AppConstant.Notify.game_ready),[2]}})})},Object.defineProperty(t.prototype,"progress",{set:function(e){$T_PROGRESS=e},enumerable:!0,configurable:!0}),t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o,a,s=this;return __generator(this,function(l){switch(l.label){case 0:return l.trys.push([0,4,,5]),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return l.sent(),[4,this.loadTheme()];case 2:return l.sent(),this.progress=1,e=0,t=0,i=function(){s.progress=.5*e+.5*t},RES.createGroup("_gp1",["home","common","game"]),n=RES.loadGroup("_gp1",0,{onProgress:function(t,n){e=t/n,i()}}),GameConstant.Map="new_player"==app.status.playerType?"chushi":Utils.randomInArr(GameConstant.Maps),Res3DManager.init(),r=["tex/fx-die1.png","tex/fx-die2.png","tex/finish.png","tex/lane_"+GameConstant.Map+".jpg","fbx/"+GameConstant.Map+".fbx","fbx/ball.fbx","tex/player-trail.png","tex/wind-trail.png","tex/shadow.png","tex/fx-boost.png","tex/fx-die1.png","tex/fx-die2.png","skin/ball.jpg","skin/tietu_fuhuoqiu.jpg"],o=Res3DManager.preload.apply(Res3DManager,[function(e){t=e,i()}].concat(r)),[4,Promise.all([n,o])];case 3:return l.sent(),[3,5];case 4:return a=l.sent(),console.error(a),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,i){var n=new eui.Theme("resource/default.thm.json",e.stage);n.addEventListener(eui.UIEvent.COMPLETE,t,e)})},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,i,n){function r(e){t.call(n,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),i.call(n))}var a=this;"undefined"!=typeof generateEUI?egret.callLater(function(){t.call(n,generateEUI)},this):"undefined"!=typeof generateEUI2?RES.getResByUrl("resource/gameEui.json",function(e,i){window.JSONParseClass.setData(e),r(e),egret.callLater(function(){t.call(n,generateEUI2)},a)},this,RES.ResourceItem.TYPE_JSON):(RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT))},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BusyIndicator=function(e){function t(){var t=e.call(this)||this;t.animateIn=!1,t.fullscreen=!1;var i=RES.getRes("loading.png");return t._bmp=new egret.Bitmap(i),t._bmp.anchorOffsetX=.5*i.textureWidth,t._bmp.anchorOffsetY=.5*i.textureHeight,t.addChild(t._bmp),t.width=t.height=0,t}return __extends(t,e),t.prototype.$onAddToStage=function(t,i){e.prototype.$onAddToStage.call(this,t,i),this._bmp.alpha=0,egret.Tween.get(this._bmp).to({alpha:1},100),egret.Tween.get(this._bmp,{loop:!0}).to({rotation:180},1e3).to({rotation:360},1e3)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),egret.Tween.removeTweens(this._bmp)},t}(BasePopup);__reflect(BusyIndicator.prototype,"BusyIndicator");var TextPlane=function(){function e(e,t,i){this.height=e,this.canvas=document.createElement("canvas"),this.cxt=this.canvas.getContext("2d"),this.texture=new tr.Texture(this.canvas),this.texture.wrapS=tr.RepeatWrapping,this.canvas.width=1024,this.canvas.height=t,this.cxt.font=t+"px GameFont",this.cxt.fillStyle="#"+i.toString(16),this.mesh=new tr.Mesh(new tr.PlaneGeometry(1,1),new tr.MeshBasicMaterial({transparent:!0,map:this.texture})),this.mesh.scale.set(e,e,1)}return Object.defineProperty(e.prototype,"text",{set:function(e){this.cxt.clearRect(0,0,this.canvas.width,this.canvas.height),this.cxt.fillText(e,0,this.canvas.height);var t=this.cxt.measureText(e).width;this.mesh.scale.x=t/this.canvas.height*this.mesh.scale.y,this.texture.repeat.x=t/this.canvas.width,this.texture.needsUpdate=!0},enumerable:!0,configurable:!0}),e}();__reflect(TextPlane.prototype,"TextPlane");var Toast=function(e){function t(t){var i=e.call(this)||this;return i.toastText=t,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.text_node.text=this.toastText,this.width=Context.stage.stageWidth},t}(eui.Component);__reflect(Toast.prototype,"Toast",["eui.UIComponent","egret.DisplayObject"]);var Booster=function(e){function t(){var t=e.call(this)||this;return t.mesh=new tr.Mesh(Obstacle.geoBooster,Obstacle.mtl),t.mesh.scale.setScalar(GameConstant.ObsScale),t.mesh.position.y=-GameConstant.BallR-.1,t.mesh.rotation.x=.5*-Math.PI,t.position=t.mesh.position,t}return __extends(t,e),t.prototype.name=function(){return"Booster"},t.prototype.reset=function(e){var t=Utils.randomInt(-2,3);this.collisions=[[t]],this.mesh.position.x=ObstacleCtr.getObsX(t+2),this.mesh.position.z=e,Game.inst.scene.add(this.mesh),Game.inst.addTickObject(this)},t.prototype.update=function(e){return this.mesh.position.z>Game.inst.cameraPos.z+1},t.prototype.dispose=function(){Game.inst.scene.remove(this.mesh),e.prototype.dispose.call(this)},t.init=function(){ObjectPool.inst.register(t,2)},t}(PoolObject);__reflect(Booster.prototype,"Booster");var CameraCtr=function(){function e(e){this.camera=e,this._distance=GameConstant.CameraFollowDist,this._tweenPrg=1}return e.prototype.setTarget=function(e){this._target=e},e.prototype.setAngleY=function(e){this._angleY=e},e.prototype.tweenAngleYTo=function(e,t){this._angleYTo=e,this._angleYFrom=this._angleY,this._tweenPrg=0,this._tweenCallback=t},e.prototype.updateCameraTrans=function(){var e=new tr.Quaternion;e.setFromAxisAngle(GameConstant.V3Right,this._angleY);var t=new tr.Vector3(0,0,-1*this._distance);t.applyQuaternion(e);var i=this.camera.position;i.copy(this._target.group.position),i.sub(t),this.camera.rotation.z=i.x*Math.abs(i.x)/360,i.x*=.6,this._yOffset=-t.z},e.prototype.update=function(e){if(this._target){var t=!1;this._tweenPrg<1&&(this._tweenPrg+=e/.5,this._tweenPrg>=1&&(this._tweenPrg=1,this._tweenCallback&&egret.setTimeout(this._tweenCallback,null,10)),this._angleY=Utils.lerp(this._tweenPrg,this._angleYFrom,this._angleYTo),t=!0),this._target.cameraDirty||t?(this._target.cameraDirty=!1,this.updateCameraTrans()):this.camera.position.z=this._target.group.position.z+this._yOffset}},e}();__reflect(CameraCtr.prototype,"CameraCtr");var CfgLevel;!function(e){e.data=[{id:0,partnernum:[1,1,5],obstacle:[.9,.75,.6],speedup:[0,0,0],weight:[5,0,0,0,1,1,0],cubeSpMin:1,cubeSpMax:1,beyondRate:.4,bootsWght:[1,0,0]},{id:1,partnernum:[1,1,5],obstacle:[.9,.75,.6],speedup:[.3,.2,.1],weight:[2,5,0,0,1,1,0],cubeSpMin:1,cubeSpMax:1,beyondRate:.4,bootsWght:[1,0,0]},{id:2,partnernum:[1,1,5],obstacle:[.9,.75,.6],speedup:[.35,.25,.15],weight:[2,2,5,0,1,1,0],cubeSpMin:1,cubeSpMax:1,beyondRate:.4,bootsWght:[1,0,0]},{id:3,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.35,.25,.15],weight:[3,3,3,0,1,1,0],cubeSpMin:1,cubeSpMax:1,beyondRate:.4,bootsWght:[1,0,0]},{id:4,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.4,.3,.2],weight:[3,3,3,0,1,1,1],cubeSpMin:.3,cubeSpMax:.3,beyondRate:.4,bootsWght:[1,0,0]},{id:5,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.5,.4,.3],weight:[2,2,1,0,2,2,1],cubeSpMin:.3,cubeSpMax:.3,beyondRate:.4,bootsWght:[1,0,0]},{id:6,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.6,.5,.4],weight:[2,2,2,0,2,2,2],cubeSpMin:.3,cubeSpMax:.4,beyondRate:.4,bootsWght:[1,0,0]},{id:7,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.7,.6,.5],weight:[2,2,0,0,2,2,2],cubeSpMin:.3,cubeSpMax:.5,beyondRate:.4,bootsWght:[1,0,0]},{id:8,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,0,0,2,2,3],cubeSpMin:.3,cubeSpMax:.5,beyondRate:.4,bootsWght:[1,0,0]},{id:9,partnernum:[2,1,5],obstacle:[.9,.75,.6],speedup:[.8,.75,.6],weight:[2,2,2,1,2,2,2],cubeSpMin:.5,cubeSpMax:.6,beyondRate:.4,bootsWght:[1,0,0]},{id:10,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,2,1,2,2,2],cubeSpMin:.4,cubeSpMax:.4,beyondRate:.5,bootsWght:[1,1,0]},{id:11,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,2,2,2,2,3],cubeSpMin:.4,cubeSpMax:.5,beyondRate:.5,bootsWght:[1,1,0]},{id:12,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,2,2,2,2,3],cubeSpMin:.4,cubeSpMax:.6,beyondRate:.5,bootsWght:[1,1,0]},{id:13,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,2,2,2,2,3],cubeSpMin:.4,cubeSpMax:.6,beyondRate:.5,bootsWght:[1,1,0]},{id:14,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.8,.7,.6],weight:[2,2,2,3,2,2,2],cubeSpMin:.6,cubeSpMax:.7,beyondRate:.5,bootsWght:[1,1,0]},{id:15,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.75,.65,.6],weight:[2,2,2,3,2,2,2],cubeSpMin:.5,cubeSpMax:.5,beyondRate:.5,bootsWght:[1,1,0]},{id:16,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.75,.65,.6],weight:[2,2,2,3,2,2,2],cubeSpMin:.5,cubeSpMax:.6,beyondRate:.5,bootsWght:[1,1,0]},{id:17,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.75,.65,.6],weight:[2,2,2,3,2,2,3],cubeSpMin:.5,cubeSpMax:.7,beyondRate:.5,bootsWght:[1,1,0]},{id:18,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.75,.65,.6],weight:[2,2,2,3,2,2,2],cubeSpMin:.5,cubeSpMax:.7,beyondRate:.5,bootsWght:[1,1,0]},{id:19,partnernum:[3,1,5],obstacle:[.9,.75,.6],speedup:[.75,.65,.6],weight:[2,2,2,4,2,2,2],cubeSpMin:.7,cubeSpMax:.8,beyondRate:.5,bootsWght:[1,1,0]},{id:20,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,2],cubeSpMin:.9,cubeSpMax:1,beyondRate:.6,bootsWght:[1,1,1]},{id:21,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,2],cubeSpMin:.9,cubeSpMax:1.05,beyondRate:.6,bootsWght:[1,1,1]},{id:22,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,2],cubeSpMin:.9,cubeSpMax:1.1,beyondRate:.6,bootsWght:[1,1,1]},{id:23,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,2],cubeSpMin:.9,cubeSpMax:1.15,beyondRate:.6,bootsWght:[1,1,1]},{id:24,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,3],cubeSpMin:.9,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:25,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,3],cubeSpMin:.9,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:26,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,3],cubeSpMin:.95,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:27,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,4,2,2,3],cubeSpMin:1,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:28,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,5,2,2,3],cubeSpMin:1.05,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:29,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.7,.6,.55],weight:[2,2,2,5,2,2,3],cubeSpMin:1.1,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:30,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,3],cubeSpMin:1,cubeSpMax:1,beyondRate:.6,bootsWght:[1,1,1]},{id:31,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,3],cubeSpMin:1,cubeSpMax:1.05,beyondRate:.6,bootsWght:[1,1,1]},{id:32,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,3],cubeSpMin:1,cubeSpMax:1.1,beyondRate:.6,bootsWght:[1,1,1]},{id:33,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,3],cubeSpMin:1,cubeSpMax:1.15,beyondRate:.6,bootsWght:[1,1,1]},{id:34,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,4],cubeSpMin:1,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:35,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,4],cubeSpMin:1.05,cubeSpMax:1.2,beyondRate:.6,bootsWght:[1,1,1]},{id:36,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,4],cubeSpMin:1.1,cubeSpMax:1.25,beyondRate:.6,bootsWght:[1,1,1]},{id:37,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,5,2,2,4],cubeSpMin:1.15,cubeSpMax:1.25,beyondRate:.6,bootsWght:[1,1,1]},{id:38,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,6,2,2,4],cubeSpMin:1.2,cubeSpMax:1.3,beyondRate:.6,bootsWght:[1,1,1]},{id:39,partnernum:[3,1,5],obstacle:[.9,.8,.7],speedup:[.65,.6,.5],weight:[2,2,2,6,2,2,4],cubeSpMin:1.2,cubeSpMax:1.3,beyondRate:.6,bootsWght:[1,1,1]},{id:40,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,4],cubeSpMin:1.1,cubeSpMax:1.1,beyondRate:.7,bootsWght:[0,1,1]},{id:41,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,4],cubeSpMin:1.1,cubeSpMax:1.15,beyondRate:.7,bootsWght:[0,1,1]},{id:42,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,4],cubeSpMin:1.1,cubeSpMax:1.2,beyondRate:.7,bootsWght:[0,1,1]},{id:43,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,4],cubeSpMin:1.1,cubeSpMax:1.25,beyondRate:.7,bootsWght:[0,1,1]},{id:44,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,5],cubeSpMin:1.1,cubeSpMax:1.3,beyondRate:.7,bootsWght:[0,1,1]},{id:45,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,5],cubeSpMin:1.1,cubeSpMax:1.3,beyondRate:.7,bootsWght:[0,1,1]},{id:46,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,5],cubeSpMin:1.15,cubeSpMax:1.35,beyondRate:.7,bootsWght:[0,1,1]},{id:47,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,6,2,2,5],cubeSpMin:1.2,cubeSpMax:1.35,beyondRate:.7,bootsWght:[0,1,1]},{id:48,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.25,cubeSpMax:1.4,beyondRate:.7,bootsWght:[0,1,1]},{id:49,partnernum:[3,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.3,cubeSpMax:1.4,beyondRate:.7,bootsWght:[0,1,1]},{id:50,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.2,cubeSpMax:1.2,beyondRate:.7,bootsWght:[0,1,1]},{id:51,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.2,cubeSpMax:1.25,beyondRate:.7,bootsWght:[0,1,1]},{id:52,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.2,cubeSpMax:1.3,beyondRate:.7,bootsWght:[0,1,1]},{id:53,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,5],cubeSpMin:1.2,cubeSpMax:1.35,beyondRate:.7,bootsWght:[0,1,1]},{id:54,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,6],cubeSpMin:1.2,cubeSpMax:1.4,beyondRate:.7,bootsWght:[0,1,1]},{id:55,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,6],cubeSpMin:1.2,cubeSpMax:1.45,beyondRate:.7,bootsWght:[0,1,1]},{id:56,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,6],cubeSpMin:1.2,cubeSpMax:1.4,beyondRate:.7,bootsWght:[0,1,1]},{id:57,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,7,2,2,6],cubeSpMin:1.2,cubeSpMax:1.45,beyondRate:.7,bootsWght:[0,1,1]},{id:58,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,8,2,2,6],cubeSpMin:1.3,cubeSpMax:1.5,beyondRate:.7,bootsWght:[0,1,1]},{id:58,partnernum:[4,1,5],obstacle:[.9,.75,.65],speedup:[.6,.55,.45],weight:[2,2,2,8,2,2,6],cubeSpMin:1.4,cubeSpMax:1.5,beyondRate:.7,bootsWght:[0,1,1]},{id:60,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,6],cubeSpMin:1.45,cubeSpMax:1.5,beyondRate:.75,bootsWght:[0,0,1]},{id:61,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,6],cubeSpMin:1.5,cubeSpMax:1.5,beyondRate:.75,bootsWght:[0,0,1]},{id:62,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,6],cubeSpMin:1.5,cubeSpMax:1.55,beyondRate:.75,bootsWght:[0,0,1]},{id:63,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,6],cubeSpMin:1.5,cubeSpMax:1.6,beyondRate:.75,bootsWght:[0,0,1]},{id:64,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,7],cubeSpMin:1.5,cubeSpMax:1.65,beyondRate:.75,bootsWght:[0,0,1]},{id:65,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,7],cubeSpMin:1.5,cubeSpMax:1.7,beyondRate:.75,bootsWght:[0,0,1]},{id:66,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,7],cubeSpMin:1.55,cubeSpMax:1.7,beyondRate:.75,bootsWght:[0,0,1]},{id:67,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,8,2,2,7],cubeSpMin:1.6,cubeSpMax:1.7,beyondRate:.75,bootsWght:[0,0,1]},{id:68,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,9,2,2,8],cubeSpMin:1.65,cubeSpMax:1.75,beyondRate:.75,bootsWght:[0,0,1]},{id:69,partnernum:[4,1,5],obstacle:[.9,.7,.65],speedup:[.55,.5,.4],weight:[2,2,2,9,2,2,8],cubeSpMin:1.7,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:70,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.6,beyondRate:.75,bootsWght:[0,0,1]},{id:71,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.65,beyondRate:.75,bootsWght:[0,0,1]},{id:72,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.7,beyondRate:.75,bootsWght:[0,0,1]},{id:73,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.75,beyondRate:.75,bootsWght:[0,0,1]},{id:74,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:75,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.6,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:76,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.65,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:77,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[1,1,1,9,1,1,8],cubeSpMin:1.65,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:78,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[0,0,0,9,0,0,9],cubeSpMin:1.7,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]},{id:79,partnernum:[4,1,5],obstacle:[.9,.7,.6],speedup:[.55,.5,.4],weight:[0,0,0,9,0,0,9],cubeSpMin:1.7,cubeSpMax:1.8,beyondRate:.75,bootsWght:[0,0,1]}]
}(CfgLevel||(CfgLevel={}));var Crown=function(){function e(){var e=Res3DManager.getMeshFromFBX("paper_guangguan","ball.fbx");this.mesh=new tr.Mesh(e.geometry,e.material),this.mesh.scale.setScalar(.7*GameConstant.FBXScale),this.mesh.position.y=.8,this.mesh.rotation.x=.5*-Math.PI}return e.prototype.setTarget=function(e){this._target!=e&&(this._target=e,this.mesh.parent&&this.mesh.parent.remove(this.mesh),e&&e.group2.add(this.mesh))},e.prototype.update=function(e){this.mesh.rotation.z-=Math.PI*e},e}();__reflect(Crown.prototype,"Crown");var Game=function(e){function t(){var i=e.call(this)||this;return i.lvlCfg=CfgLevel.data[0],i.tickObjects=[],i.complete=!1,i.running=!1,i.revived=0,i._levelCompleteTimes=0,i.roadSegments=[],i.groundSegments=[],i.treePairs=5,i.trees=[],i.treesZL=0,i.treesZR=0,i._windTime=0,i.startX=0,i.touchID=0/0,t.inst=i,i.init(),i}return __extends(t,e),t.prototype.init=function(){this.world=new World,this.nowPlayerCount=GameConstant.PlayersCount,ObjectPool.init(),RoadSegment.init(),GroundSegment.init(),Trail.init(),Tree.init(),WindLine.init(),Obstacle.init(),Booster.init(),PlayerBoostSprite.init(),PlayerDieFx.init(),PlayerInvincibleFx.init(),this.cameraPos=this.world.camera.position,this.scene=this.world.scene,this.scene.fog=new tr.Fog(16711680,40,100),this.ticker=new Ticker(this.update,this),this.cameraCtr=new CameraCtr(this.world.camera),this.obstacleCtr=new ObstacleCtr,this.player=new Player,this.robotCtr=new RobotCtr,this.cameraCtr.setTarget(this.player),this.cameraCtr.setAngleY(-10*GameConstant.ToRadian),this.cameraCtr.updateCameraTrans();var e=Res3DManager.createTexture("finish.png",GameConstant.Anisotropy);e.wrapS=tr.RepeatWrapping,e.repeat.x=5,this.finishLine=new tr.Mesh(new tr.PlaneGeometry(10,2),new tr.MeshBasicMaterial({map:e})),this.finishLine.rotateX(Math.PI*-.5),this.finishLine.position.y=.05-GameConstant.BallR,this.materialCtr=new MaterialCtr,this.materialCtr.add(RoadSegment.mtl),GroundSegment.mtl&&this.materialCtr.add(GroundSegment.mtl),this.materialCtr.add(Trail.mtl),this.materialCtr.add(WindLine.mtl),this.materialCtr.add(Tree.mtl),this.materialCtr.add(Obstacle.mtl),this.materialCtr.add(PlayerBase.shadowMtl),this.materialCtr.add(PlayerInvincibleFx.mtl),this.materialCtr.add(this.finishLine.material),this.materialCtr.add(this.player.ball.material),this.materialCtr.addMulti(this.robotCtr.getRobotsMtls()),this.setupTouch(),this.initRoad(),this.initTrees(),this.initTheme()},t.prototype.setupTouch=function(){var e=Context.stage;e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.touchBegin,this)},t.prototype.updateTickObjects=function(e){for(var t=0;t<this.tickObjects.length;++t){var i=this.tickObjects[t].update(e);i&&(this.tickObjects[t].dispose(),this.tickObjects.splice(t--,1))}},t.prototype.addTickObject=function(e){this.tickObjects.push(e)},t.prototype.update=function(e){e*=.001;var t=this.player.dead;this.player.update(e),this.cameraCtr.update(e),this.updateRoad(),this.updateTrees(),this.updateWind(e),this.updateTickObjects(e),this.obstacleCtr.update(e),this.robotCtr.update(e),this.world.render(),this.materialCtr.setup(),t||this.materialCtr.update(e),this.nowPlayerCount<=1&&!this.complete&&(GameConstant.TrackLength=GameConstant.TrackLength,this.player._speed=0,this.finish()),this.complete?this.onProgressUpdate&&this.onProgressUpdate(1):this.onProgressUpdate&&this.onProgressUpdate(-this.player.group.position.z)},Object.defineProperty(t.prototype,"currentProgress",{get:function(){return Math.min(-this.player.group.position.z/GameConstant.TrackLength,1)},enumerable:!0,configurable:!0}),t.prototype.ticking=function(){return this.ticker.ticking},t.prototype.start=function(){this.running=!0,this.robotCtr.reset(),this.world.render(),app.platform.logEvent(Log.EventType.PlayTimes,{type:app.status.playerType,result:++app.status.playTimes})},t.prototype.stop=function(){AudioPlayer.stopMusic(),this.ticker.stop(),this.running=!1},t.prototype.resetLevel=function(e){this.player.setSkin(app.pp.currentSkinID),this.complete&&this.switchTheme(),this.complete=!1,this.revived=0,this.lvlCfg=CfgLevel.data[e-1]||CfgLevel.data[CfgLevel.data.length-1],GameConstant.TrackLength=GameConstant.TrackLength,this.resetRoad(),this.resetTrees(),this.resetWind(),this.finishLine.position.z=-100,this.player.reset(),this.obstacleCtr.reset(),this.world.render()},t.prototype.switchTheme=function(){var e=Utils.randomInt(0,GameConstant.Maps.length);GameConstant.Map==GameConstant.Maps[e]&&(e=(e+1)%GameConstant.Maps.length);var t=GameConstant.Maps[e];Res3DManager.getFBX(t+".fbx")&&Res3DManager.getImage("lane_"+t+".jpg")&&(GameConstant.Map=GameConstant.Maps[e],this.resetTheme())},t.prototype.fail=function(){this._levelCompleteTimes=0},t.prototype.finish=function(){var e=this;AudioPlayer.stopMusic(),this.complete=!0,app.pp.starCount+=Constant.starAmount[this.player.rank+1],app.pp.checkNewSkin();var t=app.pp.currentLevel;(app.pp.currentLevel<10||++this._levelCompleteTimes>=2)&&(this._levelCompleteTimes=0,app.pp.currentLevel++,app.pp.pushData()),egret.log("lv:",app.pp.currentLevel),this.player.slowDown(),this.robotCtr.allSlowDown(),egret.setTimeout(function(){app.platform.updateScore(app.pp.starCount,JSON.stringify({skin:app.pp.currentSkinID})).then(function(){RankCtr.loadLeaderBoardAsync()}),e.stop(),null!=GameView&&app.ui.getPopup(GameView).close(),app.ui.addPopup(new EndView)},this,Constant.CompleteDelay),app.platform.logEvent(Log.EventType.GameOver,{type:app.status.playerType,level:t,result:3}),app.platform.logEvent(Log.EventType.LevelRank,{type:app.status.playerType,level:t,rank:this.player.rank+1}),app.platform.logEvent(Log.EventType.LevelOverTimes,{type:app.status.playerType,result:++app.status.finishTimes})},t.prototype.initTheme=function(){var e=GameConstant.MapColor[GameConstant.Map];this.world.renderer.setClearColor(e),this.scene.fog&&this.scene.fog.color.setHex(e);var t=[];GameConstant.Maps.forEach(function(e){e!=GameConstant.Map&&(t.push("tex/lane_"+e+".jpg"),t.push("fbx/"+e+".fbx"))}),Res3DManager.preload.apply(Res3DManager,[null].concat(t))},t.prototype.resetTheme=function(){this.initTheme();var e=Res3DManager.createTexture("lane_"+GameConstant.Map+".jpg",GameConstant.Anisotropy);this.world.renderer.getMaxAnisotropy()||"shamo"!=GameConstant.Map||(e.magFilter=e.minFilter=tr.NearestFilter),RoadSegment.mtl.map=e,Tree.init(),Obstacle.init4Theme(),GroundSegment.init4Theme(this.groundSegments)},t.prototype.initRoad=function(){for(var e=0;2>e;++e){var t=new GroundSegment;t.mesh.scale.setScalar(GameConstant.FBXScale),t.mesh.rotation.x=.5*-Math.PI,t.mesh.position.y=0,t.mesh.position.z=GroundSegment.height*-e-.5*GroundSegment.height+GameConstant.CameraFollowDist,this.groundSegments.push(t)}},t.prototype.resetRoad=function(){for(this.roadSegments.forEach(function(e){return e.dispose()}),this.roadSegments.length=0,this.roadIndex=-2;this.roadIndex<=15;){var e=ObjectPool.inst.get(RoadSegment);this.roadSegments.push(e),e.reset(this.roadIndex++*-e.height)}for(var t=0;t<this.groundSegments.length;++t){var i=this.groundSegments[t];i.mesh.position.z=GroundSegment.height*-t-.5*GroundSegment.height+GameConstant.CameraFollowDist,i.mesh.parent&&i.mesh.parent.remove(i.mesh),GroundSegment.geo&&this.scene.add(i.mesh)}},t.prototype.updateRoad=function(){for(;this.roadSegments[0].mesh.position.z>this.cameraPos.z+RoadSegment.height+GameConstant.ReviveBackDist;){var e=this.roadSegments.shift();this.roadSegments.push(e),e.mesh.position.z=this.roadIndex++*-e.height}if(GroundSegment.geo){var t=this.groundSegments[0];t.mesh.position.z-.5*GroundSegment.height>this.cameraPos.z&&(t.mesh.position.z-=GroundSegment.height*this.groundSegments.length,this.groundSegments.push(this.groundSegments.shift()))}},t.prototype.initTrees=function(){for(var e=0;e<this.treePairs;++e)this.trees.push(new Tree("l"),new Tree("r"))},t.prototype._getTreeGap=function(){return"shamo"!=GameConstant.Map?25:Utils.randomRange(25,40)},t.prototype.resetTrees=function(){this.treesZL=0,this.treesZR=0;for(var e=0;e<this.treePairs;++e){var t=this._getTreeGap(),i=this._getTreeGap();this.trees[2*e].reset(this.treesZL-=t),this.trees[2*e+1].reset(this.treesZR-=i)}},t.prototype.updateTrees=function(){var e=this,t=this.cameraPos.z+5;this.trees.forEach(function(i){if(i.mesh.position.z>t){var n=e._getTreeGap();n="l"==i.side?e.treesZL-=n:e.treesZR-=n,i.reset(n)}})},t.prototype.resetWind=function(){this._windTime=0},t.prototype.updateWind=function(e){this.player.boost<=0||(this._windTime+=4*t.inst.player.boostLevel*e,this._windTime>1&&(this._windTime=0,ObjectPool.inst.get(WindLine).reset()))},t.prototype.revive=function(){this.player.dead=!1,this.player.group.visible=!0,this.player.invincible=!0,AudioPlayer.resumeMusic(),this.ticker.start()},t.prototype.touchBegin=function(e){app.ui.getPopup(GameView)&&e.target===app.ui.getPopup(GameView).btn_try||isNaN(this.touchID)&&this.running&&!this.player.dead&&(this.touchID=e.touchPointID,this.ticking()||(this.ticker.start(),AudioPlayer.playMusic()),this.startX=e.stageX,Context.stage.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),Context.stage.addEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),Context.stage.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.touchEnd,this))},t.prototype.touchMove=function(e){if(e.touchPointID==this.touchID&&this.ticking){var t=e.stageX-this.startX;this.startX=e.stageX,this.player.moveX(t)}},t.prototype.touchEnd=function(e){e.touchPointID==this.touchID&&(this.touchID=0/0,Context.stage.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.touchMove,this),Context.stage.removeEventListener(egret.TouchEvent.TOUCH_END,this.touchEnd,this),Context.stage.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.touchEnd,this))},t}(egret.EventDispatcher);__reflect(Game.prototype,"Game");var GroundSegment=function(){function e(){this.mesh=new tr.Mesh(e.geo,e.mtl)}return e.init=function(){this.geo=void 0,this.mtl=void 0;var e=Res3DManager.getFBX(GameConstant.Map+".fbx").children.find(function(e){return"dixing"==e.name});e&&(this.geo=e.geometry,this.mtl=e.material)},e.init4Theme=function(t){this.mtl&&Game.inst.materialCtr.remove(this.mtl),this.init(),this.mtl&&Game.inst.materialCtr.add(this.mtl),t.forEach(function(t){t.mesh.geometry=e.geo,t.mesh.material=e.mtl})},e.height=104.39,e}();__reflect(GroundSegment.prototype,"GroundSegment");var ImgOfTargetToSurpass=function(){function e(){this._loader=new tr.ImageLoader,this._tex=new tr.Texture,this._mesh=new tr.Mesh(new tr.PlaneGeometry(1,1),new tr.MeshBasicMaterial({transparent:!0,map:this._tex})),this._mesh.position.y=1.2}return e.prototype.loadImage=function(e){var t=this;this._mesh.visible=!1,e&&this._loader.load(e,function(i){t._mesh.visible=!0;var n=e.search(/\.(jpg|jpeg)$/)>0;t._tex.image=i,t._tex.format=n?tr.RGBFormat:tr.RGBAFormat,t._tex.needsUpdate=!0,t._tex.anisotropy=4},void 0,function(e){})},e.prototype.setTarget=function(e){e!=this._target&&(this._target&&(this._target._namePlane.mesh.visible=!0,this._mesh.parent.remove(this._mesh)),this._target=e,this._target&&(this._target.group2.add(this._mesh),this._target._namePlane.mesh.visible=!1),this.loadImage(e&&e.robotInfo.photo))},e.prototype.update=function(){},e}();__reflect(ImgOfTargetToSurpass.prototype,"ImgOfTargetToSurpass");var MaterialCtr=function(){function e(){this._mtls=[],this._uniformValues=[],this._settedup=!1,this._progress=0,this._distOffsetFrom=new tr.Vector4,this._distOffsetTo=new tr.Vector4}return e.prototype.add=function(e){this._mtls.push(e)},e.prototype.addMulti=function(e){(t=this._mtls).push.apply(t,e);var t},e.prototype.hasAdd=function(e){return this._mtls.includes(e)},e.prototype.remove=function(e){this._mtls.rm(e)},e.prototype.setup=function(){this._settedup||this.gotoNextDistOffset(),this._settedup=!0;for(var e=Game.inst.world.renderer.properties,t=0;t<this._mtls.length;++t){var i=e.get(this._mtls[t]).shader;i&&(this._uniformValues.push(i.uniforms.distOffset.value),this._mtls.splice(t--,1))}},e.prototype.reset=function(){this._uniformValues.forEach(function(e){e.x=0,e.y=0}),this._progress=0,this._distOffsetFrom.set(0,0,0,0),this._distOffsetTo.set(0,0,0,0)},e.prototype.update=function(e){var t=this,i=.02*Game.inst.player._speed;this._progress+=.2*e*i,this._progress>=1&&(this._progress=0,this._distOffsetFrom.copy(this._distOffsetTo),this.gotoNextDistOffset()),this._distOffsetCrt=this._distOffsetFrom.clone().lerp(this._distOffsetTo,this._progress),this._uniformValues.forEach(function(e){e.x=t._distOffsetCrt.x,e.y=t._distOffsetCrt.y})},e.prototype.currentOffset=function(){return this._distOffsetCrt},e.prototype.gotoNextDistOffset=function(){var e=70,t=Math.random()*e*(Math.random()>.5?-1:1),i=Math.random()*e;this._distOffsetTo.set(t,i,0,0)},e}();__reflect(MaterialCtr.prototype,"MaterialCtr");var Obstacle=function(e){function t(){var t=e.call(this)||this;return t.group=new tr.Group,t.moving=!1,t.slope=!1,t.lowGate=!1,t._moveIndexTime=0,t._moveIndex=0,t.group.position.y=-GameConstant.BallR,t.position=t.group.position,t}return __extends(t,e),t.init=function(){this.init4Theme(),ObjectPool.inst.register(t,5)},t.init4Theme=function(){var e=Res3DManager.getFBX(GameConstant.Map+".fbx").children,t=e.find(function(e){return"xiangzi"==e.name}),i=e.find(function(e){return"tantiao"==e.name}),n=e.find(function(e){return"jiasu"==e.name});this.geoBox=t.geometry,this.geoSlope=i.geometry,this.geoBooster=n.geometry,this.mtl=this.mtl||t.material,this.mtl.map.anisotropy=GameConstant.Anisotropy},t.prototype.name=function(){return"Obstacle"},t.prototype.reset=function(e,t,i,n,r){var o=this;this.boxes=e,this.boxes.forEach(function(e){o.group.add(e.mesh)}),this.group.position.z=t,this.group.position.x=i,this.group.rotation.y=n?Math.PI:0,this.collisions=r.map(function(e){return e.map(function(e){return n?-e:e})}),Game.inst.scene.add(this.group),this.moving&&(egret.Tween.removeTweens(this.position),this.moving=!1),this.slope=!1,this.lowGate=!1},t.prototype.startMoving=function(e,t){var i=this;this.moving=!0;var n=this._movePath=0==e?t?[-1,2,-2,2]:[1,-2,2,-2]:t?[2,-2]:[-2,2];this.group.position.x=2*n[0];var r=egret.Tween.get(this.position,{loop:!0}),o=Utils.randomRange(Game.inst.lvlCfg.cubeSpMin,Game.inst.lvlCfg.cubeSpMax);this._moveInterval=1e3/o,this._moveIndex=0,this._moveIndexTime=egret.getTimer();for(var a=function(e){var t=2*n[(e+1)%n.length];r=r.call(function(){i._moveIndex=e,i._moveIndexTime=egret.getTimer()}).to({x:t},s._moveInterval,egret.Ease.quadInOut)},s=this,l=0;l<n.length;++l)a(l)},t.prototype.getEstimatedPos=function(e){var t=egret.getTimer()-this._moveIndexTime,i=Utils.clamp(t/this._moveInterval,0,1),n=1e3*e/this._moveInterval+i;i=n%1;var r=(this._moveIndex+(0|n))%this._movePath.length,o=2*this._movePath[r],a=2*this._movePath[(r+1)%this._movePath.length];i=egret.Ease.getPowInOut(2)(i);var s=(a-o)*i+o;return s},t.prototype.dispose=function(){var t=this;this.boxes.forEach(function(e){t.group.remove(e.mesh),e.dispose()}),Game.inst.scene.remove(this.group),e.prototype.dispose.call(this)},t.prototype.update=function(e){return this.group.position.z>Game.inst.cameraPos.z-1},t}(PoolObject);__reflect(Obstacle.prototype,"Obstacle");var ObstacleType;!function(e){e[e.empty=0]="empty",e[e.slope=1]="slope",e[e.box=2]="box",e[e.movingBox=3]="movingBox",e[e.gate=4]="gate",e[e.border=5]="border",e[e.random=6]="random",e[e.max=7]="max"}(ObstacleType||(ObstacleType={}));var Obstacles;!function(e){e[e.box=0]="box",e[e.ramp_0=1]="ramp_0",e[e.ramp_1=2]="ramp_1",e[e.ramp_2=3]="ramp_2",e[e.ramp_3=4]="ramp_3",e[e.ramp_4=5]="ramp_4",e[e.ramp_5=6]="ramp_5",e[e.gate_0=7]="gate_0",e[e.gate_1=8]="gate_1",e[e.gate_2=9]="gate_2",e[e.gateL_0=10]="gateL_0",e[e.gateL_1=11]="gateL_1",e[e.gateL_2=12]="gateL_2",e[e.I_0=13]="I_0",e[e.I_1=14]="I_1",e[e.I_2=15]="I_2",e[e.L_0=16]="L_0",e[e.L_1=17]="L_1",e[e.L_2=18]="L_2",e[e.L_3=19]="L_3",e[e.L_4=20]="L_4",e[e.T_0=21]="T_0",e[e.T_1=22]="T_1",e[e.T_2=23]="T_2",e[e.T_3=24]="T_3"}(Obstacles||(Obstacles={}));var ObstacleCtr=function(){function e(){this.groups=(e={},e[ObstacleType.empty]=[[null,null,null,null,null,null]],e[ObstacleType.slope]=[[null,null,[Obstacles.ramp_0],null,null]],e[ObstacleType.box]=[[null,[Obstacles.box,2],null,[Obstacles.box,3],null,[Obstacles.box,0],null],[null,[Obstacles.box,3],null,[Obstacles.box,1],null,[Obstacles.box,4],null],[null,[Obstacles.box,4],null,[Obstacles.box,2],null],[null,[Obstacles.box,2],null,[Obstacles.box,0],null]],e[ObstacleType.movingBox]=[[null,[Obstacles.box,1,0],null,[Obstacles.box,1,1],null,[Obstacles.box,1,0],null],[null,[Obstacles.box,1,0],null,[Obstacles.box,0,0],null,[Obstacles.box,1,1],null,[Obstacles.box,3],null],[null,[Obstacles.box,1,0],null,[Obstacles.box,0,0],null,[Obstacles.box,2],null,[Obstacles.box,1,1],null],[null,[Obstacles.box,0,1],null,[Obstacles.box,3],null,[Obstacles.box,0],null],[null,[Obstacles.box,1],null,[Obstacles.box,0,1],null,[Obstacles.gateL_0,3],null],[null,[Obstacles.box,2],null,[Obstacles.box,0,0],null,[Obstacles.box,0],null]],e[ObstacleType.border]=[[null,[Obstacles.I_0,0],null,[Obstacles.T_0,1],null,[Obstacles.L_0,0],null,null],[null,[Obstacles.I_0,1],null,[Obstacles.L_1,0],null,[Obstacles.L_2,1],null,null],[null,[Obstacles.I_2,0],null,[Obstacles.T_2,1],null,[Obstacles.L_0,0],null,[Obstacles.L_4,1],null],[null,[Obstacles.I_1,1],null,[Obstacles.I_0,0],null,[Obstacles.L_3,1],null,[Obstacles.T_1,1],null],[null,[Obstacles.L_2,0],null,[Obstacles.I_1,1],null,[Obstacles.L_3,0],null,[Obstacles.T_0,1],null],[null,[Obstacles.I_2,1],null,[Obstacles.L_3,0],null,[Obstacles.I_1,1],null,[Obstacles.T_1,0],null]],e[ObstacleType.gate]=[[null,[Obstacles.gate_0],null,[Obstacles.gate_1],null,[Obstacles.gate_2],null,[Obstacles.L_1,0],null],[null,[Obstacles.gate_2],null,[Obstacles.gateL_2,1],null,[Obstacles.gateL_1,1],null,[Obstacles.gateL_2,0],null],[null,[Obstacles.gateL_1,0],null,[Obstacles.gate_1],null,[Obstacles.gateL_2,0],null,[Obstacles.gate_2],null],[null,[Obstacles.L_3,0],null,[Obstacles.gateL_0],null,[Obstacles.gateL_2,1],null,[Obstacles.L_4,0],null],[null,[Obstacles.I_2,0],null,[Obstacles.gate_0],null,[Obstacles.gateL_2,1],null,[Obstacles.L_4,0],null]],e),this.compound=(t={},t[Obstacles.box]=[[0]],t[Obstacles.ramp_0]=[[0,1],[1,1],[2,0],[3,1],[4,1]],t[Obstacles.ramp_1]=[[0,0],[1,1],[2,1],[3,1],[4,0]],t[Obstacles.ramp_2]=[[0,0],[1,0],[2,0],[3,1],[4,1]],t[Obstacles.ramp_3]=[[0,0],[1,0],[2,1],[3,1],[4,0]],t[Obstacles.ramp_4]=[[0,0],[1,1],[2,1],[3,0],[4,0]],t[Obstacles.ramp_5]=[[0,1],[1,1],[2,0],[3,0],[4,0]],t[Obstacles.gate_0]=[[0],[5],[6],[7],[8],[9],[4]],t[Obstacles.gate_1]=[[0],[5],[10],[11],[12],[13],[14],[9],[4]],t[Obstacles.gate_2]=[[0],[5],[10],[15],[16],[17],[18],[19],[14],[9],[4]],t[Obstacles.gateL_0]=[[0],[5],[10],[15],[16],[17],[18],[19]],t[Obstacles.gateL_1]=[[0],[5],[10],[11],[12],[13],[14]],t[Obstacles.gateL_2]=[[0],[5],[6],[7],[8],[9]],t[Obstacles.I_0]=[[0],[5]],t[Obstacles.I_1]=[[0],[5],[10]],t[Obstacles.I_2]=[[0],[5],[10],[15]],t[Obstacles.L_0]=[[0],[5],[1]],t[Obstacles.L_1]=[[0],[5],[6]],t[Obstacles.L_2]=[[0],[5],[10],[1]],t[Obstacles.L_3]=[[0],[5],[10],[15],[1]],t[Obstacles.L_4]=[[0],[5],[10],[15],[16]],t[Obstacles.T_0]=[[0],[5],[10],[6]],t[Obstacles.T_1]=[[0],[5],[10],[11]],t[Obstacles.T_2]=[[0],[5],[10],[15],[6]],t[Obstacles.T_3]=[[0],[5],[10],[15],[11]],t),this.collisions=(i={},i[Obstacles.ramp_0]=[[0]],i[Obstacles.ramp_1]=[[-2],[2]],i[Obstacles.ramp_2]=[[-2,-1,0]],i[Obstacles.ramp_3]=[[-2,-1],[2]],i[Obstacles.ramp_4]=[[-2],[1,2]],i[Obstacles.ramp_5]=[[0,1,2]],i[Obstacles.gate_0]=[[-2],[2]],i[Obstacles.gate_1]=[[-2],[2]],i[Obstacles.gate_2]=[[-2],[2]],i[Obstacles.L_0]=[[-2,-1]],i[Obstacles.L_2]=[[-2,-1]],i[Obstacles.L_3]=[[-2,-1]],i),this.Gap=5,this._z=0,this._obstacles=[],this._protectCount=5,this._currentCfg=[],this._currentCfgIndex=0,this.BoosterGen=5,ObjectPool.inst.register(ObsBox,20),ObjectPool.inst.register(ObsSlope,5);var e,t,i}return e.prototype.getObstacleParts=function(e){var t=[],i=this.compound[e];return i.forEach(function(e){var i=e[0],n=e[1],r=ObjectPool.inst.get(n?ObsSlope:ObsBox);r.reset(),r.mesh.position.x=i%5*2,r.mesh.position.y=2*Math.floor(i/5),t.push(r)}),t},e.getObsX=function(e){var t=e=0>e?0:e>4?4:e;return 2*t-4},e.prototype.reset=function(){this._z=0,egret.log("obs dispose",this._obstacles.length),this._obstacles.forEach(function(e){e.dispose()}),this._obstacles.length=0,this._obstaclesMap={},this._protectCount=5,this._currentCfg.length=0,this._currentCfgIndex=0,this._boosterGen=this.BoosterGen,Game.inst.player.group.position.z<0&&egret.error("reset Player first"),this.update(1)},e.prototype.update=function(e){for(var t=Game.inst.player.group.position.z;this._z>t-20*this.Gap;)this._z-=this.Gap,this.createOne(this._z);for(var i=0;i<this._obstacles.length;++i){var n=this._obstacles[i];n.update(e)&&(n.dispose(),this._obstacles.splice(i--,1))}},e.prototype.getObstaclePage=function(e){return Math.floor(e/this.Gap)},e.prototype.getObstacleByPage=function(e){return this._obstaclesMap[e]},e.prototype.deleteObstacleOfPage=function(e){delete this._obstaclesMap[e]},e.prototype.getNextObstacleType=function(){var e=Game.inst.lvlCfg.weight,t=0;e.forEach(function(e){return t+=e});var i=Math.random()*t,n=e.findIndex(function(e){return(i-=e)<0});return n},e.prototype.createARandomGroup=function(){for(var e=[],t=Utils.randomInt(1,3);t>=0;t--)e.push(null),Math.random()<.5?e.push([Obstacles.box,Utils.randomInt(0,5)]):e.push([Obstacles.box,Math.round(Math.random()),Math.round(Math.random())]);return e},e.prototype.createOne=function(t){if(this._protectCount>0)return this._protectCount--,void(1==this._protectCount&&this.createBooster(t));if(this._protectCount=4,!this._currentCfg.length||this._currentCfgIndex>=this._currentCfg.length){var i=this.getNextObstacleType();this._currentCfg=i==ObstacleType.random?this.createARandomGroup():Utils.randomInArr(this.groups[i]),this._currentCfgIndex=0}var n=this._currentCfg[this._currentCfgIndex++];if(n){var r=ObjectPool.inst.get(Obstacle);this._obstaclesMap[t/this.Gap|0]=r,this._obstacles.push(r);var o,a,s=n[0],l=!1,u=n.length>2,c=!1;s==Obstacles.ramp_0?(s=Utils.randomInt(Obstacles.ramp_0,Obstacles.ramp_5+1),o=e.getObsX(0),c=!0):s==Obstacles.box?(a=[[(n[1]||0)-2]],o=e.getObsX(n[1]||0)):(l=!!n[1]||!0,o=e.getObsX(l?4:0));var h=this.getObstacleParts(s);r.reset(h,t,o,l,a||this.collisions[s]||[[-2]]),u&&r.startMoving(n[1],!!n[2]),r.slope=c,r.lowGate=s==Obstacles.gate_0||s==Obstacles.gateL_2}},e.prototype.createBooster=function(e){if(!(--this._boosterGen>0)){this._boosterGen=this.BoosterGen;var t=ObjectPool.inst.get(Booster);t.reset(e),this._obstaclesMap[e/this.Gap|0]=t,this._obstacles.push(t)}},e}();__reflect(ObstacleCtr.prototype,"ObstacleCtr");var ObsPart=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.reset=function(){},t.prototype.name=function(){return"ObsPart"},t.size=1.8,t}(PoolObject);__reflect(ObsPart.prototype,"ObsPart");var ObsBox=function(e){function t(){var t=e.call(this)||this;return t.mesh=new tr.Mesh(Obstacle.geoBox,Obstacle.mtl),t.mesh.scale.setScalar(GameConstant.ObsScale),t.mesh.rotation.x=.5*-Math.PI,t}return __extends(t,e),t.prototype.reset=function(){this.mesh.geometry=Obstacle.geoBox},t.prototype.name=function(){return"ObsBox"},t}(ObsPart);__reflect(ObsBox.prototype,"ObsBox");var ObsSlope=function(e){function t(){var t=e.call(this)||this;return t.mesh=new tr.Mesh(Obstacle.geoSlope,Obstacle.mtl),t.mesh.scale.setScalar(GameConstant.ObsScale),t.mesh.rotation.x=.5*-Math.PI,t}return __extends(t,e),t.prototype.reset=function(){this.mesh.geometry=Obstacle.geoSlope},t.prototype.name=function(){return"ObsSlope"},t}(ObsPart);__reflect(ObsSlope.prototype,"ObsSlope");var Player=function(e){function t(){var t=e.call(this)||this;return t.cameraDirty=!1,t._xMoved=0,t._invincibleTime=0,t.setSkin(app.pp.currentSkinID),t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this.cameraDirty=!0,Game.inst.cameraCtr.update(0)},t.prototype.moveX=function(e){this.dead||this._slowdown||(this._xMoved+=.03*e)},t.prototype.update=function(t){if(!this.dead){var i=this.group.position;this._xMoved&&(i.x+=this._xMoved,i.x<-4.5&&(i.x=-4.5),i.x>4.5&&(i.x=4.5),this._xMoved=0,this.cameraDirty=!0),e.prototype.update.call(this,t),this.updateInvincible(t),this.checkLowCamera()}},t.prototype.checkLowCamera=function(){if(this._obsPageLow!=this._obsPage){this._obsPageLow=this._obsPage;var e=Game.inst.obstacleCtr.getObstacleByPage(this._obsPageLow-1);if(e instanceof Obstacle&&e.lowGate){var t=Game.inst.cameraCtr;t.tweenAngleYTo(-4*GameConstant.ToRadian,function(){t.tweenAngleYTo(-10*GameConstant.ToRadian)})}}},Object.defineProperty(t.prototype,"invincible",{set:function(e){this._invincible=e,this._invincibleFx||(this._invincibleFx=new PlayerInvincibleFx,this.group2.add(this._invincibleFx.mesh)),this._invincibleFx.active=e,this._invincibleTime=e?4:0},enumerable:!0,configurable:!0}),t.prototype.updateInvincible=function(e){this._invincibleTime>0&&(this._invincibleTime-=e,this._invincibleTime<=0&&(this.invincible=!1))},t.prototype.die=function(){var t=this;if(e.prototype.die.call(this)){Game.inst.revived<=0&&app.platform.logEvent(Log.EventType.GameOver,{type:app.status.playerType,level:app.pp.currentLevel,result:2}),AudioPlayer.pauseMusic(),AudioPlayer.playSound("die-player.mp3");var i="old_player"==app.status.playerType||app.pp.currentLevel>1;return i&&app.ad.hasRAD()&&Game.inst.revived<1&&this.group.position.z<-5*GameConstant.BaseSpeed?(Game.inst.revived++,Utils.callLater(function(){Game.inst.ticker.stop(),app.ui.addPopup(new ReviveView(t.rank+1,Game.inst.currentProgress));app.ui.getPopup(GameView)},500)):Game.inst.finish(),Game.inst.revived<=0&&(-this.group.position.z<=5*GameConstant.BaseSpeed?app.platform.logEvent(Log.EventType.GameOver,{type:app.status.playerType,level:app.pp.currentLevel,result:0}):app.ad.hasRAD()||app.platform.logEvent(Log.EventType.GameOver,{type:app.status.playerType,level:app.pp.currentLevel,result:2})),!0}return!1},t.prototype.onHitBoost=function(){AudioPlayer.playSound("boost.mp3")},t}(PlayerBase);__reflect(Player.prototype,"Player");var EnterGameCmd=function(){function e(){}return e.prototype.excute=function(e,t){egret.log("enter EnterGameCmd"),LocalRobotData.getRobotsInfo().then(function(e){var t=app.status.localRobotData=e;if(t=t.concat(),Context.isFB){var i={id:FBInstant.player.getID(),name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto(),me:!0};t.splice(Utils.randomInt(0,t.length),0,i)}app.ui.addPopup(new GameView),Game.inst.start()})},e}();__reflect(EnterGameCmd.prototype,"EnterGameCmd",["ICommand"]);var PlayerBoostSprite=function(e){function t(){var i=e.call(this)||this;return i.sprite=new tr.Mesh(t.geo,new tr.MeshBasicMaterial({transparent:!0,map:Res3DManager.createTexture("fx-boost.png"),blending:tr.AdditiveBlending})),i.sprite.position.y=.1,i}return __extends(t,e),t.prototype.name=function(){return"PlayerBoostSprite"},t.init=function(){this.geo=new tr.PlaneGeometry(1,1),ObjectPool.inst.register(t,10)},t.prototype.reset=function(){var e=this;Game.inst.scene.add(this.sprite),!Game.inst.materialCtr.hasAdd(this.sprite.material)&&Game.inst.materialCtr.add(this.sprite.material);var t=1.5,i=1.6,n=.5,r=400;this.sprite.material.opacity=.4,this.sprite.scale.setScalar(t),this.sprite.position.z=-.5,egret.Tween.get(this.sprite.position).to({z:2},r),egret.Tween.get(this.sprite.material).to({opacity:1},r/4).wait(r/2).to({opacity:0},r/4),egret.Tween.get(this.sprite.scale).to({x:i,y:i,z:i},r/3).to({x:n,y:n,z:n},2*r/3).wait(50).call(function(){e.dispose()})},t.prototype.dispose=function(){Game.inst.scene.remove(this.sprite),e.prototype.dispose.call(this)},t}(PoolObject);__reflect(PlayerBoostSprite.prototype,"PlayerBoostSprite");var PlayerDieFx=function(e){function t(){var i=e.call(this)||this;i.splatters1=[],i.splatters2=[],i.ticker=new Ticker(i.update,i),i.group=new tr.Group,i.elapsed=0,i.time=.15,i.haloMtl=new tr.SpriteMaterial({map:t.texHalo}),i.splatters1Mtl=new tr.SpriteMaterial({map:t.texSplatter}),i.splatters2Mtl=new tr.MeshBasicMaterial({map:t.texSplatter,transparent:!0}),i.halo=new tr.Sprite(i.haloMtl),i.group.add(i.halo);for(var n=0;5>n;++n){var r=new tr.Sprite(i.splatters1Mtl);i.group.add(r),i.splatters1.push(r)}for(var n=0;4>n;++n){var o=new tr.Mesh(t.geoPlane,i.splatters2Mtl);o.rotateX(Math.PI*-.5),i.group.add(o),i.splatters2.push(o)}return i}return __extends(t,e),t.prototype.name=function(){return"PlayerDieFx"},t.init=function(){this.texHalo=Res3DManager.createTexture("fx-die1.png"),this.texSplatter=Res3DManager.createTexture("fx-die2.png"),this.geoPlane=new tr.PlaneGeometry(1,1),ObjectPool.inst.register(t,1)},t.prototype.reset=function(e,t){Game.inst.scene.add(this.group),this.group.position.set(e,-GameConstant.BallR+.05,t);var i=3;this.halo.scale.setScalar(1),this.haloMtl.opacity=1,egret.Tween.get(this.halo.scale).to({x:i,y:i,z:i},200,egret.Ease.quadOut),egret.Tween.get(this.haloMtl).wait(100).to({opacity:0},100),this.splatters2Mtl.opacity=1,egret.Tween.get(this.splatters2Mtl).wait(1e3).to({opacity:0},500).call(this.dispose,this),this.splatters2.forEach(function(e){e.position.x=Utils.randomRange(-.5,.5),e.position.z=Utils.randomRange(-.5,.5)}),this.splatters1.forEach(function(e){e.dirx=Utils.randomRange(-1,1),e.diry=Math.random(),e.dist=Utils.randomRange(2,5)}),this.elapsed=0,this.ticker.start(),Game.inst.materialCtr.add(this.haloMtl),Game.inst.materialCtr.add(this.splatters1Mtl),Game.inst.materialCtr.add(this.splatters2Mtl)},t.prototype.update=function(e){this.elapsed+=.001*e;var t=this.elapsed/this.time;t>1&&(t=1,this.ticker.stop()),this.splatters1.forEach(function(e){e.position.x=e.dirx*e.dist*t,e.position.y=e.diry*e.dist*t,e.scale.setScalar(1-.8*t)}),this.splatters1Mtl.opacity=1-t},t.prototype.dispose=function(){Game.inst.scene.remove(this.group),Game.inst.materialCtr.remove(this.haloMtl),Game.inst.materialCtr.remove(this.splatters1Mtl),Game.inst.materialCtr.remove(this.splatters2Mtl),e.prototype.dispose.call(this)},t}(PoolObject);__reflect(PlayerDieFx.prototype,"PlayerDieFx");var PlayerInvincibleFx=function(){function e(){this._active=!1,this.mesh=new tr.Mesh(e.geo,e.mtl),this.mesh.scale.setScalar(1.3*GameConstant.FBXScale),this.mesh.visible=!1}return Object.defineProperty(e.prototype,"active",{set:function(e){this._active!=e&&(this._active=e,this.mesh.visible=e,e?egret.Tween.get(this.mesh.rotation,{loop:!0}).set({y:0}).to({y:2*Math.PI},2e3):egret.Tween.removeTweens(this.mesh.rotation))},enumerable:!0,configurable:!0}),e.init=function(){this.mtl=new tr.MeshBasicMaterial({map:Res3DManager.createTexture("tietu_fuhuoqiu.jpg"),transparent:!0,opacity:.7}),this.geo=Res3DManager.getMeshFromFBX("ball_fuhuo","ball.fbx").geometry},e}();__reflect(PlayerInvincibleFx.prototype,"PlayerInvincibleFx");var RoadSegment=function(e){function t(){var i=e.call(this)||this;return i.height=t.height,i.mesh=new tr.Mesh(t.geo,t.mtl),i.mesh.rotateX(Math.PI*-.5),i.mesh.position.y=-GameConstant.BallR,i}return __extends(t,e),t.prototype.name=function(){return"RoadSegment"},t.prototype.reset=function(e){Game.inst.scene.add(this.mesh),this.mesh.position.z=e},t.prototype.dispose=function(){Game.inst.scene.remove(this.mesh),e.prototype.dispose.call(this)},t.init=function(){this.geo=new tr.PlaneGeometry(this.height,this.height,2,2);var e=Res3DManager.createTexture("lane_"+GameConstant.Map+".jpg",GameConstant.Anisotropy);0==Game.inst.world.renderer.getMaxAnisotropy()&&"shamo"==GameConstant.Map&&(e.minFilter=e.magFilter=tr.NearestFilter),this.mtl=new tr.MeshBasicMaterial({map:e}),ObjectPool.inst.register(t,20)},t.height=10,t}(PoolObject);__reflect(RoadSegment.prototype,"RoadSegment");var Robot=function(e){function t(){var t=e.call(this)||this;return t._namePlane=new TextPlane(.5,64,16777215),t.isTough=!1,t._avoidRate=1,t._boostRate=2,t._active=!1,t._moveTime=0,t._movedTime=0,t._namePlane.mesh.position.y=1.2,t.group2.add(t._namePlane.mesh),t}return __extends(t,e),t.prototype.reset=function(){e.prototype.reset.call(this),this._active=this.group.visible=!1,this._speed=GameConstant.BaseSpeedRobot,this.setSkin(Utils.randomInt(1,app.status.skinItemData.length),!0),this._avoidRate=Game.inst.lvlCfg.obstacle[this.aiLv],this._boostRate=Game.inst.lvlCfg.speedup[this.aiLv],this._tailerTimeMin=Game.inst.lvlCfg.partnernum[1],this._tailerTimeMax=Game.inst.lvlCfg.partnernum[2],this._roamInfo=void 0
},t.prototype.setRobotInfo=function(e,t){this.robotInfo=e},t.prototype.update=function(e){if(!this.dead){var t=Utils.isInRange(this.group.position.z,Game.inst.cameraPos.z-100,Game.inst.cameraPos.z+5),i=this.group.position.z>=Game.inst.cameraPos.z;this._active!=t&&(this._active=t,this.group.visible=t,t&&this.trail.reset()),t?(this.checkObstacles(),this.updateMoveTo(e),this.updateRoaming(e),this.updateZ(e),this.updateBoost(e),this.group.position.z>Game.inst.cameraPos.z-70&&this.checkCollision(),this.updateJump(e),this.trail.update()):i?this._tailingInfo?this.updateTailingInfo(e):this.boost?(this.updateZ(e),this.updateBoost(e)):this.isTough?this._tailingInfo={remaining:Utils.randomRange(this._tailerTimeMin,this._tailerTimeMax),zOffset:Utils.randomRange(10,25)}:this.die(!0):(this.updateZ(e),this.updateBoost(e))}},t.prototype.checkObstacles=function(){var e=Game.inst.obstacleCtr.getObstaclePage(this.group.position.z);this._moveToOnPage&&this._moveToOnPage.page==e&&(this.resetRoaming(),this.moveTo(this._moveToOnPage.x),this._moveToOnPage=void 0);var t=e-3,i=Game.inst.obstacleCtr.getObstacleByPage(t);if(i&&t!=this._pageChecked)if(this._pageChecked=t,this._moveToOnPage=void 0,i instanceof Booster){if(Math.random()>this._boostRate)return;var n=Game.inst.obstacleCtr.getObstacleByPage(e);n?this._moveToOnPage={page:e-1,x:i.position.x+Utils.randomRange(-.4,.4)}:(this.resetRoaming(),this.moveTo(i.position.x+Utils.randomRange(-.4,.4)))}else if(i.moving){if(Math.random()>this._avoidRate)return;var r=this.group.position.z-(i.position.z+.5),o=r/this.currentSpeed,a=i.getEstimatedPos(o),s=void 0;s=Math.abs(a)>2.2?-a:a>0?-4:4,this.resetRoaming(),this.moveTo(s)}else{var l=this._getAisleByCollision(i.collisions),u=1==l.length?l[0]:Utils.randomInArr(l),c=u.min+GameConstant.BallR+.1,h=u.max-GameConstant.BallR-.1;if(!Utils.isInRange(this.currentXOrMovingTo(),c,h)){var p=Utils.randomRange(c,h);this.resetRoaming(),this.moveTo(p)}}},t.prototype._getAisleByCollision=function(e){for(var t=[],i=!0,n=function(n){e.some(function(e){return e.some(function(e){return e==n})})?i=!0:(i&&(i=!1,t.push([])),t[t.length-1].push(n))},r=-2;3>r;++r)n(r);return this.getCollisionXRange(t)},t.prototype.roam=function(){this._roamInfo={delay:Utils.randomRange(2,4),duration:Utils.randomRange(.5,1),toX:Utils.randomRange(-4,4)}},t.prototype.resetRoaming=function(){this._roamInfo&&(this._roamInfo.delay=Utils.randomRange(2,4))},t.prototype.updateRoaming=function(e){this._roamInfo?(this._roamInfo.delay-=e)<0&&(this.moveTo(this._roamInfo.toX,this._roamInfo.duration),this._roamInfo=void 0):this._movedTime>=this._moveTime&&this.roam()},t.prototype.moveTo=function(e,t){void 0===t&&(t=0),this._moveTime=t||Utils.randomRange(.15,.25)-.04*this.boost,this._movedTime=0,this._moveFrom=this.group.position.x,this._moveDiff=e-this.group.position.x},t.prototype.currentXOrMovingTo=function(){return this._movedTime<this._moveTime?this.group.position.x=this._moveFrom+this._moveDiff:this.group.position.x},t.prototype.stopMoving=function(){this._movedTime=this._moveTime=0},t.prototype.updateMoveTo=function(e){this._movedTime<this._moveTime&&(this._movedTime+=e,this._movedTime>this._moveTime&&(this._movedTime=this._moveTime),this.group.position.x=this._moveFrom+this._moveDiff*this._movedTime/this._moveTime)},t.prototype.updateTailingInfo=function(e){this._tailingInfo.remaining-=e;var t=-Game.inst.cameraPos.z<GameConstant.TrackLength-300||Game.inst.complete;this._tailingInfo.remaining<0&&t&&(this.group.position.z=Game.inst.cameraPos.z+this._tailingInfo.zOffset,this.boost=1,this.onBoostChange(),this._tailingInfo=void 0,egret.log("tailer boost"))},t.prototype.slowDown=function(){e.prototype.slowDown.call(this),this._tailingInfo&&(this._tailingInfo.remaining=0,this.group.position.z=Game.inst.cameraPos.z+this._tailingInfo.zOffset)},t.prototype.tryBoost=function(){return Math.random()>Game.inst.lvlCfg.beyondRate?!1:(this.boost=1,this.onBoostChange(),this.group.position.z-=3,!0)},t.prototype.die=function(t){return void 0===t&&(t=!1),Game.inst.nowPlayerCount--,e.prototype.die.call(this,t)?(t||AudioPlayer.playSound("die-others.mp3"),!0):!1},t}(PlayerBase);__reflect(Robot.prototype,"Robot");var RobotCtr=function(){function e(){this.robots=[],this._boostRateSum=0,this._targetImg=new ImgOfTargetToSurpass,this._crown=new Crown,this.ranks=[],this._rankInterval=.5;for(var e=0;e<GameConstant.PlayersCount-1;++e)this.robots[e]=new Robot,this.ranks.push(this.robots[e]);this.ranks.push(Game.inst.player)}return e.prototype.reset=function(){for(var e=this,t=[],i=0;2>i;++i)t.push(0);for(var i=0;5>i;++i)t.push(1);for(var i=0;4>i;++i)t.push(2);for(var n=[],i=0;i<Game.inst.lvlCfg.partnernum[0];++i)n[i]=!0;for(var i=n.length;i<GameConstant.PlayersCount;++i)n[i]=!1;Utils.makeArrayRandom(t),Utils.makeArrayRandom(n);var r=GameConstant.TrackLength-1,o=(r-r/GameConstant.BaseSpeed*GameConstant.BaseSpeedRobot,GameConstant.RobotGap);this.robots.forEach(function(i,r){i.aiLv=t[r],i.isTough=n[r],i.reset(),i.group.position.z=-o*(r+1),i.group.position.x=Utils.randomRange(-5+GameConstant.BallR,5-GameConstant.BallR),i.group.visible=!0,i.setRobotInfo(app.status.localRobotData[r],e.robots.length-r)}),this._targetImg.setTarget(null),this._crown.setTarget(null)},e.prototype.updateRanks=function(e){if(void 0===e&&(e=!1),!Game.inst.complete||e){this.ranks.sort(function(e,t){return e.group.position.z-t.group.position.z}),this.ranks.forEach(function(e,t){e.rank=t,e instanceof Robot&&(e._namePlane.text=Utils.getRankNumberText(t+1))});var t=Game.inst.player.rank-1,i=this.ranks[t];i&&i._active&&0!=t?this._targetImg.setTarget(i):this._targetImg.setTarget(null),this._crown.setTarget(this.ranks[0])}},e.prototype.visible=function(e){this.robots.forEach(function(t){t.group.visible=e})},e.prototype.getRobotsMtls=function(){var e=[this._targetImg._mesh.material,this._crown.mesh.material];return this.robots.forEach(function(t){e.push(t.ball.material),e.push(t._namePlane.mesh.material)}),e},e.prototype.allSlowDown=function(){this.robots.forEach(function(e){e.slowDown()}),this.updateRanks(!0)},e.prototype.update=function(e){if(this.robots.forEach(function(t){t.update(e)}),this._crown.update(e),(this._rankInterval-=e)<0){this._rankInterval=.5,this.updateRanks();var t=app.ui.getPopup(GameView);t&&(t.txt_ranking.text=Utils.getRankNumberText(Game.inst.player.rank+1))}this._targetImg.update()},e}();__reflect(RobotCtr.prototype,"RobotCtr");var Trail=function(){function e(t,i){void 0===t&&(t=8),void 0===i&&(i=.25),this.fragments=t,this.hW=i,this._postions=[],this.geo=new tr.BufferGeometry;var n=2*this.fragments;this.bufferPosition=new Float32Array(3*n),this.attrPosition=new tr.BufferAttribute(this.bufferPosition,3),this.bufferUV=new Float32Array(2*n),this.attrUV=new tr.BufferAttribute(this.bufferUV,2),this.geo=new tr.BufferGeometry,this.geo.addAttribute("position",this.attrPosition),this.geo.addAttribute("uv",this.attrUV);for(var r=[],o=0;n-2>o;o+=2)r.push(o,o+2,o+1),r.push(o+1,o+2,o+3);this.geo.setIndex(r),this.mesh=new tr.Mesh(this.geo,e.mtl)}return e.init=function(){this.mtl=new tr.MeshBasicMaterial({transparent:!0,map:Res3DManager.createTexture("player-trail.png")})},e.prototype.reset=function(){this._postions.length=0,this.bufferPosition.forEach(function(e,t,i){i[t]=0}),this.bufferUV.forEach(function(e,t,i){i[t]=0}),this.attrPosition.needsUpdate=!0,this.attrUV.needsUpdate=!0},e.prototype.update=function(){var e=this,t=this.mesh.localToWorld(new tr.Vector3);for(this._postions.unshift(t);this._postions.length>this.fragments;)this._postions.pop();var i=this._postions.length;this._postions.forEach(function(n,r){var o=n.x-t.x,a=n.y-t.y,s=n.z-t.z,l=2*r,u=2*r+1;e.bufferPosition[3*l]=o-e.hW,e.bufferPosition[3*l+1]=a,e.bufferPosition[3*l+2]=s,e.bufferPosition[3*u]=o+e.hW,e.bufferPosition[3*u+1]=a,e.bufferPosition[3*u+2]=s,e.bufferUV[2*l]=0,e.bufferUV[2*l+1]=1-r/(i-1),e.bufferUV[2*u]=1,e.bufferUV[2*u+1]=1-r/(i-1)}),this.attrPosition.needsUpdate=!0,this.attrUV.needsUpdate=!0},e}();__reflect(Trail.prototype,"Trail");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,i){function n(n){t.call(i,n,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?n(r):RES.getResAsync(e,n,this)}else RES.getResByUrl(e,n,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var WindLine=function(e){function t(){var t=e.call(this)||this;return t.speed=40,t.trail=new Trail(50,.1),t}return __extends(t,e),t.prototype.name=function(){return"WindLine"},t.prototype.reset=function(){Game.inst.scene.add(this.trail.mesh),Game.inst.addTickObject(this),this.trail.reset(),this.trail.mesh.material=t.mtl,this.position=this.trail.mesh.position,this.position.x=Utils.randomRange(-5,5),this.position.y=Utils.randomRange(3,5),this.position.z=Game.inst.player.group.position.z-100-30*Math.random()},t.prototype.dispose=function(){Game.inst.scene.remove(this.trail.mesh),e.prototype.dispose.call(this)},t.prototype.update=function(e){this.trail.update();var t=Game.inst.player.group.position.z,i=Math.abs(this.position.z-t);if(100>i){var n=(100-i)/100,r=Math.abs(this.position.x);this.position.y+=e*n*n*(20-r)}var o=this.position.z+=this.speed*e;return o>t+20},t.init=function(){this.mtl=new tr.MeshBasicMaterial({map:Res3DManager.createTexture("wind-trail.png"),transparent:!0,opacity:.6,side:tr.DoubleSide}),ObjectPool.inst.register(t,5)},t}(PoolObject);__reflect(WindLine.prototype,"WindLine");var tr=THREE,World=function(e){function t(){var t=e.call(this)||this;return t.setupDistOffsetShader(),t.createScene(),t}return __extends(t,e),t.prototype.setupDistOffsetShader=function(){tr.ShaderChunk.meshbasic_vert="uniform vec4 distOffset;\n"+tr.ShaderChunk.meshbasic_vert,tr.ShaderChunk.meshphong_vert="uniform vec4 distOffset;\n"+tr.ShaderChunk.meshphong_vert,tr.ShaderChunk.project_vertex="\nvec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\nvec4 pvPosition = projectionMatrix * mvPosition;\nfloat offset = pvPosition.z / 100.0;\npvPosition += distOffset * offset * offset;\ngl_Position = pvPosition;\n",tr.ShaderLib.basic.vertexShader=tr.ShaderChunk.meshbasic_vert,tr.ShaderLib.phong.vertexShader=tr.ShaderChunk.meshphong_vert,tr.ShaderLib.basic.uniforms.distOffset={value:new tr.Vector4(0,0,0,0)},tr.ShaderLib.phong.uniforms.distOffset={value:new tr.Vector4(0,0,0,0)}},t.prototype.createScene=function(){this.initWebGLRender(),this.initScene(),this.initCamera(),this.initLight(),this.initObjects(),this.initTools()},t.prototype.initWebGLRender=function(){var e=document.getElementById("WebGL-output");this.renderer=new THREE.WebGLRenderer({antialias:!0,devicePixelRatio:window.devicePixelRatio}),this.viewWidth=window.innerWidth,this.viewHeight=window.innerHeight,this.renderer.setSize(window.innerWidth,window.innerHeight),this.renderer.setViewport(.5*window.innerWidth-.5*this.viewWidth,0,this.viewWidth,window.innerHeight),e.appendChild(this.renderer.domElement),this.renderer.setClearColor(0,1)},t.prototype.setBgColor=function(e){this.renderer.setClearColor(e,1),this.render()},t.prototype.render=function(){this.renderer.render(this.scene,this.camera)},t.prototype.initScene=function(){this.scene=new THREE.Scene},t.prototype.initCamera=function(){this.camera=new tr.PerspectiveCamera(60,window.innerWidth/window.innerHeight,.1,3e3),this.camera.position.set(0,2,10),this.scene.add(this.camera)},t.prototype.initLight=function(){var e=new THREE.AmbientLight(16777215,.6);this.scene.add(e);var t=new tr.DirectionalLight(16777215,1.8);t.position.set(0,1,.4),this.scene.add(t)},t.prototype.initObjects=function(){},t.prototype.initTools=function(){},t.prototype.updateGUIStatus=function(){this.scene.getObjectByName("axes").visible=Constant.guiParams.wireframe},t}(egret.DisplayObjectContainer);__reflect(World.prototype,"World");var CommonShareUI=function(e){function t(t){var i=e.call(this)||this;return i.data=t,i}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.onReady(),this.data.bg&&(this.img_bg.source=""),this.img_bg.once(egret.Event.COMPLETE,this.onReady,this),this.data.bg&&(this.img_bg.source=this.data.bg),this.img_head&&(this.img_head.mask=this.img_mask,this.img_head.source="",this.img_head.once(egret.Event.COMPLETE,this.onReady,this),this.img_head.source=this.data.photo),this.lbl_rank&&(this.lbl_rank.text=this.data.rank)},t.prototype.onReady=function(){var e=this;egret.setTimeout(function(){(!e.img_bg||e.img_bg.texture)&&(!e.img_head||e.img_head.texture)&&e.dispatchEventWith("ready_2_draw")},null,50)},t}(eui.Component);__reflect(CommonShareUI.prototype,"CommonShareUI",["eui.UIComponent","egret.DisplayObject"]);var ShareHelper;!function(e){function t(e){return __awaiter(this,void 0,void 0,function(){var t,i,n,r;return __generator(this,function(o){switch(o.label){case 0:return!app.platform.getContextID()||Context.isFB&&FBInstant.context.isSizeBetween(3,null).answer?(egret.log("skip result update"),[2]):(egret.log("send result update"),t=[app.platform.name()+" is The Best, Everyone Else is Trash, Do You Agree?",app.platform.name()+" has challenged you in Balls Rush 3D. come and beat "+app.platform.name()],i=new CommonShareUI({photo:app.platform.photo(),rank:Utils.getRankNumberText(e)}),i.skinName="ResultShareUISkin",[4,Utils.toImageBase64(i)]);case 1:n=o.sent(),o.label=2;case 2:return o.trys.push([2,4,,5]),[4,app.platform.updateStatus({text:t.random(),image:n,cta:"Play",template:AppConstant.ContextTemplate.result})];case 3:return o.sent(),[3,5];case 4:return r=o.sent(),egret.log("send result update",r),[3,5];case 5:return[2]}})})}function i(e,t){return void 0===e&&(e=!1),__awaiter(this,void 0,void 0,function(){var i,n,r,o,a;return __generator(this,function(s){switch(s.label){case 0:return i=["common-share1.jpg","common-share2.jpg","common-share3.jpg"],n=["Let's find some fun! Come play with me.","It's time for a true display of skills. Take a try!","This game is awesome! You should try it!"],r=new CommonShareUI({bg:i.random(),photo:app.platform.photo()}),[4,Utils.toImageBase64(r)];case 1:if(o=s.sent(),e)return[3,6];s.label=2;case 2:return s.trys.push([2,4,,5]),[4,app.platform.updateStatus({text:n.random(),image:o,cta:"Play",data:t})];case 3:return s.sent(),[3,5];case 4:return a=s.sent(),egret.log("send generic update",a),[3,5];case 5:return[3,8];case 6:return app.ui.busy(),[4,app.platform.share({img:o,text:n.random(),data:t})];case 7:s.sent(),app.ui.rmBusy(),s.label=8;case 8:return[2]}})})}e.sendResultUpdate=t,e.sendGenericUpdate=i}(ShareHelper||(ShareHelper={}));var BeforeEndView=function(e){function t(){var t=e.call(this)||this;return t.autoClose=!0,t.fullscreen=!1,t.modalAlpha=.6,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.btn_invite.addEventListener("touchTap",this.onTapInvite,this)},t.prototype.onTapInvite=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return console.log("onTapInvite"),[4,ShareHelper.sendGenericUpdate(!0,{invite_skin_data:{playerId:app.platform.id(),skinId:0}})];case 1:return e.sent(),[4,Utils.wait(200)];case 2:return e.sent(),this.close(),[2]}})})},t.prototype.onExit=function(){app.ui.addPopup(new EndView)},t}(BasePopup);__reflect(BeforeEndView.prototype,"BeforeEndView");var EndView=function(e){function t(){var t=e.call(this)||this;return t.modalAlpha=.4,t.destination=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.lb_scores_end.text=Math.round(Math.abs(Game.inst.player.group.position.z))+"",this.btn_home_end.addEventListener("touchTap",function(){t.close(),app.ui.addPopup(new HomeView),app.platform.logEvent(Log.EventType.SettlementClick,{type:app.status.playerType,source:"btnHome"})},this),this.btn_skin_end.addEventListener("touchTap",function(){t.close(),app.ui.addPopup(new SkinView),app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnSkin"})},this),this.btn_friendly_end.addEventListener("touchTap",function(){app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnPlay"}),Common.invite().then(function(){t.close(),app.notify(AppConstant.Notify.enter_game)})},this)},t.prototype.refreshNotify=function(){app.pp.newStarSkinAmount&&(this.gp_notify_skin.visible=!0,this.txt_notify_skin.text=app.pp.newStarSkinAmount+""),app.pp.checkNewInviteSkin()&&(this.gp_notify_invite.visible=!0,this.txt_notify_invite.text=app.pp.newInviteSkinAmount+"")},t.prototype.onExit=function(){e.prototype.onExit.call(this),egret.Tween.removeAllTweens(),egret.clearInterval(this.ticker),Game.inst.resetLevel(app.pp.currentLevel)},t.prototype.playAnimate=function(){egret.Tween.get(this.img_podium).wait(100).to({scale:1.3},167).to({scale:.8},120).to({scale:1.2},120).to({scale:1},120),egret.Tween.get(this.gp_rank3_portrait).wait(750).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.txt_rank3).wait(750).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.gp_rank2_portrait).wait(833).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.txt_rank2).wait(833).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.gp_rank1_portrait).wait(917).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.txt_rank1).wait(917).set({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.img_crown).wait(1333).to({alpha:1,y:-30},500),egret.Tween.get(this.btn_play).wait(2e3).to({alpha:1,scale:.1}).to({scale:1.1},167).to({scale:.9},167).to({scale:1},167),egret.Tween.get(this.btn_rank).wait(2667).set({alpha:1,scale:.1}).to({scale:1.1},83).to({scale:.9},83).to({scale:1},83),egret.Tween.get(this.btn_skin).wait(2833).set({alpha:1,scale:.1}).to({scale:1.1},83).to({scale:.9},83).to({scale:1},83),egret.Tween.get(this.btn_rare).wait(3e3).set({alpha:1,scale:.1}).to({scale:1.1},83).to({scale:.9},83).to({scale:1},83).call(this.refreshNotify,this),egret.Tween.get(this.gp_rank).wait(3167).to({scale:1,alpha:1},180).call(this.playStarAnimation,this)},t.prototype.playStarAnimation=function(){var e=this;this.gp_star_animation.alpha=1,this.validateNow(),this.gp_star_animation.x=(this.stage.stageWidth-this.gp_star_animation.width)/2,this.destination.push(this.gp_star_amount.x-this.gp_star_animation.x,this.gp_star_amount.y-this.gp_star_animation.y);var t={v:app.pp.starCount-Constant.starAmount[this.rank]};egret.Tween.get(t,{onChange:function(){e.txt_star_amount.text=Math.round(t.v)+""}}).wait(700).to({v:app.pp.starCount},200),egret.Tween.get(this.image).to({x:21,y:86},150).to({x:32,y:25},350).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image0).to({x:29,y:45},150).to({x:45,y:14},200).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image1).to({x:62,y:39},150).to({x:77,y:5},450).to({x:this.destination[0],y:this.destination[1],alpha:0},300),egret.Tween.get(this.image2).to({x:31,y:106},150).to({x:53,y:42},600).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image3).to({x:39,y:64},150).to({x:52,y:17},850).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image4).to({x:38,y:-27},150).to({x:50,y:-47},200).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image5).to({x:30,y:-39},150).to({x:55,y:-74},350).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image6).to({x:30,y:-55},150).to({x:75,y:35},450).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.image7).to({x:42,y:-52},150).to({x:60,y:-76},800).to({x:this.destination[0],y:this.destination[1],alpha:0},250),egret.Tween.get(this.gp_star).to({scale:1.2,alpha:1},150).to({scale:1},100).wait(1250).to({alpha:0},150)},t}(BasePopup);__reflect(EndView.prototype,"EndView");var FriendItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){return __awaiter(t,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},this)},t.prototype.dataChanged=function(){if(this.data){var e=this.data;this.txt_name.text=e.name,this.node_head.source=e.photo}},t.cur_friendRander=null,t}(eui.ItemRenderer);__reflect(FriendItemRender.prototype,"FriendItemRender",["eui.UIComponent","egret.DisplayObject"]);var FriendRankItemRender=function(e){function t(){var t=e.call(this)||this;return t.initialized=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initialized=!0},t.prototype.dataChanged=function(){var e=this;if(this.initialized&&this.data){var t=this.data,i=this.itemIndex+1;i>0&&(this.img_bar.source="rank_bg_"+(4>i?i:4)+".png",this.img_headmerge.source="rank_hmerge_"+(4>i?i:4)+".png",this.lb_rank.text=i+"",this.img_head.source=t.photo,this.lb_name.text=t.name,this.img_skin.source=app.status.skinItemData[t.skin-1].thumb,this.lb_score.$setText(t.score+""),this.btn_play.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.onTapPlay()},this),this.btn_share.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){e.onTapShare()},this)),this.data.id===app.platform.id()&&(this.btn_play.visible=!1,this.btn_share.visible=!0)}},t.prototype.onTapPlay=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return[4,app.platform.createCtx(this.data.id)];case 1:return e=t.sent(),e&&this.dispatchEventWith("PlayWithFriend",!0),app.platform.logEvent(Log.EventType.RankClick,{type:app.status.playerType,source:"btnChallenge"}),[2]}})})},t.prototype.onTapShare=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,ShareHelper.sendGenericUpdate(!0)];case 1:return e.sent(),app.platform.logEvent(Log.EventType.RankClick,{type:app.status.playerType,source:"btnShare"}),[2]}})})},t}(eui.ItemRenderer);__reflect(FriendRankItemRender.prototype,"FriendRankItemRender",["eui.UIComponent","egret.DisplayObject"]);var GameView=function(e){function t(){var t=e.call(this)||this;return t.friendRankEntries=[],t._slideDistance=428,t.modal=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){var i=this;e.prototype.childrenCreated.call(this),Game.inst.nowPlayerCount=GameConstant.PlayersCount,this.gp_dev_tools.visible="show"===app.storager.get("vconsole"),this.btn_gameover.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){GameConstant.TrackLength=200},this),this.dieRot.addEventListener("touchTap",function(){},this),this.stage.addEventListener("touchBegin",function(){i.group_swipe.removeFromParent(),i.img_notice.visible=!1},this),this.txt_current_level.text="CurrentLevel: "+app.pp.currentLevel,egret.Tween.get(this.img_finger,{loop:!0}).to({x:401},1e3,egret.Ease.sineInOut).to({x:0},1e3,egret.Ease.sineInOut),egret.Tween.get(this.img_wheel,{loop:!0}).to({rotation:360},1500),this.initGraphics(),Game.inst.onProgressUpdate=this.setProgress.bind(this),RES.loadGroup("end"),this.friendRankEntries=Array(10);for(var n=["game-icon-try-down.png","game-icon-close-down.png","game_begin1.png","game_begin2.png"],r=0;10>r;r++)this.friendRankEntries[r]=new RankPlayerVO,this.friendRankEntries[r].name="hh"+r,this.friendRankEntries[r].photo=n[r%4],this.friendRankEntries[r].score=1200-100*r+100,this.friendRankEntries[r].id=r+2+"";this.nowrank=this.friendRankEntries.length-1,t.sortByScore(this.friendRankEntries,0,this.nowrank,function(e,t){return e.score>t.score})},t.prototype.initGraphics=function(){this.validateNow();var e=this.rect=new egret.Shape;e.graphics.clear(),e.graphics.beginFill(65535,1),this.addChild(e)},t.prototype.setProgress=function(e){this.label_distance.text=Math.round(e)+"",app.pp.starCount=Math.max(e,app.pp.starCount),~this.nowrank&&this.friendRankEntries[this.nowrank].score<e&&(this.now_surpassPlayer_head.source=this.friendRankEntries[this.nowrank].photo,this.lb_friendDis.text=this.friendRankEntries[this.nowrank].score+"",this.nowrank--)},t.sortByScore=function(e,i,n,r){for(var o=i,a=n,s=i+n>>1;a>=o;){for(;r(e[o],e[s]);)o++;for(;r(e[s],e[a]);)a--;if(a>=o){var l=e[o];e[o]=e[a],e[a]=l,o++,a--}}n>o&&t.sortByScore(e,o,n,r),a>i&&t.sortByScore(e,i,a,r)},t}(BasePopup);__reflect(GameView.prototype,"GameView");var HomeView=function(e){function t(){var t=e.call(this)||this;return t.modalAlpha=.4,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.bestGrade.text="Best\n"+Math.round(app.pp.starCount);var i=egret.Tween.get(this.btn_friendly,{loop:!0});i.to(0,0).call(function(){this.scaleX=1,this.scaleY=1}).wait(2e3);for(var n=[-.1,.05,-.03,.05,-.03],r=0;5>r;r++)i.to({scaleX:1+n[r],scaleY:1-n[r]},100-10*r).to({scaleX:1,scaleY:1},55);this.dg_friends.dataProvider=new eui.ArrayCollection([{name:"fuck1",photo:"default_portrait.png"},{name:"fuck2",photo:"default_portrait.png"},{name:"fuck3",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"},{name:"fuck4",photo:"default_portrait.png"}]);var o=app.ui.getPopup(LoadingView);o&&app.ui.rmPopup(o),this.gp_dev_tools.visible="show"===app.storager.get("vconsole"),this.btn_clear.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){app.pp.cleanData()},this),this.txt_go.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){var e=parseInt(t.txt_level.text);return 1>e||isNaN(e)?void egret.log("Invalid parameter!"):(app.pp.currentLevel=e,app.pp.pushData(),void Game.inst.resetLevel(e))},this),this.refreshNotify();var a=app.status.skinItemData.filter(function(e){return 2===e.price.type}).map(function(e){return e.id}),s=1,l=800;Utils.makeArrayRandom(a),this.btn_rare.icon=app.status.skinItemData[a[0]-1].thumb,this.ticker=egret.setInterval(function(){s===a.length&&(Utils.makeArrayRandom(a),s=0),t.btn_rare.icon=app.status.skinItemData[a[s]-1].thumb,s++},this,l),this.txt_star_amount.text=app.pp.starCount+"",this.img_logo.scale=Constant.FullWidthScale,this.gp_btns.layout.gap=(this.stage.stageWidth-this.btn_rank.width*this.gp_btns.numChildren)/this.gp_btns.numChildren,this.btn_single.addEventListener("touchTap",function(){app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnPlay"}),t.close(),app.notify(AppConstant.Notify.enter_game)},this),this.btn_friendly.addEventListener("touchTap",function(){app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnPlay"}),Common.invite().then(function(){t.close(),app.notify(AppConstant.Notify.enter_game)})},this),this.btn_rank.addEventListener("touchTap",function(){t.close(),app.ui.addPopup(new RankView),app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnRank"})},this),this.btn_skin.addEventListener("touchTap",function(){t.close(),app.ui.addPopup(new SkinView),app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnSkin"})},this),this.btn_rare.addEventListener("touchTap",function(){t.close(),app.ui.addPopup(new InviteView),app.platform.logEvent(Log.EventType.HomeClick,{type:app.status.playerType,source:"btnInviteSkin"})},this),this.btn_audio.addEventListener("touchTap",function(){AudioPlayer.setMute(!AudioPlayer.isMute()),t.updateAudioBtn()},this),this.updateAudioBtn(),egret.Capabilities.isMobile||(this.btn_audio.top=40),Game.inst.complete&&Game.inst.resetLevel(app.pp.currentLevel),this.vconsole_switcher.touchEnabled=!0;var u=0;this.vconsole_switcher.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){++u>9&&(u=0,"show"!==app.storager.get("vconsole")?(app.storager.set("vconsole","show"),window.vconsole.showSwitch(),Utils.recoverLog(),t.gp_dev_tools.visible=!0):(app.storager.rm("vconsole"),window.vconsole.hideSwitch(),Utils.removeLog(),t.gp_dev_tools.visible=!1))},this)},t.prototype.updateAudioBtn=function(){this.btn_audio.getChildAt(0).source=AudioPlayer.isMute()?"home-btn-audio-off.png":"home-btn-audio-on.png"},t.prototype.listResponse=function(){return[AppConstant.Notify.refresh_invite_count]},t.prototype.doResponse=function(e,t){e===AppConstant.Notify.refresh_invite_count&&this.refreshNotify()},t.prototype.refreshNotify=function(){app.pp.newStarSkinAmount&&(this.gp_notify_skin.visible=!0,this.txt_notify_skin.text=app.pp.newStarSkinAmount+""),app.pp.checkNewInviteSkin()&&(this.gp_notify_invite.visible=!0,this.txt_notify_invite.text=app.pp.newInviteSkinAmount+"")},t.prototype.onExit=function(){e.prototype.onExit.call(this),egret.Tween.removeAllTweens(),egret.clearInterval(this.ticker)},t}(BasePopup);__reflect(HomeView.prototype,"HomeView");var InvitePortraitItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.addEventListener("touchTap",this.onTapInvite,this),this.img_portrait.mask=this.img_portrait_mask},t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this),this.data&&(this.removeEventListener("touchTap",this.onTapInvite,this),this.img_portrait.source=this.data)},t.prototype.onTapInvite=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return egret.log("sendGenericUpdate"),ShareHelper.sendGenericUpdate(!0,{invite_skin_data:{playerId:app.platform.id(),skinId:0}}),[2]})})},t}(eui.ItemRenderer);__reflect(InvitePortraitItemRender.prototype,"InvitePortraitItemRender",["eui.UIComponent","egret.DisplayObject"]);var InviteSkinItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);__reflect(InviteSkinItemRender.prototype,"InviteSkinItemRender",["eui.UIComponent","egret.DisplayObject"]);var InviteView=function(e){function t(){var t=e.call(this)||this;return t.pages=[],t.invitedList=[],t._gp_width=0,t._current_page=0,t.scrollH=0,t.centerH=0,t.inviteAmountArr=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,r,o,a,s,l=this;return __generator(this,function(u){switch(u.label){case 0:return e.prototype.childrenCreated.call(this),app.pp.newInviteSkinAmount=0,app.pp.pushData(),this.btn_home.addEventListener("touchTap",this.onTapHome,this),this.btn_invite.addEventListener("touchTap",this.onTapInvite,this),this.btn_play.addEventListener("touchTap",function(){var e=l.skinRenderData[l._current_page].id;app.pp.havingSkinIDs.includes(e)&&(app.pp.currentSkinID=e,app.pp.pushData(),Game.inst.player.setSkin(e)),l.close(),app.notify(AppConstant.Notify.enter_game)},this),t=app.status.skinItemData.filter(function(e){return 2===e.price.type}).sort(function(e,t){return e.order-t.order}).map(function(e){return e.id}),this.skinRenderData=t.map(function(e){return{id:e,thumb:app.status.skinItemData[e-1].thumb}}),this.gp_skin.addChild(this.createSkinGroup("",!0)),this.skinRenderData.forEach(function(e){var t=l.createSkinGroup(e.thumb);l.inviteAmountArr.push(app.status.skinItemData[e.id-1].price.num),l.gp_skin.addChild(t)}),this.gp_skin.addChild(this.createSkinGroup("",!0)),this.validateNow(),this.sc_skins.addEventListener(egret.Event.CHANGE,function(){if(!(l.sc_skins.viewport.scrollH<0||l.sc_skins.viewport.scrollH>l.sc_skins.viewport.contentWidth-l.sc_skins.width)){l.scrollH=l.sc_skins.viewport.scrollH,l.centerH=l.scrollH+.5*l.stage.stageWidth;
var e=Math.floor(l.centerH/l._gp_width)-1;e!==l._current_page&&l.onPageChanged(e),l.refreshSkinList()}},this),i=this.sc_skins,this._onTouchEndOld=i.onTouchEnd,i.onTouchEnd=this.touchEndEvent.bind(this),r=app.status.friendList,r?[3,2]:[4,app.platform.getConnectedFriendList()];case 1:r=u.sent(),u.label=2;case 2:return n=r,o=[],a=app.pp.invitedGuys,s=Context.gameModel.skinInviteInfo,this.invitedList=[],n&&n.forEach(function(e){o.push(RankPlayerVO.createFromContextPlayer(e))}),egret.log("invitedIDs",a),egret.log("陌生人信息",s),a.forEach(function(e){var t=o.findIndex(function(t){return t.id===e});t>=0?l.invitedList.push(o[t].photo):s[e]&&s[e].head?l.invitedList.push(s[e].head):l.invitedList.push("default_portrait.png")}),this.sc_skins.dispatchEventWith(egret.Event.CHANGE),this.refreshSkinList(),this.refreshPortraitList(),this.refreshAmount(),[2]}})})},t.prototype.createSkinGroup=function(e,t){void 0===t&&(t=!1);var i=this.stage.stageWidth,n=new eui.Group;this._gp_width=n.width=i/3;var r=new eui.Image,o=new eui.Image;return n.addChild(r),r.horizontalCenter=r.verticalCenter=0,n.addChild(o),o.horizontalCenter=o.verticalCenter=0,r.source=t?"":e,o.source=t?"":"invite-mask-ball.png",o.alpha=.3,n},t.prototype.onPageChanged=function(e){this._current_page=e,this.refreshPortraitList(),this.refreshAmount()},t.prototype.refreshAmount=function(){var e=this.inviteAmountArr[this._current_page],t=app.pp.invitedGuys.length;this.txt_refer.text=1===e?"Refer one Friend":"Refer "+e+" Friends",e>t?(this.btn_play.visible=!1,this.btn_invite.visible=!0,this.btn_invite.label=t+"/"+e):(this.btn_play.visible=!0,this.btn_invite.visible=!1)},t.prototype.refreshPortraitList=function(){for(var e=this.inviteAmountArr[this._current_page],t=this.invitedList.slice(0,e);t.length<e;)t.push("");this.list_invite.dataProvider=new eui.ArrayCollection(t),this.gp_portrait.layout.horizontalAlign=this.list_invite.width<this.stage.stageWidth?"center":"left"},t.prototype.refreshSkinList=function(){for(var e=(this.scrollH,0);e<this.gp_skin.numChildren-2;e++){var t=this.gp_skin.getChildAt(e+1).$children[0],i=this.gp_skin.getChildAt(e+1).$children[1],n=Math.abs(this.centerH-(1.5+e)*this._gp_width);if(n<this._gp_width){var r=1.4-n/this._gp_width*.4;t.scale=r,i.scale=r,i.alpha=n/this._gp_width*.3}else t.scale=1,i.alpha=.3}},t.prototype.scrollToPage=function(e){var t=this;if(!(this.sc_skins.viewport.scrollH<0||this.sc_skins.viewport.scrollH>this.sc_skins.viewport.contentWidth-this.sc_skins.width)){var i=300,n=e*this._gp_width;this.sc_skins.stopAnimation(),egret.Tween.removeTweens(this.sc_skins.viewport),egret.Tween.get(this.sc_skins.viewport,{onChange:function(){t.sc_skins.dispatchEventWith(eui.UIEvent.CHANGE)}}).to({scrollH:n},i).call(function(){})}},t.prototype.touchEndEvent=function(e){this._onTouchEndOld.call(this.sc_skins,e),e.$isPropagationStopped||this.scrollToPage(this._current_page)},t.prototype.onTapHome=function(){this.close(),app.ui.addPopup(new HomeView)},t.prototype.onTapInvite=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return app.platform.logEvent(Log.EventType.InviteGetSkin,{type:app.status.playerType,result:0}),ShareHelper.sendGenericUpdate(!0,{invite_skin_data:{playerId:app.platform.id(),skinId:0}}),[2]})})},t.prototype.listResponse=function(){return[AppConstant.Notify.refresh_invite_count]},t.prototype.doResponse=function(e,t){e===AppConstant.Notify.refresh_invite_count&&this.refreshAvator()},t.prototype.refreshAvator=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o=this;return __generator(this,function(a){switch(a.label){case 0:return t=app.status.friendList,t?[3,2]:[4,app.platform.getConnectedFriendList()];case 1:t=a.sent(),a.label=2;case 2:return e=t,i=[],n=app.pp.invitedGuys,r=Context.gameModel.skinInviteInfo,this.invitedList=[],e&&e.forEach(function(e){i.push(RankPlayerVO.createFromContextPlayer(e))}),egret.log("invitedIDs",n),egret.log("陌生人信息",r),n.forEach(function(e){var t=i.findIndex(function(t){return t.id===e});t>=0?o.invitedList.push(i[t].photo):r[e]&&r[e].head?o.invitedList.push(r[e].head):o.invitedList.push("default_portrait.png")}),this.refreshPortraitList(),[2]}})})},t}(BasePopup);__reflect(InviteView.prototype,"InviteView");var LoadingView=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(BasePopup);__reflect(LoadingView.prototype,"LoadingView");var MatchItemRender=function(e){function t(t){var i=e.call(this)||this;return i.data=t,i._min_waiting_time=500,i}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.img_portrait.mask=this.img_portrait_mask,this.img_portrait.visible=!1,this.img_loading.visible=!0,this.img_portrait.source="",Promise.race([Promise.all([Utils.wait(this.data&&this.data.me?50:Utils.randomRange(this._min_waiting_time,Constant.MatchingTime)),new Promise(function(e){t.img_portrait.once(egret.Event.COMPLETE,e,t)})]),Utils.wait(Constant.MatchingTime)]).then(function(){t.img_loading.visible=!1,t.img_portrait.visible=!0,t.ticker.stop(),t.dispatchEventWith("LoadingDone",!0)}),this.img_portrait.source=this.data.photo,this.ticker=new Ticker(this.update,this,150),this.ticker.start()},t.prototype.update=function(){this.img_loading.rotation+=45},t}(eui.ItemRenderer);__reflect(MatchItemRender.prototype,"MatchItemRender",["eui.UIComponent","egret.DisplayObject"]);var MatchView=function(e){function t(){var t=e.call(this)||this;return t.modalAlpha=.4,t.currentAmount=0,t.totalAmount=12,t._done=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;return e.prototype.childrenCreated.call(this),LocalRobotData.getRobotsInfo().then(function(e){var i=app.status.localRobotData=e;if(i=i.concat(),Context.isFB){var n={id:FBInstant.player.getID(),name:FBInstant.player.getName(),photo:FBInstant.player.getPhoto(),me:!0};i.splice(Utils.randomInt(0,i.length),0,n)}t.totalAmount=i.length,i.forEach(function(e){t.gp.addChild(new MatchItemRender(e))})}),Context.isFB?(this.addEventListener("LoadingDone",function(){t.currentAmount++,Utils.clamp(t.currentAmount,0,t.totalAmount);var e=t.currentAmount/t.totalAmount;e>=1&&!t._done?(t._done=!0,t.setProgress(1),setTimeout(function(){t.close(),app.ui.addPopup(new GameView),Game.inst.start()},500)):t.setProgress(e)},this),void this.initGraphics()):void setTimeout(function(){t.close(),app.ui.addPopup(new GameView),Game.inst.start()},500)},t.prototype.initGraphics=function(){this.validateNow();var e=this.rect_mask;this.img_progressbar_yellow.mask=e},t.prototype.setProgress=function(e){return 0>e||e>1?void console.warn("parameters error"):(this.txt_progress.text="Matching  "+this.currentAmount+"/"+this.totalAmount,void(this.rect_mask.scaleX=e))},t}(BasePopup);__reflect(MatchView.prototype,"MatchView");var PageIndicatorItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);__reflect(PageIndicatorItemRender.prototype,"PageIndicatorItemRender",["eui.UIComponent","egret.DisplayObject"]);var PagesViewController=function(){function e(e,t){this.isHorizontalScroll=!0,this.list=e,this.changePageCallback=t,this._curPageIdx=0;var i=this.list;this._onTouchEndOld=i.onTouchEnd,i.onTouchEnd=this.touchEndEvent.bind(this),this.viewport=i.viewport,this.isHorizontalScroll=i.viewport.layout instanceof eui.HorizontalLayout,this.list.horizontalScrollBar.autoVisibility=!1,this.list.verticalScrollBar.autoVisibility=!1,this.sorollPre=8}return e.prototype.getCurPage=function(){return this._curPageIdx},e.prototype.checkScroll=function(){if(this.isHorizontalScroll){if(this.list.viewport.scrollH<0)return;if(this.list.viewport.scrollH>this.list.viewport.contentWidth-this.list.width)return;var e=this.list.viewport.contentWidth/this.viewport.numElements,t=this._curPageIdx*e,i=this.list.viewport.scrollH-t;Math.abs(i)>e/this.sorollPre?i>0?this.scrollToPage(this._curPageIdx+1):0>i&&this.scrollToPage(this._curPageIdx-1):this.scrollToPage(this._curPageIdx)}else{if(this.list.viewport.scrollV<0)return;if(this.list.viewport.scrollV>this.list.viewport.contentHeight-this.list.height)return;var n=this.list.viewport.contentHeight/this.viewport.numElements,t=this._curPageIdx*n,i=this.list.viewport.scrollV-t;Math.abs(i)>n/this.sorollPre?i>0?this.scrollToPage(this._curPageIdx+1):0>i&&this.scrollToPage(this._curPageIdx-1):this.scrollToPage(this._curPageIdx)}},e.prototype.scrollToPage=function(e,t){var i=this;if(void 0===t&&(t=300),0>e?e=0:e>this.viewport.numElements-1&&(e=this.viewport.numElements-1),this._curPageIdx=e,this.list.stopAnimation(),egret.Tween.removeTweens(this.list.viewport),this.isHorizontalScroll){var n=this._curPageIdx*(this.list.viewport.contentWidth/this.viewport.numElements);egret.Tween.get(this.list.viewport,{loop:!1}).to({scrollH:n},t).call(function(){i.changePageCallback&&i.changePageCallback(i._curPageIdx)})}else{var r=this._curPageIdx*(this.list.viewport.contentHeight/this.viewport.numElements);egret.Tween.get(this.list.viewport,{loop:!1}).to({scrollV:r},t).call(function(){i.changePageCallback&&i.changePageCallback(i._curPageIdx)})}},e.prototype.touchEndEvent=function(e){this._onTouchEndOld.call(this.list,e),e.$isPropagationStopped||this.checkScroll()},e}();__reflect(PagesViewController.prototype,"PagesViewController");var RankCtr=function(){function e(){this.init()}return e.prototype.init=function(){},e.loadLeaderBoardAsync=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return egret.log("Load leaderboard."),e=app.status,[4,app.platform.getFriendRankList()];case 1:return e.friendRankList=i.sent(),t=app.status,[4,app.platform.getWorldRankList()];case 2:return t.worldRankList=i.sent(),egret.log("Leaderboard loaded success."),[2]}})})},e}();__reflect(RankCtr.prototype,"RankCtr");var RankItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.partAdded=function(t,i){e.prototype.partAdded.call(this,t,i)},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this)},t}(eui.ItemRenderer);__reflect(RankItemRender.prototype,"RankItemRender",["eui.UIComponent","egret.DisplayObject"]);var RankPlayerVO=function(){function e(){this.name="",this.photo="",this.id="",this.score=0,this.tip="",this.originalRank=1}return Object.defineProperty(e.prototype,"skin",{get:function(){return this.extraData&&this.extraData.skin||1},enumerable:!0,configurable:!0}),e.prototype.toJSON=function(){return{id:this.id,score:this.score,extraData:this.extraData}},e.createFromJSON=function(t){var i=new e;if(i.id=t.id,i.score=t.score,"string"==typeof t.extraData)try{i.extraData=JSON.parse(t.extraData)}catch(n){}else i.extraData=t.extraData;return i},e.createFromLeaderBoardEntry=function(t){var i=t.getPlayer(),n=new e;n.name=i.getName(),n.photo=i.getPhoto(),n.id=i.getID(),n.score=t.getScore(),n.originalRank=t.getRank();var r=t.getExtraData();return n.extraData=r?JSON.parse(r):{},n},e.createFromContextPlayer=function(t){var i=new e;return i.name=t.getName(),i.photo=t.getPhoto(),i.id=t.getID(),i},e}();__reflect(RankPlayerVO.prototype,"RankPlayerVO");var RankView=function(e){function t(){var t=e.call(this)||this;return t._current_tab="world",t.worldRankEntries=[],t.friendRankEntries=[],t}return __extends(t,e),t.prototype.childrenCreated=function(){return __awaiter(this,void 0,void 0,function(){var t,i,n,r=this;return __generator(this,function(o){for(e.prototype.childrenCreated.call(this),this.img_portrait_champion.mask=this.img_portrait_champion_mask,this.addEventListener("PlayWithFriend",function(){this.close(),app.ui.addPopup(new GameView),Game.inst.start()},this),t=Array(10),i=0;10>i;i++)t[i]=new RankPlayerVO,t[i].name="hh"+i,t[i].photo="game-icon-try-down.png",t[i].originalRank=997,t[i].score=Math.floor(1e4*Math.random()),t[i].id=i+2+"",t[i].extraData={skin:Math.floor(10*Math.random())};return GameView.sortByScore(t,0,t.length-1,function(e,t){return e.score>t.score}),this.dg_friends.dataProvider=new eui.ArrayCollection(t),t.map(function(e){r.friendRankEntries.push(e)}),this.myWorldEntry=app.platform.getWorldSelfEntry(),this.myFriendEntry=this.friendRankEntries.find(function(e){return e.id===app.platform.id()}),egret.log("this.myWorldEntry",this.myWorldEntry),n=new RankPlayerVO,Object.assign(n,this.myWorldEntry),n.bg="rank-bar-personal.png",n.name_color=16777215,this.node_world.data=n,n=new RankPlayerVO,Object.assign(n,this.myFriendEntry),n.bg="rank-bar-personal.png",n.name_color=16777215,this.node_friend.data=n,this.list_world.dataProvider=new eui.ArrayCollection(t),this.img_portrait_champion.source=this.worldRankEntries[0]&&this.worldRankEntries[0].photo,this.btn_home.addEventListener("touchTap",this.onTapHome,this),[2]})})},t.prototype.onTapHome=function(){this.close(),app.ui.addPopup(new HomeView)},t.prototype.onTapWorld=function(){"world"===this._current_tab||(AudioPlayer.playSound("click.mp3"),this._current_tab="world",this.img_portrait_champion.source=this.worldRankEntries[0]&&this.worldRankEntries[0].photo,this.img_tab_friend.visible=!1,this.img_tab_world.visible=!0,this.view_stack.selectedIndex=0)},t.prototype.onTapFriend=function(){"world"===this._current_tab&&(AudioPlayer.playSound("click.mp3"),this._current_tab="friend",this.img_portrait_champion.source=this.friendRankEntries[0]&&this.friendRankEntries[0].photo,this.img_tab_world.visible=!1,this.img_tab_friend.visible=!0,this.view_stack.selectedIndex=1)},t.prototype.onTapShare=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,ShareHelper.sendGenericUpdate(!0)];case 1:return e.sent(),app.platform.logEvent(Log.EventType.RankClick,{type:app.status.playerType,source:"btnInvite"}),[2]}})})},t}(BasePopup);__reflect(RankView.prototype,"RankView");var ReviveView=function(e){function t(t,i){var n=e.call(this)||this;return n.rank=t,n.progress=i,n.modalAlpha=.4,n._slideDistance=428*1.13,n}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),this.group_nothanks.touchEnabled=!1,this.group_nothanks.visible=!1,this.nothanksTimer=egret.setTimeout(function(){t.group_nothanks.visible=!0,t.group_nothanks.alpha=0,egret.Tween.get(t.group_nothanks).to({alpha:.6},1e3).call(function(){t.group_nothanks.touchEnabled=!0})},this,1500),this.img_revive.addEventListener("touchTap",this.revive,this),this.btn_continue.addEventListener("touchTap",this.revive,this),this.group_nothanks.addEventListener("touchTap",function(){t.goHome(),app.platform.logEvent(Log.EventType.ReviveClick,{type:app.status.playerType,source:"btnNoThanks"})},this),this.txt_ranking.text=Utils.getRankNumberText(this.rank),this.txt_percent.text=Math.floor(100*this.progress)+"%",this.initGraphics(),this.changeGraphics(),this.setProgress(this.progress)},t.prototype.initGraphics=function(){this.validateNow();var e=this._shape=new egret.Shape;e.x=this.group_revive.x+this.group_revive.width/2,e.y=this.group_revive.y+this.group_revive.height/2,this.addChild(e);var t=this.rect=new egret.Shape;t.graphics.clear(),t.graphics.beginFill(65535,1),this.addChild(t),this.img_greenbg.mask=e,this.img_progressbar_yellow.mask=t},t.prototype.changeGraphics=function(){function e(e){i.graphics.clear(),i.graphics.beginFill(65535,1),i.graphics.moveTo(0,0),i.graphics.lineTo(200,0),i.graphics.drawArc(0,0,200,-90*Math.PI/180,-90*Math.PI/180+e*Math.PI/180,!0),i.graphics.lineTo(0,0),i.graphics.endFill()}var t=this,i=this._shape,n=360/Constant.ReviveTime,r=0;this.ticker=new Ticker(function(i){e(r),r+=i*n,r>360&&(t.ticker.stop(),t.img_greenbg.visible=!1,t.goHome())},this),this.ticker.start()},t.prototype.setProgress=function(e){return 0>e||e>1?void console.warn("parameters error"):void(this.img_wheel.x=this._slideDistance*e)},t.prototype.revive=function(){var e=this;app.platform.logEvent(Log.EventType.ReviveClick,{type:app.status.playerType,source:"btnContinue"}),this.ticker.stop(),app.ad.hasRAD()&&Common.showRAD("adRevive",function(){var t=app.ui.getPopup(GameView);t&&(t.txt_ranking.visible=!0),e.close(),Game.inst.revive()},function(){e.ticker.start()})},t.prototype.goHome=function(){this.close(),Game.inst.resetLevel(app.pp.currentLevel),Game.inst.stop(),app.ui.getPopup(GameView).close(),app.ui.addPopup(new HomeView),Common.tryPlayAD(),app.platform.logEvent(Log.EventType.GameOver,{type:app.status.playerType,level:app.pp.currentLevel,result:1})},t.prototype.onExit=function(){e.prototype.onExit.call(this),egret.Tween.removeAllTweens(),this.ticker.stop(),egret.clearTimeout(this.nothanksTimer)},t}(BasePopup);__reflect(ReviveView.prototype,"ReviveView");var SkinItemData=function(){function e(){this.price={type:0,num:0}}return e}();__reflect(SkinItemData.prototype,"SkinItemData");var skinDB2SkinData=function(){for(var e=[],t=1;;){var i=DB_skin.get(t);if(!i)break;var n=new SkinItemData;if(n.id=i.id,n.order=i.order,n.fbx=i.fbx,n.tex=i.tex,n.thumb=i.thumb,n.weight=i.weight,i.price){var r=i.price.split(":");n.price.type=parseInt(r[0]),n.price.num=parseInt(r[1])}t++,e.push(n)}return e},SkinItemRender=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.dataChanged=function(){e.prototype.dataChanged.call(this);var t=app.status.skinItemData[this.data.id-1].price.type,i=app.pp.skinProgressData[this.data.id]||0;i=3===t?app.pp.starCount:i;var n=app.status.skinItemData[this.data.id-1].price.num,r=this.data.id,o=app.pp.havingSkinIDs.includes(r);console.log("render",t,i,n,this.data.id,o),o?this.mask_rect.scaleY=0:this.mask_rect.scaleY=1-i/n,this.img_skin_icon.source=this.data.thumb},t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.unhave_mask.mask=this.mask_rect},t}(eui.ItemRenderer);__reflect(SkinItemRender.prototype,"SkinItemRender",["eui.UIComponent","egret.DisplayObject"]);var SkinView=function(e){function t(){var t=e.call(this)||this;return t.pages=[],t._current_page=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){var t=this;e.prototype.childrenCreated.call(this),app.pp.newStarSkinAmount=0,app.pp.pushData(),app.pp.checkNewSkin(),this.btn_home.addEventListener("touchTap",this.onTapHome,this),this.btn_video.addEventListener("touchTap",this.onTapVideo,this),this.btn_star.addEventListener("touchTap",this.onTapStar,this),this.btn_play.addEventListener("touchTap",function(){t.close(),app.notify(AppConstant.Notify.enter_game)},this),this.btn_ad.addEventListener(egret.TouchEvent.TOUCH_TAP,function(){Common.showRAD("adSkin",t.successInBuySkin.bind(t))},this);var i=app.status.skinItemData.filter(function(e){return e.price.type<3}).sort(function(e,t){return e.order-t.order}).map(function(e){return e.id}),n=app.status.skinItemData.filter(function(e){return 3===e.price.type}).sort(function(e,t){return e.order-t.order}).map(function(e){return e.id});i=i.concat(n);for(var r=i.map(function(e){return{id:e,thumb:app.status.skinItemData[e-1].thumb}}),o=i.length,a=(Math.ceil(o/9),0);o>a;a++){var s=Math.floor(a/9);this.pages[s]||(this.pages[s]=[]),this.pages[s].push(r[a])}for(var l=function(e){var i=u.createSkinList(e);i.allowMultipleSelection=!1,i.width=u.gp_skin.width,i.height=u.gp_skin.height,i.addEventListener(egret.Event.CHANGING,function(e){var n=i.selectedItem,r=i.dataProvider;r.itemUpdated(n),r.itemUpdated(t._selected_item),t.onSkinSelected(n)},u),u.gp_skin.addChild(i)},u=this,c=0,h=this.pages;c<h.length;c++){var p=h[c];l(p)}this.list_page_indicator.dataProvider=new eui.ArrayCollection(this.pages),this.pageViewContr=new PagesViewController(this.sc_skins,function(e){t.onPageChanged(e)});var d=i.indexOf(app.pp.currentSkinID);this._selected_item=r[d],this.refreshView(),this.gp_skin.validateNow()},t.prototype.createSkinList=function(e){var t=new eui.List,i=new eui.TileLayout;return i.requestedColumnCount=3,i.requestedRowCount=3,i.columnAlign=eui.ColumnAlign.JUSTIFY_USING_GAP,i.verticalGap=46,i.paddingLeft=i.paddingRight=20,t.layout=i,t.itemRenderer=SkinItemRender,t.dataProvider=new eui.ArrayCollection(e),t},t.prototype.onPageChanged=function(e){this._current_page=e,0===this._current_page||1===this._current_page?(this.img_tab_star.visible=!1,this.img_tab_video.visible=!0):(this.img_tab_star.visible=!0,this.img_tab_video.visible=!1),this.refreshView()},t.prototype.onSkinSelected=function(e){this._selected_item=e,this.nowimg.source=e.thumb,app.pp.havingSkinIDs.includes(e.id)&&(app.pp.currentSkinID=e.id,this.nowimg_notice.text="",app.pp.pushData(),Game.inst.player.setSkin(e.id)),this.refreshView()},t.prototype.refreshView=function(){var e=this._selected_item;if(e){var t=app.status.skinItemData[e.id-1].price.type,i=app.pp.skinProgressData[e.id]||0,n=app.status.skinItemData[e.id-1].price.num;0===t||app.pp.havingSkinIDs.includes(e.id)?(this.btn_play.visible=!0,this.btn_ad.visible=!1,this.btn_friends.visible=!1,this.show_ex.visible=!1,3===t?this.nowimg_notice.text="unlock with get "+n+" points":this.nowimg_notice.text=""):1===t?(this.btn_play.visible=!1,this.btn_ad.visible=!0,this.btn_friends.visible=!1,this.show_ex.visible=!1,this.nowimg_notice.text="you need to read "+n+" Advertisements",this.btn_ad.label=i+"/"+n):2===t?(this.btn_play.visible=!1,this.btn_ad.visible=!1,this.btn_friends.visible=!0,this.show_ex.visible=!1,this.nowimg_notice.text="you need to share "+n+" friends",this.lb_ex.text=i+"/"+n,this.btn_ad.label=i+"/"+n):3===t&&(this.btn_play.visible=!1,this.btn_ad.visible=!1,this.btn_friends.visible=!1,this.show_ex.visible=!0,this.nowimg_notice.text="unlock with get "+n+" points",this.lb_ex.text=Math.round(app.pp.starCount)+"/"+n);for(var r=0;r<this.gp_skin.numChildren;r++){var o=this.gp_skin.getChildAt(r),a=o.dataProvider;o.selectedIndex=a.getItemIndex(e),a.itemUpdated(e)}this.list_page_indicator.selectedIndex=this._current_page}},t.prototype.successInBuySkin=function(){var e=this._selected_item,t=e.id,i=app.pp.tryBuySkin(t);i&&(app.pp.currentSkinID=t,app.pp.pushData(),Game.inst.player.setSkin(t)),this.refreshView()},t.prototype.onTapHome=function(){this.close(),app.ui.addPopup(new HomeView)},t.prototype.onTapVideo=function(){0===this._current_page||1===this._current_page||(AudioPlayer.playSound("click.mp3"),this.pageViewContr.scrollToPage(0),this.img_tab_star.visible=!1,this.img_tab_video.visible=!0)},t.prototype.onTapStar=function(){(0===this._current_page||1===this._current_page)&&(AudioPlayer.playSound("click.mp3"),this.pageViewContr.scrollToPage(2),this.img_tab_star.visible=!0,this.img_tab_video.visible=!1)},t}(BasePopup);__reflect(SkinView.prototype,"SkinView");var WorldRankItemRender=function(e){function t(){var t=e.call(this)||this;return t.initialized=!1,t}return __extends(t,e),t.prototype.childrenCreated=function(){e.prototype.childrenCreated.call(this),this.initialized=!0,this.img_portrait.mask=this.img_portrait_mask},t.prototype.dataChanged=function(){if(this.initialized&&this.data){this.img_bar.width=581*Constant.FullWidthScale;var e=this.itemIndex+1;this.txt_rank.text=this.data.originalRank+"",1===e&&(this.img_bar.source="rank-bar-champion.png",this.img_portrait_bg.source="rank-portrait-rank"+e+".png",this.img_rank_bg.source="rank-rank"+e+".png",this.txt_name.textColor=16777215,this.txt_score.stroke=2,this.txt_score.strokeColor=16758529),2===e&&(this.img_portrait_bg.source="rank-portrait-rank"+e+".png",this.img_rank_bg.source="rank-rank"+e+".png",this.txt_score.stroke=2,this.txt_score.strokeColor=15695923),3===e&&(this.img_portrait_bg.source="rank-portrait-rank"+e+".png",this.img_rank_bg.source="rank-rank"+e+".png",this.txt_score.stroke=2,this.txt_score.strokeColor=15681839),this.data.bg&&(this.img_bar.source=this.data.bg),this.data.name_color&&(this.txt_name.textColor=this.data.name_color),this.img_portrait.source=this.data.photo,this.txt_name.text=this.data.name,this.txt_score.text=this.data.score+"";var t=app.status.skinItemData[this.data.skin-1].thumb;t&&(this.img_skin.source="resource/assets/skin/"+t)}},t}(eui.ItemRenderer);__reflect(WorldRankItemRender.prototype,"WorldRankItemRender",["eui.UIComponent","egret.DisplayObject"]);var ADFactory=function(){function e(){}return e.create=function(){var e;if(window.FBInstant){var t=["270417160309844_299491594069067","270417160309844_299491527402407","270417160309844_299491474069079","270417160309844_299491684069058","270417160309844_299491657402394","270417160309844_299491627402397"],i=t[0],n=t[1],r=t[2],o=t[3],a=t[4],s=t[5];e=new AdvertiseFB([i,n,r],[o,a,s])}else e=new AdvertiseDev;return e},e}();__reflect(ADFactory.prototype,"ADFactory");var ad;!function(e){var t=function(e){function t(t,i){void 0===i&&(i=!0);var n=e.call(this)||this;return n.ids=t,n._adInstance=null,n._isStart=!1,n._watch_count=0,n.suportAD()&&i&&n.preloadAD(),n}return __extends(t,e),t.prototype.suportAD=function(){throw"should be implemented in subclass!"},t.prototype.getName=function(){throw"should be implemented in subclass!"},t.prototype.getADInstanceAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,null]})})},t.prototype.hasAD=function(){return!!this._adInstance},t.prototype.preloadAD=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o,a,s,l,u=this;return __generator(this,function(c){switch(c.label){case 0:if(this._isStart)return[2];this._isStart=!0,e="",t=this.ids.concat(),i=0,n=null,c.label=1;case 1:if(n)return[3,24];r=i++%t.length,c.label=2;case 2:return c.trys.push([2,22,,23]),[4,this.getADInstanceAsync(t[r])];case 3:n=c.sent(),e="",console.log(this.getName()+" create suc:"+r),o=0,c.label=4;case 4:if(this._adInstance||!n)return[3,21];c.label=5;case 5:return c.trys.push([5,14,,20]),[4,n.loadAsync()];case 6:c.sent(),e="",this._adInstance=n,this.emit("ad_ready"),console.log(this.getName()+" load suc"),c.label=7;case 7:return[4,new Promise(function(e,t){return u.once("show_ad",e)})];case 8:c.sent(),c.label=9;case 9:return c.trys.push([9,11,,12]),[4,this._adInstance.showAsync()];case 10:return c.sent(),e="",console.log(this.getName()+" show suc"),this.emit("show_result",{result:!0,level:r}),i=0,this._adInstance=null,n=null,[3,13];case 11:return a=c.sent(),console.log(this.getName()+" show failed,"+a.code+","+a.message),this.emit("ad_failed",{type:this.getName(),phase:2,code:a.code,msg:a.message,lastError:e}),e=a.code+":2",this.emit("show_result",{result:!1,err:a,level:r}),"ADS_NOT_LOADED"==a.code?(this._adInstance=null,o=0,[3,13]):"PENDING_REQUEST"!=a.code&&"UNKNOWN"!=a.code&&"RATE_LIMITED"!=a.code?(this._adInstance=null,n=null,[3,13]):[3,12];case 12:return[3,7];case 13:return[3,20];case 14:return s=c.sent(),console.log(this.getName()+" load failed,"+s.code+","+s.message),this.emit("ad_failed",{type:this.getName(),phase:1,code:s.code,msg:s.message,lastError:e}),e=s.code+":1","ADS_FREQUENT_LOAD"!=s.code?[3,16]:[4,new Promise(function(e){return setTimeout(e,18e5)})];case 15:return c.sent(),[3,21];case 16:return"INVALID_PARAM"!=s.code?[3,17]:(n=null,[3,21]);case 17:return[4,new Promise(function(e){return setTimeout(e,31e3)})];case 18:c.sent(),c.label=19;case 19:return[3,20];case 20:return[3,4];case 21:return[3,23];case 22:return l=c.sent(),console.log(this.getName()+" create failed,"+l.code+","+r),this.emit("ad_failed",{type:this.getName(),phase:0,code:l.code,msg:l.message,lastError:e}),e=l.code+":0","CLIENT_UNSUPPORTED_OPERATION"==l.code||"ADS_TOO_MANY_INSTANCES"==l.code?[2]:[3,23];case 23:return[3,1];case 24:return[2]}})})},t.prototype.showAD=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){switch(i.label){case 0:if(!this.hasAD())throw"no ad ready";return e=this.emit("show_ad"),e?[4,new Promise(function(e,i){t.once("show_result",function(n){t.emit("ad_show",{type:t.getName(),result:++t._watch_count,level:n.level}),n.result?e():i(n.err)})})]:[2];case 1:return i.sent(),[2]}})})},t}(Emiter);__reflect(t.prototype,"Advertise");var i=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getName=function(){return"iad"},t.prototype.suportAD=function(){var e=FBInstant.getSupportedAPIs();return e.indexOf("getInterstitialAdAsync")>-1},t.prototype.getADInstanceAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,FBInstant.getInterstitialAdAsync(e)];case 1:return[2,t.sent()]}})})},t}(t);e.InterstitialAD=i,__reflect(i.prototype,"ad.InterstitialAD");var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.getName=function(){return"rad"},t.prototype.suportAD=function(){var e=FBInstant.getSupportedAPIs();return e.indexOf("getRewardedVideoAsync")>-1},t.prototype.getADInstanceAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,FBInstant.getRewardedVideoAsync(e)];case 1:return[2,t.sent()]}})})},t}(t);e.RewardedVideoAD=n,__reflect(n.prototype,"ad.RewardedVideoAD")}(ad||(ad={}));var AdvertiseDev=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hasRAD=function(){return!0},t.hasIAD=function(){return!0},t.showRAD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,setTimeout(function(){},300)];case 1:return e.sent(),[2,Promise.resolve()]}})})},t.showIAD=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,setTimeout(function(){},300)];case 1:return e.sent(),[2,Promise.resolve()]}})})},t.suportAD=function(){return!0},t}return __extends(t,e),t}(Emiter);__reflect(AdvertiseDev.prototype,"AdvertiseDev");var AdvertiseFB=function(e){function t(t,i){var n=e.call(this)||this;return-1==FBInstant.getPlatform().indexOf("WEB")?(n.iad=new ad.InterstitialAD(t,!0),n.iad.on("ad_failed",function(e){return n.log("ad_failed",e)}),n.iad.on("ad_show",function(e){return n.log("iad_times",e)}),n.rad=new ad.RewardedVideoAD(i,!0),n.rad.on("ad_failed",function(e){return n.log("ad_failed",e)}),n.rad.on("ad_show",function(e){return n.log("rad_times",e)})):console.log("WEB & MOBILE_WEB ad skiped!"),n}return __extends(t,e),t.prototype.hasRAD=function(){return this.rad&&this.rad.hasAD()},t.prototype.showRAD=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this.rad,e?[4,this.rad.showAD()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return app.status.lastPlayADTime=Date.now(),app.status.lastPlayRADTime=Date.now(),[2]}})})},t.prototype.hasIAD=function(){return this.iad&&this.iad.hasAD()},t.prototype.showIAD=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return e=this.iad,e?[4,this.iad.showAD()]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return app.status.lastPlayADTime=Date.now(),[2]}})})},t.prototype.log=function(e,t,i){void 0===i&&(i=1),app.platform.logEvent(e,t,i)},t.prototype.suportAD=function(){if(void 0===this.suportAD_){var e=FBInstant.getSupportedAPIs();this.suportAD_=e.indexOf("getRewardedVideoAsync")>-1&&e.indexOf("getInterstitialAdAsync")>-1}return this.suportAD_},t}(Emiter);__reflect(AdvertiseFB.prototype,"AdvertiseFB");var PlatformDev=function(){function e(){var e=this;this.oppenentData=null,this.isPaymentsReady=!1,this.getFriendRankList=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return[2,[]]})})},this.getWorldRankList=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return[2,[]]})})},this.getFriendWeekRankList=function(){return __awaiter(e,void 0,void 0,function(){return __generator(this,function(e){return[2,[]]
})})},this.getWorldSelfEntry=function(){return new RankPlayerVO}}return e.prototype.setLoadingProgress=function(e){},e.prototype.purchaseAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!0]})})},e.prototype.checkPurchaseAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,[]]})})},e.prototype.onPaymentsReady=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getCatalogAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.getPlayerData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve({})]})})},e.prototype.getConnectedFriendList=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,[]]})})},e.prototype.setPlayerData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.choose=function(e,t){return void 0===e&&(e={}),void 0===t&&(t="any"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.switchContext=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.canCreateShortcutAsync=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!0]})})},e.prototype.getContextID=function(){return""},e.prototype.name=function(){return"Si Xing"},e.prototype.photo=function(){return"share-common-head-bg.png"},e.prototype.id=function(){return""},e.prototype.getLocale=function(){return"zh_CN"},e.prototype.entryData=function(){return{}},e.prototype.switchGame=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.updateStatus=function(e){return void 0===e&&(e={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.share=function(e){return void 0===e&&(e={}),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.updateScore=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.updateWeekScore=function(e,t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,Promise.resolve()]})})},e.prototype.createCtx=function(e,t){return void 0===t&&(t="any"),__awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!0]})})},e.prototype.logEvent=function(e,t,i){void 0===i&&(i=1),egret.log("name",e,"data",JSON.stringify(t))},e.prototype.setSessionData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,!0]})})},e.prototype.checkBotSubscribe=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e.prototype.tryCreateShortcut=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(PlatformDev.prototype,"PlatformDev");var PlatformFactory=function(){function e(){}return e.create=function(){return window.FBInstant?new PlatformFB:new PlatformDev},e}();__reflect(PlatformFactory.prototype,"PlatformFactory");var PlatformFB=function(){function e(){this.leaderboardName="rank",this.invite_skin_data=null,this._isPaymentsReady=!1}return e.prototype.getCatalogAsync=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:if(this._catalog)return[2,this._catalog];i.label=1;case 1:return i.trys.push([1,3,,4]),[4,FBInstant.payments.getCatalogAsync()];case 2:return e=i.sent(),this._catalog=e,egret.log(e),[2,this._catalog];case 3:return t=i.sent(),egret.log("getCatalogAsync error:"+t.code||t.message||t),[2,null];case 4:return[2]}})})},e.prototype.purchaseAsync=function(e){return __awaiter(this,void 0,void 0,function(){var t,i,n;return __generator(this,function(r){switch(r.label){case 0:if(!this._isPaymentsReady)return[3,5];r.label=1;case 1:return r.trys.push([1,4,,5]),t={},t.productID=e,[4,FBInstant.payments.purchaseAsync(t)];case 2:return i=r.sent(),[4,FBInstant.payments.consumePurchaseAsync(i.purchaseToken)];case 3:return r.sent(),[2,!0];case 4:return n=r.sent(),egret.log("purchaseAsync error:"+n.code||n.message||n),[3,5];case 5:return[2,!1]}})})},e.prototype.checkPurchaseAsync=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:if(!this._isPaymentsReady)return[3,8];a.label=1;case 1:return a.trys.push([1,7,,8]),[4,FBInstant.payments.getPurchasesAsync()];case 2:e=a.sent(),t=e.length,i=[],n=0,a.label=3;case 3:return t>n?(r=e[n],i.push(r),[4,FBInstant.payments.consumePurchaseAsync(r.purchaseToken)]):[3,6];case 4:a.sent(),a.label=5;case 5:return n++,[3,3];case 6:return[2,i];case 7:return o=a.sent(),egret.log("checkPurchase error:"+o.code||o.message||o),[3,8];case 8:return[2,null]}})})},e.prototype.onPaymentsReady=function(){return __awaiter(this,void 0,void 0,function(){var e,t=this;return __generator(this,function(i){if(e=FBInstant.getPlatform(),"IOS"!=e)try{FBInstant.payments.onReady(function(){t._isPaymentsReady=!0})}catch(n){egret.log("paymentsReady error:"+n.code||n.message||n)}return[2]})})},Object.defineProperty(e.prototype,"isIOS",{get:function(){var e=FBInstant.getPlatform();return"IOS"==e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPaymentsReady",{get:function(){return this._isPaymentsReady},enumerable:!0,configurable:!0}),e.prototype.setLoadingProgress=function(e){FBInstant.setLoadingProgress(e)},e.prototype.getPlayerData=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,FBInstant.player.getDataAsync(e)];case 1:return[2,t.sent()]}})})},e.prototype.setPlayerData=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,FBInstant.player.setDataAsync(e)];case 1:return i.sent(),[3,3];case 2:return t=i.sent(),egret.log("set data error",JSON.stringify(t)),[3,3];case 3:return[2]}})})},e.prototype.choose=function(e,t){return void 0===e&&(e={}),void 0===t&&(t="any"),__awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:t=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,FBInstant.context.chooseAsync(e)];case 2:return n.sent(),Common.onContextChanged(),[3,4];case 3:return i=n.sent(),"SAME_CONTEXT"!=i.code&&(t=!1),console.log("auto choose failed:",i),[3,4];case 4:return[2,t]}})})},e.prototype.switchContext=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return[4,FBInstant.context.switchAsync(e)];case 1:return[2,t.sent()]}})})},e.prototype.getContextID=function(){return FBInstant.context.getID()},e.prototype.name=function(){return FBInstant.player.getName()},e.prototype.photo=function(){return FBInstant.player.getPhoto()},e.prototype.id=function(){return FBInstant.player.getID()},e.prototype.entryData=function(){return FBInstant.getEntryPointData()},e.prototype.getLocale=function(){return FBInstant.getLocale()},e.prototype.switchGame=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,n,r;return __generator(this,function(o){switch(o.label){case 0:i=!0,n={switchGameInfo:{appId:AppConstant.APP_ID,appName:AppConstant.APP_NAME},type:AppConstant.APP_NAME},o.label=1;case 1:return o.trys.push([1,3,,4]),[4,FBInstant.switchGameAsync(e,Object.assign(n,t))];case 2:return o.sent(),[3,4];case 3:return r=o.sent(),i=!1,console.log("switch game error",JSON.stringify(r)),[3,4];case 4:return[2,i]}})})},e.prototype.share=function(e){return void 0===e&&(e={}),__awaiter(this,void 0,void 0,function(){var t,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:t=e.img,i=e.intent,n=e.text,r=e.data,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,FBInstant.shareAsync({intent:i||"INVITE",image:t,text:n,data:r})];case 2:return a.sent(),[3,4];case 3:return o=a.sent(),egret.log("share error",JSON.stringify(o)),[3,4];case 4:return[2]}})})},e.prototype.updateStatus=function(e){return void 0===e&&(e={}),FBInstant.updateAsync({action:"CUSTOM",cta:e.cta||"Play now",image:e.image||"",text:e.text||"This game is awesome! You should try it! 😆",template:e.template||"SHOPPING_INVITE",data:e.data,strategy:e.strategy||"IMMEDIATE",notification:e.notification||"NO_PUSH"})},e.prototype.getFriendRankList=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n;return __generator(this,function(r){switch(r.label){case 0:return r.trys.push([0,4,,9]),t=this,i=this.leaderboard_,i?[3,2]:[4,FBInstant.getLeaderboardAsync(this.leaderboardName)];case 1:i=r.sent(),r.label=2;case 2:return t.leaderboard_=i,[4,this.leaderboard_.getConnectedPlayerEntriesAsync(100,0)];case 3:return e=r.sent(),[3,9];case 4:return n=r.sent(),n.code!=Constant.ErrorCode.RATE_LIMITED&&n.code!=Constant.ErrorCode.NETWORK_FAILURE?[3,7]:(egret.log("getFriendRankList ",n.code),[4,Utils.wait(2e3)]);case 5:return r.sent(),[4,this.getFriendRankList()];case 6:return[2,r.sent()];case 7:egret.log("getFriendRankList error",n),r.label=8;case 8:return[3,9];case 9:return egret.log("getFriendRankList ok"),[2,e||[]]}})})},e.prototype.getWorldRankList=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:return a.trys.push([0,6,,11]),t=this,i=this.leaderboard_,i?[3,2]:[4,FBInstant.getLeaderboardAsync(this.leaderboardName)];case 1:i=a.sent(),a.label=2;case 2:return t.leaderboard_=i,[4,this.leaderboard_.getEntryCountAsync()];case 3:return n=a.sent(),console.log("worldRankCount:",n),0==n?[2,[]]:[4,this.leaderboard_.getEntriesAsync(Math.min(100,n),0)];case 4:return e=a.sent(),[4,this.leaderboard_.getPlayerEntryAsync()];case 5:return r=a.sent(),console.log("Player entry: ",r),this._world_selfEntry=r?RankPlayerVO.createFromLeaderBoardEntry(r):null,[3,11];case 6:return o=a.sent(),o.code!=Constant.ErrorCode.RATE_LIMITED&&o.code!=Constant.ErrorCode.NETWORK_FAILURE?[3,9]:(egret.log("getWorldRankList ",o.code),[4,Utils.wait(2e3)]);case 7:return a.sent(),[4,this.getWorldRankList()];case 8:return[2,a.sent()];case 9:egret.log("getWorldRankList error",o),a.label=10;case 10:return[3,11];case 11:return egret.log("getWorldRankList ok"),[2,e||[]]}})})},e.prototype.getConnectedFriendList=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,3,,4]),e=this,t=this.friends_,t?[3,2]:[4,FBInstant.player.getConnectedPlayersAsync()];case 1:t=n.sent(),n.label=2;case 2:return e.friends_=t,[3,4];case 3:return i=n.sent(),egret.log("get connected friends error",JSON.stringify(i)),[3,4];case 4:return[2,this.friends_.concat()||[]]}})})},e.prototype.updateScore=function(e,t){return __awaiter(this,void 0,void 0,function(){var i,n,r,o;return __generator(this,function(a){switch(a.label){case 0:return i=null,n=this,r=this.leaderboard_,r?[3,2]:[4,FBInstant.getLeaderboardAsync(this.leaderboardName)];case 1:r=a.sent(),a.label=2;case 2:n.leaderboard_=r,a.label=3;case 3:return a.trys.push([3,5,,10]),[4,this.leaderboard_.setScoreAsync(e,t)];case 4:return i=a.sent(),[3,10];case 5:return o=a.sent(),o.code!=Constant.ErrorCode.RATE_LIMITED&&o.code!=Constant.ErrorCode.NETWORK_FAILURE?[3,8]:(console.log("updateScore ",o.code),[4,Utils.wait(2e3)]);case 6:return a.sent(),[4,this.updateScore(e,t)];case 7:return[2,a.sent()];case 8:console.log("updateScore error",o),a.label=9;case 9:return[3,10];case 10:return console.log("updateScore ok",e,t),[2,i]}})})},e.prototype.createCtx=function(e){return __awaiter(this,void 0,void 0,function(){var t,i;return __generator(this,function(n){switch(n.label){case 0:t=!0,n.label=1;case 1:return n.trys.push([1,3,,4]),[4,FBInstant.context.createAsync(e)];case 2:return n.sent(),Common.onContextChanged(),[3,4];case 3:return i=n.sent(),"SAME_CONTEXT"!=i.code&&(t=!1),[3,4];case 4:return[2,t]}})})},e.prototype.canCreateShortcutAsync=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,FBInstant.canCreateShortcutAsync()];case 1:return[2,t.sent()];case 2:return e=t.sent(),[2,!1];case 3:return[2]}})})},e.prototype.createShortcutAsync=function(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,FBInstant.createShortcutAsync()];case 1:return t.sent(),[2,{ok:!0,code:void 0}];case 2:return e=t.sent(),[2,{ok:!1,code:e.code}];case 3:return[2]}})})},e.prototype.logEvent=function(e,t,i){void 0===i&&(i=1),FBInstant.logEvent(e,i,t)},e.prototype.setSessionData=function(e){return __awaiter(this,void 0,void 0,function(){var t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),egret.log("setSessionData",e),[4,FBInstant.setSessionData(e)];case 1:return i.sent(),[2,!0];case 2:return t=i.sent(),egret.log(t),[2,!1];case 3:return[2]}})})},e.prototype.checkBotSubscribe=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,4,,5]),[4,FBInstant.player.canSubscribeBotAsync()];case 1:return(e=i.sent())?(this.logEvent("bot_subscribe",{result:-1}),[4,FBInstant.player.subscribeBotAsync()]):[3,3];case 2:i.sent(),this.logEvent("bot_subscribe",{result:1}),i.label=3;case 3:return[3,5];case 4:return t=i.sent(),this.logEvent("bot_subscribe",{result:0}),[3,5];case 5:return[2]}})})},e.prototype.tryCreateShortcut=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i;return __generator(this,function(n){switch(n.label){case 0:return e=app.pp,[4,this.canCreateShortcutAsync()];case 1:return t=n.sent(),egret.log("shortcut:",e.shortcutClaimed,!t,e.shortcutRefused>=2),e.shortcutClaimed||!t||e.shortcutRefused>=2?[2]:(app.platform.logEvent(Log.EventType.SaveDetail,{type:app.status.playerType,result:2}),[4,this.createShortcutAsync()]);case 2:return i=n.sent(),i.ok?(app.platform.logEvent(Log.EventType.SaveDetail,{type:app.status.playerType,result:1}),e.shortcutClaimed=!0):(app.platform.logEvent(Log.EventType.SaveDetail,{type:app.status.playerType,result:0}),e.shortcutRefused++),e.pushData(),[2]}})})},e.prototype.getWorldSelfEntry=function(){return this._world_selfEntry},e}();__reflect(PlatformFB.prototype,"PlatformFB");var AudioPlayer;!function(e){function t(e){c!=e&&(c=e,egret.localStorage.setItem("mute",e?"1":"0"))}function i(){return c}function n(){c="1"==egret.localStorage.getItem("mute")}function r(){if(d=0,!c){var e=RES.getResAsync("bgm.mp3");e&&e.then(function(e){p=e,h&&h.stop(),h=e.play(0,1),h.once(egret.Event.SOUND_COMPLETE,o,null)})}}function o(){h&&(h=void 0)}function a(){h&&(d=h.position,h.stop(),h=void 0)}function s(){p&&!h&&d&&(h=p.play(d,1),h.once(egret.Event.SOUND_COMPLETE,o,null))}function l(){if(d=0,h){var e=h;h=void 0,e.once(egret.Event.SOUND_COMPLETE,function(){egret.Tween.removeTweens(e)},null),egret.Tween.get(e).to({volume:0},1e3).call(function(){e.stop()})}}function u(e){if(!c){var t=RES.getRes(e);t&&t.play(0,1)}}var c=!1;e.setMute=t,e.isMute=i,e.init=n;var h,p;e.playMusic=r;var d=0;e.pauseMusic=a,e.resumeMusic=s,e.stopMusic=l,e.playSound=u}(AudioPlayer||(AudioPlayer={}));var Common;!function(e){function t(){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=app.platform.getContextID(),l!=e&&(l=e,i()),[2]})})}function i(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),e=u,e?[3,2]:[4,FBInstant.getLeaderboardAsync("rank")];case 1:e=i.sent(),i.label=2;case 2:return u=e,[4,u.setScoreAsync(1,"")];case 3:return i.sent(),[4,FBInstant.updateAsync({action:"LEADERBOARD",name:"rank",text:app.platform.name()+" joined this game"})];case 4:return i.sent(),[3,6];case 5:return t=i.sent(),egret.log("sendScoreUpdate failed:",t),[3,6];case 6:return[2]}})})}function n(e,t,i){return __awaiter(this,void 0,void 0,function(){var i;return __generator(this,function(n){switch(n.label){case 0:return app.ui.busy(),[4,app.platform.choose({filters:["NEW_CONTEXT_ONLY"]})];case 1:return i=n.sent(),app.ui.rmBusy(),i?e&&e():t&&t(),[2]}})})}function r(e,t,i){if(void 0===t&&(t=function(){}),void 0===i&&(i=function(){}),!Context.isFB)return void t();var n=function(){i(),app.ui.toast("Ads not ready")};return app.ad.hasRAD()&&app.ad.suportAD()?(app.platform.logEvent(Log.EventType.AD,{type:"video",source:e}),void app.ad.showRAD().then(t,n)):n()}function o(){var e=app.ad;return e.suportAD()&&(e.hasIAD()||e.hasRAD())?Date.now()-app.status.lastPlayADTime<AppConstant.AD_INTERVAL_TIME?!1:!0:!1}function a(){var e=app.ad;return e.suportAD()&&e.hasRAD()?Date.now()-app.status.lastPlayRADTime<AppConstant.RAD_INTERVAL_TIME?!1:!0:!1}function s(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,5,,6]),o()?(e=a(),app.platform.logEvent(Log.EventType.AD,{type:e?"video":"cover",source:"adNextLevel"}),e?[4,app.ad.showRAD()]:[3,2]):[3,4];case 1:return i.sent(),[3,4];case 2:return[4,app.ad.showIAD()];case 3:i.sent(),i.label=4;case 4:return[3,6];case 5:return t=i.sent(),[3,6];case 6:return[2]}})})}var l="";e.onContextChanged=t;var u;e.sendRankUpdate=i,e.invite=n,e.showRAD=r,e.shouldPlayAD=o,e.tryPlayAD=s}(Common||(Common={}));var Constant;!function(e){e.ErrorCode={RATE_LIMITED:"RATE_LIMITED",NETWORK_FAILURE:"NETWORK_FAILURE",USER_INPUT:"USER_INPUT"},e.guiParams={enableRotate:!1,following:!0,wireframe:!0,switchPlayer:0},e.VERSION=$T_GAME_VERSION,e.FullWidthScale=1,e.MatchingTime=4e3,e.ReviveTime=6e3,e.CompleteDelay=2e3,e.starAmount=[0,30,24,20,18,16,14,12,10,8,6,4,2]}(Constant||(Constant={}));var GameConstant;!function(e){e.ToRadian=Math.PI/180,e.ToDegree=180/Math.PI,e.V3Zero=new THREE.Vector3,e.V3Right=new tr.Vector3(1,0,0),e.V3Up=new tr.Vector3(0,1,0),e.BallR=.6,e.ObsSize=2,e.FBXScale=e.BallR/19.685,e.ObsScale=e.FBXScale*e.ObsSize*.5/e.BallR,e.ReviveBackDist=40,e.TrackLength=300,e.RobotGap=16,e.PlayersCount=3,e.BaseSpeed=50,e.BaseSpeedRobot=48.4,e.CameraFollowDist=10,e.PlayerBoostLevelSpeed=20,e.Maps=["chushi","kehuan","shamo"],e.Map=e.Maps[0],e.MapColor={shamo:16367760,kehuan:595281,chushi:4578525},e.Anisotropy=8}(GameConstant||(GameConstant={}));var Context;!function(e){e.isFB=!!window.FBInstant}(Context||(Context={}));var LocalRobotData;!function(e){function t(){return app.platform.getConnectedFriendList().then(function(e){for(;e.length>8;)e.splice(Utils.randomInt(0,e.length),1);for(var t=[];;){var n=Utils.randomInt(1,324);if(t.includes(n)||t.push(n),t.length+e.length>=11)break}var r=t.map(function(e){return i(e)}),o=e.map(function(e){return{id:e.getID(),name:e.getName(),photo:e.getPhoto()}});return r=r.concat(o),Utils.makeArrayRandom(r),r})}function i(e){var t=DB_avatar.get(e);return{id:t.id+"",name:t.name,photo:"resource/assets/avatar/"+t.pic}}e.getRobotsInfo=t}(LocalRobotData||(LocalRobotData={}));var GameReadyCmd=function(){function e(){this._lastContextId=null,this._contextLeaderBoard=null}return e.prototype.excute=function(e,t){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r;return __generator(this,function(o){switch(o.label){case 0:return egret.log("enter GameReadyCmd"),app.platform instanceof PlatformFB&&this.watchContextIfChanged(),e=Context.gameModel,t=app.platform.entryData(),i=t&&t.opponent_info,i&&i.playerId==FBInstant.player.getID()&&(i=null),e.opponent_info=i,n=t&&t.invite_skin_data,n&&n.playerId==FBInstant.player.getID()&&(n=null),e.invite_skin_data=n,egret.log("entryData",t),app.http.reportIfFromSkinShare()["catch"](function(e){}),console.log("Load FriendList."),r=app.status,[4,app.platform.getConnectedFriendList()];case 1:return r.friendList=o.sent(),console.log("FriendList loaded success."),app.http.getSkinShareInfo()["catch"](function(e){}),[2]}})})},e.prototype.watchContextIfChanged=function(){return __awaiter(this,void 0,void 0,function(){var e,t,i,n,r,o,a,s;return __generator(this,function(l){switch(l.label){case 0:e=FBInstant.player.getName(),t=Context.gameModel,l.label=1;case 1:if(i=FBInstant.context.getID(),!i)return[3,12];if(n="rank",i==this._lastContextId)return[3,8];egret.log("context changes detected"),l.label=2;case 2:return l.trys.push([2,6,,7]),this._lastContextId=i,r=this,[4,FBInstant.getLeaderboardAsync(n)];case 3:return r._contextLeaderBoard=l.sent(),[4,this._contextLeaderBoard.setScoreAsync(t.lastContextualScore,"")];case 4:return l.sent(),[4,FBInstant.updateAsync({action:"LEADERBOARD",name:n,text:e+" joined this game"})];case 5:return l.sent(),[3,7];case 6:return o=l.sent(),egret.log("rank msg failed:",o),[3,7];case 7:egret.log("all done!"),l.label=8;case 8:if(a=t.score,!(a>t.lastContextualScore))return[3,12];l.label=9;case 9:return l.trys.push([9,11,,12]),egret.log("score changed!"),t.lastContextualScore=a,[4,FBInstant.updateAsync({action:"LEADERBOARD",name:n,text:e+" scored "+a})];case 10:return l.sent(),egret.log("all done!"),[3,12];case 11:return s=l.sent(),egret.log("score changed update failed:",s),[3,12];case 12:return[4,Utils.wait(3e3)];case 13:return l.sent(),[3,1];case 14:return[2]}})})},e}();__reflect(GameReadyCmd.prototype,"GameReadyCmd",["ICommand"]),window.THREE.OBJLoader=function(){function e(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(e,t){if(this.object&&this.object.fromDeclaration===!1)return this.object.name=e,void(this.object.fromDeclaration=t!==!1);var i=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:t!==!1,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var i=this._finalize(!1);i&&(i.inherited||i.groupCount<=0)&&this.materials.splice(i.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==i?i.smooth:this.smooth,groupStart:void 0!==i?i.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){return this.materials.length>0?this.materials[this.materials.length-1]:void 0},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var i=this.materials.length-1;i>=0;i--)this.materials[i].groupCount<=0&&this.materials.splice(i,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},i&&i.name&&"function"==typeof i.clone){var n=i.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseNormalIndex:function(e,t){var i=parseInt(e,10);return 3*(i>=0?i-1:i+t/3)},parseUVIndex:function(e,t){var i=parseInt(e,10);return 2*(i>=0?i-1:i+t/2)},addVertex:function(e,t,i){var n=this.vertices,r=this.object.geometry.vertices;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addVertexPoint:function(e){var t=this.vertices,i=this.object.geometry.vertices;i.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices,i=this.object.geometry.vertices;i.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,i){var n=this.normals,r=this.object.geometry.normals;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addColor:function(e,t,i){var n=this.colors,r=this.object.geometry.colors;r.push(n[e+0],n[e+1],n[e+2]),r.push(n[t+0],n[t+1],n[t+2]),r.push(n[i+0],n[i+1],n[i+2])},addUV:function(e,t,i){var n=this.uvs,r=this.object.geometry.uvs;r.push(n[e+0],n[e+1]),r.push(n[t+0],n[t+1]),r.push(n[i+0],n[i+1])},addUVLine:function(e){var t=this.uvs,i=this.object.geometry.uvs;i.push(t[e+0],t[e+1])},addFace:function(e,t,i,n,r,o,a,s,l){var u=this.vertices.length,c=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),p=this.parseVertexIndex(i,u);if(this.addVertex(c,h,p),void 0!==n&&""!==n){var d=this.uvs.length;c=this.parseUVIndex(n,d),h=this.parseUVIndex(r,d),p=this.parseUVIndex(o,d),this.addUV(c,h,p)}if(void 0!==a&&""!==a){var f=this.normals.length;c=this.parseNormalIndex(a,f),h=a===s?c:this.parseNormalIndex(s,f),p=a===l?c:this.parseNormalIndex(l,f),this.addNormal(c,h,p)}this.colors.length>0&&this.addColor(c,h,p)},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,i=0,n=e.length;n>i;i++)this.addVertexPoint(this.parseVertexIndex(e[i],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var i=this.vertices.length,n=this.uvs.length,r=0,o=e.length;o>r;r++)this.addVertexLine(this.parseVertexIndex(e[r],i));for(var a=0,o=t.length;o>a;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return e.startObject("",!1),e}function t(e){this.manager=void 0!==e?e:THREE.DefaultLoadingManager,this.materials=null}var i=/^[og]\s*(.+)?/,n=/^mtllib /,r=/^usemtl /;return t.prototype={constructor:t,load:function(e,t,i,n){var r=this,o=new THREE.FileLoader(r.manager);o.setPath(this.path),o.load(e,function(e){t(r.parse(e))},i,n)},setPath:function(e){return this.path=e,this},setMaterials:function(e){return this.materials=e,this},parse:function(t){console.time("OBJLoader");var o=e,a=new o;-1!==t.indexOf("\r\n")&&(t=t.replace(/\r\n/g,"\n")),-1!==t.indexOf("\\\n")&&(t=t.replace(/\\\n/g,""));for(var s=t.split("\n"),l="",u="",c=0,h=[],p="function"==typeof"".trimLeft,d=0,f=s.length;f>d;d++)if(l=s[d],l=p?l.trimLeft():l.trim(),c=l.length,0!==c&&(u=l.charAt(0),"#"!==u))if("v"===u){var m=l.split(/\s+/);switch(m[0]){case"v":a.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),8===m.length&&a.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]));break;case"vn":a.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":a.uvs.push(parseFloat(m[1]),parseFloat(m[2]))}}else if("f"===u){for(var g=l.substr(1).trim(),v=g.split(/\s+/),y=[],_=0,b=v.length;b>_;_++){var w=v[_];if(w.length>0){var x=w.split("/");y.push(x)}}for(var E=y[0],_=1,b=y.length-1;b>_;_++){var S=y[_],T=y[_+1];a.addFace(E[0],S[0],T[0],E[1],S[1],T[1],E[2],S[2],T[2])}}else if("l"===u){var C=l.substring(1).trim().split(" "),M=[],P=[];if(-1===l.indexOf("/"))M=C;else for(var I=0,L=C.length;L>I;I++){var R=C[I].split("/");""!==R[0]&&M.push(R[0]),""!==R[1]&&P.push(R[1])}a.addLineGeometry(M,P)}else if("p"===u){var g=l.substr(1).trim(),A=g.split(" ");a.addPointGeometry(A)}else if(null!==(h=i.exec(l))){var O=(" "+h[0].substr(1).trim()).substr(1);a.startObject(O)}else if(r.test(l))a.object.startMaterial(l.substring(7).trim(),a.materialLibraries);else if(n.test(l))a.materialLibraries.push(l.substring(7).trim());else{if("s"!==u){if("\x00"===l)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+l+'"')}if(h=l.split(" "),h.length>1){var k=h[1].trim().toLowerCase();a.object.smooth="0"!==k&&"off"!==k}else a.object.smooth=!0;var D=a.object.currentMaterial();D&&(D.smooth=a.object.smooth)}a.finalize();var N=new THREE.Group;N.materialLibraries=[].concat(a.materialLibraries);for(var d=0,f=a.objects.length;f>d;d++){var B=a.objects[d],U=B.geometry,G=B.materials,F="Line"===U.type,H="Points"===U.type,j=!1;if(0!==U.vertices.length){var z=new THREE.BufferGeometry;z.addAttribute("position",new THREE.Float32BufferAttribute(U.vertices,3)),U.normals.length>0?z.addAttribute("normal",new THREE.Float32BufferAttribute(U.normals,3)):z.computeVertexNormals(),U.colors.length>0&&(j=!0,z.addAttribute("color",new THREE.Float32BufferAttribute(U.colors,3))),U.uvs.length>0&&z.addAttribute("uv",new THREE.Float32BufferAttribute(U.uvs,2));for(var $=[],V=0,W=G.length;W>V;V++){var X=G[V],D=void 0;if(null!==this.materials)if(D=this.materials.create(X.name),!F||!D||D instanceof THREE.LineBasicMaterial){if(H&&D&&!(D instanceof THREE.PointsMaterial)){var Y=new THREE.PointsMaterial({size:10,sizeAttenuation:!1});q.copy(D),D=Y}}else{var q=new THREE.LineBasicMaterial;q.copy(D),q.lights=!1,D=q}D||(D=F?new THREE.LineBasicMaterial:H?new THREE.PointsMaterial({size:1,sizeAttenuation:!1}):new THREE.MeshPhongMaterial,D.name=X.name),D.flatShading=X.smooth?!1:!0,D.vertexColors=j?THREE.VertexColors:THREE.NoColors,$.push(D)}var J;if($.length>1){for(var V=0,W=G.length;W>V;V++){var X=G[V];z.addGroup(X.groupStart,X.groupCount,V)}J=F?new THREE.LineSegments(z,$):H?new THREE.Points(z,$):new THREE.Mesh(z,$)}else J=F?new THREE.LineSegments(z,$[0]):H?new THREE.Points(z,$[0]):new THREE.Mesh(z,$[0]);J.name=B.name,N.add(J)}}return console.timeEnd("OBJLoader"),N}},t}();var a=function(e,t){function i(){return 2*Math.PI/60/60*R.autoRotateSpeed}function n(){return Math.pow(.95,R.zoomSpeed)}function r(e){G.theta-=e}function o(e){G.phi-=e}function a(e){R.object.isPerspectiveCamera?F/=e:R.object.isOrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom*e)),R.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function s(e){R.object.isPerspectiveCamera?F*=e:R.object.isOrthographicCamera?(R.object.zoom=Math.max(R.minZoom,Math.min(R.maxZoom,R.object.zoom/e)),R.object.updateProjectionMatrix(),j=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),R.enableZoom=!1)}function l(e){z.set(e.clientX,e.clientY)}function u(e){q.set(e.clientX,e.clientY)}function c(e){W.set(e.clientX,e.clientY)}function h(e){$.set(e.clientX,e.clientY),V.subVectors($,z).multiplyScalar(R.rotateSpeed);var t=R.domElement===document?R.domElement.body:R.domElement;r(2*Math.PI*V.x/t.clientHeight),o(2*Math.PI*V.y/t.clientHeight),z.copy($),R.update()}function p(e){J.set(e.clientX,e.clientY),Z.subVectors(J,q),Z.y>0?a(n()):Z.y<0&&s(n()),q.copy(J),R.update()}function d(e){X.set(e.clientX,e.clientY),Y.subVectors(X,W).multiplyScalar(R.panSpeed),et(Y.x,Y.y),W.copy(X),R.update()}function f(e){}function m(e){e.deltaY<0?s(n()):e.deltaY>0&&a(n()),R.update()}function g(e){switch(e.keyCode){case R.keys.UP:et(0,R.keyPanSpeed),R.update();break;case R.keys.BOTTOM:et(0,-R.keyPanSpeed),R.update();break;case R.keys.LEFT:et(R.keyPanSpeed,0),R.update();break;case R.keys.RIGHT:et(-R.keyPanSpeed,0),R.update()}}function v(e){z.set(e.touches[0].pageX,e.touches[0].pageY)}function y(e){if(R.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);q.set(0,n)}if(R.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);W.set(r,o)}}function _(e){$.set(e.touches[0].pageX,e.touches[0].pageY),V.subVectors($,z).multiplyScalar(R.rotateSpeed);var t=R.domElement===document?R.domElement.body:R.domElement;r(2*Math.PI*V.x/t.clientHeight),o(2*Math.PI*V.y/t.clientHeight),z.copy($),R.update()}function b(e){if(R.enableZoom){var t=e.touches[0].pageX-e.touches[1].pageX,i=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+i*i);
J.set(0,n),Z.set(0,Math.pow(J.y/q.y,R.zoomSpeed)),a(Z.y),q.copy(J)}if(R.enablePan){var r=.5*(e.touches[0].pageX+e.touches[1].pageX),o=.5*(e.touches[0].pageY+e.touches[1].pageY);X.set(r,o),Y.subVectors(X,W).multiplyScalar(R.panSpeed),et(Y.x,Y.y),W.copy(X)}R.update()}function w(e){}function x(e){if(R.enabled!==!1){switch(e.preventDefault(),e.button){case R.mouseButtons.ORBIT:if(R.enableRotate===!1)return;l(e),N=D.ROTATE;break;case R.mouseButtons.ZOOM:if(R.enableZoom===!1)return;u(e),N=D.DOLLY;break;case R.mouseButtons.PAN:if(R.enablePan===!1)return;c(e),N=D.PAN}N!==D.NONE&&(document.addEventListener("mousemove",E,!1),document.addEventListener("mouseup",S,!1),R.dispatchEvent(O))}}function E(e){if(R.enabled!==!1)switch(e.preventDefault(),N){case D.ROTATE:if(R.enableRotate===!1)return;h(e);break;case D.DOLLY:if(R.enableZoom===!1)return;p(e);break;case D.PAN:if(R.enablePan===!1)return;d(e)}}function S(e){R.enabled!==!1&&(f(e),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",S,!1),R.dispatchEvent(k),N=D.NONE)}function T(e){R.enabled===!1||R.enableZoom===!1||N!==D.NONE&&N!==D.ROTATE||(e.preventDefault(),e.stopPropagation(),R.dispatchEvent(O),m(e),R.dispatchEvent(k))}function C(e){R.enabled!==!1&&R.enableKeys!==!1&&R.enablePan!==!1&&g(e)}function M(e){if(R.enabled!==!1){switch(e.preventDefault(),e.touches.length){case 1:if(R.enableRotate===!1)return;v(e),N=D.TOUCH_ROTATE;break;case 2:if(R.enableZoom===!1&&R.enablePan===!1)return;y(e),N=D.TOUCH_DOLLY_PAN;break;default:N=D.NONE}N!==D.NONE&&R.dispatchEvent(O)}}function P(e){if(R.enabled!==!1)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:if(R.enableRotate===!1)return;if(N!==D.TOUCH_ROTATE)return;_(e);break;case 2:if(R.enableZoom===!1&&R.enablePan===!1)return;if(N!==D.TOUCH_DOLLY_PAN)return;b(e);break;default:N=D.NONE}}function I(e){R.enabled!==!1&&(w(e),R.dispatchEvent(k),N=D.NONE)}function L(e){R.enabled!==!1&&e.preventDefault()}this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new THREE.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-(1/0),this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:THREE.MOUSE.LEFT,ZOOM:THREE.MOUSE.MIDDLE,PAN:THREE.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return U.phi},this.getAzimuthalAngle=function(){return U.theta},this.saveState=function(){R.target0.copy(R.target),R.position0.copy(R.object.position),R.zoom0=R.object.zoom},this.reset=function(){R.target.copy(R.target0),R.object.position.copy(R.position0),R.object.zoom=R.zoom0,R.object.updateProjectionMatrix(),R.dispatchEvent(A),R.update(),N=D.NONE},this.update=function(){var t=new THREE.Vector3,n=(new THREE.Quaternion).setFromUnitVectors(e.up,new THREE.Vector3(0,1,0)),o=n.clone().inverse(),a=new THREE.Vector3,s=new THREE.Quaternion;return function(){var e=R.object.position;return t.copy(e).sub(R.target),t.applyQuaternion(n),U.setFromVector3(t),R.autoRotate&&N===D.NONE&&r(i()),U.theta+=G.theta,U.phi+=G.phi,U.theta=Math.max(R.minAzimuthAngle,Math.min(R.maxAzimuthAngle,U.theta)),U.phi=Math.max(R.minPolarAngle,Math.min(R.maxPolarAngle,U.phi)),U.makeSafe(),U.radius*=F,U.radius=Math.max(R.minDistance,Math.min(R.maxDistance,U.radius)),R.target.add(H),t.setFromSpherical(U),t.applyQuaternion(o),e.copy(R.target).add(t),R.object.lookAt(R.target),R.enableDamping===!0?(G.theta*=1-R.dampingFactor,G.phi*=1-R.dampingFactor,H.multiplyScalar(1-R.dampingFactor)):(G.set(0,0,0),H.set(0,0,0)),F=1,j||a.distanceToSquared(R.object.position)>B||8*(1-s.dot(R.object.quaternion))>B?(R.dispatchEvent(A),a.copy(R.object.position),s.copy(R.object.quaternion),j=!1,!0):!1}}(),this.dispose=function(){R.domElement.removeEventListener("contextmenu",L,!1),R.domElement.removeEventListener("mousedown",x,!1),R.domElement.removeEventListener("wheel",T,!1),R.domElement.removeEventListener("touchstart",M,!1),R.domElement.removeEventListener("touchend",I,!1),R.domElement.removeEventListener("touchmove",P,!1),document.removeEventListener("mousemove",E,!1),document.removeEventListener("mouseup",S,!1),window.removeEventListener("keydown",C,!1)};var R=this,A={type:"change"},O={type:"start"},k={type:"end"},D={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY_PAN:4},N=D.NONE,B=1e-6,U=new THREE.Spherical,G=new THREE.Spherical,F=1,H=new THREE.Vector3,j=!1,z=new THREE.Vector2,$=new THREE.Vector2,V=new THREE.Vector2,W=new THREE.Vector2,X=new THREE.Vector2,Y=new THREE.Vector2,q=new THREE.Vector2,J=new THREE.Vector2,Z=new THREE.Vector2,K=function(){var e=new THREE.Vector3;return function(t,i){e.setFromMatrixColumn(i,0),e.multiplyScalar(-t),H.add(e)}}(),Q=function(){var e=new THREE.Vector3;return function(t,i){R.screenSpacePanning===!0?e.setFromMatrixColumn(i,1):(e.setFromMatrixColumn(i,0),e.crossVectors(R.object.up,e)),e.multiplyScalar(t),H.add(e)}}(),et=function(){var e=new THREE.Vector3;return function(t,i){var n=R.domElement===document?R.domElement.body:R.domElement;if(R.object.isPerspectiveCamera){var r=R.object.position;e.copy(r).sub(R.target);var o=e.length();o*=Math.tan(R.object.fov/2*Math.PI/180),K(2*t*o/n.clientHeight,R.object.matrix),Q(2*i*o/n.clientHeight,R.object.matrix)}else R.object.isOrthographicCamera?(K(t*(R.object.right-R.object.left)/R.object.zoom/n.clientWidth,R.object.matrix),Q(i*(R.object.top-R.object.bottom)/R.object.zoom/n.clientHeight,R.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),R.enablePan=!1)}}();R.domElement.addEventListener("contextmenu",L,!1),R.domElement.addEventListener("mousedown",x,!1),R.domElement.addEventListener("wheel",T,!1),R.domElement.addEventListener("touchstart",M,!1),R.domElement.addEventListener("touchend",I,!1),R.domElement.addEventListener("touchmove",P,!1),window.addEventListener("keydown",C,!1),this.update()};THREE.OrbitControls=a,THREE.OrbitControls.prototype=Object.create(THREE.EventDispatcher.prototype),THREE.OrbitControls.prototype.constructor=THREE.OrbitControls,Object.defineProperties(THREE.OrbitControls.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(e){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!e}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(e){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!e}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(e){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!e}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(e){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!e}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(e){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!e}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(e){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=e}}});var ParametricGeometries={klein:function(e,t,i){t*=Math.PI,e*=2*Math.PI,t=2*t;var n,r,o;t<Math.PI?(n=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(t)*Math.cos(e),o=-8*Math.sin(t)-2*(1-Math.cos(t)/2)*Math.sin(t)*Math.cos(e)):(n=3*Math.cos(t)*(1+Math.sin(t))+2*(1-Math.cos(t)/2)*Math.cos(e+Math.PI),o=-8*Math.sin(t)),r=-2*(1-Math.cos(t)/2)*Math.sin(e),i.set(n,r,o)},plane:function(e,t){return function(i,n,r){var o=i*e,a=0,s=n*t;r.set(o,a,s)}},plane2:function(e,t,i){e-=.1,e*=-800*Math.PI;var n,r,o;e>0?(o=e,r=0,n=10*t):(o=e,r=0,n=40*Math.sin(e/80-Math.PI/2)+10*t+40),i.set(n,r,o)},mobius:function(e,t,i){e-=.5;var n,r,o,a=2*Math.PI*t,s=2;n=Math.cos(a)*(s+e*Math.cos(a/2)),r=Math.sin(a)*(s+e*Math.cos(a/2)),o=e*Math.sin(a/2),i.set(n,r,o)},mobius2:function(e,t,i){e-=.5;var n,r,o,a=2*Math.PI*t,s=2;n=Math.cos(a)*(s+e*Math.cos(a/2)),r=Math.sin(a)*(s+e*Math.cos(a/2)),o=e*Math.sin(a/2),i.set(n,r,o)},mobius3d:function(e,t,i){e*=Math.PI,t*=2*Math.PI,e=2*e;var n,r,o,a=e/2,s=2.25,l=.125,u=.65;n=l*Math.cos(t)*Math.cos(a)-u*Math.sin(t)*Math.sin(a),o=l*Math.cos(t)*Math.sin(a)+u*Math.sin(t)*Math.cos(a),r=(s+n)*Math.sin(e),n=(s+n)*Math.cos(e),i.set(n,r,o)}};ParametricGeometries.TubeGeometry=function(e,t,i,n,r,o){this.path=e,this.segments=t||64,this.radius=i||1,this.segmentsRadius=n||8,this.closed=r||!1,o&&(this.debug=new THREE.Object3D);var a=this,s=this.segments+1,l=e.computeFrenetFrames(t,r),u=l.tangents,c=l.normals,h=l.binormals;this.tangents=u,this.normals=c,this.binormals=h;var p=function(t,n,r){n*=2*Math.PI;var o=t*(s-1);o=Math.floor(o);var l=e.getPointAt(t),p=u[o],d=c[o],f=h[o];a.debug&&(a.debug.add(new THREE.ArrowHelper(p,l,i,255)),a.debug.add(new THREE.ArrowHelper(d,l,i,16711680)),a.debug.add(new THREE.ArrowHelper(f,l,i,65280)));var m=-a.radius*Math.cos(n),g=a.radius*Math.sin(n);l.x+=m*d.x+g*f.x,l.y+=m*d.y+g*f.y,l.z+=m*d.z+g*f.z,r.copy(l)};THREE.ParametricGeometry.call(this,p,t,n)},ParametricGeometries.TubeGeometry.prototype=Object.create(THREE.Geometry.prototype),ParametricGeometries.TubeGeometry.prototype.constructor=ParametricGeometries.TubeGeometry,ParametricGeometries.TorusKnotGeometry=function(e,t,i,n,r,o){function a(){THREE.Curve.call(this)}this.radius=e||200,this.tube=t||40,this.segmentsT=i||64,this.segmentsR=n||8,this.p=r||2,this.q=o||3,a.prototype=Object.create(THREE.Curve.prototype),a.prototype.constructor=a,a.prototype.getPoint=function(t,i){var n=i||new THREE.Vector3;t*=2*Math.PI;var a=.5,s=(1+a*Math.cos(o*t))*Math.cos(r*t),l=(1+a*Math.cos(o*t))*Math.sin(r*t),u=a*Math.sin(o*t);return n.set(s,l,u).multiplyScalar(e)};var s=i,l=n,u=new a;ParametricGeometries.TubeGeometry.call(this,u,s,t,l,!0,!1)},ParametricGeometries.TorusKnotGeometry.prototype=Object.create(THREE.Geometry.prototype),ParametricGeometries.TorusKnotGeometry.prototype.constructor=ParametricGeometries.TorusKnotGeometry,ParametricGeometries.SphereGeometry=function(e,t,i){function n(t,i,n){t*=Math.PI,i*=2*Math.PI;var r=e*Math.sin(t)*Math.cos(i),o=e*Math.sin(t)*Math.sin(i),a=e*Math.cos(t);n.set(r,o,a)}THREE.ParametricGeometry.call(this,n,t,i)},ParametricGeometries.SphereGeometry.prototype=Object.create(THREE.Geometry.prototype),ParametricGeometries.SphereGeometry.prototype.constructor=ParametricGeometries.SphereGeometry,ParametricGeometries.PlaneGeometry=function(e,t,i,n){function r(i,n,r){var o=i*e,a=0,s=n*t;r.set(o,a,s)}THREE.ParametricGeometry.call(this,r,i,n)},ParametricGeometries.PlaneGeometry.prototype=Object.create(THREE.Geometry.prototype),ParametricGeometries.PlaneGeometry.prototype.constructor=ParametricGeometries.PlaneGeometry;var Res3DManager=function(){function e(){}return e.loadImage=function(e){var t=this,i=e.match(/[\w-_]+\.\w+/)[0];return new Promise(function(n){t.imgLoader_.load(e,function(e){t.textures_[i]=e,n(null)},void 0,function(e){egret.log("Res3DManager load tex error",e),n(null)})})},e.loadFBX=function(e){var t=this,i=e.match(/[\w-_]+\.\w+/)[0];return new Promise(function(n){t.fbxLoader_.load(e,function(e){t.fbxs_[i]=e,n(null)},void 0,function(e){egret.log("Res3DManager load fbx error",e),n(null)})})},e.init=function(){this.textures_={},this.fbxs_={},this.imgLoader_=new tr.ImageLoader,this.fbxLoader_=new tr.FBXLoader},e.preload=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var r=Promise.resolve(),o=i.length;return i.forEach(function(i,n){r=r.then(function(){return e&&e(n/o),".fbx"===i.slice(i.length-4)?t.loadFBX(t.root+i):t.loadImage(t.root+i)})}),r.then(function(t){e&&e(1)})},e.getImage=function(e){return this.textures_[e]},e.getFBX=function(e){return this.fbxs_[e]},e.getMeshFromFBX=function(e,t){return this.getFBX(t).children.find(function(t){return t.name==e})},e.getFBXAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:egret.log("waiting fbx:",e),t.label=1;case 1:return this.fbxs_[e]?[3,3]:[4,Utils.wait(300)];case 2:return t.sent(),[3,1];case 3:return egret.log("fbx ok:",e),[2,this.fbxs_[e]]}})})},e.createTexture=function(e,t){void 0===t&&(t=1);var i=this.textures_[e];i||egret.log("doesn't find tex:",e);var n=new tr.Texture(i),r=e.search(/\.(jpg|jpeg)$/)>0;return n.format=r?tr.RGBFormat:tr.RGBAFormat,n.needsUpdate=!0,n.anisotropy=t,n},e.createTextureAsync=function(e){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){switch(t.label){case 0:return this.textures_[e]?[3,2]:[4,Utils.wait(200)];case 1:return t.sent(),[3,0];case 2:return[2,this.createTexture(e)]}})})},e.root="resource/assets/",e}();__reflect(Res3DManager.prototype,"Res3DManager");var Ticker=function(){function e(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=!1),this.cb_=e,this.target_=t,this.interval_=i,this.realTime_=n,this.ticking_=!1,this.elapsed_=0}return Object.defineProperty(e.prototype,"ticking",{get:function(){return this.ticking_},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"interval",{set:function(e){this.interval_=e},enumerable:!0,configurable:!0}),e.prototype.start=function(){this.ticking_||(this.ticking_=!0,this.time_=egret.getTimer(),Context.stage.addEventListener(egret.Event.ENTER_FRAME,this.tick,this))},e.prototype.tick=function(){var e=egret.getTimer(),t=e-this.time_;return this.realTime_||(t=Math.min(t,60)),this.time_=e,0===this.interval_?this.cb_.call(this.target_,t):(this.elapsed_+=t,this.elapsed_>=this.interval_&&(this.elapsed_-=this.interval_,this.cb_.call(this.target_,this.interval_))),!1},e.prototype.stop=function(){this.ticking_&&(this.ticking_=!1,Context.stage.removeEventListener(egret.Event.ENTER_FRAME,this.tick,this))},e}();__reflect(Ticker.prototype,"Ticker");var Utils;!function(e){function t(e,t,i){return e>i?i:t>e?t:e}function i(e,t,i){return t+(i-t)*e}function n(e,t){return 0>e&&(e+=t),e%t}function r(e,t){return(Math.random()*(t-e)|0)+e}function o(e,t){return Math.random()*(t-e)+e}function a(e,t){return e[r(0,e.length)]}function s(e){for(var t=0;t<e.length;++t){var i=e.length*Math.random()|0;t!=i&&(n=[e[i],e[t]],e[t]=n[0],e[i]=n[1])}return e;var n}function l(e,t,i){return e>=t&&i>=e}function u(e,t,i){void 0===t&&(t=new tr.Vector2),void 0===i&&(i=Game.inst.world.camera);var n=e.project(i),r=Context.stage.stageWidth/2,o=Context.stage.stageHeight/2;return t.x=n.x*r+r,t.y=-n.y*o+o,t}function c(t,i){var n=e.hexToRGB(i);return t[0]=n.r/255,t[6]=n.g/255,t[12]=n.b/255,t}function h(t){var i=e.hexToRGB(t);return[i.r/255,0,0,0,0,0,i.g/255,0,0,0,0,0,i.b/255,0,0,0,0,0,1,0]}function p(e){return{b:255&e,g:e>>8&255,r:e>>16&255}}function d(e,t){return(Array(t).join("0")+e).slice(-t)}function f(e,t){return new tr.Vector3(e.x,e.y,t||0)}function m(e,t){return e.x*t.y-e.y*t.x}function g(e,t){return new Promise(function(i,n){egret.setTimeout(function(){t&&t(),i()},null,e)})}function v(e,t){void 0===t&&(t=0),egret.setTimeout(e,null,t)}function y(e,t){for(var i=0;i<e.length;i++)if(e[i]==t){e.splice(i,1);break}}function _(){egret.log=function(){}}function b(){egret.log=console.log}function w(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];return function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];return e.apply(null,t.concat(i))}}function x(e,t){var i=this;return new Promise(function(t,n){e.once("ready_2_draw",function(){var i=new egret.RenderTexture;i.drawToTexture(e),e.removeFromParent();var n=i.toDataURL("image/png");if(i.dispose(),t(n),!Context.isFB){var r=new Image(e.width,e.height);r.src=n,r.style.position="absolute",r.style.left="10px",r.style.top="10px",document.body.appendChild(r),setTimeout(function(){r.remove()},2e3)}},i),Context.stage.addChildAt(e,0),e.y=Context.stage.stageHeight+10})}function E(e){return e+(1==e?" st":2==e?" nd":3==e?" rd":" th")}e.clamp=t,e.lerp=i,e.mod=n,e.randomInt=r,e.randomRange=o,e.randomInArr=a,e.makeArrayRandom=s,e.isInRange=l,e.worldToScreen=u,e.setColorMatrix=c,e.newColorMatrix=h,e.hexToRGB=p,e.pad=d,e.vector3From2=f,e.cross=m,e.deepClone=function(e){return JSON.parse(JSON.stringify(e))},e.wait=g,e.callLater=v,e.removeByValue=y,e.removeLog=_,e.recoverLog=b,e.closure=w,e.toImageBase64=x,e.getRankNumberText=E}(Utils||(Utils={}));